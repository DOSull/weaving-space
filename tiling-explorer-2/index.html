<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="./favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" href="./assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" href="./assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" href="./assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
    <link rel="manifest" href="./manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        resizeObserver.observe(obj.contentWindow.document.body);
      }
    </script>
    <marimo-filename hidden>notebook.py</marimo-filename>
    <marimo-mode data-mode='read' hidden></marimo-mode>
    <marimo-version data-version='0.11.13' hidden></marimo-version>
    <marimo-user-config data-config='{"completion": {"activate_on_typing": true, "copilot": false}, "display": {"cell_output": "below", "dataframes": "plain", "theme": "light", "code_editor_font_size": 16, "default_width": "medium"}, "formatting": {"line_length": 79}, "keymap": {"preset": "default", "overrides": {}}, "runtime": {"auto_instantiate": true, "auto_reload": "off", "on_cell_change": "autorun", "watcher_on_save": "lazy", "output_max_bytes": 8000000, "std_stream_max_bytes": 1000000}, "save": {"autosave": "off", "autosave_delay": 1000, "format_on_save": false}, "package_management": {"manager": "pip"}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}}' data-overrides='{}' hidden></marimo-user-config>
    <marimo-app-config data-config='{"width": "medium", "app_title": "MapWeaver", "layout_file": "data:application/json;base64,ewogICJ0eXBlIjogImdyaWQiLAogICJkYXRhIjogewogICAgImNvbHVtbnMiOiAyNCwKICAgICJyb3dIZWlnaHQiOiAyMCwKICAgICJtYXhXaWR0aCI6IDE0MDAsCiAgICAiYm9yZGVyZWQiOiBmYWxzZSwKICAgICJjZWxscyI6IFsKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDEsCiAgICAgICAgICAwLAogICAgICAgICAgMTYsCiAgICAgICAgICAzCiAgICAgICAgXSwKICAgICAgICAic2Nyb2xsYWJsZSI6IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDE3LAogICAgICAgICAgMSwKICAgICAgICAgIDcsCiAgICAgICAgICAyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogWwogICAgICAgICAgMSwKICAgICAgICAgIDMsCiAgICAgICAgICAxNiwKICAgICAgICAgIDMyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogWwogICAgICAgICAgMTcsCiAgICAgICAgICAzLAogICAgICAgICAgNywKICAgICAgICAgIDQKICAgICAgICBdCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgICAxLAogICAgICAgICAgMzUsCiAgICAgICAgICA0LAogICAgICAgICAgMgogICAgICAgIF0KICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDUsCiAgICAgICAgICAzNSwKICAgICAgICAgIDcsCiAgICAgICAgICAyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogWwogICAgICAgICAgMSwKICAgICAgICAgIDM3LAogICAgICAgICAgMTEsCiAgICAgICAgICAyNQogICAgICAgIF0KICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDEyLAogICAgICAgICAgMzUsCiAgICAgICAgICA1LAogICAgICAgICAgMTQKICAgICAgICBdCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgICAxNywKICAgICAgICAgIDcsCiAgICAgICAgICA3LAogICAgICAgICAgMgogICAgICAgIF0KICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDE3LAogICAgICAgICAgOSwKICAgICAgICAgIDcsCiAgICAgICAgICAyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogWwogICAgICAgICAgMTcsCiAgICAgICAgICAxNiwKICAgICAgICAgIDcsCiAgICAgICAgICAxOQogICAgICAgIF0sCiAgICAgICAgInNjcm9sbGFibGUiOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBudWxsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgICAxNywKICAgICAgICAgIDExLAogICAgICAgICAgNywKICAgICAgICAgIDUKICAgICAgICBdCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBudWxsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgICAxNywKICAgICAgICAgIDM1LAogICAgICAgICAgNywKICAgICAgICAgIDEyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9CiAgICBdCiAgfQp9", "html_head_file": "splash.html"}' hidden></marimo-app-config>
    <marimo-server-token data-token='123' hidden></marimo-server-token>
    <title>MapWeaver</title>
    <script type="module" crossorigin src="./assets/index-CmflHEIv.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-CPmHDmmB.css">
  <marimo-wasm hidden=""></marimo-wasm>
    <script>
        if (window.location.protocol === 'file:') {
            alert('Warning: This file must be served by an HTTP server to function correctly.');
        }
    </script>
    
    <style>
        #save-button {
            display: none !important;
        }
        #filename-input {
            display: none !important;
        }
    </style>
    
<script src='https://code.jquery.com/jquery-1.8.2.js'></script>
<script>
  $.get("./splash-contents.html", function(x) {
    $("body").prepend(x);
  });
</script>
<marimo-code hidden="" data-show-code="false">import%20marimo%0A%0A__generated_with%20%3D%20%220.11.13%22%0Aapp%20%3D%20marimo.App(%0A%20%20%20%20width%3D%22medium%22%2C%0A%20%20%20%20app_title%3D%22MapWeaver%22%2C%0A%20%20%20%20layout_file%3D%22data%3Aapplication%2Fjson%3Bbase64%2CewogICJ0eXBlIjogImdyaWQiLAogICJkYXRhIjogewogICAgImNvbHVtbnMiOiAyNCwKICAgICJyb3dIZWlnaHQiOiAyMCwKICAgICJtYXhXaWR0aCI6IDE0MDAsCiAgICAiYm9yZGVyZWQiOiBmYWxzZSwKICAgICJjZWxscyI6IFsKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDEsCiAgICAgICAgICAwLAogICAgICAgICAgMTYsCiAgICAgICAgICAzCiAgICAgICAgXSwKICAgICAgICAic2Nyb2xsYWJsZSI6IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDE3LAogICAgICAgICAgMSwKICAgICAgICAgIDcsCiAgICAgICAgICAyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogWwogICAgICAgICAgMSwKICAgICAgICAgIDMsCiAgICAgICAgICAxNiwKICAgICAgICAgIDMyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogWwogICAgICAgICAgMTcsCiAgICAgICAgICAzLAogICAgICAgICAgNywKICAgICAgICAgIDQKICAgICAgICBdCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgICAxLAogICAgICAgICAgMzUsCiAgICAgICAgICA0LAogICAgICAgICAgMgogICAgICAgIF0KICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDUsCiAgICAgICAgICAzNSwKICAgICAgICAgIDcsCiAgICAgICAgICAyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogWwogICAgICAgICAgMSwKICAgICAgICAgIDM3LAogICAgICAgICAgMTEsCiAgICAgICAgICAyNQogICAgICAgIF0KICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDEyLAogICAgICAgICAgMzUsCiAgICAgICAgICA1LAogICAgICAgICAgMTQKICAgICAgICBdCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgICAxNywKICAgICAgICAgIDcsCiAgICAgICAgICA3LAogICAgICAgICAgMgogICAgICAgIF0KICAgICAgfSwKICAgICAgewogICAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAgIDE3LAogICAgICAgICAgOSwKICAgICAgICAgIDcsCiAgICAgICAgICAyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogWwogICAgICAgICAgMTcsCiAgICAgICAgICAxNiwKICAgICAgICAgIDcsCiAgICAgICAgICAxOQogICAgICAgIF0sCiAgICAgICAgInNjcm9sbGFibGUiOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBudWxsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgICAxNywKICAgICAgICAgIDExLAogICAgICAgICAgNywKICAgICAgICAgIDUKICAgICAgICBdCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBudWxsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgICAxNywKICAgICAgICAgIDM1LAogICAgICAgICAgNywKICAgICAgICAgIDEyCiAgICAgICAgXQogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9LAogICAgICB7CiAgICAgICAgInBvc2l0aW9uIjogbnVsbAogICAgICB9CiAgICBdCiAgfQp9%22%2C%0A%20%20%20%20html_head_file%3D%22splash.html%22%2C%0A)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.hstack(%5B%0A%20%20%20%20%20%20%20%20mo.md(f%22%23%20MapWeaver%20~%20tiled%20maps%20of%20complex%20data%22)%2C%0A%20%20%20%20%20%20%20%20mo.md(%22v2025.03.13-11%3A45%22)%0A%20%20%20%20%5D).center()%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20module_imports()%3A%0A%20%20%20%20import%20io%0A%20%20%20%20import%20json%0A%20%20%20%20from%20PIL%20import%20Image%0A%20%20%20%20import%20matplotlib%20as%20mpl%0A%20%20%20%20import%20math%0A%20%20%20%20import%20pandas%20as%20pd%0A%20%20%20%20import%20geopandas%20as%20gpd%0A%20%20%20%20from%20shapely%20import%20is_valid%0A%20%20%20%20import%20weavingspace%20as%20wsp%0A%20%20%20%20return%20Image%2C%20gpd%2C%20io%2C%20is_valid%2C%20json%2C%20math%2C%20mpl%2C%20pd%2C%20wsp%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20globals(get_colour_ramp%2C%20gpd%2C%20mo)%3A%0A%20%20%20%20dummy_data_file%20%3D%20%22https%3A%2F%2Fraw.githubusercontent.com%2FDOSull%2Fweaving-space%2Frefs%2Fheads%2Fmain%2Fexamples%2Fdata%2Fdummy-data.json%22%0A%20%20%20%20builtin_gdf%20%3D%20gpd.read_file(dummy_data_file%2C%20engine%3D%22fiona%22)%0A%20%20%20%20available_palettes%20%3D%20%5B%0A%20%20%20%20%20%20%20%20'Reds'%2C%20'Greys'%2C%20'Blues'%2C%20'Oranges'%2C%20'Greens'%2C%20'Purples'%2C%0A%20%20%20%20%20%20%20%20'YlGnBu'%2C%20'RdPu'%2C%20'viridis'%2C%20'summer'%2C%20'spring'%2C%20'winter'%5D%0A%20%20%20%20%23%20make%20a%20bunch%20of%20colour%20ramps%20and%20save%20them%20in%20a%20dictionary%0A%20%20%20%20color_ramps%20%3D%20%7Bk%3A%20mo.image(get_colour_ramp(k))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20k%20in%20available_palettes%20%2B%20%5Bp%20%2B%20%22_r%22%20for%20p%20in%20available_palettes%5D%7D%0A%20%20%20%20return%20available_palettes%2C%20builtin_gdf%2C%20color_ramps%2C%20dummy_data_file%0A%0A%0A%40app.cell%0Adef%20marimo_states(available_palettes%2C%20builtin_gdf%2C%20dummy_data_file%2C%20mo)%3A%0A%20%20%20%20get_input_data%2C%20set_input_data%20%3D%20mo.state(dummy_data_file)%0A%20%20%20%20get_gdf%2C%20set_gdf%20%3D%20mo.state(builtin_gdf)%0A%20%20%20%20get_variables%2C%20set_variables%20%3D%20mo.state(%5B%5D)%0A%20%20%20%20get_palettes%2C%20set_palettes%20%3D%20mo.state(available_palettes)%0A%20%20%20%20get_reversed%2C%20set_reversed%20%3D%20mo.state(%5BFalse%5D%20*%2012)%0A%20%20%20%20get_status_message%2C%20set_status_message%20%3D%20mo.state(%22STATUS%20All%20good!%22)%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20get_gdf%2C%0A%20%20%20%20%20%20%20%20get_input_data%2C%0A%20%20%20%20%20%20%20%20get_palettes%2C%0A%20%20%20%20%20%20%20%20get_reversed%2C%0A%20%20%20%20%20%20%20%20get_status_message%2C%0A%20%20%20%20%20%20%20%20get_variables%2C%0A%20%20%20%20%20%20%20%20set_gdf%2C%0A%20%20%20%20%20%20%20%20set_input_data%2C%0A%20%20%20%20%20%20%20%20set_palettes%2C%0A%20%20%20%20%20%20%20%20set_reversed%2C%0A%20%20%20%20%20%20%20%20set_status_message%2C%0A%20%20%20%20%20%20%20%20set_variables%2C%0A%20%20%20%20)%0A%0A%0A%40app.cell%0Adef%20read_gdf(%0A%20%20%20%20builtin_gdf%2C%0A%20%20%20%20get_gdf%2C%0A%20%20%20%20get_input_data%2C%0A%20%20%20%20get_numeric_variables%2C%0A%20%20%20%20gpd%2C%0A%20%20%20%20io%2C%0A%20%20%20%20is_valid%2C%0A%20%20%20%20set_gdf%2C%0A%20%20%20%20set_status_message%2C%0A%20%20%20%20set_variables%2C%0A%20%20%20%20wsp%2C%0A)%3A%0A%20%20%20%20_done%20%3D%20False%0A%20%20%20%20_did_repairs%20%3D%20False%0A%20%20%20%20if%20type(get_input_data())%20is%20str%20or%20len(get_input_data())%20%3D%3D%200%3A%0A%20%20%20%20%20%20%20%20set_gdf(builtin_gdf)%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20_old_gdf%20%3D%20get_gdf()%0A%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20_data%20%3D%20get_input_data()%5B0%5D.contents%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20_geojson_dict%20%3D%20json.loads(io.BytesIO(_data).read())%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20_crs%20%3D%20_geojson_dict%5B%22crs%22%5D%5B%22properties%22%5D%5B%22name%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20if%20%22CRS84%22%20in%20_crs%3A%20_crs%20%3D%20%22epsg%3A4326%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20_features%20%3D%20_geojson_dict%5B%22features%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20_props%20%3D%20%5Bp%5B%22properties%22%5D%20for%20p%20in%20_features%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20_geoms%20%3D%20%5Bget_shape(p%5B%22geometry%22%5D%5B%22coordinates%22%5D%2C%20p%5B%22geometry%22%5D%5B%22type%22%5D)%20for%20p%20in%20_features%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20_new_gdf%20%3D%20gpd.GeoDataFrame(data%3D_props%2C%20geometry%3D_geoms%2C%20crs%3D_crs).to_crs(3857)%0A%20%20%20%20%20%20%20%20%20%20%20%20_new_gdf%20%3D%20gpd.read_file(io.BytesIO(get_input_data()%5B0%5D.contents).read().decode())%0A%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20set_gdf(_old_gdf)%0A%20%20%20%20%20%20%20%20%20%20%20%20set_status_message(%22ERROR!%20Exception%20in%20uploading%20data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20print(e.args)%0A%20%20%20%20%20%20%20%20%20%20%20%20raise%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20_n%20%3D%20len(get_numeric_variables(_new_gdf))%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20_n%20%3C%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set_status_message(%22WARNING!%20One%20or%20fewer%20variables%2C%20data%20not%20loaded%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set_gdf(_old_gdf)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_done%20%3D%20True%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20_done%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20_new_gdf.crs.is_projected%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_new_gdf%20%3D%20_new_gdf.to_crs(3857)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20all(is_valid(_new_gdf.geometry))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_new_gdf.geometry%20%3D%20wsp.tiling_utils.repair_polygon(_new_gdf.geometry)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20all(is_valid(_new_gdf.geometry))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set_status_message(%22ERROR!%20Geometries%20not%20valid%2C%20try%20another%20dataset%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set_gdf(_old_gdf)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_done%20%3D%20True%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_did_repairs%20%3D%20True%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20_done%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set_gdf(_new_gdf)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set_variables(get_numeric_variables(get_gdf()))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20_did_repairs%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set_status_message(%22WARNING!%20Had%20to%20repair%20geometry%20errors%20in%20your%20data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set_status_message(%22STATUS%20All%20good!%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20upload_data(mo%2C%20set_input_data%2C%20tool_tip)%3A%0A%20%20%20%20fb%20%3D%20mo.ui.file(filetypes%3D%5B%22.geojson%22%2C%20%22.json%22%5D%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20on_change%3Dset_input_data%2C%20label%3Df%22Upload%20data%22)%0A%20%20%20%20_f%20%3D%20tool_tip(%0A%20%20%20%20%20%20%20%20fb%2C%20%22Your%20data%20should%20be%20geospatial%20polygons%20-%20and%20currently%20only%20GeoJSON%20is%20readable.%22)%0A%20%20%20%20mo.md(f%22%7B_f%7D%22).left()%0A%20%20%20%20return%20(fb%2C)%0A%0A%0A%40app.cell%0Adef%20_(mo%2C%20tool_tip)%3A%0A%20%20%20%20show_data_layer%20%3D%20mo.ui.switch(False)%0A%20%20%20%20mo.md(f%22%7Btool_tip(show_data_layer%2C%20%22Show%20the%20data%20layer%22)%7D%22)%0A%20%20%20%20return%20(show_data_layer%2C)%0A%0A%0A%40app.cell%0Adef%20_(%0A%20%20%20%20centred%2C%0A%20%20%20%20get_gdf%2C%0A%20%20%20%20get_modded_tile_unit%2C%0A%20%20%20%20get_selected_colour_palettes%2C%0A%20%20%20%20get_tile_ids%2C%0A%20%20%20%20get_variables%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20wsp%2C%0A)%3A%0A%20%20%20%20mo.output.replace(%0A%20%20%20%20%20%20%20%20mo.vstack(%0A%20%20%20%20%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.md(%22%23%23%20Making%20tiled%20map...%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.md(%22%23%23%23%20This%20might%20take%20a%20while%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.status.spinner()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22During%20initialisation%20ignore%20messages%20about%20missing%20modules%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20).style(centred)%0A%20%20%20%20)%0A%0A%20%20%20%20tiling_map%20%3D%20True%0A%20%20%20%20_tiled_map%20%3D%20wsp.Tiling(get_modded_tile_unit()%2C%20get_gdf()).get_tiled_map(join_on_prototiles%3DFalse)%0A%20%20%20%20_tiled_map.variables%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20zip(get_tile_ids()%2C%20get_variables())%7D%0A%20%20%20%20_tiled_map.colourmaps%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20zip(get_variables()%2C%20get_selected_colour_palettes())%7D%0A%20%20%20%20result%20%3D%20_tiled_map.render(legend%3DFalse%2C%20scheme%3D%22EqualInterval%22%2C%20figsize%3D(9%2C%206))%0A%20%20%20%20tiling_map%20%3D%20False%0A%0A%20%20%20%20result%0A%0A%20%20%20%20%23%20Potential%20web%20map%20alternative%0A%20%20%20%20%23%20_style_kwds%20%3D%20%7B%22fillOpacity%22%3A1%2C%22stroke%22%3AFalse%7D%0A%20%20%20%20%23%20_tile_lyr%20%3D%20%22CartoDB%20positron%22%0A%20%20%20%20%23%20for%20i%2C%20t%20in%20enumerate(get_tile_ids())%3A%0A%20%20%20%20%23%20%20%20%20%20if%20i%20%3D%3D%200%3A%0A%20%20%20%20%23%20%20%20%20%20%20%20%20%20m%20%3D%20_tiled_map.map%5B_tiled_map.map.tile_id%20%3D%3D%20t%5D.explore(%0A%20%20%20%20%23%20%20%20%20%20%20%20%20%20%20%20%20%20column%3Dvariables.value%5Bi%5D%2C%20cmap%3Dget_selected_colour_palettes()%5Bi%5D%2C%0A%20%20%20%20%23%20%20%20%20%20%20%20%20%20%20%20%20%20tooltip%3DFalse%2C%20style_kwds%3D_style_kwds%2C%20legend%3DFalse%2C%20tiles%3D_tile_lyr)%0A%20%20%20%20%23%20%20%20%20%20else%3A%0A%20%20%20%20%23%20%20%20%20%20%20%20%20%20_tiled_map.map%5B_tiled_map.map.tile_id%20%3D%3D%20t%5D.explore(m%3Dm%2C%0A%20%20%20%20%23%20%20%20%20%20%20%20%20%20%20%20%20%20column%3Dvariables.value%5Bi%5D%2C%20cmap%3Dget_selected_colour_palettes()%5Bi%5D%2C%0A%20%20%20%20%23%20%20%20%20%20%20%20%20%20%20%20%20%20tooltip%3DFalse%2C%20style_kwds%3D_style_kwds%2C%20legend%3DFalse)%0A%20%20%20%20%23%20m%0A%20%20%20%20return%20result%2C%20tiling_map%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20set_number_of_variables(mo%2C%20tool_tip)%3A%0A%20%20%20%20num_tiles%20%3D%20mo.ui.slider(steps%20%3D%20%5Bx%20for%20x%20in%20range(2%2C%2013)%5D%2C%20value%3D4%2C%20debounce%3DTrue%2C%20show_value%3DTrue)%0A%20%20%20%20mo.md(f%22%22%22%0A%20%20%20%20%23%23%23%20General%20settings%0A%20%20%20%20%23%23%23%23%20Set%20number%20of%20tiling%20elements%20%7Btool_tip(num_tiles%2C%20'Choose%20the%20number%20of%20distinct%20tiles%20you%20want%20to%20use%20to%20symbolise%20data.')%7D%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%20(num_tiles%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20variable_palette_map_header(mo)%3A%0A%20%20%20%20mo.md(%22%22%22%23%23%23%20Variable%20%26rarr%3B%20palette%20map%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20status_panel(%0A%20%20%20%20get_gdf%2C%0A%20%20%20%20get_numeric_variables%2C%0A%20%20%20%20get_status_message%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20num_tiles%2C%0A%20%20%20%20set_status_message%2C%0A)%3A%0A%20%20%20%20if%20len(get_numeric_variables(get_gdf()))%20%3C%20num_tiles.value%3A%0A%20%20%20%20%20%20%20%20set_status_message(f%22WARNING!%20More%20tile%20elements%20(%7Bnum_tiles.value%7D)%20than%20variables%20(%7Blen(get_numeric_variables(get_gdf()))%7D)%22)%0A%0A%20%20%20%20if%20get_status_message()%20%3D%3D%20%22STATUS%20All%20good!%22%3A%0A%20%20%20%20%20%20%20%20_bkgd%20%3D%20%22lightgreen%22%0A%20%20%20%20elif%20%22WARNING%22%20in%20get_status_message()%3A%0A%20%20%20%20%20%20%20%20_bkgd%20%3D%20%22pink%22%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20_bkgd%20%3D%20%22red%22%0A%0A%20%20%20%20_col%20%3D%20%22white%22%20if%20%22ERROR%22%20in%20get_status_message()%20else%20%22black%22%0A%0A%20%20%20%20_msg%20%3D%20mo.md(f%22%3Cspan%20style%3D'background-color%3A%7B_bkgd%7D%3Bcolor%3A%7B_col%7D%3Bfont-face%3Asans-serif%3Bpadding%3A2px%3B'%3E%7Bget_status_message()%7D%3C%2Fspan%3E%22)%0A%0A%20%20%20%20_msg.center()%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20build_variable_and_palette_dropdowns(%0A%20%20%20%20available_palettes%2C%0A%20%20%20%20get_gdf%2C%0A%20%20%20%20get_numeric_variables%2C%0A%20%20%20%20get_palettes%2C%0A%20%20%20%20get_reversed%2C%0A%20%20%20%20get_variables%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20num_tiles%2C%0A%20%20%20%20set_palettes%2C%0A%20%20%20%20set_reversed%2C%0A%20%20%20%20set_variables%2C%0A)%3A%0A%20%20%20%20if%20num_tiles.value%20%3C%20len(get_numeric_variables(get_gdf()))%3A%0A%20%20%20%20%20%20%20%20set_variables(get_numeric_variables(get_gdf())%5B%3Anum_tiles.value%5D)%0A%20%20%20%20elif%20num_tiles.value%20%3E%20len(get_variables())%3A%0A%20%20%20%20%20%20%20%20n_to_add%20%3D%20num_tiles.value%20-%20len(get_variables())%0A%20%20%20%20%20%20%20%20to_add%20%3D%20%5Bv%20for%20v%20in%20get_numeric_variables(get_gdf())%20if%20v%20not%20in%20get_variables()%5D%5B%3An_to_add%5D%0A%20%20%20%20%20%20%20%20set_variables(get_variables()%20%2B%20to_add)%0A%0A%20%20%20%20_chosen_palettes%20%3D%20get_palettes()%5B%3Anum_tiles.value%5D%0A%20%20%20%20_chosen_reversed%20%3D%20get_reversed()%5B%3Anum_tiles.value%5D%0A%20%20%20%20variables%20%3D%20mo.ui.array(%0A%20%20%20%20%20%20%20%20%5Bmo.ui.dropdown(options%3Dget_numeric_variables(get_gdf())%2C%20value%3Dv)%20for%20v%20in%20get_variables()%5D%2C%20%0A%20%20%20%20%20%20%20%20label%3D%22Variables%22%2C%20on_change%3Dset_variables)%20%0A%20%20%20%20pals%20%3D%20mo.ui.array(%0A%20%20%20%20%20%20%20%20%5Bmo.ui.dropdown(options%3Davailable_palettes%2C%20value%3Dp)%20for%20p%20in%20_chosen_palettes%5D%2C%20%0A%20%20%20%20%20%20%20%20label%3D%22Palettes%22%2C%20on_change%3Dset_palettes)%0A%20%20%20%20rev_pals%20%3D%20mo.ui.array(%0A%20%20%20%20%20%20%20%20%5Bmo.ui.switch(r)%20for%20r%20in%20_chosen_reversed%5D%2C%20on_change%3Dset_reversed)%0A%20%20%20%20return%20n_to_add%2C%20pals%2C%20rev_pals%2C%20to_add%2C%20variables%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20build_var_palette_mapping(%0A%20%20%20%20color_ramps%2C%0A%20%20%20%20get_tile_ids%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20pals%2C%0A%20%20%20%20rev_pals%2C%0A%20%20%20%20tool_tip%2C%0A%20%20%20%20variables%2C%0A)%3A%0A%20%20%20%20%23%20mo.stop(tiling_map)%0A%20%20%20%20mo.md(%22%5Cn%22.join(%5B%0A%20%20%20%20%20%20%20%20%22%26nbsp%3B%26nbsp%3B%22.join(%5B%0A%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Tiles%20%60%7Bt_id%7D%60%22%2C%0A%20%20%20%20%20%20%20%20f%22%7Btool_tip(v%2C%20f%22Variable%20for%20tiles%20with%20id%20%7Bt_id%7D%22)%7D%20%26rarr%3B%22%2C%0A%20%20%20%20%20%20%20%20f%22%7Btool_tip(p%2C%20f%22Palette%20for%20variable%20%7Bv.value%7D%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20f%22%3Cspan%20style%3D'position%3Arelative%3Btop%3A5px%3B'%3E%7Btool_tip(r%2C%20'Reverse%20ramp')%7D%3C%2Fspan%3E%22%2C%0A%20%20%20%20%20%20%20%20f%22%3Cspan%20style%3D'display%3Ainline-block%3Bobject-fit%3Acover%3Bheight%3A24px%3Bposition%3Arelative%3Bbottom%3A24px%3B'%3E%7Bcolor_ramps%5Bp.value%20%2B%20(%22_r%22%20if%20r.value%20else%20%22%22)%5D%7D%3C%2Fspan%3E%22%2C%0A%20%20%20%20%5D)%20for%20t_id%2C%20v%2C%20p%2C%20r%20in%20zip(get_tile_ids()%2C%20variables%2C%20pals%2C%20rev_pals)%5D))%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20set_spacing_limits(get_spacings%2C%20mo)%3A%0A%20%20%20%20_spacing_steps%2C%20_spacing_value%20%3D%20get_spacings()%0A%20%20%20%20spacing%20%3D%20mo.ui.slider(steps%3D_spacing_steps%2C%20value%3D_spacing_value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20return%20(spacing%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20tile_rotate%20%3D%20mo.ui.slider(steps%3D%5Bx%20for%20x%20in%20range(-90%2C%2091%2C%201)%5D%2C%20value%3D0%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20tile_scale_x%20%3D%20mo.ui.slider(steps%3D%5Bx%20%2F%2010%20for%20x%20in%20range(10%2C%2041)%5D%2C%20value%3D1%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20tile_scale_y%20%3D%20mo.ui.slider(steps%3D%5Bx%20%2F%2010%20for%20x%20in%20range(10%2C%2041)%5D%2C%20value%3D1%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20tile_skew_x%20%3D%20mo.ui.slider(steps%3D%5Bx%20for%20x%20in%20range(-40%2C%2041%2C%201)%5D%2C%20value%3D0%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20tile_skew_y%20%3D%20mo.ui.slider(steps%3D%5Bx%20for%20x%20in%20range(-40%2C%2041%2C%201)%5D%2C%20value%3D0%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20p_inset%20%3D%20mo.ui.slider(start%3D0%2C%20stop%3D10%2C%20step%20%3D%200.1%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3D0%2C%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20t_inset%20%3D%20mo.ui.slider(start%3D0%2C%20stop%3D5%2C%20step%20%3D%200.1%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3D0%2C%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20p_inset%2C%0A%20%20%20%20%20%20%20%20t_inset%2C%0A%20%20%20%20%20%20%20%20tile_rotate%2C%0A%20%20%20%20%20%20%20%20tile_scale_x%2C%0A%20%20%20%20%20%20%20%20tile_scale_y%2C%0A%20%20%20%20%20%20%20%20tile_skew_x%2C%0A%20%20%20%20%20%20%20%20tile_skew_y%2C%0A%20%20%20%20)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20setup_tiling_modifiers(%0A%20%20%20%20mo%2C%0A%20%20%20%20p_inset%2C%0A%20%20%20%20spacing%2C%0A%20%20%20%20t_inset%2C%0A%20%20%20%20tile_or_weave%2C%0A%20%20%20%20tile_rotate%2C%0A%20%20%20%20tile_scale_x%2C%0A%20%20%20%20tile_scale_y%2C%0A%20%20%20%20tile_skew_x%2C%0A%20%20%20%20tile_skew_y%2C%0A%20%20%20%20tool_tip%2C%0A)%3A%0A%20%20%20%20%23%20mo.stop(tiling_map)%0A%20%20%20%20if%20tile_or_weave.value%20%3D%3D%20%22tiling%22%3A%0A%20%20%20%20%20%20%20%20_str%20%3D%20%22%5Cn%22.join(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%20Tiling%20modifiers%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Spacing%20%7Btool_tip(spacing%2C%20'In%20units%20of%20the%20map%20CRS%2C%20the%20approximate%20dimension%20of%20the%20repeating%20group.')%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Rotate%20by%20%7Btool_tip(tile_rotate%2C%20%22Rotate%20tiling%20(degrees).%20Note%20that%20the%20tile%20group%20is%20rotated%20before%20any%20skews%20are%20applied.%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Scale%20left-right%20%7Btool_tip(tile_scale_x%2C%20%22Scale%20in%20the%20x%20direction.%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Scale%20up-down%20%7Btool_tip(tile_scale_y%2C%20%22Scale%20in%20the%20y%20direction.%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Skew%20left-right%20%7Btool_tip(tile_skew_x%2C%20%22Skew%20in%20the%20x%20direction%20(degrees).%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Skew%20up-down%20%7Btool_tip(tile_skew_y%2C%20%22Skew%20in%20the%20y%20direction%20(degrees).%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Tile%20group%20inset%20%7Btool_tip(p_inset%2C%20%22Inset%20the%20tile%20group%20(%25%20spacing).%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Tiles%20inset%20%7Btool_tip(t_inset%2C%20%22Inset%20individual%20tiles%20(%25%20spacing).%22)%7D%22%5D)%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20_str%20%3D%20%22%5Cn%22.join(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%20Weave%20modifiers%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Spacing%20%7Btool_tip(spacing%2C%20'In%20units%20of%20the%20map%20CRS%2C%20the%20distance%20between%20strand%20centre%20lines.')%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Rotate%20by%20%7Btool_tip(tile_rotate%2C%20%22Rotate%20weave%20(degrees).%20Note%20that%20the%20weave%20is%20rotated%20before%20any%20skews%20are%20applied.%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Scale%20left-right%20%7Btool_tip(tile_scale_x%2C%20%22Scale%20in%20the%20x%20direction.%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Scale%20up-down%20%7Btool_tip(tile_scale_y%2C%20%22Scale%20in%20the%20y%20direction.%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Skew%20left-right%20%7Btool_tip(tile_skew_x%2C%20%22Skew%20in%20the%20x%20direction%20(degrees).%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Skew%20up-down%20%7Btool_tip(tile_skew_y%2C%20%22Skew%20in%20the%20y%20direction%20(degrees).%22)%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%23%23%23%23%20Strands%20inset%20%7Btool_tip(t_inset%2C%20%22Inset%20strands%20(%25%20width).%22)%7D%22%5D)%0A%20%20%20%20mo.md(_str)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo%2C%20num_tiles%2C%20tilings_by_n%2C%20tool_tip)%3A%0A%20%20%20%20_options%20%3D%20list(set(%5Bv%5B%22type%22%5D%20for%20v%20in%20tilings_by_n%5Bnum_tiles.value%5D.values()%5D))%0A%20%20%20%20tile_or_weave%20%3D%20mo.ui.dropdown(options%3D_options%2C%20value%3D%22tiling%22%2C%20label%3D%22%23%23%23%23%20Pick%20tiling%20or%20weave%22)%0A%20%20%20%20mo.md(f%22%7Btool_tip(tile_or_weave%2C%20%22Choose%20tiling%20or%20a%20weave%20tiling%22)%7D%22)%0A%20%20%20%20return%20(tile_or_weave%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo%2C%20num_tiles%2C%20tile_or_weave%2C%20tilings_by_n%2C%20tool_tip)%3A%0A%20%20%20%20_type%20%3D%20tile_or_weave.value%0A%20%20%20%20_options%20%3D%20%5Bk%20for%20k%2C%20v%20in%20tilings_by_n%5Bnum_tiles.value%5D.items()%20if%20v%5B%22type%22%5D%20%3D%3D%20_type%5D%0A%0A%20%20%20%20family%20%3D%20mo.ui.dropdown(%0A%20%20%20%20%20%20%20%20options%20%3D%20_options%2C%20%0A%20%20%20%20%20%20%20%20value%20%3D%20_options%5B0%5D%2C%20label%20%3D%20f%22%23%23%23%23%20%7B_type.capitalize()%7D%20type%22)%20%0A%20%20%20%20mo.md(f%22%7Btool_tip(family%2C%20%22Choose%20tiling%20family%22)%7D%22)%0A%20%20%20%20return%20(family%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(get_modded_tile_unit%2C%20plot_tiles)%3A%0A%20%20%20%20plot_tiles(get_modded_tile_unit())%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20setup_chosen_tiling_options(%0A%20%20%20%20family%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20num_tiles%2C%0A%20%20%20%20tile_or_weave%2C%0A%20%20%20%20tilings_by_n%2C%0A)%3A%0A%20%20%20%20if%20%22slice%22%20in%20family.value%3A%0A%20%20%20%20%20%20%20%20_offset%20%3D%20mo.ui.slider(%0A%20%20%20%20%20%20%20%20%20%20%20%20steps%3D%5Bx%20%2F%20100%20for%20x%20in%20range(101)%5D%2C%20value%3D0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20label%3D%22%23%23%23%23%20Offset%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20show_value%3DTrue%2C%20debounce%3DTrue)%20%0A%20%20%20%20elif%20%22hex-dissection%22%20in%20family.value%3A%0A%20%20%20%20%20%20%20%20_offset%20%3D%20mo.ui.number(%0A%20%20%20%20%20%20%20%20%20%20%20%20start%3D0%2C%20stop%3D1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20label%3D%22%23%23%23%23%20Offset%22%2C%20debounce%3DTrue)%0A%0A%20%20%20%20if%20%22weave%22%20in%20family.value%3A%0A%20%20%20%20%20%20%20%20_aspect%20%3D%20mo.ui.slider(steps%3D%5Bx%2F12%20for%20x%20in%20range(1%2C13)%5D%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3D3%2F4%2C%20label%3D%22%23%23%23%23%20Strand%20width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_value%3DTrue%2C%20debounce%3DTrue)%0A%20%20%20%20%20%20%20%20_over_under%20%3D%20mo.ui.text(value%3Dtilings_by_n%5Bnum_tiles.value%5D%5Bfamily.value%5D%5B%22n%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20label%3D%22%23%23%23%23%20Over-under%20pattern%22)%0A%0A%20%20%20%20if%20tile_or_weave.value%20%3D%3D%20%22tiling%22%3A%0A%20%20%20%20%20%20%20%20if%20%22slice%22%20in%20family.value%20or%20%22dissection%22%20in%20family.value%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20tile_spec%20%3D%20mo.ui.dictionary(%7B%22offset%22%3A%20_offset%2C%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20tooltips%20%3D%20%5B%220%20starts%20at%20the%20base%20tile%20corners%2C%201%20at%20the%20mid-point%20along%20segments%20equally%20dividing%20the%20base%20tile%20perimeter%20into%20the%20requested%20number%20of%20tiles.%22%5D%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20tile_spec%20%3D%20None%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20if%20%22plain%22%20in%20family.value%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20tile_spec%20%3D%20mo.ui.dictionary(%7B%22aspect%22%3A%20_aspect%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20tooltips%20%3D%20%5B%22The%20width%20of%20the%20weave%20strands%20relative%20to%20strand%20spacing.%20A%20value%20of%201%20will%20fill%20the%20map%20with%20no%20gaps.%20Progressively%20smaller%20values%20will%20leave%20'holes'%20in%20the%20woven%20pattern%20and%20will%20eventually%20give%20the%20appearance%20of%20a%20cross%20hatch.%22%5D%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20tile_spec%20%3D%20mo.ui.dictionary(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22aspect%22%3A%20_aspect%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22over_under%22%3A%20_over_under%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20tooltips%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22The%20width%20of%20the%20weave%20strands%20relative%20to%20strand%20spacing.%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Comma-separated%20sequence%20of%20how%20many%20strands%20in%20the%20other%20direction%20each%20ribbon%20should%20go%20over%2C%20then%20under.%20Use%20values%20that%20are%20factors%20of%20the%20numbers%20of%20strands%20in%20each%20direction%20to%20avoid%20very%20large%20and%20complex%20repeating%20units.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20return%20tile_spec%2C%20tooltips%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo%2C%20tile_or_weave%2C%20tile_spec%2C%20tool_tip%2C%20tooltips)%3A%0A%20%20%20%20%23%20mo.stop(tiling_map)%0A%20%20%20%20if%20tile_spec%20is%20not%20None%3A%0A%20%20%20%20%20%20%20%20x%20%3D%20mo.md(%22%5Cn%22.join(%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Bf%22%23%23%23%20Set%20%7Btile_or_weave.value%7D%20options%22%5D%20%2B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Bf%22%23%23%23%23%20%7Btool_tip(v%2C%20tt)%7D%22%20for%20(k%2C%20v)%2C%20tt%20in%20zip(tile_spec.items()%2C%20tooltips)%5D%0A%20%20%20%20%20%20%20%20))%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20x%20%3D%20mo.md(f%22%23%23%23%23%20No%20%7Btile_or_weave.value%7D%20options%20to%20set%22)%0A%20%20%20%20x%0A%20%20%20%20return%20(x%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20_radius%20%3D%20mo.ui.slider(0%2C%204%2C%20value%3D0%2C%20show_value%3DTrue)%0A%20%20%20%20_show_prototile%20%3D%20mo.ui.switch(value%3DFalse)%0A%20%20%20%20_show_reg_prototile%20%3D%20mo.ui.switch(value%3DFalse)%0A%20%20%20%20_show_vectors%20%3D%20mo.ui.switch(value%3DFalse)%0A%20%20%20%20_show_ids%20%3D%20mo.ui.switch(value%3DTrue)%0A%20%20%20%20_show_scale%20%3D%20mo.ui.switch(value%3DFalse)%0A%0A%20%20%20%20view_settings%20%3D%20mo.ui.dictionary(%7B%0A%20%20%20%20%20%20%20%20%22radius%22%3A%20_radius%2C%0A%20%20%20%20%20%20%20%20%22show_ids%22%3A%20_show_ids%2C%0A%20%20%20%20%20%20%20%20%22show_prototile%22%3A%20_show_prototile%2C%0A%20%20%20%20%20%20%20%20%22show_reg_prototile%22%3A%20_show_reg_prototile%2C%0A%20%20%20%20%20%20%20%20%22show_vectors%22%3A%20_show_vectors%2C%0A%20%20%20%20%20%20%20%20%22show_scale%22%3A%20_show_scale%2C%0A%20%20%20%20%7D)%0A%20%20%20%20return%20(view_settings%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo%2C%20tool_tip%2C%20view_settings)%3A%0A%20%20%20%20mo.md(f%22%22%22%0A%20%20%20%20%23%23%23%20Design%20view%20options%0A%20%20%20%20%23%23%23%23%20Show%20tile%20IDs%20%7Btool_tip(view_settings%5B'show_ids'%5D%2C%20'Show%20the%20tiling%20element%20labels%20used%20to%20match%20tiles%20to%20variables%20in%20the%20map%20data.')%7D%0A%20%20%20%20%23%23%23%23%20Show%20base%20tile%20%7Btool_tip(view_settings%5B'show_prototile'%5D%2C%20'Show%20in%20fine%20black%20outline%20the%20simple%20tile%20(usually%20a%20square%20or%20hexagon)%20which%20forms%20the%20basis%20of%20the%20pattern.')%7D%0A%20%20%20%20%23%23%23%23%20Show%20vectors%20%7Btool_tip(view_settings%5B'show_vectors'%5D%2C%20'Show%20the%20translations%20that%20map%20repeating%20tiles%20in%20the%20pattern%20onto%20one%20another.')%7D%0A%20%20%20%20%23%23%23%23%20Show%20%26lsquo%3Bjigsaw%20piece%26rsquo%3B%20%7Btool_tip(view_settings%5B'show_reg_prototile'%5D%2C%20'Show%20in%20a%20red%20outline%20the%20repeating%20set%20tile%20group%20that%20pieces%20together%20jigsaw-like%20to%20form%20the%20pattern.')%7D%0A%20%20%20%20%23%23%23%23%20Show%20scale%20%7Btool_tip(view_settings%5B'show_scale'%5D%2C%20'Give%20an%20indication%20of%20scale%20in%20map%20units.')%7D%0A%20%20%20%20%23%23%23%23%20Tile%20group%20'shells'%20to%20show%20%7Btool_tip(view_settings%5B'radius'%5D%2C%20'The%20number%20of%20%26lsquo%3Bshells%26rsquo%3B%20of%20the%20tiling%20to%20show%20around%20the%20base%20tile%20group.')%7D%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(%0A%20%20%20%20family%2C%0A%20%20%20%20get_gdf%2C%0A%20%20%20%20get_over_under%2C%0A%20%20%20%20get_tile_ids%2C%0A%20%20%20%20num_tiles%2C%0A%20%20%20%20spacing%2C%0A%20%20%20%20tile_or_weave%2C%0A%20%20%20%20tile_spec%2C%0A%20%20%20%20tilings_by_n%2C%0A%20%20%20%20wsp%2C%0A)%3A%0A%20%20%20%20def%20get_base_tile_unit()%3A%0A%20%20%20%20%20%20%20%20spec%20%3D%20tilings_by_n%5Bnum_tiles.value%5D%5Bfamily.value%5D%0A%20%20%20%20%20%20%20%20if%20tile_or_weave.value%20%3D%3D%20%22tiling%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20wsp.TileUnit(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tiling_type%3Dspec%5B%22tiling_type%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20spacing%3Dspacing.value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20n%3Dspec%5B%22n%22%5D%20if%20%22n%22%20in%20spec%20else%20None%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20code%3Dspec%5B%22code%22%5D%20if%20%22code%22%20in%20spec%20else%20None%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset%3Dtile_spec%5B%22offset%22%5D.value%20if%20tile_spec%20is%20not%20None%20else%20None%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20crs%3Dget_gdf().crs)%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20wsp.WeaveUnit(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weave_type%3Dspec%5B%22weave_type%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20spacing%3Dspacing.value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20strands%3Dspec%5B%22strands%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20n%3Dget_over_under(tile_spec%5B%22over_under%22%5D.value)%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20spec%5B%22weave_type%22%5D%20in%20%5B%22twill%22%2C%20%22basket%22%5D%20else%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aspect%3Dtile_spec%5B%22aspect%22%5D.value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20crs%3Dget_gdf().crs)%0A%20%20%20%20%20%20%20%20slice%20%3D%20%5Bi%20in%20get_tile_ids()%20for%20i%20in%20result.tiles.tile_id%5D%0A%20%20%20%20%20%20%20%20result.tiles%20%3D%20result.tiles.loc%5Bslice%5D%0A%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20return%20(get_base_tile_unit%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(%0A%20%20%20%20get_base_tile_unit%2C%0A%20%20%20%20p_inset%2C%0A%20%20%20%20spacing%2C%0A%20%20%20%20t_inset%2C%0A%20%20%20%20tile_or_weave%2C%0A%20%20%20%20tile_rotate%2C%0A%20%20%20%20tile_scale_x%2C%0A%20%20%20%20tile_scale_y%2C%0A%20%20%20%20tile_skew_x%2C%0A%20%20%20%20tile_skew_y%2C%0A%20%20%20%20tile_spec%2C%0A)%3A%0A%20%20%20%20def%20get_modded_tile_unit()%3A%0A%20%20%20%20%20%20%20%20if%20tile_or_weave.value%20%3D%3D%20%22tiling%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20get_base_tile_unit()%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.transform_rotate(tile_rotate.value)%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.transform_scale(tile_scale_x.value%2C%20tile_scale_y.value)%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.transform_skew(tile_skew_x.value%2C%20tile_skew_y.value)%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.inset_tiles(t_inset.value%20*%20spacing.value%20%2F%20100)%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.inset_prototile(p_inset.value%20*%20spacing.value%20%2F%20100)%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20get_base_tile_unit()%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.transform_rotate(tile_rotate.value)%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.transform_scale(tile_scale_x.value%2C%20tile_scale_y.value)%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.transform_skew(tile_skew_x.value%2C%20tile_skew_y.value)%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.inset_tiles(t_inset.value%20*%20tile_spec%5B%22aspect%22%5D.value%20*%20spacing.value%20%2F%20100)%0A%20%20%20%20return%20(get_modded_tile_unit%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20def%20get_over_under(pattern)%3A%0A%20%20%20%20%20%20%20%20if%20any(%5Bnot%20c%20in%20%220123456789%2C%22%20for%20c%20in%20pattern%5D)%3A%20return%20(2%2C%202)%0A%20%20%20%20%20%20%20%20numbers%20%3D%20%5Bint(s)%20for%20s%20in%20pattern.split(%22%2C%22)%5D%0A%20%20%20%20%20%20%20%20length%20%3D%202%20*%20len(numbers)%20%2F%2F%202%0A%20%20%20%20%20%20%20%20if%20length%20%3D%3D%200%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(2%2C%202)%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20tuple(numbers%5B%3Alength%5D)%0A%20%20%20%20return%20(get_over_under%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(get_selected_colour_palettes%2C%20mpl%2C%20num_tiles%2C%20view_settings)%3A%0A%20%20%20%20def%20plot_tiles(tiles)%3A%0A%20%20%20%20%20%20%20%20cols%20%3D%20%5Bmpl.colormaps.get(p)(2%2F3)%20for%20p%20in%20get_selected_colour_palettes()%5D%0A%20%20%20%20%20%20%20%20while%20len(cols)%20%3C%20num_tiles.value%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20cols%20%3D%20cols%20%2B%20%5B%22%23ffffff00%22%5D%0A%20%20%20%20%20%20%20%20cm%20%3D%20mpl.colors.ListedColormap(cols)%0A%20%20%20%20%20%20%20%20plot%20%3D%20tiles.plot(r%3Dview_settings%5B%22radius%22%5D.value%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_vectors%3Dview_settings%5B%22show_vectors%22%5D.value%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_prototile%3Dview_settings%5B%22show_prototile%22%5D.value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_reg_prototile%3Dview_settings%5B%22show_reg_prototile%22%5D.value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show_ids%3Dview_settings%5B%22show_ids%22%5D.value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cmap%3Dcm%2C%20figsize%3D(4%2C%204)%2C%20r_alpha%3D0.5)%0A%20%20%20%20%20%20%20%20if%20view_settings%5B%22show_scale%22%5D.value%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20plot.xaxis.set_visible(True)%0A%20%20%20%20%20%20%20%20%20%20%20%20plot.yaxis.set_visible(False)%0A%20%20%20%20%20%20%20%20%20%20%20%20plot.set_frame_on(False)%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20plot.axis(%22off%22)%0A%20%20%20%20%20%20%20%20return%20plot%0A%20%20%20%20return%20(plot_tiles%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(get_gdf%2C%20get_numeric_variables)%3A%0A%20%20%20%20def%20get_tile_ids()%3A%0A%20%20%20%20%20%20%20%20%23%20return%20sorted(list(set(get_modded_tile_unit().tiles.tile_id)))%0A%20%20%20%20%20%20%20%20%23%20return%20list(%22abcdefghijkl%22)%5B%3Anum_tiles.value%5D%0A%20%20%20%20%20%20%20%20return%20list(%22abcdefghijkl%22)%5B%3Alen(get_numeric_variables(get_gdf()))%5D%0A%20%20%20%20return%20(get_tile_ids%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(num_tiles%2C%20pals%2C%20rev_pals)%3A%0A%20%20%20%20def%20get_selected_colour_palettes()%3A%0A%20%20%20%20%20%20%20%20return%20%5B(p%20if%20not%20r%20else%20p%20%2B%20%22_r%22)%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20p%2C%20r%20in%20zip(pals.value%5B%3Anum_tiles.value%5D%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rev_pals.value%5B%3Anum_tiles.value%5D)%5D%0A%20%20%20%20return%20(get_selected_colour_palettes%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(io%2C%20mpl)%3A%0A%20%20%20%20def%20get_colour_ramp(pal_name%3Astr%3D%22Reds%22%2C%20rev%3Abool%3DFalse)%3A%0A%20%20%20%20%20%20%20%20fig%2C%20ax%20%3D%20mpl.pyplot.subplots()%0A%20%20%20%20%20%20%20%20xy%20%3D%20%5B%5Bx%20%2F%20256%20for%20x%20in%20range(257)%5D%20for%20i%20in%20range(2)%5D%0A%20%20%20%20%20%20%20%20ax.imshow(xy%2C%20aspect%3D32%2C%20cmap%3Dmpl.colormaps.get(pal_name%20%2B%20(%22_r%22%20if%20rev%20else%20%22%22)))%0A%20%20%20%20%20%20%20%20ax.set_axis_off()%0A%20%20%20%20%20%20%20%20buf%20%3D%20io.BytesIO()%0A%20%20%20%20%20%20%20%20mpl.pyplot.savefig(buf%2C%20dpi%3D24%2C%20pad_inches%3D0%2C%20bbox_inches%3D%22tight%22)%0A%20%20%20%20%20%20%20%20mpl.pyplot.close(fig)%0A%20%20%20%20%20%20%20%20return%20buf%0A%20%20%20%20return%20(get_colour_ramp%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(pd)%3A%0A%20%20%20%20def%20get_numeric_variables(_gdf)%3A%0A%20%20%20%20%20%20%20%20return%20%5Bcol%20for%20col%20in%20_gdf.columns%20if%20not%20%22geom%22%20in%20col%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20and%20pd.api.types.is_numeric_dtype(_gdf%5Bcol%5D.dtype)%5D%0A%20%20%20%20return%20(get_numeric_variables%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(get_gdf%2C%20math%2C%20tile_or_weave)%3A%0A%20%20%20%20def%20get_spacings()%3A%0A%20%20%20%20%20%20%20%20_bb%20%3D%20get_gdf().total_bounds%0A%20%20%20%20%20%20%20%20_width%2C%20_height%20%3D%20_bb%5B2%5D%20-%20_bb%5B0%5D%2C%20_bb%5B3%5D%20-%20_bb%5B1%5D%0A%20%20%20%20%20%20%20%20_max%20%3D%2010%20**%20math.floor(math.log10(max(_width%2C%20_height)))%20%2F%2F%205%0A%20%20%20%20%20%20%20%20_mid%20%3D%20_max%20%2F%2F%202%0A%20%20%20%20%20%20%20%20_min%20%3D%20_max%20%2F%2F%2020%0A%20%20%20%20%20%20%20%20_stepsize1%20%3D%20_min%20%2F%2F%2010%0A%20%20%20%20%20%20%20%20_stepsize2%20%3D%20_min%20%2F%2F%202%0A%20%20%20%20%20%20%20%20_steps%20%3D%20%5Bx%20for%20x%20in%20range(_min%2C%20_mid%2C%20_stepsize1)%5D%20%2B%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Bx%20for%20x%20in%20range(_mid%2C%20_max%20%2B%201%2C%20_stepsize2)%5D%0A%20%20%20%20%20%20%20%20if%20tile_or_weave.value%20%3D%3D%20%22weave%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20_steps%20%3D%20%5Bx%20%2F%2F%202%20for%20x%20in%20_steps%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20_mid%20%3D%20_mid%20%2F%2F%202%0A%20%20%20%20%20%20%20%20return%20_steps%2C%203%20*%20_mid%20%2F%2F%204%0A%20%20%20%20return%20(get_spacings%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20def%20tool_tip(ele%3Astr%2C%20tip%3Astr)%3A%0A%20%20%20%20%20%20%20%20return%20f'%3Cspan%20title%3D%22%7Btip%7D%22%3E%7Bele%7D%3C%2Fspan%3E'%0A%20%20%20%20return%20(tool_tip%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20setup_tilings_dictionary()%3A%0A%20%20%20%20tilings_by_n%20%3D%20%7B%0A%20%20%20%20%20%202%3A%20%7B%0A%20%20%20%20%20%20%20%20%22plain%20weave%20a%7Cb%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22a%7Cb%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb-%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb%203%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb-%203%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb-%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb%204%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb%22%2C%20%22n%22%3A%20%224%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb%201%2C2%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb%22%2C%20%22n%22%3A%20%221%2C2%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb-%201%2C2%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb-%22%2C%20%22n%22%3A%20%221%2C2%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb%201%2C2%2C2%2C1%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb%22%2C%20%22n%22%3A%20%221%2C2%2C2%2C1%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb%202%2C3%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb%22%2C%20%22n%22%3A%20%222%2C3%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20a%7Cb%202%2C3%2C3%2C2%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22a%7Cb%22%2C%20%22n%22%3A%20%222%2C3%2C3%2C2%22%7D%2C%0A%20%20%20%20%20%20%20%20%22archimedean%204.8.8%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22archimedean%22%2C%20%22code%22%3A%20%224.8.8%22%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%202%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%202%7D%2C%0A%20%20%20%20%20%20%20%20%22crosses%202%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22crosses%22%2C%20%22n%22%3A%202%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-colouring%202%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-colouring%22%2C%20%22n%22%3A%202%7D%2C%0A%20%20%20%20%20%20%20%20%22square-colouring%202%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-colouring%22%2C%20%22n%22%3A%202%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-slice%202%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%202%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%203%3A%20%7B%0A%20%20%20%20%20%20%20%20%22plain%20weave%20ab%7Cc%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22ab%7Cc%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20ab-%7Cc%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22ab-%7Cc%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20ab%7Cc-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22ab%7Cc-%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20ab%7Cc-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22ab%7Cc-%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-slice%203%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%203%7D%2C%0A%20%20%20%20%20%20%20%20%23%20%22laves%203.6.3.6%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22laves%22%2C%20%22code%22%3A%20%223.6.3.6%22%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-colouring%203%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-colouring%22%2C%20%22n%22%3A%203%7D%2C%0A%20%20%20%20%20%20%20%20%22crosses%203%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22crosses%22%2C%20%22n%22%3A%203%7D%2C%0A%20%20%20%20%20%20%20%20%22square-colouring%203%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-colouring%22%2C%20%22n%22%3A%203%7D%2C%0A%20%20%20%20%20%20%20%20%22archimedean%203.6.3.6%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22archimedean%22%2C%20%22code%22%3A%20%223.6.3.6%22%7D%2C%0A%20%20%20%20%20%20%20%20%22archimedean%203.12.12%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22archimedean%22%2C%20%22code%22%3A%20%223.12.12%22%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%203%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%203%7D%2C%0A%20%20%20%20%20%20%20%20%23%20%22twill%20weave%20ab%7Cc-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22ab%7Cc-%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%23%20%22basket%20weave%20ab%7Cc-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22ab%7Cc-%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%204%3A%20%7B%0A%20%20%20%20%20%20%20%20%22laves%203.3.4.3.4%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22laves%22%2C%20%22code%22%3A%20%223.3.4.3.4%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20ab%7Ccd%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22ab%7Ccd%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20ab-%7Ccd%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22ab-%7Ccd%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20ab-%7Ccd-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22ab-%7Ccd-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20ab%7Ccd%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22ab%7Ccd%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20ab%7Ccd%203%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22ab%7Ccd%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20ab%7Ccd%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22ab%7Ccd%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20ab%7Ccd%203%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22ab%7Ccd%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20ab%7Ccd%201%2C2%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22ab%7Ccd%22%2C%20%22n%22%3A%20%221%2C2%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20ab%7Ccd%201%2C2%2C2%2C1%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22ab%7Ccd%22%2C%20%22n%22%3A%20%221%2C2%2C2%2C1%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20ab-%7Ccd%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22ab-%7Ccd%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20ab-%7Ccd%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22ab-%7Ccd%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20ab-%7Ccd-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22ab-%7Ccd-%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20ab-%7Ccd-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22ab-%7Ccd-%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%23%20%22laves%204.8.8%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22laves%22%2C%20%22code%22%3A%20%224.8.8%22%7D%2C%0A%20%20%20%20%20%20%20%20%22crosses%204%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22crosses%22%2C%20%22n%22%3A%204%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%204%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%204%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-colouring%204%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-colouring%22%2C%20%22n%22%3A%204%7D%2C%0A%20%20%20%20%20%20%20%20%23%20%22square-colouring%204%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-colouring%22%2C%20%22n%22%3A%204%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-dissection%204%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-dissection%22%2C%20%22n%22%3A%204%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-slice%204%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%204%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%205%3A%20%7B%0A%20%20%20%20%20%20%20%20%22square-colouring%205%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-colouring%22%2C%20%22n%22%3A%205%7D%2C%0A%20%20%20%20%20%20%20%20%22crosses%205%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22crosses%22%2C%20%22n%22%3A%205%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abc%7Cde%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abc%7Cde%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abc-%7Cde%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abc-%7Cde%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abc-%7Cde-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abc-%7Cde-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abc%7Cde%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abc%7Cde%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abc%7Cde-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abc%7Cde-%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abc-%7Cde-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abc-%7Cde-%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abc%7Cde%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abc%7Cde%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abc%7Cde-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abc%7Cde-%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abc-%7Cde-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abc-%7Cde-%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-colouring%205%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-colouring%22%2C%20%22n%22%3A%205%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-slice%205%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%205%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%205%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%205%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%206%3A%20%7B%0A%20%20%20%20%20%20%20%20%22hex-slice%206%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%206%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%206%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%206%7D%2C%0A%20%20%20%20%20%20%20%20%22square-colouring%206%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-colouring%22%2C%20%22n%22%3A%206%7D%2C%0A%20%20%20%20%20%20%20%20%22laves%203.3.3.3.6%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22laves%22%2C%20%22code%22%3A%20%223.3.3.3.6%22%7D%2C%0A%20%20%20%20%20%20%20%20%23%20%22laves%203.4.6.4%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22laves%22%2C%20%22code%22%3A%20%223.4.6.4%22%7D%2C%0A%20%20%20%20%20%20%20%20%22laves%203.12.12%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22laves%22%2C%20%22code%22%3A%20%223.12.12%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abc%7Cdef%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abc%7Cdef%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abc-%7Cdef%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abc-%7Cdef%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abc-%7Cdef-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abc-%7Cdef-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abc%7Cdef%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abc%7Cdef%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abc%7Cdef%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abc%7Cdef%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abc-%7Cdef%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abc-%7Cdef%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abc-%7Cdef%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abc-%7Cdef%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abc-%7Cdef-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abc-%7Cdef-%22%2C%20%22n%22%3A%20%224%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abc-%7Cdef-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abc-%7Cdef-%22%2C%20%22n%22%3A%20%224%22%7D%2C%0A%20%20%20%20%20%20%20%20%22archimedean%203.3.4.3.4%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22archimedean%22%2C%20%22code%22%3A%20%223.3.4.3.4%22%7D%2C%0A%20%20%20%20%20%20%20%20%22archimedean%203.4.6.4%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22archimedean%22%2C%20%22code%22%3A%20%223.4.6.4%22%7D%2C%0A%20%20%20%20%20%20%20%20%22archimedean%204.6.12%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22archimedean%22%2C%20%22code%22%3A%20%224.6.12%22%7D%2C%0A%20%20%20%20%20%20%20%20%22crosses%206%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22crosses%22%2C%20%22n%22%3A%206%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-colouring%206%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-colouring%22%2C%20%22n%22%3A%206%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%207%3A%20%7B%0A%20%20%20%20%20%20%20%20%22hex-colouring%207%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-colouring%22%2C%20%22n%22%3A%207%7D%2C%0A%20%20%20%20%20%20%20%20%22crosses%207%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22crosses%22%2C%20%22n%22%3A%207%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-dissection%207%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-dissection%22%2C%20%22n%22%3A%207%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcd%7Cefg%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcd%7Cefg%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcd%7Cefg-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcd%7Cefg-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcd-%7Cefg-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcd-%7Cefg-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abcd%7Cefg%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abcd%7Cefg%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abcd%7Cefg-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abcd%7Cefg-%22%2C%20%22n%22%3A%20%224%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abcd%7Cefg-%202%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abcd%7Cefg-%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abcd%7Cefg%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abcd%7Cefg%22%2C%20%22n%22%3A%20%223%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abcd%7Cefg-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abcd%7Cefg-%22%2C%20%22n%22%3A%20%224%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abcd%7Cefg-%202%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abcd%7Cefg-%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22square-colouring%207%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-colouring%22%2C%20%22n%22%3A%207%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-slice%207%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%207%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%207%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%207%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%208%3A%20%7B%0A%20%20%20%20%20%20%20%20%22square-slice%208%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%208%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcd%7Cefgh%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcd%7Cefgh%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcd-%7Cefgh%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcd-%7Cefgh%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcd-%7Cefgh-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcd-%7Cefgh-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abcd%7Cefgh%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abcd%7Cefgh%22%2C%20%22n%22%3A%20%224%22%7D%2C%0A%20%20%20%20%20%20%20%20%22basket%20weave%20abcd%7Cefgh%202%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22basket%22%2C%20%22strands%22%3A%20%22abcd%7Cefgh%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abcd%7Cefgh%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abcd%7Cefgh%22%2C%20%22n%22%3A%20%224%22%7D%2C%0A%20%20%20%20%20%20%20%20%22twill%20weave%20abcd%7Cefgh%202%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22twill%22%2C%20%22strands%22%3A%20%22abcd%7Cefgh%22%2C%20%22n%22%3A%20%222%22%7D%2C%0A%20%20%20%20%20%20%20%20%22square-colouring%208%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-colouring%22%2C%20%22n%22%3A%208%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-slice%208%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%208%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-colouring%208%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-colouring%22%2C%20%22n%22%3A%208%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%209%3A%20%7B%0A%20%20%20%20%20%20%20%20%23%20%22cube%20weave%20abc%7Cdef%7Cghi%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22cube%22%2C%20%22strands%22%3A%20%22abc%7Cdef%7Cghi%22%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-slice%209%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%209%7D%2C%0A%20%20%20%20%20%20%20%20%22square-colouring%209%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-colouring%22%2C%20%22n%22%3A%209%7D%2C%0A%20%20%20%20%20%20%20%20%22hex-colouring%209%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-colouring%22%2C%20%22n%22%3A%209%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%209%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%209%7D%2C%0A%20%20%20%20%20%20%20%20%22archimedean%203.3.3.3.6%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22archimedean%22%2C%20%22code%22%3A%20%223.3.3.3.6%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcde%7Cfghi%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcde%7Cfghi%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcde-%7Cfghi%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcde-%7Cfghi%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcde-%7Cfghi-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcde-%7Cfghi-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%2010%3A%20%7B%0A%20%20%20%20%20%20%20%20%22hex-slice%2010%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%2010%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%2010%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%2010%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcde%7Cfghij%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcde%7Cfghij%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcde-%7Cfghij%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcde-%7Cfghij%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcde-%7Cfghij-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcde-%7Cfghij-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%2011%3A%20%7B%0A%20%20%20%20%20%20%20%20%22hex-slice%2011%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%2011%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%2011%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%2011%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcdef%7Cghijk%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcdef%7Cghijk%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcdef%7Cghijk-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcdef%7Cghijk-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcdef-%7Cghijk-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcdef-%7Cghijk-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%2012%3A%20%7B%0A%20%20%20%20%20%20%20%20%22hex-slice%2012%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22hex-slice%22%2C%20%22n%22%3A%2012%7D%2C%0A%20%20%20%20%20%20%20%20%23%20%22laves%204.6.12%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22laves%22%2C%20%22code%22%3A%20%224.6.12%22%7D%2C%0A%20%20%20%20%20%20%20%20%22square-slice%2012%22%3A%20%7B%22type%22%3A%22tiling%22%2C%20%22tiling_type%22%3A%20%22square-slice%22%2C%20%22n%22%3A%2012%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcdef%7Cghijkl%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcdef%7Cghijkl%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcdef-%7Cghijkl%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcdef-%7Cghijkl%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%22plain%20weave%20abcdef-%7Cghijkl-%22%3A%20%7B%22type%22%3A%22weave%22%2C%20%22weave_type%22%3A%20%22plain%22%2C%20%22strands%22%3A%20%22abcdef-%7Cghijkl-%22%2C%20%22n%22%3A%20%221%22%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20return%20(tilings_by_n%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20centred%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%22display%22%3A%20%22flex%22%2C%0A%20%20%20%20%20%20%20%20%22height%22%3A%20%22500px%22%2C%0A%20%20%20%20%20%20%20%20%22justify-content%22%3A%20%22center%22%2C%0A%20%20%20%20%20%20%20%20%22align-items%22%3A%20%22center%22%2C%0A%20%20%20%20%20%20%20%20%22text-align%22%3A%20%22center%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20return%20(centred%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20return%20(mo%2C)%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A</marimo-code></head>
  <body>
    <div id="root"></div>
  </body>
</html>
