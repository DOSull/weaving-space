const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-D0UmwqSE.js","./VegaLite-NHkhdp82.js","./index-Cg7PcY_l.js","./index-CpHxmtkS.css","./compile-BF6udbXJ.js","./time-DugJAYOw.js","./step-xJWGRC3d.js","./linear-B5iLQ_hF.js","./init-DLRA0X12.js","./range-CtcPcB_L.js","./ordinal-BcaZTuz9.js","./colors-bszWmPJw.js","./arc-B5qYPUYs.js","./index-Byd4_qsp.js","./terminal-CTBMmdxh.js","./createWsUrl-D8bgh8Ap.js","./terminal-WibgYtSD.css"])))=>i.map(i=>d[i]);
var e,t,n,r=Object.defineProperty,o=e=>{throw TypeError(e)},s=(e,t,n)=>((e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),i=(e,t,n)=>(((e,t,n)=>{t.has(e)||o("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));import{b1 as a,J as l,hz as c,hA as d,hB as u,hC as h,hD as f,hE as p,R as m,hF as g,hG as y,hH as b,hI as x,hJ as v,hK as w,hL as k,hM as S,hN as C,ax as E,eW as N,fl as j,G as _,a9 as I,P as A,eK as T,eL as M,eM as D,eO as O,de as R,ev as P,hO as L,eI as z,eJ as F,eN as B,hP as U,hQ as $,dJ as V,av as H,H as W,hR as G,dk as q,hS as Y,hT as J,hU as X,hV as K,hW as Z,eH as Q,cq as ee,$ as te,hX as ne,dL as re,hY as oe,hZ as se,a5 as ie,h_ as ae,dP as le,h$ as ce,i0 as de,M as ue,bj as he,bp as fe,i1 as pe,i2 as me,dz as ge,i3 as ye,i4 as be,i5 as xe,dH as ve,i6 as we,i7 as ke,dd as Se,i8 as Ce,i9 as Ee,b7 as Ne,ia as je,ib as _e,bs as Ie,e4 as Ae,bt as Te,ic as Me,id as De,ie as Oe,a0 as Re,a1 as Pe,a2 as Le,bE as ze,ig as Fe,ac as Be,dA as Ue,fN as $e,fQ as Ve,bn as He,fj as We,ay as Ge,ih as qe,ii as Ye,ij as Je,ik as Xe,il as Ke,fk as Ze,im as Qe,io as et,fp as tt,ip as nt,iq as rt,du as ot,W as st,a3 as it,bC as at,a4 as lt,ir as ct,aB as dt,a6 as ut,aD as ht,es as ft,bv as pt,dR as mt,is as gt,eh as yt,dK as bt,it as xt,dj as vt,eQ as wt,iu as kt,b8 as St,iv as Ct,dE as Et,iw as Nt,ix as jt,bH as _t,iy as It,iz as At,iA as Tt,b3 as Mt,iB as Dt,iC as Ot,ft as Rt,fv as Pt,iD as Lt,iE as zt,_ as Ft,Z as Bt,dD as Ut,iF as $t,iG as Vt,iH as Ht,iI as Wt,iJ as Gt,fo as qt,df as Yt,by as Jt,iK as Xt,a8 as Kt,b6 as Zt,iL as Qt,fR as en,bu as tn,iM as nn,a7 as rn,dv as on,iN as sn,Y as an,fx as ln,b9 as cn,bb as dn,iO as un,iP as hn,iQ as fn,iR as pn,dI as mn,b4 as gn,b5 as yn,iS as bn,iT as xn,ds as vn,iU as wn,iV as kn,j as Sn,g as Cn,e_ as En,iW as Nn,iX as jn,iY as _n,iZ as In,i_ as An,di as Tn,i$ as Mn,j0 as Dn,ar as On,bq as Rn,br as Pn,ad as Ln,j1 as zn,j2 as Fn,fU as Bn,j3 as Un,bm as $n,fT as Vn,j4 as Hn,j5 as Wn,dM as Gn,j6 as qn,j7 as Yn,j8 as Jn,j9 as Xn,ja as Kn,dN as Zn,jb as Qn,jc as er,jd as tr,je as nr,jf as rr,b2 as or,aw as sr,jg as ir,f6 as ar,jh as lr,ji as cr,ff as dr,jj as ur,eZ as hr,jk as fr,jl as pr,jm as mr,jn as gr,jo as yr,jp as br,f3 as xr,l as vr,jq as wr,jr as kr,js as Sr,t as Cr,jt as Er,ju as Nr,fH as jr,jv as _r,f9 as Ir,ao as Ar,eg as Tr,jw as Mr,jx as Dr,jy as Or,jz as Rr,jA as Pr,jB as Lr,jC as zr,jD as Fr,jE as Br,jF as Ur,jG as $r,jH as Vr,jI as Hr,jJ as Wr,jK as Gr,jL as qr,jM as Yr,jN as Jr,jO as Xr,jP as Kr,jQ as Zr,jR as Qr,jS as eo,jT as to,jU as no,jV as ro,jW as oo,jX as so,jY as io,jZ as ao,j_ as lo,j$ as co,k0 as uo,k1 as ho,k2 as fo,k3 as po,k4 as mo,k5 as go,k6 as yo,k7 as bo,k8 as xo,k9 as vo,ka as wo,kb as ko,kc as So,kd as Co,ke as Eo,kf as No,kg as jo,kh as _o,ki as Io,kj as Ao,dS as To,kk as Mo,kl as Do,dW as Oo,km as Ro,kn as Po,ko as Lo,kp as zo,kq as Fo,ae as Bo,kr as Uo,dV as $o,ks as Vo,kt as Ho,ku as Wo,kv as Go,kw as qo,kx as Yo,ky as Jo,kz as Xo,kA as Ko,kB as Zo,kC as Qo,kD as es,kE as ts,kF as ns,kG as rs,kH as os,kI as ss,aa as is,kJ as as,kK as ls,ef as cs,kL as ds,kM as us,kN as hs,kO as fs,kP as ps,kQ as ms,kR as gs,kS as ys,fS as bs,kT as xs,kU as vs,kV as ws,kW as ks,fd as Ss,bB as Cs,fV as Es,kX as Ns,kY as js,kZ as _s,k_ as Is,k$ as As,l0 as Ts,l1 as Ms,l2 as Ds,l3 as Os,l4 as Rs,l5 as Ps,l6 as Ls,e9 as zs,bD as Fs,bo as Bs,K as Us,T as $s,l7 as Vs,l8 as Hs,l9 as Ws,la as Gs,lb as qs,lc as Ys,ld as Js,le as Xs,lf as Ks,lg as Zs,bF as Qs,lh as ei,li as ti,dC as ni,lj as ri,lk as oi,dG as si,eU as ii,ll as ai,lm as li,aE as ci,db as di,ln as ui,lo as hi,lp as fi,bA as pi,lq as mi,ez as gi,fu as yi,fA as bi,fy as xi,fB as vi,fD as wi,fF as ki,fJ as Si,fE as Ci,lr as Ei,ls as Ni,lt as ji,lu as _i,et as Ii,lv as Ai,lw as Ti,lx as Mi,ly as Di,O as Oi,lz as Ri,Q as Pi,lA as Li,lB as zi,eY as Fi,lC as Bi,dm as Ui,bk as $i,lD as Vi,lE as Hi,lF as Wi,lG as Gi,ee as qi,lH as Yi,lI as Ji,dy as Xi,lJ as Ki,lK as Zi,lL as Qi,lM as ea,lN as ta,eT as na,lO as ra,lP as oa,dQ as sa,lQ as ia,lR as aa,lS as la,lT as ca,lU as da,lV as ua,lW as ha,lX as fa,lY as pa,lZ as ma,l_ as ga,l$ as ya,m0 as ba,m1 as xa,m2 as va,dl as wa,m3 as ka,m4 as Sa,m5 as Ca,m6 as Ea,m7 as Na,at as ja,m8 as _a,m9 as Ia,ma as Aa,mb as Ta,mc as Ma,md as Da,me as Oa,mf as Ra,mg as Pa,mh as La,mi as za,mj as Fa,f5 as Ba,mk as Ua,ml as $a,mm as Va,mn as Ha,fI as Wa,mo as Ga,mp as qa,mq as Ya,mr as Ja,d4 as Xa,ms as Ka,er as Za,mt as Qa,ex as el,ey as tl,mu as nl,mv as rl,mw as ol,mx as sl,my as il,mz as al,mA as ll,mB as cl,mC as dl,mD as ul,mE as hl,mF as fl,mG as pl,mH as ml,mI as gl,mJ as yl,q as bl,mK as xl,mL as vl,ej as wl,bl as kl,bi as Sl}from"./index-Cg7PcY_l.js";import{G as Cl,M as El,d as Nl,g as jl,e as _l,A as Il,s as Al,k as Tl,L as Ml,B as Dl,a as Ol,b as Rl,Y as Pl,f as Ll,h as zl,u as Fl,C as Bl,S as Ul,K as $l,i as Vl,j as Hl,l as Wl,m as Gl,n as ql,o as Yl,p as Jl,q as Xl,r as Kl,t as Zl,v as Ql,w as ec,P as tc,x as nc,y as rc,T as oc,c as sc}from"./tree-CJsejWYE.js";import{b as ic,c as ac,L as lc,I as cc,N as dc,V as uc,F as hc,d as fc,M as pc,l as mc,g as gc,E as yc,e as bc,f as xc,h as vc,i as wc,j as kc,k as Sc,m as Cc,n as Ec,o as Nc,p as jc,u as _c,C as Ic,R as Ac,a as Tc,A as Mc,q as Dc,r as Oc,O as Rc,T as Pc,s as Lc,t as zc}from"./useMarimoWebSocket-rxicbork.js";import{s as Fc,i as Bc,T as Uc,a as $c}from"./transform-CdY8z5kT.js";import{X as Vc}from"./step-xJWGRC3d.js";import{W as Hc,d as Wc}from"./compile-BF6udbXJ.js";import{s as Gc}from"./sortBy-D9BOWdST.js";import"./main-CEaoNRsh.js";import"./createWsUrl-D8bgh8Ap.js";import"./index-Byd4_qsp.js";import"./time-DugJAYOw.js";import"./linear-B5iLQ_hF.js";import"./init-DLRA0X12.js";import"./range-CtcPcB_L.js";import"./ordinal-BcaZTuz9.js";import"./colors-bszWmPJw.js";import"./arc-B5qYPUYs.js";import"./_baseEach-DUW_PvB-.js";import"./_baseMap-DpgnsqPP.js";
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=a("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Yc=a("ArrowRightFromLine",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]]),Jc=a("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Xc=a("ArrowRightToLine",[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]]),Kc=a("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Zc=a("BetweenHorizontalStart",[["rect",{width:"13",height:"7",x:"8",y:"3",rx:"1",key:"pkso9a"}],["path",{d:"m2 9 3 3-3 3",key:"1agib5"}],["rect",{width:"13",height:"7",x:"8",y:"14",rx:"1",key:"1q5fc1"}]]),Qc=a("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),ed=a("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),td=a("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),nd=a("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),rd=a("CircleEllipsis",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]),od=a("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),sd=a("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),id=a("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]),ad=a("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),ld=a("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),cd=a("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),dd=a("CopyMinus",[["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ud=a("DiamondPlus",[["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z",key:"1ey20j"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),hd=a("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),fd=a("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),pd=a("FastForward",[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]]),md=a("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),gd=a("FilePlus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]),yd=a("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]),bd=a("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),xd=a("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),vd=a("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),wd=a("HardDriveDownload",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]]),kd=a("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Sd=a("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Cd=a("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Ed=a("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),Nd=a("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),jd=a("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),_d=a("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]),Id=a("MessageCircleQuestion",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ad=a("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Td=a("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]),Md=a("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),Dd=a("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Od=a("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),Rd=a("PaintRoller",[["rect",{width:"16",height:"6",x:"2",y:"2",rx:"2",key:"jcyz7m"}],["path",{d:"M10 16v-2a2 2 0 0 1 2-2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2",key:"1b9h7c"}],["rect",{width:"4",height:"6",x:"8",y:"16",rx:"1",key:"d6e7yl"}]]),Pd=a("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),Ld=a("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),zd=a("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),Fd=a("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Bd=a("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),Ud=a("Regex",[["path",{d:"M17 3v10",key:"15fgeh"}],["path",{d:"m12.67 5.5 8.66 5",key:"1gpheq"}],["path",{d:"m12.67 10.5 8.66-5",key:"1dkfa6"}],["path",{d:"M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z",key:"swwfx4"}]]),$d=a("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Vd=a("Rows3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]),Hd=a("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Wd=a("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Gd=a("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),qd=a("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Yd=a("SquareCode",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Jd=a("SquareDashedBottomCode",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["path",{d:"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2",key:"as5y1o"}],["path",{d:"M9 21h1",key:"15o7lz"}]]),Xd=a("SquareEqual",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M7 14h10",key:"1mhdw3"}]]),Kd=a("SquareM",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 16V8l4 4 4-4v8",key:"141u4e"}]]),Zd=a("SquarePlay",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]]),Qd=a("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),eu=a("SquarePower",[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M7.998 9.003a5 5 0 1 0 8-.005",key:"1pek45"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]),tu=a("SquareTerminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),nu=a("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]),ru=a("TextCursorInput",[["path",{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1",key:"18xjzo"}],["path",{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5",key:"fj48gi"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M9 7v10",key:"1vc8ob"}]]),ou=a("TextSearch",[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 18H3",key:"13769t"}],["circle",{cx:"17",cy:"15",r:"3",key:"1upz2a"}],["path",{d:"m21 19-1.9-1.9",key:"dwi7p8"}]]),su=a("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),iu=a("View",[["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]]),au=a("WholeWord",[["circle",{cx:"7",cy:"12",r:"3",key:"12clwm"}],["path",{d:"M10 9v6",key:"17i7lo"}],["circle",{cx:"17",cy:"12",r:"3",key:"gl7c2s"}],["path",{d:"M14 7v8",key:"dl84cr"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]),lu=a("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),cu=a("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),du=a("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);const uu=l.createContext({}),hu=l.forwardRef((function(e,t){[e,t]=f(e,t,uu);let{toolbarProps:n}=function(e,t){const{"aria-label":n,"aria-labelledby":r,orientation:o="horizontal"}=e;let[s,i]=l.useState(!1);c((()=>{var e;i(!(!t.current||!(null===(e=t.current.parentElement)||void 0===e?void 0:e.closest('[role="toolbar"]'))))}));const{direction:a}=d(),f="rtl"===a&&"horizontal"===o;let p=h(t);const m=l.useRef(null);return{toolbarProps:{...u(e,{labelable:!0}),role:s?"group":"toolbar","aria-orientation":o,"aria-label":n,"aria-labelledby":null==n?r:void 0,onKeyDownCapture:s?void 0:e=>{if(e.currentTarget.contains(e.target)){if("horizontal"===o&&"ArrowRight"===e.key||"vertical"===o&&"ArrowDown"===e.key)f?p.focusPrevious():p.focusNext();else{if(!("horizontal"===o&&"ArrowLeft"===e.key||"vertical"===o&&"ArrowUp"===e.key))return"Tab"===e.key?(e.stopPropagation(),m.current=document.activeElement,void(e.shiftKey?p.focusFirst():p.focusLast())):void 0;f?p.focusNext():p.focusPrevious()}e.stopPropagation(),e.preventDefault()}},onFocusCapture:s?void 0:e=>{var n,r;m.current&&!e.currentTarget.contains(e.relatedTarget)&&(null===(n=t.current)||void 0===n?void 0:n.contains(e.target))&&(null===(r=m.current)||void 0===r||r.focus(),m.current=null)},onBlurCapture:s?void 0:e=>{e.currentTarget.contains(e.relatedTarget)||m.current||(m.current=e.target)}}}}(e,t),r=p({...e,values:{orientation:e.orientation||"horizontal"},defaultClassName:"react-aria-Toolbar"}),o=u(e);return delete o.id,m.createElement("div",{...g(n,o),...r,ref:t,slot:e.slot||void 0,"data-orientation":e.orientation||"horizontal"},r.children)}));function fu(e,t){const n=+y(e)-+y(t);return n<0?-1:n>0?1:n}function pu(e,t){const n=y(e,null==t?void 0:t.in);return+function(e,t){const n=y(e,null==t?void 0:t.in);return n.setHours(23,59,59,999),n}(n,t)==+function(e,t){const n=y(e,null==t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}(n,t)}function mu(e,t,n){const[r,o,s]=x(null==n?void 0:n.in,e,e,t),i=fu(o,s),a=Math.abs(function(e,t,n){const[r,o]=x(null==n?void 0:n.in,e,t);return 12*(r.getFullYear()-o.getFullYear())+(r.getMonth()-o.getMonth())}(o,s));if(a<1)return 0;1===o.getMonth()&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-i*a);let l=fu(o,s)===-i;pu(r)&&1===a&&1===fu(r,s)&&(l=!1);const c=i*(a-+l);return 0===c?0:c}function gu(e,t,n){const r=function(e,t){return+y(e)-+y(t)}(e,t)/1e3;return(e=>{const t=(0,Math.trunc)(e);return 0===t?0:t})(r)}function yu(e,t){return function(e,t,n){const r=w(),o=(null==n?void 0:n.locale)??r.locale??k,s=fu(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const i=Object.assign({},n,{addSuffix:null==n?void 0:n.addSuffix,comparison:s}),[a,l]=x(null==n?void 0:n.in,...s>0?[t,e]:[e,t]),c=gu(l,a),d=(v(l)-v(a))/1e3,u=Math.round((c-d)/60);let h;if(u<2)return 0===u?o.formatDistance("lessThanXMinutes",1,i):o.formatDistance("xMinutes",u,i);if(u<45)return o.formatDistance("xMinutes",u,i);if(u<90)return o.formatDistance("aboutXHours",1,i);if(u<S){const e=Math.round(u/60);return o.formatDistance("aboutXHours",e,i)}if(u<2520)return o.formatDistance("xDays",1,i);if(u<C){const e=Math.round(u/S);return o.formatDistance("xDays",e,i)}if(u<2*C)return h=Math.round(u/C),o.formatDistance("aboutXMonths",h,i);if(h=mu(l,a),h<12){const e=Math.round(u/C);return o.formatDistance("xMonths",e,i)}{const e=h%12,t=Math.trunc(h/12);return e<3?o.formatDistance("aboutXYears",t,i):e<9?o.formatDistance("overXYears",t,i):o.formatDistance("almostXYears",t+1,i)}}(e,function(e){return b(e,Date.now())}(e),t)}const bu={markdown:!0,inline_ai_tooltip:!1,wasm_layouts:!1,scratchpad:!0,rtc_v2:!1,reactive_tests:!1,setup_cell:!1};function xu(e){var t;return(null==(t=N().experimental)?void 0:t[e])??bu[e]}!function(e,t){if("undefined"==typeof window)return;const n=`__marimo__${t}`;window[n]&&E.warn(`Overwriting existing debug object ${n}`),window[n]=e}((function(e,t){const n=N();n.experimental=n.experimental??{},n.experimental[e]=t,j({config:n})}),"setFeatureFlag");const vu=()=>{const e=_.c(7),{selectedLayout:t}=ic(),{setLayoutView:n}=ac();if(I()&&!xu("wasm_layouts"))return null;let r,o,s,i;return e[0]!==n?(r=e=>n(e),e[0]=n,e[1]=r):r=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(o=A.jsx(z,{className:"min-w-[110px] border-border bg-background","data-testid":"layout-select",children:A.jsx(F,{placeholder:"Select a view"})}),e[2]=o):o=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(s=A.jsx(T,{children:A.jsxs(M,{children:[A.jsx(D,{children:"View as"}),lc.map(Cu)]})}),e[3]=s):s=e[3],e[4]!==t||e[5]!==r?(i=A.jsxs(B,{"data-testid":"layout-select",value:t,onValueChange:r,children:[o,s]}),e[4]=t,e[5]=r,e[6]=i):i=e[6],i};function wu(e){const t=ku(e);return A.jsx(t,{className:"h-4 w-4"})}function ku(e){switch(e){case"vertical":return Nd;case"grid":return Cl;case"slides":return Bd;default:return P(e),L}}function Su(e){return R(e)}function Cu(e){return A.jsx(O,{value:e,children:A.jsxs("div",{className:"flex items-center gap-1.5 leading-5",children:[wu(e),A.jsx("span",{children:Su(e)})]})},e)}function Eu(){const e=_.c(7);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0];const[n,r]=function(e,t){const n=_.c(10);let r;n[0]!==t||n[1]!==e?(r=new U(e,t),n[0]=t,n[1]=e,n[2]=r):r=n[2];const o=r;let s;n[3]!==o?(s=()=>o.get(),n[3]=o,n[4]=s):s=n[4];const[i,a]=l.useState(s);let c;n[5]!==o?(c=e=>{a(e),o.set(e)},n[5]=o,n[6]=c):c=n[6];const d=c;let u;return n[7]!==d||n[8]!==i?(u=[i,d],n[7]=d,n[8]=i,n[9]=u):u=n[9],u}("marimo:commands",t);let o,s;return e[1]!==n||e[2]!==r?(o=e=>{const t=(o=[e,...n],[...new Set(o)]);var o;r(t.slice(0,3))},e[1]=n,e[2]=r,e[3]=o):o=e[3],e[4]!==n||e[5]!==o?(s={recentCommands:n,addRecentCommand:o},e[4]=n,e[5]=o,e[6]=s):s=e[6],s}function Nu(e){return void 0!==e.dropdown}function ju(e,t=""){return e.flatMap((e=>e.label?Nu(e)?ju(e.dropdown,`${t+e.label} > `):{...e,label:t+e.label}:[]))}const _u=e=>{const t=_.c(8),{children:n,layerTop:r}=e,o=void 0!==r&&r;let s;t[0]!==n?(s=m.Children.toArray(n),t[0]=n,t[1]=s):s=t[1];const[i,a]=s,l=`second-icon absolute ${o?"top-[-2px] left-[-2px]":"bottom-[-2px] right-[-2px]"} rounded-full`;let c,d;return t[2]!==a||t[3]!==l?(c=A.jsx("div",{className:l,children:a}),t[2]=a,t[3]=l,t[4]=c):c=t[4],t[5]!==i||t[6]!==c?(d=A.jsxs("div",{className:"multi-icon relative w-fit",children:[i,c]}),t[5]=i,t[6]=c,t[7]=d):d=t[7],d};function Iu(e){const t=_.c(3),n=Tu();let r;t[0]!==e||t[1]!==n?(r=()=>{void 0!==e&&n([e])},t[0]=e,t[1]=n,t[2]=r):r=t[2];return H(r)}function Au(){const e=_.c(2),t=Tu();let n;e[0]!==t?(n=()=>t(Y(q())),e[0]=t,e[1]=n):n=e[1];return H(n)}function Tu(){const e=_.c(2),{prepareForRun:t}=W();let n;e[0]!==t?(n=async e=>{var n;if(0===e.length)return;const{cellHandles:r,cellData:o}=q(),s=[];for(const i of e){const e=null==(n=r[i].current)?void 0:n.editorView;let a;e?("markdown"!==J(e)&&X(e),a=K(e)):a=o[i].code,s.push(a),t({cellId:i})}await Z({cellIds:e,codes:s}).catch(Mu)},e[0]=t,e[1]=n):n=e[1];return H(n)}function Mu(e){E.error(e)}const Du=Q(null),Ou=Q(!1),Ru=Q({chats:[],activeChatId:null}),Pu=Q((e=>{const t=e(Ru);return t.chats.find((e=>e.id===t.activeChatId))}),((e,t,n)=>{t(Ru,(e=>({...e,activeChatId:n})))})),Lu=e=>{const t=_.c(7);let n,r;t[0]!==e?(n=t=>{var n;(t.ctrlKey||t.metaKey)&&"z"===t.key&&(t.preventDefault(),t.stopPropagation(),null==(n=e.onClick)||n.call(e,t))},t[0]=e,t[1]=n):n=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r={capture:!0},t[2]=r):r=t[2],ee(window,"keydown",n,r);const o=e.children??"Undo";let s,i;return t[3]===Symbol.for("react.memo_cache_sentinel")?(s=A.jsx(ne,{className:"ml-2",shortcut:"cmd-z"}),t[3]=s):s=t[3],t[4]!==o||t[5]!==e?(i=A.jsxs(te,{"data-testid":"undo-button",size:"sm",variant:"outline",...e,children:[o," ",s]}),t[4]=o,t[5]=e,t[6]=i):i=t[6],i};function zu(){const e=_.c(3),{deleteCell:t,undoDeleteCell:n}=W();let r;return e[0]!==t||e[1]!==n?(r=e=>{if(re.get(oe))return;const{cellId:r}=e;t({cellId:r}),se({cellId:r}).catch((()=>{n()}));const{dismiss:o}=ie({title:"Cell deleted",description:"You can bring it back by clicking undo or through the command palette.",action:A.jsx(Lu,{"data-testid":"undo-delete-button",onClick:()=>{n(),s()}})}),s=o},e[0]=t,e[1]=n,e[2]=r):r=e[2],H(r)}function Fu(e,t,n,r=re){if(t in r.get(ae))return!1;const{cellData:o,cellIds:s}=r.get(le),i=new RegExp(`import[ \t]+${e}[ \t]+as[ \t]+${t}`,"g");for(const a of s.inOrderIds)if(i.test(o[a].code))return!1;return n(`import ${e} as ${t}`),!0}function Bu(e,t,n){return Fu("marimo","mo",(r=>{const o=ce.create();t({cellId:n??"__end__",before:!1,code:r,lastCodeRun:e?r:void 0,newCellId:o,autoFocus:!1}),e&&Z({cellIds:[o],codes:[r]})}))}function Uu(){const e=_.c(3),{splitCell:t,undoSplitCell:n}=W();let r;return e[0]!==t||e[1]!==n?(r=e=>{const r=de(e.cellId);if(!r)return;const o=K(r);t(e);const{dismiss:s}=ie({title:"Cell split",action:A.jsx(Lu,{"data-testid":"undo-split-button",size:"sm",variant:"outline",onClick:()=>{n({...e,snapshot:o}),i()},children:"Undo"})}),i=s},e[0]=t,e[1]=n,e[2]=r):r=e[2],H(r)}function $u(e){const t=_.c(48),{cell:n}=e,{createNewCell:r,updateCellConfig:o,updateCellName:s,moveCell:i,sendToTop:a,sendToBottom:l,addColumnBreakpoint:c,clearCellOutput:d}=W(),u=Uu(),h=Iu(null==n?void 0:n.cellId),f=!ue(oe),p=zu(),{openModal:m}=he(),g=fe(Du),y=ue(pe),b=ue(me),x=ue(ge),v=ue(ye);if(!n||x){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0],e}const{cellId:w,config:k,getEditorView:S,name:C,hasOutput:E,hasConsoleOutput:N,status:j}=n;let I;t[1]!==w||t[2]!==k.disabled||t[3]!==o?(I=async()=>{const e={disabled:!k.disabled};await Oe({configs:{[w]:e}}),o({cellId:w,config:e})},t[1]=w,t[2]=k.disabled,t[3]=o,t[4]=I):I=t[4];const T=I;let M;t[5]!==w||t[6]!==k.hide_code||t[7]!==S||t[8]!==o?(M=async()=>{const e={hide_code:!k.hide_code};await Oe({configs:{[w]:e}}),o({cellId:w,config:e});const t=S();t&&(e.hide_code?t.contentDOM.blur():t.focus())},t[5]=w,t[6]=k.hide_code,t[7]=S,t[8]=o,t[9]=M):M=t[9];const D=M;let O,R,P,L,z;if(t[10]===Symbol.for("react.memo_cache_sentinel")?(O=A.jsx(ru,{size:13,strokeWidth:1.5}),t[10]=O):O=t[10],t[11]!==w||t[12]!==C||t[13]!==m||t[14]!==s?(R=()=>{m(A.jsxs(Re,{children:[A.jsx(Pe,{children:A.jsx(Le,{children:"Rename cell"})}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(ze,{htmlFor:"cell-name",children:"Cell name"}),A.jsx(dc,{placeholder:"cell name",value:C,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),m(null))},onChange:e=>s({cellId:w,name:e})})]})]}))},t[11]=w,t[12]=C,t[13]=m,t[14]=s,t[15]=R):R=t[15],t[16]!==w||t[17]!==s?(P=e=>s({cellId:w,name:e}),t[16]=w,t[17]=s,t[18]=P):P=t[18],t[19]!==C||t[20]!==P?(L=A.jsx(dc,{placeholder:"cell name",value:C,onChange:P}),t[19]=C,t[20]=P,t[21]=L):L=t[21],t[22]!==c||t[23]!==y||t[24]!==v||t[25]!==b||t[26]!==f||t[27]!==w||t[28]!==d||t[29]!==k.disabled||t[30]!==k.hide_code||t[31]!==r||t[32]!==p||t[33]!==S||t[34]!==N||t[35]!==E||t[36]!==i||t[37]!==h||t[38]!==l||t[39]!==a||t[40]!==g||t[41]!==u||t[42]!==j||t[43]!==R||t[44]!==L||t[45]!==T||t[46]!==D){z=[[{icon:O,label:"Name",disableClick:!0,handle:Gu,handleHeadless:R,rightElement:L},{icon:A.jsx(Fd,{size:13,strokeWidth:1.5}),label:"Run cell",hotkey:"cell.run",hidden:"running"===j||"queued"===j||"disabled-transitively"===j||k.disabled,handle:()=>h()},{icon:A.jsx(be,{size:13,strokeWidth:1.5}),label:"AI completion",hidden:!y,handle:()=>{g((e=>(null==e?void 0:e.cellId)===w?null:{cellId:w}))},hotkey:"cell.aiCompletion"},{icon:A.jsx(Wd,{size:13,strokeWidth:1.5}),label:"Split cell",hotkey:"cell.splitCell",handle:()=>u({cellId:w})},{icon:A.jsx(cc,{size:13,strokeWidth:1.5}),label:"Export output as PNG",hidden:!E,handle:()=>function(e){const t=document.getElementById($.create(e));t&&(t.classList.add("printing-output"),V(t,"result.png").finally((()=>{t.classList.remove("printing-output")})))}(w)},{icon:A.jsx(ve,{size:13,strokeWidth:1.5}),label:"Format cell",hotkey:"cell.format",handle:()=>{const e=S();e&&xe({[w]:e})}},{icon:k.hide_code?A.jsx(we,{size:13,strokeWidth:1.5}):A.jsx(ke,{size:13,strokeWidth:1.5}),label:k.hide_code?"Show code":"Hide code",handle:D,hotkey:"cell.hideCode"},{icon:k.disabled?A.jsx(cu,{size:13,strokeWidth:1.5}):A.jsx(du,{size:13,strokeWidth:1.5}),label:"Reactive execution",rightElement:A.jsx(Se,{"data-testid":"cell-disable-switch",checked:!k.disabled,size:"sm",onCheckedChange:T}),handle:T},{icon:A.jsx(Ce,{size:13,strokeWidth:1.5}),label:"Clear output",hidden:!(E||N),handle:()=>{d({cellId:w})}}],[{icon:A.jsx(El,{}),label:"Convert to Markdown",hotkey:"cell.viewAsMarkdown",handle:()=>{const e=S();e&&(Bu(b,r),Ee(e,"markdown",{keepCodeAsIs:!0}))}},{icon:A.jsx(Ne,{size:13,strokeWidth:1.5}),label:"Convert to SQL",handle:()=>{const e=S();e&&(Bu(b,r),Ee(e,"sql",{keepCodeAsIs:!0}))}},{icon:A.jsx(Nl,{}),label:"Toggle as Python",handle:()=>{const e=S();e&&(Bu(b,r),je(e,"python",{force:!0}))}}],[{icon:A.jsxs(_u,{children:[A.jsx(od,{size:13,strokeWidth:1.5}),A.jsx(_e,{size:8,strokeWidth:2})]}),label:"Create cell above",hotkey:"cell.createAbove",handle:()=>r({cellId:w,before:!0})},{icon:A.jsxs(_u,{children:[A.jsx(od,{size:13,strokeWidth:1.5}),A.jsx(Ie,{size:8,strokeWidth:2})]}),label:"Create cell below",hotkey:"cell.createBelow",handle:()=>r({cellId:w,before:!1})},{icon:A.jsx(_e,{size:13,strokeWidth:1.5}),label:"Move cell up",hotkey:"cell.moveUp",handle:()=>i({cellId:w,before:!0})},{icon:A.jsx(Ie,{size:13,strokeWidth:1.5}),label:"Move cell down",hotkey:"cell.moveDown",handle:()=>i({cellId:w,before:!1})},{icon:A.jsx(Ae,{size:13,strokeWidth:1.5}),label:"Move cell left",hotkey:"cell.moveLeft",handle:()=>i({cellId:w,direction:"left"}),hidden:"columns"!==v},{icon:A.jsx(Te,{size:13,strokeWidth:1.5}),label:"Move cell right",hotkey:"cell.moveRight",handle:()=>i({cellId:w,direction:"right"}),hidden:"columns"!==v},{icon:A.jsx(td,{size:13,strokeWidth:1.5}),label:"Send to top",hotkey:"cell.sendToTop",handle:()=>a({cellId:w})},{icon:A.jsx(ed,{size:13,strokeWidth:1.5}),label:"Send to bottom",hotkey:"cell.sendToBottom",handle:()=>l({cellId:w})},{icon:A.jsx(Me,{size:13,strokeWidth:1.5}),label:"Break into new column",hotkey:"cell.addColumnBreakpoint",hidden:"columns"!==v,handle:()=>c({cellId:w})}],[{label:"Delete",hidden:!f,variant:"danger",icon:A.jsx(De,{size:13,strokeWidth:1.5}),handle:()=>{p({cellId:w})}}]].map(Hu).filter(Vu),t[22]=c,t[23]=y,t[24]=v,t[25]=b,t[26]=f,t[27]=w,t[28]=d,t[29]=k.disabled,t[30]=k.hide_code,t[31]=r,t[32]=p,t[33]=S,t[34]=N,t[35]=E,t[36]=i,t[37]=h,t[38]=l,t[39]=a,t[40]=g,t[41]=u,t[42]=j,t[43]=R,t[44]=L,t[45]=T,t[46]=D,t[47]=z}else z=t[47];return z}function Vu(e){return e.length>0}function Hu(e){return e.filter(Wu)}function Wu(e){return!e.hidden}function Gu(e){null==e||e.stopPropagation(),null==e||e.preventDefault()}const qu=Q(null);function Yu(){return ue(qu)}const Ju=Q((e=>{const t=e(qu);return t?t===Fe?null:Xu(t,e(le)):null}));function Xu(e,t){var n;const{cellData:r,cellHandles:o,cellRuntime:s}=t,i=r[e],a=s[e],l=null==(n=o[e])?void 0:n.current;if(!i||!l)return null;return{cellId:e,name:i.name,config:i.config,status:a?a.status:"idle",getEditorView:()=>l.editorView,hasOutput:null!=(null==a?void 0:a.output),hasConsoleOutput:null!=(null==a?void 0:a.consoleOutputs)}}function Ku(e){return!e.hidden}const Zu=Q(!1),Qu=()=>{const e=_.c(32),[t,n]=He(Zu),r=_l(),o=ue(Ju),s=ue(We);let i;e[0]!==o?(i={cell:o},e[0]=o,e[1]=i):i=e[1];let a=$u(i).flat();a=ju(a);const l=function(){const e=_.c(46),{theme:t}=Be(),[n,r]=Ue(),[o,s]=$e();let i;e[0]!==r?(i=async e=>{await j({config:e}).then((()=>{r(e)}))},e[0]=r,e[1]=i):i=e[1];const a=i;let l;e[2]!==s?(l=async e=>{await Ve({config:e}).then((()=>{s(e)}))},e[2]=s,e[3]=l):l=e[3];const c=l;let d,u;if(e[4]!==o||e[5]!==c){let t;e[7]!==o.width?(t=e=>e!==o.width,e[7]=o.width,e[8]=t):t=e[8],d=jl().filter(t).map((e=>({label:`App config > Set width=${e}`,handle:()=>{c({...o,width:e})}}))),e[4]=o,e[5]=c,e[6]=d}else d=e[6];e[9]!==n||e[10]!==a||e[11]!==t?(u={label:"Config > Toggle dark mode",handle:()=>{a({...n,display:{...n.display,theme:"dark"===t?"light":"dark"}})}},e[9]=n,e[10]=a,e[11]=t,e[12]=u):u=e[12];const h="vim"===n.keymap.preset;let f,p;e[13]!==n||e[14]!==a?(f=()=>{a({...n,keymap:{...n.keymap,preset:"vim"}})},e[13]=n,e[14]=a,e[15]=f):f=e[15],e[16]!==h||e[17]!==f?(p={label:"Config > Switch keymap to  VIM",hidden:h,handle:f},e[16]=h,e[17]=f,e[18]=p):p=e[18];const m="default"===n.keymap.preset;let g,y,b;e[19]!==n||e[20]!==a?(g=()=>{a({...n,keymap:{...n.keymap,preset:"default"}})},e[19]=n,e[20]=a,e[21]=g):g=e[21],e[22]!==m||e[23]!==g?(y={label:"Config > Switch keymap to default (current: VIM)",hidden:m,handle:g},e[22]=m,e[23]=g,e[24]=y):y=e[24],e[25]!==n||e[26]!==a?(b=()=>{a({...n,completion:{...n.completion,copilot:!1}})},e[25]=n,e[26]=a,e[27]=b):b=e[27];const x="github"!==n.completion.copilot;let v,w;e[28]!==b||e[29]!==x?(v={label:"Config > Disable GitHub Copilot",handle:b,hidden:x},e[28]=b,e[29]=x,e[30]=v):v=e[30],e[31]!==n||e[32]!==a?(w=()=>{a({...n,completion:{...n.completion,copilot:"github"}})},e[31]=n,e[32]=a,e[33]=w):w=e[33];const k="github"===n.completion.copilot;let S,C;e[34]!==w||e[35]!==k?(S={label:"Config > Enable GitHub Copilot",handle:w,hidden:k},e[34]=w,e[35]=k,e[36]=S):S=e[36],e[37]!==v||e[38]!==S||e[39]!==d||e[40]!==u||e[41]!==p||e[42]!==y?(C=[...d,u,p,y,v,S],e[37]=v,e[38]=S,e[39]=d,e[40]=u,e[41]=p,e[42]=y,e[43]=C):C=e[43];const E=C;let N;return e[44]!==E?(N=E.filter(Ku),e[44]=E,e[45]=N):N=e[45],N}();let c=Lh();c=[...ju(c),...ju(l)];const d=c.filter(eh),u=Ge.keyBy(d,th),{recentCommands:h,addRecentCommand:f}=Eu(),p=new Set(h);let m,g;e[2]!==s||e[3]!==n?(m=e=>{Ze(s.getHotkey("global.commandPalette").key)(e)&&(e.preventDefault(),n(nh))},e[2]=s,e[3]=n,e[4]=m):m=e[4],ee(document,"keydown",m),e[5]!==f||e[6]!==s||e[7]!==r||e[8]!==n?(g=(e,t)=>{const o=r[e];if(!o)return null;const i=s.getHotkey(e);return A.jsxs(Qe,{disabled:t.disabled,onSelect:()=>{f(e),n(!1),requestAnimationFrame((()=>{o()}))},value:i.name,children:[A.jsxs("span",{children:[i.name,t.tooltip&&A.jsx("span",{className:"ml-2",children:t.tooltip})]}),A.jsx(et,{children:A.jsx(tt,{shortcut:i.key})})]},e)},e[5]=f,e[6]=s,e[7]=r,e[8]=n,e[9]=g):g=e[9];const y=g;let b;e[10]!==f||e[11]!==s||e[12]!==n?(b=(e,t,r,o)=>{const i=void 0===r?{}:r;return A.jsxs(Qe,{disabled:i.disabled,onSelect:()=>{f(e),n(!1),requestAnimationFrame((()=>{t()}))},value:e,children:[A.jsxs("span",{children:[e,i.tooltip&&A.jsxs("span",{className:"ml-2",children:["(",i.tooltip,")"]})]}),o&&A.jsx(et,{children:A.jsx(tt,{shortcut:s.getHotkey(o).key})})]},e)},e[10]=f,e[11]=s,e[12]=n,e[13]=b):b=e[13];const x=b,v=Ke;let w;e[14]===Symbol.for("react.memo_cache_sentinel")?(w=A.jsx(nt,{placeholder:"Type to search..."}),e[14]=w):w=e[14];const k=Xe;let S;e[15]===Symbol.for("react.memo_cache_sentinel")?(S=A.jsx(rt,{children:"No results found."}),e[15]=S):S=e[15];const C=h.length>0&&A.jsxs(A.Fragment,{children:[A.jsx(qe,{heading:"Recently Used",children:h.map((e=>{const t=u[e];return Ye(e)?y(e,{disabled:null==t?void 0:t.disabled,tooltip:null==t?void 0:t.tooltip}):t&&!Nu(t)?x(t.label,t.handleHeadless||t.handle,{disabled:t.disabled,tooltip:t.tooltip}):null}))}),A.jsx(Je,{})]}),E=qe,N=s.iterate().map((e=>{if(p.has(e))return null;const t=u[e];return y(e,{disabled:null==t?void 0:t.disabled,tooltip:null==t?void 0:t.tooltip})})),I=d.map((e=>p.has(e.label)?null:x(e.label,e.handleHeadless||e.handle,{disabled:e.disabled,tooltip:e.tooltip}))),T=a.map((e=>p.has(e.label)?null:x(`Cell > ${e.label}`,e.handleHeadless||e.handle,{disabled:e.disabled,tooltip:e.tooltip})));let M,D,O;return e[16]!==E||e[17]!==T||e[18]!==N||e[19]!==I?(M=A.jsxs(E,{heading:"Commands",children:[N,I,T]}),e[16]=E,e[17]=T,e[18]=N,e[19]=I,e[20]=M):M=e[20],e[21]!==k||e[22]!==M||e[23]!==S||e[24]!==C?(D=A.jsxs(k,{children:[S,C,M]}),e[21]=k,e[22]=M,e[23]=S,e[24]=C,e[25]=D):D=e[25],e[26]!==v||e[27]!==t||e[28]!==n||e[29]!==D||e[30]!==w?(O=A.jsxs(v,{open:t,onOpenChange:n,children:[w,D]}),e[26]=v,e[27]=t,e[28]=n,e[29]=D,e[30]=w,e[31]=O):O=e[31],O};function eh(e){return!e.hotkey}function th(e){return e.label}function nh(e){return!e}const rh="https://static.marimo.app",oh=e=>{const t=_.c(24),{onClose:n}=e,[r,o]=l.useState("");let s;s=Math.random().toString(36).slice(2,6);const i=`${r}-${s}`,a=`${rh}/static/${i}`;let c,d,u,h,f,p,m,g,y,b,x;return t[0]!==n||t[1]!==i?(c=async e=>{e.preventDefault(),n();const t=await ot({download:!1,includeCode:!0,files:uc.INSTANCE.filenames()}),r=ie({title:"Uploading static notebook...",description:"Please wait."});await fetch(`${rh}/api/static`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html:t,path:i})}).catch((()=>{r.dismiss(),ie({title:"Error uploading static page",description:A.jsxs("div",{children:["Please try again later. If the problem persists, please file a bug report on"," ",A.jsx("a",{href:st.issuesPage,target:"_blank",rel:"noreferrer",className:"underline",children:"GitHub"}),"."]})})})),r.dismiss(),ie({title:"Static page uploaded!",description:A.jsxs("div",{children:["The URL has been copied to your clipboard.",A.jsx("br",{}),"You can share it with anyone."]})})},t[0]=n,t[1]=i,t[2]=c):c=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx(Le,{children:"Share static notebook"}),t[3]=d):d=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsxs(Pe,{children:[d,A.jsxs(it,{children:["You can publish a static, non-interactive version of this notebook to the public web. We will create a link for you that lives on"," ",A.jsx("a",{href:rh,target:"_blank",rel:"noreferrer",children:rh}),"."]})]}),t[4]=u):u=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{const t=e.target.value.toLowerCase().replaceAll(/\s/g,"-").replaceAll(/[^\da-z-]/g,"");o(t)},t[5]=h):h=t[5],t[6]!==r?(f=A.jsx(at,{"data-testid":"slug-input",id:"slug",autoFocus:!0,value:r,placeholder:"Notebook slug",onChange:h,required:!0,autoComplete:"off"}),t[6]=r,t[7]=f):f=t[7],t[8]!==a?(p=A.jsxs("div",{className:"font-semibold text-sm text-muted-foreground gap-2 flex flex-col",children:["Anyone will be able to access your notebook at this URL:",A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(sh,{text:a}),A.jsx("span",{className:"text-primary",children:a})]})]}),t[8]=a,t[9]=p):p=t[9],t[10]!==f||t[11]!==p?(m=A.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[f,p]}),t[10]=f,t[11]=p,t[12]=m):m=t[12],t[13]!==n?(g=A.jsx(te,{"data-testid":"cancel-share-static-notebook-button",variant:"secondary",onClick:n,children:"Cancel"}),t[13]=n,t[14]=g):g=t[14],t[15]!==a?(y=A.jsx(te,{"data-testid":"share-static-notebook-button","aria-label":"Save",variant:"default",type:"submit",onClick:async()=>{await lt(a)},children:"Create"}),t[15]=a,t[16]=y):y=t[16],t[17]!==y||t[18]!==g?(b=A.jsxs(ct,{children:[g,y]}),t[17]=y,t[18]=g,t[19]=b):b=t[19],t[20]!==b||t[21]!==c||t[22]!==m?(x=A.jsx(Re,{className:"w-fit",children:A.jsxs("form",{onSubmit:c,children:[u,m,b]})}),t[20]=b,t[21]=c,t[22]=m,t[23]=x):x=t[23],x},sh=e=>{const t=_.c(8),[n,r]=m.useState(!1);let o;t[0]!==e.text?(o=dt.stopPropagation((async t=>{t.preventDefault(),await lt(e.text),r(!0),setTimeout((()=>r(!1)),2e3)})),t[0]=e.text,t[1]=o):o=t[1];const s=o;let i,a,l;return t[2]===Symbol.for("react.memo_cache_sentinel")?(i=A.jsx(ut,{size:14,strokeWidth:1.5}),t[2]=i):i=t[2],t[3]!==s?(a=A.jsx(te,{"data-testid":"copy-static-notebook-url-button",onClick:s,size:"xs",variant:"secondary",children:i}),t[3]=s,t[4]=a):a=t[4],t[5]!==n||t[6]!==a?(l=A.jsx(ht,{content:"Copied!",open:n,children:a}),t[5]=n,t[6]=a,t[7]=l):l=t[7],l};function ih(){const e=_.c(3),{openConfirm:t}=he(),n=fe(ft);let r;return e[0]!==t||e[1]!==n?(r=()=>{t({title:"Restart Kernel",description:"This will restart the Python kernel. You'll lose all data that's in memory. You will also lose any unsaved changes, so make sure to save your work before restarting.",variant:"destructive",confirmAction:A.jsx(pt,{onClick:async()=>{n({state:mt.CLOSING}),await gt(),yt()},"aria-label":"Confirm Restart",children:"Restart"})})},e[0]=t,e[1]=n,e[2]=r):r=e[2],r}const ah=new xt("marimo:sidebar",vt.object({selectedPanel:vt.string().optional().transform((e=>e)),isSidebarOpen:vt.boolean(),isTerminalOpen:vt.boolean()}),(function(){return{selectedPanel:"variables",isSidebarOpen:!1,isTerminalOpen:!1}}));const{valueAtom:lh,useActions:ch}=bt((()=>ah.get()),{openApplication:(e,t)=>({...e,selectedPanel:t,isSidebarOpen:!e.isSidebarOpen||e.selectedPanel!==t}),toggleSidebarPanel:e=>({...e,isSidebarOpen:!e.isSidebarOpen}),setIsSidebarOpen:(e,t)=>({...e,isSidebarOpen:t}),toggleTerminal:e=>({...e,isTerminalOpen:!e.isTerminalOpen}),setIsTerminalOpen:(e,t)=>({...e,isTerminalOpen:t})},[(e,t)=>ah.set(t)]),dh=()=>{const e=_.c(2),t=ue(lh);if(t.isSidebarOpen)return t;let n;return e[0]!==t?(n={...t,selectedPanel:void 0},e[0]=t,e[1]=n):n=e[1],n};function uh(){return ch()}const hh=[{type:"files",Icon:xd,tooltip:"View files",position:"sidebar"},{type:"variables",Icon:wt,tooltip:"Explore variables",position:"sidebar"},{type:"datasources",Icon:Ne,tooltip:"Explore data sources",position:"sidebar"},{type:"dependencies",Icon:Ad,tooltip:"Explore dependencies",position:"sidebar"},{type:"packages",Icon:Qc,tooltip:"Manage packages",position:"sidebar"},{type:"outline",Icon:Gd,tooltip:"View outline",position:"sidebar"},{type:"chat",Icon:kt,tooltip:"Chat with AI",position:"sidebar"},{type:"documentation",Icon:ou,tooltip:"View live docs",position:"sidebar"},{type:"logs",Icon:St,tooltip:"Notebook logs",position:"sidebar"},{type:"tracing",Icon:Il,tooltip:"Tracing",position:"sidebar"},{type:"snippets",Icon:Jd,tooltip:"Snippets",position:"sidebar"},{type:"scratchpad",Icon:Td,hidden:!xu("scratchpad"),tooltip:"Scratchpad",position:"sidebar"},{type:"errors",Icon:Ce,tooltip:"View errors",position:"footer"}];function fh(){const e=_.c(2),t=fe(Ct);let n;e[0]!==t?(n=()=>{const e=document.getElementsByClassName("output-area"),n=window.innerHeight||document.documentElement.clientHeight;let r;r=null;for(const t of Array.from(e)){const e=t.getBoundingClientRect();if(e.top>=0&&e.top<=n||e.bottom>=0&&e.bottom<=n){r=Et.parse(t.parentNode.id);break}}t((e=>({mode:Nt(e.mode),cellAnchor:r}))),requestAnimationFrame((()=>{var e;null!==r&&(null==(e=document.getElementById(Et.create(r)))||e.scrollIntoView())}))},e[0]=t,e[1]=n):n=e[1];return n}function ph(){return vt.string().optional().describe(At.of({label:"Password",inputType:"password",placeholder:"password"}))}function mh(){return vt.string().nonempty().describe(At.of({label:"Host",placeholder:"localhost"}))}function gh(){return vt.string().describe(At.of({label:"Database",placeholder:"db name"}))}function yh(){return vt.string().nonempty().describe(At.of({label:"Username",placeholder:"username"}))}function bh(e){return vt.coerce.string().default(e.toString()).describe(At.of({label:"Port",inputType:"number",placeholder:e.toString()})).transform(Number).refine((e=>e>=0&&e<=65535),{message:"Port must be between 0 and 65535"})}const xh=vt.object({type:vt.literal("postgres"),host:mh(),port:bh(5432),database:gh(),username:yh(),password:ph(),ssl:vt.boolean().default(!1).describe(At.of({label:"Use SSL"}))}).describe(At.of({direction:"two-columns"})),vh=vt.object({type:vt.literal("mysql"),host:mh(),port:bh(3306),database:gh(),username:yh(),password:ph(),ssl:vt.boolean().default(!1).describe(At.of({label:"Use SSL"}))}).describe(At.of({direction:"two-columns"})),wh=vt.object({type:vt.literal("sqlite"),database:gh().describe(At.of({label:"Database Path"}))}).describe(At.of({direction:"two-columns"})),kh=vt.object({type:vt.literal("duckdb"),database:gh().describe(At.of({label:"Database Path"})),read_only:vt.boolean().default(!1).describe(At.of({label:"Read Only"}))}).describe(At.of({direction:"two-columns"})),Sh=vt.object({type:vt.literal("snowflake"),account:vt.string().nonempty().describe(At.of({label:"Account"})),warehouse:vt.string().optional().describe(At.of({label:"Warehouse"})),database:gh(),schema:vt.string().optional().describe(At.of({label:"Schema"})),username:yh(),password:ph(),role:vt.string().optional().describe(At.of({label:"Role"}))}).describe(At.of({direction:"two-columns"})),Ch=vt.object({type:vt.literal("bigquery"),project:vt.string().nonempty().describe(At.of({label:"Project ID"})),dataset:vt.string().nonempty().describe(At.of({label:"Dataset"})),credentials_json:vt.string().describe(At.of({label:"Credentials JSON",inputType:"textarea"}))}).describe(At.of({direction:"two-columns"})),Eh=vt.discriminatedUnion("type",[xh,vh,wh,kh,Sh,Ch]),Nh={sqlmodel:"SQLModel",sqlalchemy:"SQLAlchemy"};const jh=Mt("marimo:preferred-connection","sqlalchemy"),_h=[{name:"PostgreSQL",schema:xh,color:"#336791",logo:"postgres"},{name:"MySQL",schema:vh,color:"#00758F",logo:"mysql"},{name:"SQLite",schema:wh,color:"#003B57",logo:"sqlite"},{name:"DuckDB",schema:kh,color:"#FFD700",logo:"duckdb"},{name:"Snowflake",schema:Sh,color:"#29B5E8",logo:"snowflake"},{name:"BigQuery",schema:Ch,color:"#4285F4",logo:"bigquery"}],Ih=e=>{const t=_.c(4),{onSelect:n}=e;let r,o;return t[0]!==n?(r=_h.map((e=>{const{name:t,schema:r,color:o,logo:s}=e;return A.jsxs("button",{type:"button",className:"h-28 flex flex-col items-center justify-center gap-3 transition-all hover:scale-105 hover:brightness-110 rounded shadow-smSolid hover:shadow-mdSolid",style:{backgroundColor:o},onClick:()=>n(r),children:[A.jsx(Dt,{name:s,className:"w-10 h-10 text-white brightness-0 invert dark:invert"}),A.jsx("span",{className:"text-white font-medium text-lg",children:t})]},t)})),t[0]=n,t[1]=r):r=t[1],t[2]!==r?(o=A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:r}),t[2]=r,t[3]=o):o=t[3],o},Ah=e=>{const t=_.c(35),{schema:n,onSubmit:r,onBack:o}=e;let s,i,a;t[0]!==n?(s=Ot(n),t[0]=n,t[1]=s):s=t[1],t[2]!==n?(i=Rt(n),t[2]=n,t[3]=i):i=t[3],t[4]!==s||t[5]!==i?(a={defaultValues:s,resolver:i,reValidateMode:"onChange"},t[4]=s,t[5]=i,t[6]=a):a=t[6];const l=Pt(a),[c,d]=He(jh);let u,h,f,p;t[7]!==l||t[8]!==r?(u=l.handleSubmit(r),t[7]=l,t[8]=r,t[9]=u):u=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(h=A.jsx(Lt,{}),t[10]=h):h=t[10],t[11]!==l||t[12]!==n?(f=A.jsx(zt,{schema:n,form:l,renderers:void 0,children:h}),t[11]=l,t[12]=n,t[13]=f):f=t[13],t[14]!==o?(p=A.jsx(te,{type:"button",variant:"outline",onClick:o,children:"Back"}),t[14]=o,t[15]=p):p=t[15];const m=!l.formState.isValid;let g,y,b,x,v,w,k,S;return t[16]!==m?(g=A.jsx(te,{type:"submit",disabled:m,children:"Add"}),t[16]=m,t[17]=g):g=t[17],t[18]!==p||t[19]!==g?(y=A.jsxs("div",{className:"flex gap-2",children:[p,g]}),t[18]=p,t[19]=g,t[20]=y):y=t[20],t[21]!==d?(b=e=>d(e),t[21]=d,t[22]=b):b=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(x=A.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[A.jsx(z,{children:A.jsx(F,{placeholder:"Select a library"})}),A.jsx("span",{className:"text-xs text-muted-foreground",children:"Preferred connection library"})]}),t[23]=x):x=t[23],t[24]===Symbol.for("react.memo_cache_sentinel")?(v=A.jsx(T,{children:A.jsx(M,{children:Object.entries(Nh).map(Oh)})}),t[24]=v):v=t[24],t[25]!==c||t[26]!==b?(w=A.jsx("div",{children:A.jsxs(B,{value:c,onValueChange:b,children:[x,v]})}),t[25]=c,t[26]=b,t[27]=w):w=t[27],t[28]!==y||t[29]!==w?(k=A.jsxs("div",{className:"flex gap-2 justify-between",children:[y,w]}),t[28]=y,t[29]=w,t[30]=k):k=t[30],t[31]!==k||t[32]!==u||t[33]!==f?(S=A.jsxs("form",{onSubmit:u,className:"space-y-4",children:[f,k]}),t[31]=k,t[32]=u,t[33]=f,t[34]=S):S=t[34],S},Th=e=>{const t=_.c(5),{onSubmit:n}=e,[r,o]=l.useState(null);if(!r){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(Ih,{onSelect:o}),t[0]=e):e=t[0],e}let s,i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>o(null),t[1]=s):s=t[1],t[2]!==n||t[3]!==r?(i=A.jsx(Ah,{schema:r,onSubmit:n,onBack:s}),t[2]=n,t[3]=r,t[4]=i):i=t[4],i},Mh=e=>{const t=_.c(6),{children:n}=e,[r,o]=l.useState(!1);let s,i,a;return t[0]!==n?(s=A.jsx(Ft,{asChild:!0,children:n}),t[0]=n,t[1]=s):s=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(i=A.jsx(Dh,{onClose:()=>o(!1)}),t[2]=i):i=t[2],t[3]!==r||t[4]!==s?(a=A.jsxs(Bt,{open:r,onOpenChange:o,children:[s,i]}),t[3]=r,t[4]=s,t[5]=a):a=t[5],a},Dh=e=>{const t=_.c(11),{onClose:n}=e,{createNewCell:r}=W(),o=Yu(),s=ue(jh);let i;t[0]!==r||t[1]!==o?(i=e=>{r({code:e,before:!1,cellId:o??"__end__",skipIfCodeExists:!0,autoFocus:!0})},t[0]=r,t[1]=o,t[2]=i):i=t[2];const a=i;let l;t[3]!==a||t[4]!==n||t[5]!==s?(l=e=>{a(function(e,t){if(!(t in Nh))throw new Error(`Unsupported library: ${t}`);Eh.parse(e);const n="sqlmodel"===t?["from sqlmodel import create_engine","import os"]:["from sqlalchemy import create_engine","import os"];let r="";switch(e.type){case"postgres":r=`\npassword = os.environ.get("POSTGRES_PASSWORD", "${e.password}")\nDATABASE_URL = f"postgresql://${e.username}:{password}@${e.host}:${e.port}/${e.database}"\nengine = create_engine(DATABASE_URL${e.ssl?", connect_args={'sslmode': 'require'}":""})\n`;break;case"mysql":r=`\npassword = os.environ.get("MYSQL_PASSWORD", "${e.password}")\nDATABASE_URL = f"mysql+pymysql://${e.username}:{password}@${e.host}:${e.port}/${e.database}"\nengine = create_engine(DATABASE_URL${e.ssl?", connect_args={'ssl': {'ssl-mode': 'preferred'}}":""})\n`;break;case"sqlite":r=`\nDATABASE_URL = "sqlite:///${e.database}"\nengine = create_engine(DATABASE_URL)\n`;break;case"snowflake":{n.push("from snowflake.sqlalchemy import URL","import sqlalchemy as sa");const t={account:e.account,user:e.username,password:`os.environ.get("SNOWFLAKE_PASSWORD", "${e.password}")`,database:e.database,warehouse:e.warehouse,schema:e.schema,role:e.role},o=Object.entries(t).filter((([,e])=>e)).map((([e,t])=>`        ${e}=${t}`)).join(",\n");r=`\npassword = os.environ.get("SNOWFLAKE_PASSWORD", "${e.password}")\nengine = sa.create_engine(\n    URL(\n${o}\n    )\n)\n`;break}case"bigquery":n.push("import json"),r=`\ncredentials = json.loads("""${e.credentials_json}""")\nengine = create_engine(f"bigquery://${e.project}/${e.dataset}", credentials_info=credentials)\n`;break;case"duckdb":r=`\nengine = create_engine("duckdb:${e.database||":memory:"}"${e.read_only?", read_only=True":""})\n`;break;default:Tt(e)}return`${n.join("\n")}\n${r.trim()}`}(e,s)),n()},t[3]=a,t[4]=n,t[5]=s,t[6]=l):l=t[6];const c=l;let d,u,h;return t[7]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx(Le,{children:"Add Database Connection"}),t[7]=d):d=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsxs(Pe,{className:"mb-4",children:[d,A.jsxs(it,{children:["Connect to your database to query data directly from your notebook. Learn more about how to connect to your database in our"," ",A.jsx("a",{href:"http://docs.marimo.io/guides/working_with_data/sql/#connecting-to-a-custom-database",target:"_blank",rel:"noreferrer",className:"text-link hover:underline",children:"docs."})]})]}),t[8]=u):u=t[8],t[9]!==c?(h=A.jsxs(Re,{children:[u,A.jsx(Th,{onSubmit:e=>{c(e)}})]}),t[9]=c,t[10]=h):h=t[10],h};function Oh(e){const[t,n]=e;return A.jsx(O,{value:t,children:n},t)}const Rh=()=>{const e=_.c(2),{updateCellConfig:t}=W();let n;return e[0]!==t?(n=async()=>{const e=new Ut,n=q(),r=n.cellIds.inOrderIds,o={};for(const t of r){if(void 0===n.cellData[t])continue;const{code:r,config:s}=n.cellData[t];s.hide_code||e.isSupported(r)&&(o[t]={hide_code:!0})}const s=Ge.entries(o);if(0!==s.length){await Oe({configs:o});for(const[e,n]of s)t({cellId:e,config:n})}},e[0]=t,e[1]=n):n=e[1],n},Ph=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()};function Lh(){const e=_.c(139),t=$t(),{openModal:n,closeModal:r}=he(),{openApplication:o}=uh(),{selectedPanel:s}=dh(),[i]=He(Ct),a=ue(ge),l=Rh(),{updateCellConfig:c,undoDeleteCell:d,clearAllCellOutputs:u,upsertSetupCell:h}=W(),f=ih(),p=Au(),m=function(e){const t=_.c(4),{openPrompt:n,closeModal:r}=he();let o;return t[0]!==r||t[1]!==n||t[2]!==e?(o=()=>{if(!e)return null;const t=jt.guessDeliminator(e),o=_t.basename(e);n({title:"Copy notebook",description:"Enter a new filename for the notebook copy.",defaultValue:`_${o}`,confirmText:"Copy notebook",spellCheck:!1,onConfirm:n=>{const o=t.join(_t.dirname(e),n);It({source:e,destination:o}).then((()=>{r(),ie({title:"Notebook copied",description:"A copy of the notebook has been created."}),window.open(`/?file=${o}`,"_blank")}))}})},t[0]=r,t[1]=n,t[2]=e,t[3]=o):o=t[3],o}(t),g=fe(Zu),y=fe(Al),b=fe(Tl),x=ue(Vt),v=ue(Ht),w=ue(Wt),{selectedLayout:k}=ic(),{setLayoutView:S}=ac(),C=fh(),E=sf;let N,j,T,M,D,O,P,L,z,F,B,U,$;e[0]===Symbol.for("react.memo_cache_sentinel")?(N=A.jsx(qd,{size:14,strokeWidth:1.5}),e[0]=N):N=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(j=A.jsx(Xt,{size:14,strokeWidth:1.5}),e[1]=j):j=e[1],e[2]!==r||e[3]!==n?(T={icon:j,label:"Publish HTML to web",handle:async()=>{n(A.jsx(oh,{onClose:r}))}},e[2]=r,e[3]=n,e[4]=T):T=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(M={icon:A.jsx(Ml,{size:14,strokeWidth:1.5}),label:"Create WebAssembly link",handle:of},e[5]=M):M=e[5],e[6]!==T?(D={icon:N,label:"Share",handle:Ph,dropdown:[T,M]},e[6]=T,e[7]=D):D=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(O=A.jsx(Kt,{size:14,strokeWidth:1.5}),e[8]=O):O=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(P=A.jsx(hc,{size:14,strokeWidth:1.5}),e[9]=P):P=e[9],e[10]!==t?(L={icon:P,label:"Download as HTML",handle:async()=>{t?await fc({filename:t,includeCode:!0}):ie({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."})}},e[10]=t,e[11]=L):L=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(z=A.jsx(hc,{size:14,strokeWidth:1.5}),e[12]=z):z=e[12],e[13]!==t?(F={icon:z,label:"Download as HTML (exclude code)",handle:async()=>{t?await fc({filename:t,includeCode:!1}):ie({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."})}},e[13]=t,e[14]=F):F=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(B={icon:A.jsx(El,{strokeWidth:1.5,style:{width:14,height:14}}),label:"Download as Markdown",handle:rf},U={icon:A.jsx(ld,{size:14,strokeWidth:1.5}),label:"Download Python code",handle:nf},e[15]=B,e[16]=U):(B=e[15],U=e[16]),e[17]===Symbol.for("react.memo_cache_sentinel")?($=A.jsx(cc,{size:14,strokeWidth:1.5}),e[17]=$):$=e[17];const V="present"!==i.mode;let H,G,J;e[18]!==i.mode?(H="present"===i.mode?void 0:A.jsxs("span",{children:["Only available in app view. ",A.jsx("br",{}),"Toggle with: ",Gt("global.hideCode",!1)]}),e[18]=i.mode,e[19]=H):H=e[19],e[20]!==V||e[21]!==H?(G={divider:!0,icon:$,label:"Download as PNG",disabled:V,tooltip:H,handle:tf},e[20]=V,e[21]=H,e[22]=G):G=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(J=A.jsx(Zt,{size:14,strokeWidth:1.5}),e[23]=J):J=e[23];const X="present"!==i.mode;let K,Z,Q,ee,te,ne,re,oe,se,ae,le,ce,de,pe,me,ye;e[24]!==i.mode?(K="present"===i.mode?void 0:A.jsxs("span",{children:["Only available in app view. ",A.jsx("br",{}),"Toggle with: ",Gt("global.hideCode",!1)]}),e[24]=i.mode,e[25]=K):K=e[25],e[26]!==X||e[27]!==K?(Z={icon:J,label:"Download as PDF",disabled:X,tooltip:K,handle:Qh},e[26]=X,e[27]=K,e[28]=Z):Z=e[28],e[29]!==G||e[30]!==Z||e[31]!==L||e[32]!==F?(Q={icon:O,label:"Download",handle:Ph,dropdown:[L,F,B,U,G,Z]},e[29]=G,e[30]=Z,e[31]=L,e[32]=F,e[33]=Q):Q=e[33],e[34]===Symbol.for("react.memo_cache_sentinel")?(ee=A.jsx(Pd,{size:14,strokeWidth:1.5}),e[34]=ee):ee=e[34],e[35]!==o||e[36]!==s?(te=hh.flatMap((e=>{const{type:t,Icon:n,hidden:r}=e;return r?[]:{label:R(t),rightElement:E(s===t),icon:A.jsx(n,{size:14,strokeWidth:1.5}),handle:()=>o(t)}})),e[35]=o,e[36]=s,e[37]=te):te=e[37],e[38]!==te?(ne={divider:!0,icon:ee,label:"Helper panel",handle:Ph,dropdown:te},e[38]=te,e[39]=ne):ne=e[39],e[40]===Symbol.for("react.memo_cache_sentinel")?(re=A.jsx(Bd,{size:14,strokeWidth:1.5}),e[40]=re):re=e[40],e[41]!==i.mode?(oe="present"===i.mode?A.jsx(qt,{size:14,strokeWidth:1.5}):A.jsx(Ed,{size:14,strokeWidth:1.5}),e[41]=i.mode,e[42]=oe):oe=e[42],e[43]!==C?(se=()=>{C()},e[43]=C,e[44]=se):se=e[44],e[45]!==oe||e[46]!==se?(ae={icon:oe,label:"Toggle app view",hotkey:"global.hideCode",handle:se},e[45]=oe,e[46]=se,e[47]=ae):ae=e[47],e[48]!==k||e[49]!==S||e[50]!==C||e[51]!==i.mode?(le=lc.map(((e,t)=>{const n=ku(e);return{divider:0===t,label:Su(e),icon:A.jsx(n,{size:14,strokeWidth:1.5}),rightElement:A.jsx("div",{className:"w-8 flex justify-end",children:k===e&&A.jsx(Yt,{size:14})}),handle:()=>{S(e),"edit"===i.mode&&C()}}})),e[48]=k,e[49]=S,e[50]=C,e[51]=i.mode,e[52]=le):le=e[52],e[53]!==ae||e[54]!==le?(ce={icon:re,label:"Present as",handle:Ph,dropdown:[ae,...le]},e[53]=ae,e[54]=le,e[55]=ce):ce=e[55],e[56]===Symbol.for("react.memo_cache_sentinel")?(de=A.jsx(yd,{size:14,strokeWidth:1.5}),e[56]=de):de=e[56],e[57]!==t?(pe=!t||I(),e[57]=t,e[58]=pe):pe=e[58],e[59]!==m||e[60]!==pe?(me={icon:de,label:"Create notebook copy",hidden:pe,handle:m},e[59]=m,e[60]=pe,e[61]=me):me=e[61],e[62]===Symbol.for("react.memo_cache_sentinel")?(ye=A.jsx(sd,{size:14,strokeWidth:1.5}),e[62]=ye):ye=e[62];const be=!t;let xe,ve;e[63]!==be?(xe={icon:ye,label:"Copy code to clipboard",hidden:be,handle:Zh},e[63]=be,e[64]=xe):xe=e[64],e[65]===Symbol.for("react.memo_cache_sentinel")?(ve=A.jsx(du,{size:14,strokeWidth:1.5}),e[65]=ve):ve=e[65];const we=!x||a;let Se,Ee,je;e[66]!==c?(Se=async()=>{const e=q(),t=Qt(e),n=Ge.fromEntries(t.map(Kh));await Oe({configs:n});for(const r of t)c({cellId:r,config:{disabled:!1}})},e[66]=c,e[67]=Se):Se=e[67],e[68]!==we||e[69]!==Se?(Ee={icon:ve,label:"Enable all cells",hidden:we,handle:Se},e[68]=we,e[69]=Se,e[70]=Ee):Ee=e[70],e[71]===Symbol.for("react.memo_cache_sentinel")?(je=A.jsx(cu,{size:14,strokeWidth:1.5}),e[71]=je):je=e[71];const _e=!v||a;let Ie,Ae,Te,Me,De,Re,Pe,Le,ze,Fe,Be;e[72]!==c?(Ie=async()=>{const e=q(),t=Y(e),n=Ge.fromEntries(t.map(Xh));await Oe({configs:n});for(const r of t)c({cellId:r,config:{disabled:!0}})},e[72]=c,e[73]=Ie):Ie=e[73],e[74]!==_e||e[75]!==Ie?(Ae={icon:je,label:"Disable all cells",hidden:_e,handle:Ie},e[74]=_e,e[75]=Ie,e[76]=Ae):Ae=e[76],e[77]===Symbol.for("react.memo_cache_sentinel")?(Te=A.jsx(ke,{size:14,strokeWidth:1.5}),e[77]=Te):Te=e[77],e[78]!==l?(Me={icon:Te,label:"Hide all markdown code",handle:l},e[78]=l,e[79]=Me):Me=e[79],e[80]===Symbol.for("react.memo_cache_sentinel")?(De=A.jsx(ud,{size:14,strokeWidth:1.5}),e[80]=De):De=e[80],e[81]!==h?(Re={icon:De,label:"Add setup cell",hidden:!xu("setup_cell"),handle:()=>{h({code:"# Initialization code that runs before all other cells"})}},e[81]=h,e[82]=Re):Re=e[82],e[83]===Symbol.for("react.memo_cache_sentinel")?(Pe=A.jsx(Ce,{size:14,strokeWidth:1.5}),e[83]=Pe):Pe=e[83],e[84]!==u?(Le={icon:Pe,label:"Clear all outputs",handle:()=>{u()}},e[84]=u,e[85]=Le):Le=e[85],e[86]===Symbol.for("react.memo_cache_sentinel")?(ze=A.jsx(pd,{size:14,strokeWidth:1.5}),e[86]=ze):ze=e[86],e[87]!==p?(Fe={icon:ze,label:"Re-run all cells",hotkey:"global.runAll",handle:async()=>{p()}},e[87]=p,e[88]=Fe):Fe=e[88],e[89]===Symbol.for("react.memo_cache_sentinel")?(Be=A.jsx(su,{size:14,strokeWidth:1.5}),e[89]=Be):Be=e[89];const Ue=!w||a;let $e,Ve,We,qe,Ye,Je,Xe,Ke,Ze,Qe,et,tt,nt,rt,ot,st,it,at,lt,ct;e[90]!==d?($e=()=>{d()},e[90]=d,e[91]=$e):$e=e[91],e[92]!==Ue||e[93]!==$e?(Ve={icon:Be,label:"Undo cell deletion",hidden:Ue,handle:$e},e[92]=Ue,e[93]=$e,e[94]=Ve):Ve=e[94],e[95]===Symbol.for("react.memo_cache_sentinel")?(We=A.jsx(Ne,{size:14,strokeWidth:1.5}),e[95]=We):We=e[95],e[96]!==r||e[97]!==n?(qe={icon:We,label:"Add database connection",handle:()=>{n(A.jsx(Dh,{onClose:r}))}},e[96]=r,e[97]=n,e[98]=qe):qe=e[98],e[99]===Symbol.for("react.memo_cache_sentinel")?(Ye=A.jsx(cd,{size:14,strokeWidth:1.5}),e[99]=Ye):Ye=e[99],e[100]!==g?(Je={divider:!0,icon:Ye,label:"Command palette",hotkey:"global.commandPalette",handle:()=>g(Jh)},e[100]=g,e[101]=Je):Je=e[101],e[102]===Symbol.for("react.memo_cache_sentinel")?(Xe=A.jsx(en,{size:14,strokeWidth:1.5}),e[102]=Xe):Xe=e[102],e[103]!==y?(Ke={icon:Xe,label:"User settings",handle:()=>y(Yh)},e[103]=y,e[104]=Ke):Ke=e[104],e[105]===Symbol.for("react.memo_cache_sentinel")?(Ze=A.jsx(Cd,{size:14,strokeWidth:1.5}),e[105]=Ze):Ze=e[105],e[106]!==b?(Qe={icon:Ze,label:"Keyboard shortcuts",hotkey:"global.showHelp",handle:()=>b(qh)},e[106]=b,e[107]=Qe):Qe=e[107],e[108]===Symbol.for("react.memo_cache_sentinel")?(et={icon:A.jsx(Dl,{size:14,strokeWidth:1.5}),label:"Open documentation",handle:Gh},tt=A.jsx(tn,{size:14,strokeWidth:1.5}),e[108]=et,e[109]=tt):(et=e[108],tt=e[109]),e[110]===Symbol.for("react.memo_cache_sentinel")?(nt={icon:tt,label:"Resources",handle:Ph,dropdown:[{icon:A.jsx(Dl,{size:14,strokeWidth:1.5}),label:"Documentation",handle:Wh},{icon:A.jsx(Ol,{size:14,strokeWidth:1.5}),label:"GitHub",handle:Hh},{icon:A.jsx(Rl,{size:14,strokeWidth:1.5}),label:"Discord Community",handle:Vh},{icon:A.jsx(Pl,{size:14,strokeWidth:1.5}),label:"YouTube",handle:$h},{icon:A.jsx(St,{size:14,strokeWidth:1.5}),label:"Changelog",handle:Uh}]},e[110]=nt):nt=e[110],e[111]===Symbol.for("react.memo_cache_sentinel")?(rt=A.jsx(Sd,{size:14,strokeWidth:1.5}),e[111]=rt):rt=e[111],e[112]===Symbol.for("react.memo_cache_sentinel")?(ot={divider:!0,icon:rt,label:"Return home",hidden:!location.search.includes("file"),handle:Bh},st=A.jsx(gd,{size:14,strokeWidth:1.5}),e[112]=ot,e[113]=st):(ot=e[112],st=e[113]),e[114]===Symbol.for("react.memo_cache_sentinel")?(it={icon:st,label:"New notebook",hidden:!location.search.includes("file"),handle:Fh},at=A.jsx(eu,{size:14,strokeWidth:1.5}),e[114]=it,e[115]=at):(it=e[114],at=e[115]),e[116]!==f?(lt={icon:at,label:"Restart kernel",variant:"danger",handle:f},e[116]=f,e[117]=lt):lt=e[117],e[118]!==Q||e[119]!==ne||e[120]!==ce||e[121]!==me||e[122]!==xe||e[123]!==Ee||e[124]!==D||e[125]!==Ae||e[126]!==Me||e[127]!==Re||e[128]!==Le||e[129]!==Fe||e[130]!==Ve||e[131]!==qe||e[132]!==Je||e[133]!==Ke||e[134]!==Qe||e[135]!==lt?(ct=[D,Q,ne,ce,me,xe,Ee,Ae,Me,Re,Le,Fe,Ve,qe,Je,Ke,Qe,et,nt,ot,it,lt],e[118]=Q,e[119]=ne,e[120]=ce,e[121]=me,e[122]=xe,e[123]=Ee,e[124]=D,e[125]=Ae,e[126]=Me,e[127]=Re,e[128]=Le,e[129]=Fe,e[130]=Ve,e[131]=qe,e[132]=Je,e[133]=Ke,e[134]=Qe,e[135]=lt,e[136]=ct):ct=e[136];const dt=ct;let ut;return e[137]!==dt?(ut=dt.filter(zh),e[137]=dt,e[138]=ut):ut=e[138],ut}function zh(e){return!e.hidden}function Fh(){const e=Jt();window.open(e,"_blank")}function Bh(){const e=document.baseURI.split("?")[0];window.open(e,"_self")}function Uh(){window.open(st.releasesPage,"_blank")}function $h(){window.open(st.youtube,"_blank")}function Vh(){window.open(st.discordLink,"_blank")}function Hh(){window.open(st.githubPage,"_blank")}function Wh(){window.open(st.docsPage,"_blank")}function Gh(){window.open(st.docsPage,"_blank")}function qh(e){return!e}function Yh(e){return!e}function Jh(e){return!e}function Xh(e){return[e,{disabled:!0}]}function Kh(e){return[e,{disabled:!1}]}async function Zh(){const e=await nn();await lt(e.contents),ie({title:"Copied",description:"Code copied to clipboard."})}async function Qh(){const e=new Event("export-beforeprint"),t=new Event("export-afterprint");window.dispatchEvent(e),setTimeout(ef,0),setTimeout((()=>window.dispatchEvent(t)),0)}function ef(){return window.print()}async function tf(){const e=document.getElementById("App");e&&await V(e,document.title)}async function nf(){const e=await nn();rn(new Blob([e.contents],{type:"text/plain"}),on.toPY(document.title))}async function rf(){const e=await sn({download:!1});rn(new Blob([e],{type:"text/plain"}),on.toMarkdown(document.title))}async function of(){const e=await nn(),t=an({code:e.contents});await lt(t),ie({title:"Copied",description:"Link copied to clipboard."})}function sf(e){return A.jsx("div",{className:"w-8 flex justify-end",children:e&&A.jsx(Yt,{size:14})})}const af=()=>{const e=_.c(10),t=Lh();let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=A.jsx(Ll,{"aria-label":"Config",shape:"circle",size:"small",className:"h-[27px] w-[27px]","data-testid":"notebook-menu-dropdown",color:"hint-green",children:A.jsx(pc,{strokeWidth:1.8})}),e[0]=n):n=e[0];const r=n,o=lf;let s;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{const t=A.jsx(cn,{variant:e.variant,disabled:e.disabled,onSelect:t=>e.handle(t),"data-testid":`notebook-menu-dropdown-${e.label}`,children:o(e)},e.label);return e.tooltip?A.jsx(ht,{content:e.tooltip,side:"left",delayDuration:100,children:A.jsx("span",{children:t})},e.label):t},e[1]=s):s=e[1];const i=s;let a,l,c,d,u;if(e[2]===Symbol.for("react.memo_cache_sentinel")?(a=A.jsx(dn,{asChild:!0,children:r}),e[2]=a):a=e[2],e[3]!==t){let n;e[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.hidden?null:e.dropdown?A.jsxs(un,{children:[A.jsx(hn,{"data-testid":`notebook-menu-dropdown-${e.label}`,children:o(e)}),A.jsx(fn,{children:A.jsx(pn,{children:e.dropdown.map((e=>A.jsxs(m.Fragment,{children:[e.divider&&A.jsx(mn,{}),i(e)]},e.label)))})})]},e.label):A.jsxs(m.Fragment,{children:[e.divider&&A.jsx(mn,{}),i(e)]},e.label),e[5]=n):n=e[5],l=t.map(n),e[3]=t,e[4]=l}else l=e[4];return e[6]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx(mn,{}),e[6]=c):c=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx("div",{className:"flex-1 px-2 text-xs text-muted-foreground",children:A.jsxs("span",{children:["Version: ",ln()]})}),e[7]=d):d=e[7],e[8]!==l?(u=A.jsxs(gn,{modal:!1,children:[a,A.jsxs(yn,{align:"end",className:"no-print w-[240px]",children:[l,c,d]})]}),e[8]=l,e[9]=u):u=e[9],u};function lf(e){return A.jsxs(A.Fragment,{children:[e.icon&&A.jsx("span",{className:"flex-0 mr-2",children:e.icon}),A.jsx("span",{className:"flex-1",children:e.labelElement||e.label}),e.hotkey&&A.jsx(bn,{shortcut:e.hotkey,className:"ml-4"}),e.rightElement]})}const cf=xn({findText:"",replaceText:"",caseSensitive:!1,wholeWord:!1,regexp:!1,isOpen:!1,currentView:void 0},((e,t)=>{if(void 0===t)return e;switch(t.type){case"setFind":return{...e,findText:t.find};case"setReplace":return{...e,replaceText:t.replace};case"setCaseSensitive":return{...e,caseSensitive:t.caseSensitive};case"setWholeWord":return{...e,wholeWord:t.wholeWord};case"setRegex":return{...e,regexp:t.regexp};case"setIsOpen":return{...e,isOpen:t.isOpen};case"setCurrentView":return{...e,currentView:{view:t.view,range:t.range}};case"clearCurrentView":return{...e,currentView:void 0}}}));function df(e){if([...document.querySelectorAll('[role="dialog"][data-state="open"]')].some((e=>e instanceof HTMLElement&&e.childNodes.length>0)))return!1;if(e){const t=e.state.selection.main,n=e.state.sliceDoc(t.from,t.to);n?(re.set(cf,{type:"setFind",find:n}),re.set(cf,{type:"setCurrentView",view:e,range:{from:t.from,to:t.to}})):re.set(cf,{type:"setCurrentView",view:e,range:{from:0,to:0}})}return re.get(cf).isOpen?(re.set(cf,{type:"setIsOpen",isOpen:!1}),requestAnimationFrame((()=>{re.set(cf,{type:"setIsOpen",isOpen:!0})})),!0):(re.set(cf,{type:"setIsOpen",isOpen:!0}),!0)}function uf(){return!!re.get(cf).isOpen&&(re.set(cf,{type:"setIsOpen",isOpen:!1}),!0)}function hf(e){return vn("create"in e,'Expected query to have a "create" method'),e}function ff(e){return()=>{const t=re.get(cf),n=new wn({search:t.findText,caseSensitive:t.caseSensitive,regexp:t.regexp,replace:t.replaceText,wholeWord:t.wholeWord});return!!n.valid&&e({query:hf(n).create(),search:n})}}const pf=e=>ff((({query:t})=>{const n=kn(),r=re.get(cf).currentView||{view:n[0],range:{from:0,to:0}};let o=r.range.to;"prev"===e&&(n.reverse(),o=r.range.from);let s=n.indexOf(r.view);s<0&&(s=0);const i=[...n,...n].slice(s);for(const a of i){const n="next"===e?t.nextMatch(a.state,0,o??0):t.prevMatch(a.state,o??a.state.doc.length,a.state.doc.length);if(!n){o=null,a.dispatch({selection:Sn.single(0)});continue}const r=Sn.single(n.from,n.to);return a.dispatch({selection:r,effects:[Cn.scrollIntoView(r.main,{y:"center"})],userEvent:"select.search"}),re.set(cf,{type:"setCurrentView",view:a,range:{from:n.from,to:n.to}}),n}return!1})),mf=pf("next"),gf=pf("prev"),yf=ff((({query:e})=>{var t;const n=kn(),r=[];for(const o of n){if(o.state.readOnly)continue;const n=null==(t=e.matchAll(o.state,1e9))?void 0:t.map((t=>{const{from:n,to:r}=t;return{from:n,to:r,insert:e.getReplacement(t)}}));if(!n||0===n.length)continue;const s=o.state.doc.toString();r.push((()=>{o.dispatch({changes:[{from:0,to:o.state.doc.length,insert:s}],userEvent:"input.replace.all"})})),o.dispatch({changes:n,userEvent:"input.replace.all"})}return()=>{for(const e of r)e()}})),bf=ff((({query:e})=>{const t=kn(),n=re.get(cf).currentView||{view:t[0],range:{from:0}};let r=n.range.from,o=t.indexOf(n.view);o<0&&(o=0);const s=[...t,...t].slice(o);for(const i of s){const t=e.nextMatch(i.state,0,r??0);if(!t){r=null,i.dispatch({selection:Sn.single(0)});continue}const n=i.state.toText(e.getReplacement(t));return i.dispatch({changes:[{from:t.from,to:t.to,insert:n}],userEvent:"input.replace"}),mf()}return!1})),xf=ff((({query:e})=>{const t=kn();let n=0;const r=new Map;for(const o of t){const t=e.matchAll(o.state,1e9)||[];for(const e of t){const{from:t,to:s}=e,i=r.get(o)||new Map;i.set(`${t}:${s}`,n++),r.set(o,i)}}return{count:n,position:r}})),vf=In.define();function wf(){const e=kn();for(const t of e)t.state.readOnly||t.dispatch({effects:vf.of(new wn({search:""}))})}const kf=Nn.define({create(){const e=re.get(cf);return hf(new wn({search:e.findText,caseSensitive:e.caseSensitive,regexp:e.regexp,replace:e.replaceText,wholeWord:e.wholeWord})).create()},update(e,t){for(const n of t.effects)n.is(vf)&&(e=hf(n.value).create());return e}}),Sf=jn.mark({class:"cm-searchMatch"}),Cf=jn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Ef=En.fromClass(class{constructor(e){this.view=e,this.decorations=void 0,this.decorations=this.highlight(e.state.field(kf))}update(e){const t=e.state.field(kf);(t!==e.startState.field(kf)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight(e){if(!e.spec.valid)return jn.none;const{view:t}=this,n=new _n,r=t.visibleRanges,o=r.length;for(let s=0;s<o;s++){let{to:i}=r[s];const{from:a}=r[s];for(;s<o-1&&i>r[s+1].from-500;)i=r[++s].to;e.highlight(t.state,a,i,((e,r)=>{const o=t.state.selection.ranges.some((t=>t.from===e&&t.to===r));n.add(e,r,o?Cf:Sf)}))}return n.finish()}},{decorations:e=>e.decorations}),Nf=Cn.baseTheme({"&light .cm-searchMatch":{backgroundColor:"#99ff7780"},"&dark .cm-searchMatch":{backgroundColor:"#22bb0070"},"&light .cm-searchMatch-selected":{backgroundColor:"transparent"},"&dark .cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff88 !important"}}),jf=()=>{var e;const t=_.c(102),[n,r]=l.useState(!1),[o,s]=He(cf),[i,a]=l.useState(),c=l.useRef(null),d=ue(We);let u,h;t[0]!==n||t[1]!==o.isOpen?(u=()=>(!n||!o.isOpen)&&df(),t[0]=n,t[1]=o.isOpen,t[2]=u):u=t[2],zl("cell.findAndReplace",u),t[3]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{const e=xf();a(!1===e?void 0:e)},t[3]=h):h=t[3];const f=h;let p,m,g,y;if(t[4]!==o.isOpen?(p=()=>{o.isOpen&&c.current&&(c.current.focus(),c.current.select())},m=[o.isOpen],t[4]=o.isOpen,t[5]=p,t[6]=m):(p=t[5],m=t[6]),l.useEffect(p,m),t[7]!==o.findText||t[8]!==o.isOpen?(g=()=>{if(o.isOpen){if(""===o.findText)return a(void 0),void wf();f(),function(){const e=re.get(cf),t=kn();for(const n of t)n.state.readOnly||n.dispatch({effects:vf.of(new wn({search:e.findText,caseSensitive:e.caseSensitive,regexp:e.regexp,replace:e.replaceText,wholeWord:e.wholeWord}))})}()}else wf()},t[7]=o.findText,t[8]=o.isOpen,t[9]=g):g=t[9],t[10]!==o.caseSensitive||t[11]!==o.findText||t[12]!==o.isOpen||t[13]!==o.regexp||t[14]!==o.wholeWord?(y=[o.findText,o.isOpen,o.caseSensitive,o.regexp,o.wholeWord],t[10]=o.caseSensitive,t[11]=o.findText,t[12]=o.isOpen,t[13]=o.regexp,t[14]=o.wholeWord,t[15]=y):y=t[15],l.useEffect(g,y),!o.isOpen)return null;const b=o.currentView;let x;t[16]!==i||t[17]!==b?(x=b&&i?null==(e=i.position.get(b.view))?void 0:e.get(`${b.range.from}:${b.range.to}`):void 0,t[16]=i,t[17]=b,t[18]=x):x=t[18];const v=x;let w,k,S,C,E,N,j,I,T,M,D;t[19]===Symbol.for("react.memo_cache_sentinel")?(w=()=>r(!0),t[19]=w):w=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(k=()=>r(!1),t[20]=k):k=t[20],t[21]!==s?(S=e=>{"Escape"===e.key&&s({type:"setIsOpen",isOpen:!1})},t[21]=s,t[22]=S):S=t[22],t[23]!==s?(C=()=>s({type:"setIsOpen",isOpen:!1}),t[23]=s,t[24]=C):C=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(E=A.jsx(Tn,{className:"w-4 h-4"}),t[25]=E):E=t[25],t[26]!==C?(N=A.jsx("div",{className:"absolute top-0 right-0",children:A.jsx(te,{"data-testid":"close-find-replace-button",onClick:C,size:"xs",variant:"text",children:E})}),t[26]=C,t[27]=N):N=t[27],t[28]!==s?(j=e=>{s({type:"setFind",find:e.target.value})},t[28]=s,t[29]=j):j=t[29],t[30]!==o.findText||t[31]!==j?(I=A.jsx(at,{ref:c,"data-testid":"find-input",value:o.findText,autoFocus:!0,className:"mr-2 mb-0",placeholder:"Find",onKeyDown:If,onChange:j}),t[30]=o.findText,t[31]=j,t[32]=I):I=t[32],t[33]!==s?(T=e=>{s({type:"setReplace",replace:e.target.value})},t[33]=s,t[34]=T):T=t[34],t[35]!==o.replaceText||t[36]!==T?(M=A.jsx(at,{"data-testid":"replace-input",value:o.replaceText,placeholder:"Replace",onChange:T}),t[35]=o.replaceText,t[36]=T,t[37]=M):M=t[37],t[38]!==I||t[39]!==M?(D=A.jsxs("div",{className:"flex flex-col flex-2 gap-2 w-[55%]",children:[I,M]}),t[38]=I,t[39]=M,t[40]=D):D=t[40];const O=o.caseSensitive?"on":"off";let R,P,L;t[41]!==s?(R=e=>s({type:"setCaseSensitive",caseSensitive:e}),t[41]=s,t[42]=R):R=t[42],t[43]===Symbol.for("react.memo_cache_sentinel")?(P=A.jsx(Mn,{className:"w-4 h-4"}),t[43]=P):P=t[43],t[44]!==o.caseSensitive||t[45]!==O||t[46]!==R?(L=A.jsx(ht,{content:"Case Sensitive",children:A.jsx(An,{size:"sm",pressed:o.caseSensitive,"data-state":O,onPressedChange:R,children:P})}),t[44]=o.caseSensitive,t[45]=O,t[46]=R,t[47]=L):L=t[47];const z=o.wholeWord?"on":"off";let F,B,U;t[48]!==s?(F=e=>s({type:"setWholeWord",wholeWord:e}),t[48]=s,t[49]=F):F=t[49],t[50]===Symbol.for("react.memo_cache_sentinel")?(B=A.jsx(au,{className:"w-4 h-4"}),t[50]=B):B=t[50],t[51]!==o.wholeWord||t[52]!==z||t[53]!==F?(U=A.jsx(ht,{content:"Match Whole Word",children:A.jsx(An,{size:"sm",pressed:o.wholeWord,"data-state":z,onPressedChange:F,children:B})}),t[51]=o.wholeWord,t[52]=z,t[53]=F,t[54]=U):U=t[54];const $=o.regexp?"on":"off";let V,H,W,G,q;t[55]!==s?(V=e=>s({type:"setRegex",regexp:e}),t[55]=s,t[56]=V):V=t[56],t[57]===Symbol.for("react.memo_cache_sentinel")?(H=A.jsx(Ud,{className:"w-4 h-4"}),t[57]=H):H=t[57],t[58]!==o.regexp||t[59]!==$||t[60]!==V?(W=A.jsx(ht,{content:"Use Regular Expression",children:A.jsx(An,{size:"sm",pressed:o.regexp,"data-state":$,onPressedChange:V,children:H})}),t[58]=o.regexp,t[59]=$,t[60]=V,t[61]=W):W=t[61],t[62]!==L||t[63]!==U||t[64]!==W?(G=A.jsxs("div",{className:"flex items-center gap-[2px]",children:[L,U,W]}),t[62]=L,t[63]=U,t[64]=W,t[65]=G):G=t[65],t[66]===Symbol.for("react.memo_cache_sentinel")?(q=()=>{bf()&&f()},t[66]=q):q=t[66];const Y=""===o.findText;let J,X;t[67]!==Y?(J=A.jsx(te,{"data-testid":"replace-next-button",size:"xs",variant:"outline",className:"h-6 text-xs",onClick:q,disabled:Y,children:"Replace Next"}),t[67]=Y,t[68]=J):J=t[68],t[69]===Symbol.for("react.memo_cache_sentinel")?(X=()=>{const e=yf();if(!e)return;f();const{dismiss:t}=ie({title:"Replaced all occurrences",action:A.jsx(Lu,{"data-testid":"undo-replace-all-button",onClick:()=>{e(),n()}})}),n=t},t[69]=X):X=t[69];const K=""===o.findText;let Z,Q,ee,ne,oe,se,ae,le,ce,de,he,fe;return t[70]!==K?(Z=A.jsx(te,{"data-testid":"replace-all-button",size:"xs",variant:"outline",className:"h-6 text-xs",onClick:X,disabled:K,children:"Replace All"}),t[70]=K,t[71]=Z):Z=t[71],t[72]!==J||t[73]!==Z?(Q=A.jsxs("div",{className:"flex items-center gap-[2px]",children:[J,Z]}),t[72]=J,t[73]=Z,t[74]=Q):Q=t[74],t[75]!==G||t[76]!==Q?(ee=A.jsxs("div",{className:"flex flex-col gap-2",children:[G,Q]}),t[75]=G,t[76]=Q,t[77]=ee):ee=t[77],t[78]!==D||t[79]!==ee?(ne=A.jsxs("div",{className:"flex items-center gap-3",children:[D,ee]}),t[78]=D,t[79]=ee,t[80]=ne):ne=t[80],t[81]===Symbol.for("react.memo_cache_sentinel")?(oe=A.jsx(ht,{content:"Find Previous",children:A.jsx(te,{"data-testid":"find-prev-button",size:"xs",variant:"secondary",onClick:Af,children:A.jsx(qc,{className:"w-4 h-4"})})}),t[81]=oe):oe=t[81],t[82]===Symbol.for("react.memo_cache_sentinel")?(se=A.jsx(ht,{content:"Find Next",children:A.jsx(te,{"data-testid":"find-next-button",size:"xs",variant:"secondary",onClick:Tf,children:A.jsx(Jc,{className:"w-4 h-4"})})}),t[82]=se):se=t[82],t[83]!==v||t[84]!==i?(ae=null!=i&&null==v&&A.jsxs("span",{className:"text-sm",children:[i.count," matches"]}),t[83]=v,t[84]=i,t[85]=ae):ae=t[85],t[86]!==v||t[87]!==i?(le=null!=i&&null!=v&&A.jsxs("span",{className:"text-sm",children:[v+1," of ",i.count]}),t[86]=v,t[87]=i,t[88]=le):le=t[88],t[89]!==ae||t[90]!==le?(ce=A.jsxs("div",{className:"flex items-center gap-2",children:[oe,se,ae,le]}),t[89]=ae,t[90]=le,t[91]=ce):ce=t[91],t[92]!==d?(de=d.getHotkey("cell.findAndReplace"),t[92]=d,t[93]=de):de=t[93],t[94]!==de.key?(he=A.jsxs("div",{className:"text-xs text-muted-foreground flex gap-1 mt-2",children:["Press"," ",A.jsx(tt,{shortcut:de.key})," ","again to open the native browser search."]}),t[94]=de.key,t[95]=he):he=t[95],t[96]!==N||t[97]!==ne||t[98]!==ce||t[99]!==he||t[100]!==S?(fe=A.jsx(Dn,{restoreFocus:!0,autoFocus:!0,children:A.jsxs("div",{onFocus:w,onClick:_f,onBlur:k,className:"fixed top-0 right-0 w-[500px] flex flex-col bg-[var(--sage-1)] p-4 z-50 mt-2 mr-3 rounded-md shadow-lg border gap-2 print:hidden",onKeyDown:S,children:[N,ne,ce,he]})}),t[96]=N,t[97]=ne,t[98]=ce,t[99]=he,t[100]=S,t[101]=fe):fe=t[101],fe};function _f(e){e.stopPropagation(),e.preventDefault()}function If(e){"Enter"===e.key&&(e.shiftKey?gf():mf())}function Af(){return gf()}function Tf(){return mf()}function Mf(e){const t=_.c(3),[n,r]=l.useState(!1);let o,s;return t[0]!==e?(o=()=>{if(!e)return;r(!1);const t=setTimeout((()=>{r(!0)}),200);return()=>clearTimeout(t)},s=[e],t[0]=e,t[1]=o,t[2]=s):(o=t[1],s=t[2]),l.useEffect(o,s),e&&n}const Df=()=>{const e=_.c(6),t=fe(Zu);let n;e[0]!==t?(n=()=>t(Of),e[0]=t,e[1]=n):n=e[1];const r=n;let o,s,i;return e[2]===Symbol.for("react.memo_cache_sentinel")?(o=Gt("global.commandPalette"),e[2]=o):o=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(s=A.jsx(cd,{strokeWidth:1.5,size:18}),e[3]=s):s=e[3],e[4]!==r?(i=A.jsx(ht,{content:o,children:A.jsx(Ll,{"data-testid":"command-palette-button",onClick:r,shape:"rectangle",color:"hint-green",children:s})}),e[4]=r,e[5]=i):i=e[5],i};function Of(e){return!e}const Rf=e=>{const{children:t}=e;return ue(ge)?null:t},Pf=e=>{const{children:t}=e;return ue(ge)?t:null},Lf=e=>{const t=_.c(38),{resetOnBlur:n,placeholderText:r,initialValue:o,flexibleWidth:s,onNameChange:i,className:a}=e,c=void 0!==n&&n,d=void 0===o?null:o,u=void 0!==s&&s,[h,f]=l.useState(d);let p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[0]=p):p=t[0];const[m,g]=l.useState(p),[y,b]=l.useState(!1),x=l.useRef(null),v=l.useRef(!1);let w,k,S;t[1]!==d?(w=()=>{f(d)},k=[d],t[1]=d,t[2]=w,t[3]=k):(w=t[2],k=t[3]),l.useEffect(w,k),t[4]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{b(!0)},t[4]=S):S=t[4];const C=S;let E;t[5]!==d||t[6]!==c?(E=e=>{var t;(null==(t=e.relatedTarget)?void 0:t.closest(".filename-input"))||(b(!1),c&&f(d))},t[5]=d,t[6]=c,t[7]=E):E=t[7];const N=E;let j;t[8]!==h?(j=_t.dirname(h||""),t[8]=h,t[9]=j):j=t[9];const I=j,T=_t.basename(h||""),M=m.filter((e=>_t.basename(e.path).startsWith(T)));let D,O;t[10]!==I||t[11]!==y?(D=async()=>{if(!y)return void g([]);const e=await zn({path:I});g(e.files)},O=[I,y],t[10]=I,t[11]=y,t[12]=D,t[13]=O):(D=t[12],O=t[13]);const{loading:R}=On(D,O),P=function(e,t,n){if(!e)return;if(e.endsWith("/"))return;(xu("markdown")?new Set(["py","md","markdown","qmd"]):new Set(["py"])).has(_t.extension(e))||(e=e.endsWith(".")?`${e}py`:e.endsWith(".p")?`${e}y`:`${e}.py`);if(t.some((t=>t.path===e||_t.basename(t.path)===e)))return;if(n&&(n===e||_t.basename(n)===e))return;return e}(h,m,d),L=(P||M.length>0)&&A.jsxs(Xe,{className:"font-mono",children:[!R&&A.jsx(rt,{children:"No files"}),P&&A.jsxs(Qe,{variant:"success",className:"py-2 px-3",onSelect:()=>{var e;P&&(v.current=!0,i(P),null==(e=x.current)||e.blur())},children:[A.jsx(md,{className:"w-4 h-4 mr-2"})," ",A.jsxs("span",{className:"text-sm",children:[d?"Rename to: ":"Save as: ",A.jsx("span",{className:"font-medium text-sm",children:_t.basename(P)})]})]},"_rename_"),M.map((e=>{const t=e.isDirectory?"directory":Rn(e.path),n=Pn[t];return A.jsxs(Qe,{variant:e.isDirectory?"default":"muted",className:"py-2 px-3",onSelect:()=>{e.isDirectory?f(`${e.path}/`):f(e.path)},children:[A.jsx(n,{className:"w-4 h-4 mr-2"})," ",_t.basename(e.path)]},e.path)}))]}),z=10*Math.max(20,(null==h?void 0:h.length)||(null==r?void 0:r.length)||0),F=y?h||"":d||"";let B,U,$;t[14]!==u||t[15]!==z?(B=u?{maxWidth:z}:void 0,t[14]=u,t[15]=z,t[16]=B):B=t[16],t[17]!==a?(U=Ln(a,"w-full px-4 py-1 my-1 h-9 font-mono text-foreground/60"),t[17]=a,t[18]=U):U=t[18],t[19]!==r||t[20]!==F||t[21]!==B||t[22]!==U?($=A.jsx(Fn,{children:A.jsx(nt,{"data-testid":"dir-completion-input",tabIndex:-1,rootClassName:"border-none justify-center px-1",spellCheck:"false",value:F,onKeyDown:zf,icon:null,ref:x,onValueChange:f,placeholder:r,autoComplete:"off",style:B,className:U})}),t[19]=r,t[20]=F,t[21]=B,t[22]=U,t[23]=$):$=t[23];const V=L&&"group-focus-within:block";let H,W,G,q,Y;return t[24]!==V?(H=Ln("p-0 w-full min-w-80 max-w-80vw hidden",V),t[24]=V,t[25]=H):H=t[25],t[26]!==L||t[27]!==H?(W=A.jsx(Bn,{side:"bottom",className:H,portal:!1,children:L}),t[26]=L,t[27]=H,t[28]=W):W=t[28],t[29]!==$||t[30]!==W?(G=A.jsxs(Xe,{children:[$,W]}),t[29]=$,t[30]=W,t[31]=G):G=t[31],t[32]!==N||t[33]!==G?(q=A.jsx(Un,{onFocus:C,onBlur:N,shouldFilter:!1,id:"filename-input",className:"bg-transparent group filename-input",children:G}),t[32]=N,t[33]=G,t[34]=q):q=t[34],t[35]!==y||t[36]!==q?(Y=A.jsx($n,{children:A.jsx(Vn,{open:y,modal:!1,children:q})}),t[35]=y,t[36]=q,t[37]=Y):Y=t[37],Y};function zf(e){"Escape"===e.key&&e.currentTarget.blur()}function Ff(e){return JSON.stringify(e)}const Bf=Q(void 0),Uf=Q((e=>{const t=e(Bf);return function(e,t,n){if(!n)return!1;const{cellIds:r,cellData:o}=e,s=r.inOrderIds.map((e=>o[e])),i=s.map((e=>e.code)),a=s.map((e=>e.config)),l=s.map((e=>e.name));return!(Hn(i,n.codes)&&Hn(l,n.names)&&Wn(a,n.configs)&&Wn(t.selectedLayout,n.layout.selectedLayout)&&Wn(t.layoutData,n.layout.layoutData))}(e(le),e(mc),t)}));const $f=e=>{const t=_.c(35),n=$t(),r=()=>{rn(new Blob([s()],{type:"text/plain"}),`${e.proposedName}.json`)};let o;t[0]!==n?(o=()=>{const e=q(),t=Gn(e);return JSON.stringify({filename:n,cells:t.map(Hf)},null,2)},t[0]=n,t[1]=o):o=t[1];const s=H(o);let i,a,l,c,d,u,h,f,p,m,g,y,b,x,v,w,k;return t[2]!==r||t[3]!==e?(i=t=>{t.preventDefault(),r(),e.closeModal()},t[2]=r,t[3]=e,t[4]=i):i=t[4],t[5]!==e?(a=t=>{"Escape"===t.key&&e.closeModal()},t[5]=e,t[6]=a):a=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx(Le,{className:"text-accent-foreground mb-6",children:"Download unsaved changes?"}),t[7]=l):l=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(c={wordBreak:"break-word"},t[8]=c):c=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx("p",{children:"This app has unsaved changes. To recover:"}),u={paddingBottom:"10px"},t[9]=d,t[10]=u):(d=t[9],u=t[10]),t[11]!==e.proposedName?(h=A.jsxs("li",{style:u,children:['Click the "Download" button. This will download a file called ',A.jsxs("code",{children:[e.proposedName,".json"]}),". This file contains your code."]}),t[11]=e.proposedName,t[12]=h):h=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(f={paddingBottom:"10px"},t[13]=f):f=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(p={display:"block",padding:"10px"},t[14]=p):p=t[14],t[15]!==e.proposedName?(m=A.jsxs("code",{style:p,children:["marimo recover ",e.proposedName,".json ",">"," ",e.proposedName,".py"]}),t[15]=e.proposedName,t[16]=m):m=t[16],t[17]!==e.proposedName?(g=A.jsxs("code",{children:[e.proposedName,".py"]}),t[17]=e.proposedName,t[18]=g):g=t[18],t[19]!==m||t[20]!==g?(y=A.jsxs("li",{style:f,children:["In your terminal, type",m,"to overwrite ",g," with the recovered changes."]}),t[19]=m,t[20]=g,t[21]=y):y=t[21],t[22]!==y||t[23]!==h?(b=A.jsx(it,{className:"markdown break-words",style:c,children:A.jsxs("div",{className:"prose dark:prose-invert",children:[d,A.jsxs("ol",{children:[h,y]})]})}),t[22]=y,t[23]=h,t[24]=b):b=t[24],t[25]!==e.closeModal?(x=A.jsx(te,{"aria-label":"Cancel",variant:"secondary","data-testid":"cancel-recovery-button",onClick:e.closeModal,children:"Cancel"}),t[25]=e.closeModal,t[26]=x):x=t[26],t[27]===Symbol.for("react.memo_cache_sentinel")?(v=A.jsx(te,{"data-testid":"download-recovery-button","aria-label":"Download",variant:"default",type:"submit",children:"Download"}),t[27]=v):v=t[27],t[28]!==x?(w=A.jsxs(ct,{children:[x,v]}),t[28]=x,t[29]=w):w=t[29],t[30]!==i||t[31]!==b||t[32]!==w||t[33]!==a?(k=A.jsx(Re,{className:"w-fit",children:A.jsxs("form",{onSubmit:i,onKeyDown:a,children:[l,b,w]})}),t[30]=i,t[31]=b,t[32]=w,t[33]=a,t[34]=k):k=t[34],k},Vf=e=>{const t=_.c(12),{filename:n,needsSave:r}=e,{openModal:o,closeModal:s}=he();let i;t[0]!==n?(i=null===n?"app":n.slice(0,-3),t[0]=n,t[1]=i):i=t[1];const a=i;let l;t[2]!==s||t[3]!==r||t[4]!==o||t[5]!==a?(l=()=>{r&&o(A.jsx($f,{proposedName:a,closeModal:s}))},t[2]=s,t[3]=r,t[4]=o,t[5]=a,t[6]=l):l=t[6];const c=l;let d;zl("global.save",c),t[7]===Symbol.for("react.memo_cache_sentinel")?(d=Gt("global.save"),t[7]=d):d=t[7];const u=r?"yellow":"gray";let h,f;return t[8]===Symbol.for("react.memo_cache_sentinel")?(h=A.jsx(Hd,{strokeWidth:1.5,size:18}),t[8]=h):h=t[8],t[9]!==c||t[10]!==u?(f=A.jsx(ht,{content:d,children:A.jsx(Ll,{onClick:c,id:"save-button","aria-label":"Save",className:"rectangle",color:u,children:h})}),t[9]=c,t[10]=u,t[11]=f):f=t[11],f};function Hf(e){return{name:e.name,code:e.code}}const Wf=5e3;async function Gf(){await Xn({download:!1})}async function qf(){await Jn({download:!1,includeCode:!0,files:uc.INSTANCE.filenames()})}async function Yf(){await Yn({download:!1})}const Jf=e=>{const t=_.c(13),{kioskMode:n,appConfig:r}=e,o=$t();let s;t[0]!==r||t[1]!==n?(s={appConfig:r,kioskMode:n},t[0]=r,t[1]=n,t[2]=s):s=t[2];const{saveOrNameNotebook:i,needsSave:a,closed:c}=function(e){const t=_.c(40),{kioskMode:n}=e,r=ue(Kn),o=Zn(),[s]=He(ft),i=$t(),{openModal:a,closeModal:c,openAlert:d}=he(),u=fe(Bf),h=Qn(),f=ue(Uf),p=ic();let m;t[0]!==r||t[1]!==s.state||t[2]!==n||t[3]!==p||t[4]!==o||t[5]!==d||t[6]!==u?(m=(e,t)=>{const i=Gn(o),a=i.map(ep),l=i.map(Qf),c=i.map(Zf),h=er(o);n||0!==l.length&&(s.state===mt.OPEN?(E.log("saving to ",e),tr({cellIds:a,codes:l,names:c,filename:e,configs:h,layout:gc(),persist:!0}).then((()=>{t&&r.format_on_save&&nr(),u({names:c,codes:l,configs:h,layout:p})}))):d("Failed to save notebook: not connected to a kernel."))},t[0]=r,t[1]=s.state,t[2]=n,t[3]=p,t[4]=o,t[5]=d,t[6]=u,t[7]=m):m=t[7];const g=H(m);let y;t[8]!==s.state||t[9]!==i||t[10]!==g?(y=e=>{const t=void 0!==e&&e;null!==i&&s.state===mt.OPEN&&g(i,t)},t[8]=s.state,t[9]=i,t[10]=g,t[11]=y):y=t[11];const b=H(y);let x;t[12]!==g||t[13]!==h?(x=e=>{h(e).then((e=>{null!==e&&g(e,!0)}))},t[12]=g,t[13]=h,t[14]=x):x=t[14];const v=x;let w;t[15]!==c||t[16]!==s.state||t[17]!==i||t[18]!==v||t[19]!==a||t[20]!==b?(w=()=>{b(!0),null===i&&s.state!==mt.CLOSED&&a(A.jsx(tp,{onClose:c,onSave:v}))},t[15]=c,t[16]=s.state,t[17]=i,t[18]=v,t[19]=a,t[20]=b,t[21]=w):w=t[21];const k=H(w);let S,C;if(t[22]!==o){const e=Gn(o);S=e.map(Kf),C=e.map(Xf),t[22]=o,t[23]=S,t[24]=C}else S=t[23],C=t[24];const N=C;let j;t[25]!==o?(j=er(o),t[25]=o,t[26]=j):j=t[26];const I=j;let T;t[27]!==r||t[28]!==N||t[29]!==S||t[30]!==I||t[31]!==s||t[32]!==n||t[33]!==f||t[34]!==b?(T={onSave:b,needsSave:f,codes:S,cellConfigs:I,cellNames:N,connStatus:s,config:r,kioskMode:n},t[27]=r,t[28]=N,t[29]=S,t[30]=I,t[31]=s,t[32]=n,t[33]=f,t[34]=b,t[35]=T):T=t[35];!function(e){const t=_.c(21),{codes:n,cellConfigs:r,config:o,connStatus:s,cellNames:i,needsSave:a,kioskMode:c,onSave:d}=e,u=l.useRef(null);let h;t[0]!==n?(h=n.join(":"),t[0]=n,t[1]=h):h=t[1];const f=h;let p;t[2]!==r?(p=r.map(Ff).join(":"),t[2]=r,t[3]=p):p=t[3];const m=p;let g;t[4]!==i?(g=i.join(":"),t[4]=i,t[5]=g):g=t[5];const y=g;let b,x;t[6]!==o||t[7]!==s.state||t[8]!==c||t[9]!==a||t[10]!==d?(b=()=>{if(!c)return"after_delay"===o.autosave&&(null!==u.current&&clearTimeout(u.current),a&&s.state===mt.OPEN&&(u.current=setTimeout(d,o.autosave_delay))),()=>{null!==u.current&&clearTimeout(u.current)}},t[6]=o,t[7]=s.state,t[8]=c,t[9]=a,t[10]=d,t[11]=b):b=t[11],t[12]!==m||t[13]!==y||t[14]!==f||t[15]!==o||t[16]!==s.state||t[17]!==c||t[18]!==a||t[19]!==d?(x=[f,m,y,o,s.state,d,c,a],t[12]=m,t[13]=y,t[14]=f,t[15]=o,t[16]=s.state,t[17]=c,t[18]=a,t[19]=d,t[20]=x):x=t[20],l.useEffect(b,x)}(T);const M=s.state===mt.CLOSED;let D;t[36]!==f||t[37]!==k||t[38]!==M?(D={saveOrNameNotebook:k,needsSave:f,closed:M},t[36]=f,t[37]=k,t[38]=M,t[39]=D):D=t[39];return D}(s);let d;!function(){const e=_.c(6),t=ue(qn),{state:n}=ue(ft),r=t.auto_download.includes("markdown"),o=t.auto_download.includes("html"),s=t.auto_download.includes("ipynb"),i=!r||n!==mt.OPEN,a=!o||n!==mt.OPEN,l=!s||n!==mt.OPEN;let c,d,u;e[0]!==i?(c={delayMs:Wf,whenVisible:!0,disabled:i},e[0]=i,e[1]=c):c=e[1],Fl(Yf,c),e[2]!==a?(d={delayMs:Wf,whenVisible:!0,disabled:a},e[2]=a,e[3]=d):d=e[3],Fl(qf,d),e[4]!==l?(u={delayMs:Wf,whenVisible:!0,disabled:l},e[4]=l,e[5]=u):u=e[5],Fl(Gf,u)}(),t[3]!==i?(d=e=>{e.preventDefault(),e.stopPropagation(),i()},t[3]=i,t[4]=d):d=t[4];const u=d;if(zl("global.save",i),c){let e;return t[5]!==o||t[6]!==a?(e=A.jsx(Vf,{filename:o,needsSave:a}),t[5]=o,t[6]=a,t[7]=e):e=t[7],e}let h;t[8]===Symbol.for("react.memo_cache_sentinel")?(h=Gt("global.save"),t[8]=h):h=t[8];const f=a?"yellow":"hint-green";let p,m;return t[9]===Symbol.for("react.memo_cache_sentinel")?(p=A.jsx(Hd,{strokeWidth:1.5,size:18}),t[9]=p):p=t[9],t[10]!==u||t[11]!==f?(m=A.jsx(ht,{content:h,children:A.jsx(Ll,{"data-testid":"save-button",id:"save-button",shape:"rectangle",color:f,onClick:u,children:p})}),t[10]=u,t[11]=f,t[12]=m):m=t[12],m};function Xf(e){return e.name}function Kf(e){return e.code}function Zf(e){return e.name}function Qf(e){return e.code}function ep(e){return e.id}const tp=e=>{const t=_.c(17),{onClose:n,onSave:r}=e,[o,s]=l.useState();let i;t[0]!==n||t[1]!==r?(i=e=>{s(e),e.trim()&&(r(e),n())},t[0]=n,t[1]=r,t[2]=i):i=t[2];const a=i;let c,d,u,h;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx(Le,{children:"Save notebook"}),t[3]=c):c=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx(ze,{className:"text-md pt-6 px-1",children:"Save as"}),t[4]=d):d=t[4],t[5]!==a?(u=A.jsxs("div",{className:"flex flex-col",children:[d,A.jsx(Lf,{onNameChange:a,placeholderText:"filename",className:"missing-filename"})]}),t[5]=a,t[6]=u):u=t[6],t[7]!==n?(h=A.jsx(te,{"data-testid":"cancel-save-dialog-button","aria-label":"Cancel",variant:"secondary",onClick:n,children:"Cancel"}),t[7]=n,t[8]=h):h=t[8];const f=!o;let p,m,g;return t[9]!==f?(p=A.jsx(te,{"data-testid":"submit-save-dialog-button","aria-label":"Save",variant:"default",disabled:f,type:"submit",children:"Save"}),t[9]=f,t[10]=p):p=t[10],t[11]!==h||t[12]!==p?(m=A.jsxs(ct,{children:[h,p]}),t[11]=h,t[12]=p,t[13]=m):m=t[13],t[14]!==u||t[15]!==m?(g=A.jsxs(Re,{children:[c,u,m]}),t[14]=u,t[15]=m,t[16]=g):g=t[16],g},np=e=>{const t=_.c(42),{presenting:n,onTogglePresenting:r,onInterrupt:o,onRun:s,closed:i,running:a,appConfig:l}=e,c=l.width,d=ue(Wt),u=ue(rr),{undoDeleteCell:h}=W();let f,p,m=null;if(!i&&d){let e,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(su,{size:16,strokeWidth:1.5}),t[0]=e):e=t[0],t[1]!==h?(n=A.jsx(ht,{content:"Undo cell deletion",children:A.jsx(Ll,{"data-testid":"undo-delete-cell",size:"medium",color:"hint-green",shape:"circle",onClick:h,children:e})}),t[1]=h,t[2]=n):n=t[2],m=n}t[3]!==n?(f=!n&&A.jsx(jf,{}),t[3]=n,t[4]=f):f=t[4],t[5]!==i||t[6]!==n?(p=!i&&A.jsxs("div",{className:sp,children:[n&&A.jsx(vu,{}),A.jsx(af,{}),A.jsx(Bl,{}),A.jsx(Ul,{description:"This will terminate the Python kernel. You'll lose all data that's in memory."})]}),t[5]=i,t[6]=n,t[7]=p):p=t[7];const g="compact"===c&&"xl:flex-row items-end";let y,b,x,v,w,k,S,C,E,N,j,I,T;return t[8]!==g?(y=Ln(ip,g),t[8]=g,t[9]=y):y=t[9],t[10]!==l?(b=A.jsx(Rf,{children:A.jsx(Jf,{kioskMode:!1,appConfig:l})}),t[10]=l,t[11]=b):b=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(x=Gt("global.hideCode"),t[12]=x):x=t[12],t[13]!==n?(v=n?A.jsx(qt,{strokeWidth:1.5,size:18}):A.jsx(Ed,{strokeWidth:1.5,size:18}),t[13]=n,t[14]=v):v=t[14],t[15]!==r||t[16]!==v?(w=A.jsx(ht,{content:x,children:A.jsx(Ll,{"data-testid":"hide-code-button",id:"preview-button",shape:"rectangle",color:"hint-green",onClick:r,children:v})}),t[15]=r,t[16]=v,t[17]=w):w=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(C=A.jsx(Df,{}),k=A.jsx($l,{}),S=A.jsx("div",{}),t[18]=k,t[19]=S,t[20]=C):(k=t[18],S=t[19],C=t[20]),t[21]!==i||t[22]!==o||t[23]!==a?(E=!i&&A.jsx(op,{running:a,onInterrupt:o}),t[21]=i,t[22]=o,t[23]=a,t[24]=E):E=t[24],t[25]!==i||t[26]!==u||t[27]!==s?(N=!i&&A.jsx(rp,{needsRun:u,onRun:s}),t[25]=i,t[26]=u,t[27]=s,t[28]=N):N=t[28],t[29]!==E||t[30]!==N||t[31]!==m?(j=A.jsx(Rf,{children:A.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[m,E,N]})}),t[29]=E,t[30]=N,t[31]=m,t[32]=j):j=t[32],t[33]!==j||t[34]!==y||t[35]!==b||t[36]!==w?(I=A.jsxs("div",{className:y,children:[b,w,C,k,S,j]}),t[33]=j,t[34]=y,t[35]=b,t[36]=w,t[37]=I):I=t[37],t[38]!==f||t[39]!==I||t[40]!==p?(T=A.jsxs(A.Fragment,{children:[f,p,I]}),t[38]=f,t[39]=I,t[40]=p,t[41]=T):T=t[41],T},rp=e=>{const t=_.c(5),{needsRun:n,onRun:r}=e;if(n){let e,n,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=Gt("global.runStale"),t[0]=e):e=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(n=A.jsx(Fd,{strokeWidth:1.5,size:16}),t[1]=n):n=t[1],t[2]!==r?(o=A.jsx(ht,{content:e,children:A.jsx(Ll,{"data-testid":"run-button",size:"medium",color:"yellow",shape:"circle",onClick:r,children:n})}),t[2]=r,t[3]=o):o=t[3],o}let o;return t[4]===Symbol.for("react.memo_cache_sentinel")?(o=A.jsx(ht,{content:"Nothing to run",children:A.jsx(Ll,{"data-testid":"run-button",className:"inactive-button",color:"disabled",size:"medium",shape:"circle",children:A.jsx(Fd,{strokeWidth:1.5,size:16})})}),t[4]=o):o=t[4],o},op=e=>{const t=_.c(8),{running:n,onInterrupt:r}=e,o=Mf(n);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=Gt("global.interrupt"),t[0]=s):s=t[0];const i=!o&&"inactive-button active:shadow-xsSolid";let a;t[1]!==i?(a=Ln(i),t[1]=i,t[2]=a):a=t[2];const l=o?"yellow":"disabled",c=o?r:or.NOOP;let d,u;return t[3]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx(L,{strokeWidth:1.5,size:16}),t[3]=d):d=t[3],t[4]!==a||t[5]!==l||t[6]!==c?(u=A.jsx(ht,{content:s,children:A.jsx(Ll,{className:a,"data-testid":"interrupt-button",size:"medium",color:l,shape:"circle",onClick:c,children:d})}),t[4]=a,t[5]=l,t[6]=c,t[7]=u):u=t[7],u},sp="absolute top-3 right-5 m-0 flex items-center space-x-3 min-h-[28px] no-print pointer-events-auto z-30 print:hidden",ip="absolute bottom-5 right-5 flex flex-col gap-2 items-center no-print pointer-events-auto z-30 print:hidden",ap=e=>{const t=_.c(7),{filename:n}=e,r=Qn();let o;t[0]!==n?(o=n?_t.basename(n):"untitled marimo app",t[0]=n,t[1]=o):o=t[1];const s=null===n?"missing-filename":"filename";let i;return t[2]!==n||t[3]!==r||t[4]!==o||t[5]!==s?(i=A.jsx(Lf,{placeholderText:o,initialValue:n,onNameChange:r,flexibleWidth:!0,resetOnBlur:!0,"data-testid":"filename-input",className:s}),t[2]=n,t[3]=r,t[4]=o,t[5]=s,t[6]=i):i=t[6],i},lp=sr(ir,400),cp=(e,t)=>{re.get(ge)||e.isEmpty()||t.isEmpty()||Wn(e.inOrderIds,t.inOrderIds)||lp({cell_ids:e.inOrderIds})};function dp(e){return[ar.of([{key:"Escape",preventDefault:!1,run:uf},{key:e.getHotkey("cell.selectNextOccurrence").key,preventDefault:!0,run:cr},{key:e.getHotkey("cell.findAndReplace").key,preventDefault:!0,run:df}]),lr(),Ef,kf,Nf]}var up=Object.defineProperty,hp=(e,t,n)=>(((e,t,n)=>{t in e?up(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const fp=Nn.define({create:()=>({suggestion:null}),update(e,t){const n=t.effects.find((e=>e.is(pp)));return t.state.doc&&n&&t.state.doc==n.value.doc?{suggestion:n.value.text}:{suggestion:null}}}),pp=In.define();class mp extends ur{constructor(e){super(),hp(this,"suggestion"),this.suggestion=e}toDOM(){const e=document.createElement("span");return e.style.opacity="0.4",e.className="cm-inline-suggestion",e.textContent=this.suggestion,e}get lineBreaks(){return this.suggestion.split("\n").length-1}}const gp=e=>En.fromClass(class{async update(t){const n=t.state.doc;if(!t.docChanged)return;const r=await e(t.state);t.view.dispatch({effects:pp.of({text:r,doc:n})})}}),yp=En.fromClass(class{constructor(){hp(this,"decorations"),this.decorations=jn.none}update(e){var t;const n=null==(t=e.state.field(fp))?void 0:t.suggestion;this.decorations=n?function(e,t){const n=e.state.selection.main.head,r=[],o=jn.widget({widget:new mp(t),side:1});return r.push(o.range(n)),jn.set(r)}(e.view,n):jn.none}},{decorations:e=>e.decorations}),bp=dr.highest(ar.of([{key:"Tab",run:e=>{var t;const n=null==(t=e.state.field(fp))?void 0:t.suggestion;return!!n&&(e.dispatch({...xp(e.state,n,e.state.selection.main.head,e.state.selection.main.head)}),!0)}}]));function xp(e,t,n,r){return{...e.changeByRange((o=>{if(o==e.selection.main)return{changes:{from:n,to:r,insert:t},range:Sn.cursor(n+t.length)};const s=r-n;return!o.empty||s&&e.sliceDoc(o.from-s,o.from)!=e.sliceDoc(n,r)?{range:o}:{changes:{from:o.from-s,to:o.from,insert:t},range:Sn.cursor(o.from-s+t.length)}})),userEvent:"input.complete"}}function vp(e){const{delay:t=500}=e,n=function(e,t,n){let r=()=>{};return(...o)=>(r(),new Promise(((s,i)=>{const a=setTimeout((()=>s(e(...o))),t);r=()=>{clearTimeout(a),void 0!==n&&i(n)}})))}(e.fetchFn,t);return[fp,gp(n),yp,bp]}const wp=In.define(),kp=In.define(),Sp=In.define();function Cp(e,t){if(!e)throw new Error(t)}function Ep(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function Np(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function jp(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}const _p=Symbol("@bufbuild/protobuf/enum-type");function Ip(e){const t=e[_p];return Cp(t,"missing enum type on enum object"),t}function Ap(e,t,n,r){e[_p]=Tp(t,n.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))))}function Tp(e,t,n){const r=Object.create(null),o=Object.create(null),s=[];for(const i of t){const e=Dp(i);s.push(e),r[i.name]=e,o[i.no]=e}return{typeName:e,values:s,findName:e=>r[e],findNumber:e=>o[e]}}function Mp(e,t,n){const r={};for(const o of t){const e=Dp(o);r[e.localName]=e.no,r[e.no]=e.localName}return Ap(r,e,t),r}function Dp(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class Op{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType().runtime.bin,r=n.makeReadOptions(t);return n.readMessage(this,r.readerFactory(e),e.byteLength,r),this}fromJson(e,t){const n=this.getType(),r=n.runtime.json,o=r.makeReadOptions(t);return r.readMessage(n,e,o,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(n,t)}toBinary(e){const t=this.getType().runtime.bin,n=t.makeWriteOptions(e),r=n.writerFactory();return t.writeMessage(this,r,n),r.finish()}toJson(e){const t=this.getType().runtime.json,n=t.makeWriteOptions(e);return t.writeMessage(this,n)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,null!==(t=null==e?void 0:e.prettySpaces)&&void 0!==t?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function Rp(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,!(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,!(128&n))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,!(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Pp(e,t,n){for(let s=0;s<28;s+=7){const r=e>>>s,o=!(r>>>7==0&&0==t),i=255&(o?128|r:r);if(n.push(i),!o)return}const r=e>>>28&15|(7&t)<<4,o=!!(t>>3);if(n.push(255&(o?128|r:r)),o){for(let e=3;e<31;e+=7){const r=t>>>e,o=!(r>>>7==0),s=255&(o?128|r:r);if(n.push(s),!o)return}n.push(t>>>31&1)}}const Lp=4294967296;function zp(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let r=0,o=0;function s(t,s){const i=Number(e.slice(t,s));o*=n,r=r*n+i,r>=Lp&&(o+=r/Lp|0,r%=Lp)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),t?Up(r,o):Bp(r,o)}function Fp(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(Lp*t+e);const n=16777215&(e>>>24|t<<8),r=t>>16&65535;let o=(16777215&e)+6777216*n+6710656*r,s=n+8147497*r,i=2*r;const a=1e7;return o>=a&&(s+=Math.floor(o/a),o%=a),s>=a&&(i+=Math.floor(s/a),s%=a),i.toString()+$p(s)+$p(o)}function Bp(e,t){return{lo:0|e,hi:0|t}}function Up(e,t){return t=~t,e?e=1+~e:t+=1,Bp(e,t)}const $p=e=>{const t=String(e);return"0000000".slice(t.length)+t};function Vp(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function Hp(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;128&e&&n<10;n++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var Wp={};const Gp=function(){const e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"1"!==Wp.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw new Error(`int64 invalid: ${e}`);return r},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>o||t<r)throw new Error(`uint64 invalid: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}const t=e=>Cp(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),n=e=>Cp(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),t(e),zp(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),n(e),zp(e)),dec:(e,t)=>function(e,t){let n=Bp(e,t);const r=2147483648&n.hi;r&&(n=Up(n.lo,n.hi));const o=Fp(n.lo,n.hi);return r?"-"+o:o}(e,t),uDec:(e,t)=>Fp(e,t)}}();var qp,Yp,Jp,Xp,Kp,Zp;function Qp(e,t,n){if(t===n)return!0;if(e==qp.BYTES){if(!(t instanceof Uint8Array&&n instanceof Uint8Array))return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}switch(e){case qp.UINT64:case qp.FIXED64:case qp.INT64:case qp.SFIXED64:case qp.SINT64:return t==n}return!1}function em(e,t){switch(e){case qp.BOOL:return!1;case qp.UINT64:case qp.FIXED64:case qp.INT64:case qp.SFIXED64:case qp.SINT64:return 0==t?Gp.zero:"0";case qp.DOUBLE:case qp.FLOAT:return 0;case qp.BYTES:return new Uint8Array(0);case qp.STRING:return"";default:return 0}}function tm(e,t){switch(e){case qp.BOOL:return!1===t;case qp.STRING:return""===t;case qp.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}(Yp=qp||(qp={}))[Yp.DOUBLE=1]="DOUBLE",Yp[Yp.FLOAT=2]="FLOAT",Yp[Yp.INT64=3]="INT64",Yp[Yp.UINT64=4]="UINT64",Yp[Yp.INT32=5]="INT32",Yp[Yp.FIXED64=6]="FIXED64",Yp[Yp.FIXED32=7]="FIXED32",Yp[Yp.BOOL=8]="BOOL",Yp[Yp.STRING=9]="STRING",Yp[Yp.BYTES=12]="BYTES",Yp[Yp.UINT32=13]="UINT32",Yp[Yp.SFIXED32=15]="SFIXED32",Yp[Yp.SFIXED64=16]="SFIXED64",Yp[Yp.SINT32=17]="SINT32",Yp[Yp.SINT64=18]="SINT64",(Xp=Jp||(Jp={}))[Xp.BIGINT=0]="BIGINT",Xp[Xp.STRING=1]="STRING",(Zp=Kp||(Kp={}))[Zp.Varint=0]="Varint",Zp[Zp.Bit64=1]="Bit64",Zp[Zp.LengthDelimited=2]="LengthDelimited",Zp[Zp.StartGroup=3]="StartGroup",Zp[Zp.EndGroup=4]="EndGroup",Zp[Zp.Bit32=5]="Bit32";class nm{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Np(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Ep(e),Vp(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){jp(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Np(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Ep(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Ep(e),Vp(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=Gp.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=Gp.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=Gp.enc(e);return Pp(t.lo,t.hi,this.buf),this}sint64(e){let t=Gp.enc(e),n=t.hi>>31;return Pp(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=Gp.uEnc(e);return Pp(t.lo,t.hi,this.buf),this}}class rm{constructor(e,t){this.varint64=Rp,this.uint32=Hp,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case Kp.Varint:for(;128&this.buf[this.pos++];);break;case Kp.Bit64:this.pos+=4;case Kp.Bit32:this.pos+=4;break;case Kp.LengthDelimited:let n=this.uint32();this.pos+=n;break;case Kp.StartGroup:for(;;){const[e,n]=this.tag();if(n===Kp.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return Gp.dec(...this.varint64())}uint64(){return Gp.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,Gp.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Gp.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Gp.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function om(e){const t=e.field.localName,n=Object.create(null);return n[t]=function(e){const t=e.field;if(t.repeated)return[];if(void 0!==t.default)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return em(t.T,t.L);case"message":const e=t.T,n=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}(e),[n,()=>n[t]]}let sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),im=[];for(let _J=0;_J<sm.length;_J++)im[sm[_J].charCodeAt(0)]=_J;im["-".charCodeAt(0)]=sm.indexOf("+"),im["_".charCodeAt(0)]=sm.indexOf("/");const am={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,r=new Uint8Array(t),o=0,s=0,i=0;for(let a=0;a<e.length;a++){if(n=im[e.charCodeAt(a)],void 0===n)switch(e[a]){case"=":s=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:i=n,s=1;break;case 1:r[o++]=i<<2|(48&n)>>4,i=n,s=2;break;case 2:r[o++]=(15&i)<<4|(60&n)>>2,i=n,s=3;break;case 3:r[o++]=(3&i)<<6|n,s=0}}if(1==s)throw Error("invalid base64 string.");return r.subarray(0,o)},enc(e){let t,n="",r=0,o=0;for(let s=0;s<e.length;s++)switch(t=e[s],r){case 0:n+=sm[t>>2],o=(3&t)<<4,r=1;break;case 1:n+=sm[o|t>>4],o=(15&t)<<2,r=2;break;case 2:n+=sm[o|t>>6],n+=sm[63&t],r=0}return r&&(n+=sm[o],n+="=",1==r&&(n+="=")),n}};function lm(e,t,n){um(t,e);const r=t.runtime.bin.makeReadOptions(n),o=function(e,t){if(!t.repeated&&("enum"==t.kind||"scalar"==t.kind)){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter((e=>e.no===t.no))}(e.getType().runtime.bin.listUnknownFields(e),t.field),[s,i]=om(t);for(const a of o)t.runtime.bin.readField(s,r.readerFactory(a.data),t.field,a.wireType,r);return i()}function cm(e,t,n,r){um(t,e);const o=t.runtime.bin.makeReadOptions(r),s=t.runtime.bin.makeWriteOptions(r);if(dm(e,t)){const n=e.getType().runtime.bin.listUnknownFields(e).filter((e=>e.no!=t.field.no));e.getType().runtime.bin.discardUnknownFields(e);for(const t of n)e.getType().runtime.bin.onUnknownField(e,t.no,t.wireType,t.data)}const i=s.writerFactory();let a=t.field;a.opt||a.repeated||"enum"!=a.kind&&"scalar"!=a.kind||(a=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(a,n,i,s);const l=o.readerFactory(i.finish());for(;l.pos<l.len;){const[t,n]=l.tag(),r=l.skip(n,t);e.getType().runtime.bin.onUnknownField(e,t,n,r)}}function dm(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find((e=>e.no==t.field.no))}function um(e,t){Cp(e.extendee.typeName==t.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}function hm(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?void 0!==t[n]:"enum"==e.kind?t[n]!==e.T.values[0].no:!tm(e.T,t[n]);case"message":return void 0!==t[n];case"map":return Object.keys(t[n]).length>0}}function fm(e,t){const n=e.localName,r=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=r?e.T.values[0].no:void 0;break;case"scalar":t[n]=r?em(e.T,e.L):void 0;break;case"message":t[n]=void 0}}function pm(e,t){if(null===e||"object"!=typeof e)return!1;if(!Object.getOwnPropertyNames(Op.prototype).every((t=>t in e&&"function"==typeof e[t])))return!1;const n=e.getType();return null!==n&&"function"==typeof n&&"typeName"in n&&"string"==typeof n.typeName&&(void 0===t||n.typeName==t.typeName)}function mm(e,t){return pm(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}qp.DOUBLE,qp.FLOAT,qp.INT64,qp.UINT64,qp.INT32,qp.UINT32,qp.BOOL,qp.STRING,qp.BYTES;const gm={ignoreUnknownFields:!1},ym={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function bm(e){return e?Object.assign(Object.assign({},gm),e):gm}function xm(e){return e?Object.assign(Object.assign({},ym),e):ym}const vm=Symbol(),wm=Symbol();function km(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}function Sm(e,t,n,r,o){let s=n.localName;if(n.repeated){if(Cp("map"!=n.kind),null===t)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${o.typeName}.${n.name} from JSON: ${km(t)}`);const a=e[s];for(const e of t){if(null===e)throw new Error(`cannot decode field ${o.typeName}.${n.name} from JSON: ${km(e)}`);switch(n.kind){case"message":a.push(n.T.fromJson(e,r));break;case"enum":const t=Nm(n.T,e,r.ignoreUnknownFields,!0);t!==wm&&a.push(t);break;case"scalar":try{a.push(Em(n.T,e,n.L,!0))}catch(i){let t=`cannot decode field ${o.typeName}.${n.name} from JSON: ${km(e)}`;throw i instanceof Error&&i.message.length>0&&(t+=`: ${i.message}`),new Error(t)}}}}else if("map"==n.kind){if(null===t)return;if("object"!=typeof t||Array.isArray(t))throw new Error(`cannot decode field ${o.typeName}.${n.name} from JSON: ${km(t)}`);const a=e[s];for(const[e,s]of Object.entries(t)){if(null===s)throw new Error(`cannot decode field ${o.typeName}.${n.name} from JSON: map value null`);let l;try{l=Cm(n.K,e)}catch(i){let e=`cannot decode map key for field ${o.typeName}.${n.name} from JSON: ${km(t)}`;throw i instanceof Error&&i.message.length>0&&(e+=`: ${i.message}`),new Error(e)}switch(n.V.kind){case"message":a[l]=n.V.T.fromJson(s,r);break;case"enum":const e=Nm(n.V.T,s,r.ignoreUnknownFields,!0);e!==wm&&(a[l]=e);break;case"scalar":try{a[l]=Em(n.V.T,s,Jp.BIGINT,!0)}catch(i){let e=`cannot decode map value for field ${o.typeName}.${n.name} from JSON: ${km(t)}`;throw i instanceof Error&&i.message.length>0&&(e+=`: ${i.message}`),new Error(e)}}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const a=n.T;if(null===t&&"google.protobuf.Value"!=a.typeName)return;let l=e[s];pm(l)?l.fromJson(t,r):(e[s]=l=a.fromJson(t,r),a.fieldWrapper&&!n.oneof&&(e[s]=a.fieldWrapper.unwrapField(l)));break;case"enum":const c=Nm(n.T,t,r.ignoreUnknownFields,!1);switch(c){case vm:fm(n,e);break;case wm:break;default:e[s]=c}break;case"scalar":try{const r=Em(n.T,t,n.L,!1);if(r===vm)fm(n,e);else e[s]=r}catch(i){let e=`cannot decode field ${o.typeName}.${n.name} from JSON: ${km(t)}`;throw i instanceof Error&&i.message.length>0&&(e+=`: ${i.message}`),new Error(e)}}}function Cm(e,t){if(e===qp.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1}return Em(e,t,Jp.BIGINT,!0).toString()}function Em(e,t,n,r){if(null===t)return r?em(e,n):vm;switch(e){case qp.DOUBLE:case qp.FLOAT:if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const r=Number(t);if(Number.isNaN(r))break;if(!Number.isFinite(r))break;return e==qp.FLOAT&&jp(r),r;case qp.INT32:case qp.FIXED32:case qp.SFIXED32:case qp.SINT32:case qp.UINT32:let s;if("number"==typeof t?s=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(s=Number(t)),void 0===s)break;return e==qp.UINT32||e==qp.FIXED32?Np(s):Ep(s),s;case qp.INT64:case qp.SFIXED64:case qp.SINT64:if("number"!=typeof t&&"string"!=typeof t)break;const i=Gp.parse(t);return n?i.toString():i;case qp.FIXED64:case qp.UINT64:if("number"!=typeof t&&"string"!=typeof t)break;const a=Gp.uParse(t);return n?a.toString():a;case qp.BOOL:if("boolean"!=typeof t)break;return t;case qp.STRING:if("string"!=typeof t)break;try{encodeURIComponent(t)}catch(o){throw new Error("invalid UTF8")}return t;case qp.BYTES:if(""===t)return new Uint8Array(0);if("string"!=typeof t)break;return am.dec(t)}throw new Error}function Nm(e,t,n,r){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:r?e.values[0].no:vm;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const r=e.findName(t);if(void 0!==r)return r.no;if(n)return wm}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${km(t)}`)}function jm(e){return!(!e.repeated&&"map"!=e.kind)||!e.oneof&&("message"!=e.kind&&(!e.opt&&!e.req))}function _m(e,t,n){if("map"==e.kind){Cp("object"==typeof t&&null!=t);const r={},o=Object.entries(t);switch(e.V.kind){case"scalar":for(const[n,s]of o)r[n.toString()]=Am(e.V.T,s);break;case"message":for(const[e,s]of o)r[e.toString()]=s.toJson(n);break;case"enum":const t=e.V.T;for(const[e,s]of o)r[e.toString()]=Im(t,s,n.enumAsInteger)}return n.emitDefaultValues||o.length>0?r:void 0}if(e.repeated){Cp(Array.isArray(t));const r=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++)r.push(Am(e.T,t[n]));break;case"enum":for(let o=0;o<t.length;o++)r.push(Im(e.T,t[o],n.enumAsInteger));break;case"message":for(let e=0;e<t.length;e++)r.push(t[e].toJson(n))}return n.emitDefaultValues||r.length>0?r:void 0}switch(e.kind){case"scalar":return Am(e.T,t);case"enum":return Im(e.T,t,n.enumAsInteger);case"message":return mm(e.T,t).toJson(n)}}function Im(e,t,n){var r;if(Cp("number"==typeof t),"google.protobuf.NullValue"==e.typeName)return null;if(n)return t;const o=e.findNumber(t);return null!==(r=null==o?void 0:o.name)&&void 0!==r?r:t}function Am(e,t){switch(e){case qp.INT32:case qp.SFIXED32:case qp.SINT32:case qp.FIXED32:case qp.UINT32:return Cp("number"==typeof t),t;case qp.FLOAT:case qp.DOUBLE:return Cp("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case qp.STRING:return Cp("string"==typeof t),t;case qp.BOOL:return Cp("boolean"==typeof t),t;case qp.UINT64:case qp.FIXED64:case qp.INT64:case qp.SFIXED64:case qp.SINT64:return Cp("bigint"==typeof t||"string"==typeof t||"number"==typeof t),t.toString();case qp.BYTES:return Cp(t instanceof Uint8Array),am.enc(t)}}const Tm=Symbol("@bufbuild/protobuf/unknown-fields"),Mm={readUnknownFields:!0,readerFactory:e=>new rm(e)},Dm={writeUnknownFields:!0,writerFactory:()=>new nm};function Om(e){return e?Object.assign(Object.assign({},Mm),e):Mm}function Rm(e){return e?Object.assign(Object.assign({},Dm),e):Dm}function Pm(e,t,n,r,o){let{repeated:s,localName:i}=n;switch(n.oneof&&((e=e[n.oneof.localName]).case!=i&&delete e.value,e.case=i,i="value"),n.kind){case"scalar":case"enum":const a="enum"==n.kind?qp.INT32:n.T;let l=Fm;if("scalar"==n.kind&&n.L>0&&(l=zm),s){let n=e[i];if(r==Kp.LengthDelimited&&a!=qp.STRING&&a!=qp.BYTES){let e=t.uint32()+t.pos;for(;t.pos<e;)n.push(l(t,a))}else n.push(l(t,a))}else e[i]=l(t,a);break;case"message":const c=n.T;s?e[i].push(Lm(t,new c,o,n)):pm(e[i])?Lm(t,e[i],o,n):(e[i]=Lm(t,new c,o,n),!c.fieldWrapper||n.oneof||n.repeated||(e[i]=c.fieldWrapper.unwrapField(e[i])));break;case"map":let[d,u]=function(e,t,n){const r=t.uint32(),o=t.pos+r;let s,i;for(;t.pos<o;){const[r]=t.tag();switch(r){case 1:s=Fm(t,e.K);break;case 2:switch(e.V.kind){case"scalar":i=Fm(t,e.V.T);break;case"enum":i=t.int32();break;case"message":i=Lm(t,new e.V.T,n,void 0)}}}void 0===s&&(s=em(e.K,Jp.BIGINT));"string"!=typeof s&&"number"!=typeof s&&(s=s.toString());if(void 0===i)switch(e.V.kind){case"scalar":i=em(e.V.T,Jp.BIGINT);break;case"enum":i=e.V.T.values[0].no;break;case"message":i=new e.V.T}return[s,i]}(n,t,o);e[i][d]=u}}function Lm(e,t,n,r){const o=t.getType().runtime.bin,s=null==r?void 0:r.delimited;return o.readMessage(t,e,s?r.no:e.uint32(),n,s),t}function zm(e,t){const n=Fm(e,t);return"bigint"==typeof n?n.toString():n}function Fm(e,t){switch(t){case qp.STRING:return e.string();case qp.BOOL:return e.bool();case qp.DOUBLE:return e.double();case qp.FLOAT:return e.float();case qp.INT32:return e.int32();case qp.INT64:return e.int64();case qp.UINT64:return e.uint64();case qp.FIXED64:return e.fixed64();case qp.BYTES:return e.bytes();case qp.FIXED32:return e.fixed32();case qp.SFIXED32:return e.sfixed32();case qp.SFIXED64:return e.sfixed64();case qp.SINT64:return e.sint64();case qp.UINT32:return e.uint32();case qp.SINT32:return e.sint32()}}function Bm(e,t,n,r){Cp(void 0!==t);const o=e.repeated;switch(e.kind){case"scalar":case"enum":let s="enum"==e.kind?qp.INT32:e.T;if(o)if(Cp(Array.isArray(t)),e.packed)!function(e,t,n,r){if(!r.length)return;e.tag(n,Kp.LengthDelimited).fork();let[,o]=Hm(t);for(let s=0;s<r.length;s++)e[o](r[s]);e.join()}(n,s,e.no,t);else for(const r of t)Vm(n,s,e.no,r);else Vm(n,s,e.no,t);break;case"message":if(o){Cp(Array.isArray(t));for(const o of t)$m(n,r,e,o)}else $m(n,r,e,t);break;case"map":Cp("object"==typeof t&&null!=t);for(const[o,i]of Object.entries(t))Um(n,r,e,o,i)}}function Um(e,t,n,r,o){e.tag(n.no,Kp.LengthDelimited),e.fork();let s=r;switch(n.K){case qp.INT32:case qp.FIXED32:case qp.UINT32:case qp.SFIXED32:case qp.SINT32:s=Number.parseInt(r);break;case qp.BOOL:Cp("true"==r||"false"==r),s="true"==r}switch(Vm(e,n.K,1,s),n.V.kind){case"scalar":Vm(e,n.V.T,2,o);break;case"enum":Vm(e,qp.INT32,2,o);break;case"message":Cp(void 0!==o),e.tag(2,Kp.LengthDelimited).bytes(o.toBinary(t))}e.join()}function $m(e,t,n,r){const o=mm(n.T,r);n.delimited?e.tag(n.no,Kp.StartGroup).raw(o.toBinary(t)).tag(n.no,Kp.EndGroup):e.tag(n.no,Kp.LengthDelimited).bytes(o.toBinary(t))}function Vm(e,t,n,r){Cp(void 0!==r);let[o,s]=Hm(t);e.tag(n,o)[s](r)}function Hm(e){let t=Kp.Varint;switch(e){case qp.BYTES:case qp.STRING:t=Kp.LengthDelimited;break;case qp.DOUBLE:case qp.FIXED64:case qp.SFIXED64:t=Kp.Bit64;break;case qp.FIXED32:case qp.SFIXED32:case qp.FLOAT:t=Kp.Bit32}return[t,qp[e].toLowerCase()]}function Wm(e){if(void 0===e)return e;if(pm(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function Gm(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class qm{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function Ym(e,t){const n=Xm(e);return t?n:tg(eg(n))}const Jm=Xm;function Xm(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let o=e.charAt(r);switch(o){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(o),t=!1;break;default:t&&(t=!1,o=o.toUpperCase()),n.push(o)}}return n.join("")}const Km=new Set(["constructor","toString","toJSON","valueOf"]),Zm=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Qm=e=>`${e}$`,eg=e=>Zm.has(e)?Qm(e):e,tg=e=>Km.has(e)?Qm(e):e;class ng{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Ym(e,!1)}addField(e){Cp(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}const rg=(og=e=>new qm(e,(e=>function(e){var t,n,r,o,s,i;const a=[];let l;for(const c of"function"==typeof e?e():e){const e=c;if(e.localName=Ym(c.name,void 0!==c.oneof),e.jsonName=null!==(t=c.jsonName)&&void 0!==t?t:Jm(c.name),e.repeated=null!==(n=c.repeated)&&void 0!==n&&n,"scalar"==c.kind&&(e.L=null!==(r=c.L)&&void 0!==r?r:Jp.BIGINT),e.delimited=null!==(o=c.delimited)&&void 0!==o&&o,e.req=null!==(s=c.req)&&void 0!==s&&s,e.opt=null!==(i=c.opt)&&void 0!==i&&i,void 0===c.packed&&(e.packed="enum"==c.kind||"scalar"==c.kind&&c.T!=qp.BYTES&&c.T!=qp.STRING),void 0!==c.oneof){const t="string"==typeof c.oneof?c.oneof:c.oneof.name;l&&l.name==t||(l=new ng(t)),e.oneof=l,l.addField(e)}a.push(e)}return a}(e))),sg=e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,r=e;if(t.repeated)r[n]=[];else switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=em(t.T,t.L)}}},{syntax:"proto3",json:{makeReadOptions:bm,makeWriteOptions:xm,readMessage(e,t,n,r){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error(`cannot decode message ${e.typeName} from JSON: ${km(t)}`);r=null!=r?r:new e;const o=new Map,s=n.typeRegistry;for(const[i,a]of Object.entries(t)){const t=e.fields.findJsonName(i);if(t){if(t.oneof){if(null===a&&"scalar"==t.kind)continue;const n=o.get(t.oneof);if(void 0!==n)throw new Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${t.oneof.name}" present: "${n}", "${i}"`);o.set(t.oneof,i)}Sm(r,a,t,n,e)}else{let t=!1;if((null==s?void 0:s.findExtension)&&i.startsWith("[")&&i.endsWith("]")){const o=s.findExtension(i.substring(1,i.length-1));if(o&&o.extendee.typeName==e.typeName){t=!0;const[e,s]=om(o);Sm(e,a,o.field,n,o),cm(r,o,s(),n)}}if(!t&&!n.ignoreUnknownFields)throw new Error(`cannot decode message ${e.typeName} from JSON: key "${i}" is unknown`)}}return r},writeMessage(e,t){const n=e.getType(),r={};let o;try{for(o of n.fields.byNumber()){if(!hm(o,e)){if(o.req)throw"required field not set";if(!t.emitDefaultValues)continue;if(!jm(o))continue}const n=_m(o,o.oneof?e[o.oneof.localName].value:e[o.localName],t);void 0!==n&&(r[t.useProtoFieldName?o.name:o.jsonName]=n)}const s=t.typeRegistry;if(null==s?void 0:s.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(e)){const i=s.findExtensionFor(n.typeName,o.no);if(i&&dm(e,i)){const n=lm(e,i,t),o=_m(i.field,n,t);void 0!==o&&(r[i.field.jsonName]=o)}}}catch(s){const e=o?`cannot encode field ${n.typeName}.${o.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,t=s instanceof Error?s.message:String(s);throw new Error(e+(t.length>0?`: ${t}`:""))}return r},readScalar:(e,t,n)=>Em(e,t,null!=n?n:Jp.BIGINT,!0),writeScalar(e,t,n){if(void 0!==t)return n||tm(e,t)?Am(e,t):void 0},debug:km},bin:{makeReadOptions:Om,makeWriteOptions:Rm,listUnknownFields(e){var t;return null!==(t=e[Tm])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[Tm]},writeUnknownFields(e,t){const n=e[Tm];if(n)for(const r of n)t.tag(r.no,r.wireType).raw(r.data)},onUnknownField(e,t,n,r){const o=e;Array.isArray(o[Tm])||(o[Tm]=[]),o[Tm].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,o){const s=e.getType(),i=o?t.len:t.pos+n;let a,l;for(;t.pos<i&&([a,l]=t.tag(),!0!==o||l!=Kp.EndGroup);){const n=s.fields.find(a);if(n)Pm(e,t,n,l,r);else{const n=t.skip(l,a);r.readUnknownFields&&this.onUnknownField(e,a,l,n)}}if(o&&(l!=Kp.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:Pm,writeMessage(e,t,n){const r=e.getType();for(const o of r.fields.byNumber())if(hm(o,e))Bm(o,o.oneof?e[o.oneof.localName].value:e[o.localName],t,n);else if(o.req)throw new Error(`cannot encode field ${r.typeName}.${o.name} to binary: required field not set`);return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,r){void 0!==t&&Bm(e,t,n,r)}},util:Object.assign(Object.assign({},{setEnumType:Ap,initPartial(e,t){if(void 0===e)return;const n=t.getType();for(const r of n.fields.byMember()){const n=r.localName,o=t,s=e;if(null!=s[n])switch(r.kind){case"oneof":const e=s[n].case;if(void 0===e)continue;const t=r.findField(e);let i=s[n].value;t&&"message"==t.kind&&!pm(i,t.T)?i=new t.T(i):t&&"scalar"===t.kind&&t.T===qp.BYTES&&(i=Gm(i)),o[n]={case:e,value:i};break;case"scalar":case"enum":let a=s[n];r.T===qp.BYTES&&(a=r.repeated?a.map(Gm):Gm(a)),o[n]=a;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===qp.BYTES)for(const[t,r]of Object.entries(s[n]))o[n][t]=Gm(r);else Object.assign(o[n],s[n]);break;case"message":const e=r.V.T;for(const t of Object.keys(s[n])){let r=s[n][t];e.fieldWrapper||(r=new e(r)),o[n][t]=r}}break;case"message":const l=r.T;if(r.repeated)o[n]=s[n].map((e=>pm(e,l)?e:new l(e)));else{const e=s[n];l.fieldWrapper?"google.protobuf.BytesValue"===l.typeName?o[n]=Gm(e):o[n]=e:o[n]=pm(e,l)?e:new l(e)}}}},equals:(e,t,n)=>t===n||!(!t||!n)&&e.fields.byMember().every((e=>{const r=t[e.localName],o=n[e.localName];if(e.repeated){if(r.length!==o.length)return!1;switch(e.kind){case"message":return r.every(((t,n)=>e.T.equals(t,o[n])));case"scalar":return r.every(((t,n)=>Qp(e.T,t,o[n])));case"enum":return r.every(((e,t)=>Qp(qp.INT32,e,o[t])))}throw new Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":return e.T.equals(r,o);case"enum":return Qp(qp.INT32,r,o);case"scalar":return Qp(e.T,r,o);case"oneof":if(r.case!==o.case)return!1;const t=e.findField(r.case);if(void 0===t)return!0;switch(t.kind){case"message":return t.T.equals(r.value,o.value);case"enum":return Qp(qp.INT32,r.value,o.value);case"scalar":return Qp(t.T,r.value,o.value)}throw new Error(`oneof cannot contain ${t.kind}`);case"map":const n=Object.keys(r).concat(Object.keys(o));switch(e.V.kind){case"message":const t=e.V.T;return n.every((e=>t.equals(r[e],o[e])));case"enum":return n.every((e=>Qp(qp.INT32,r[e],o[e])));case"scalar":const s=e.V.T;return n.every((e=>Qp(s,r[e],o[e])))}}})),clone(e){const t=e.getType(),n=new t,r=n;for(const o of t.fields.byMember()){const t=e[o.localName];let n;if(o.repeated)n=t.map(Wm);else if("map"==o.kind){n=r[o.localName];for(const[e,r]of Object.entries(t))n[e]=Wm(r)}else n="oneof"==o.kind?o.findField(t.case)?{case:t.case,value:Wm(t.value)}:{case:void 0}:Wm(t);r[o.localName]=n}for(const o of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(r,o.no,o.wireType,o.data);return n}}),{newFieldList:og,initFields:sg}),makeMessageType(e,t,n){return function(e,t,n,r){var o;const s=null!==(o=null==r?void 0:r.localName)&&void 0!==o?o:t.substring(t.lastIndexOf(".")+1),i={[s]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[s];return Object.setPrototypeOf(i.prototype,new Op),Object.assign(i,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary:(e,t)=>(new i).fromBinary(e,t),fromJson:(e,t)=>(new i).fromJson(e,t),fromJsonString:(e,t)=>(new i).fromJsonString(e,t),equals:(t,n)=>e.util.equals(i,t,n)}),i}(this,e,t,n)},makeEnum:Mp,makeEnumType:Tp,getEnumType:Ip,makeExtension(e,t,n){return function(e,t,n,r){let o;return{typeName:t,extendee:n,get field(){if(!o){const n="function"==typeof r?r():r;n.name=t.split(".").pop(),n.jsonName=`[${t}]`,o=e.util.newFieldList([n]).list()[0]}return o},runtime:e}}(this,e,t,n)}});var og,sg,ig,ag,lg,cg,dg,ug,hg,fg,pg,mg,gg,yg,bg,xg;(ag=ig||(ig={}))[ag.Unary=0]="Unary",ag[ag.ServerStreaming=1]="ServerStreaming",ag[ag.ClientStreaming=2]="ClientStreaming",ag[ag.BiDiStreaming=3]="BiDiStreaming",(cg=lg||(lg={}))[cg.NoSideEffects=1]="NoSideEffects",cg[cg.Idempotent=2]="Idempotent",(ug=dg||(dg={}))[ug.UNSPECIFIED=0]="UNSPECIFIED",ug[ug.JUPYTER_FORMAT=77]="JUPYTER_FORMAT",rg.util.setEnumType(dg,"exa.codeium_common_pb.ExperimentKey",[{no:0,name:"UNSPECIFIED"},{no:77,name:"JUPYTER_FORMAT"}]),(fg=hg||(hg={}))[fg.CODEIUM=0]="CODEIUM",rg.util.setEnumType(hg,"exa.codeium_common_pb.AuthSource",[{no:0,name:"AUTH_SOURCE_CODEIUM"}]),(mg=pg||(pg={}))[mg.UNSPECIFIED=0]="UNSPECIFIED",mg[mg.ENABLE_CODEIUM=1]="ENABLE_CODEIUM",mg[mg.DISABLE_CODEIUM=2]="DISABLE_CODEIUM",mg[mg.SHOW_PREVIOUS_COMPLETION=3]="SHOW_PREVIOUS_COMPLETION",mg[mg.SHOW_NEXT_COMPLETION=4]="SHOW_NEXT_COMPLETION",rg.util.setEnumType(pg,"exa.codeium_common_pb.EventType",[{no:0,name:"EVENT_TYPE_UNSPECIFIED"},{no:1,name:"EVENT_TYPE_ENABLE_CODEIUM"},{no:2,name:"EVENT_TYPE_DISABLE_CODEIUM"},{no:3,name:"EVENT_TYPE_SHOW_PREVIOUS_COMPLETION"},{no:4,name:"EVENT_TYPE_SHOW_NEXT_COMPLETION"}]),(yg=gg||(gg={}))[yg.UNSPECIFIED=0]="UNSPECIFIED",yg[yg.TYPING_AS_SUGGESTED=1]="TYPING_AS_SUGGESTED",yg[yg.CACHE=2]="CACHE",yg[yg.NETWORK=3]="NETWORK",rg.util.setEnumType(gg,"exa.codeium_common_pb.CompletionSource",[{no:0,name:"COMPLETION_SOURCE_UNSPECIFIED"},{no:1,name:"COMPLETION_SOURCE_TYPING_AS_SUGGESTED"},{no:2,name:"COMPLETION_SOURCE_CACHE"},{no:3,name:"COMPLETION_SOURCE_NETWORK"}]),(xg=bg||(bg={}))[xg.UNSPECIFIED=0]="UNSPECIFIED",xg[xg.C=1]="C",xg[xg.CLOJURE=2]="CLOJURE",xg[xg.COFFEESCRIPT=3]="COFFEESCRIPT",xg[xg.CPP=4]="CPP",xg[xg.CSHARP=5]="CSHARP",xg[xg.CSS=6]="CSS",xg[xg.CUDACPP=7]="CUDACPP",xg[xg.DOCKERFILE=8]="DOCKERFILE",xg[xg.GO=9]="GO",xg[xg.GROOVY=10]="GROOVY",xg[xg.HANDLEBARS=11]="HANDLEBARS",xg[xg.HASKELL=12]="HASKELL",xg[xg.HCL=13]="HCL",xg[xg.HTML=14]="HTML",xg[xg.INI=15]="INI",xg[xg.JAVA=16]="JAVA",xg[xg.JAVASCRIPT=17]="JAVASCRIPT",xg[xg.JSON=18]="JSON",xg[xg.JULIA=19]="JULIA",xg[xg.KOTLIN=20]="KOTLIN",xg[xg.LATEX=21]="LATEX",xg[xg.LESS=22]="LESS",xg[xg.LUA=23]="LUA",xg[xg.MAKEFILE=24]="MAKEFILE",xg[xg.MARKDOWN=25]="MARKDOWN",xg[xg.OBJECTIVEC=26]="OBJECTIVEC",xg[xg.OBJECTIVECPP=27]="OBJECTIVECPP",xg[xg.PERL=28]="PERL",xg[xg.PHP=29]="PHP",xg[xg.PLAINTEXT=30]="PLAINTEXT",xg[xg.PROTOBUF=31]="PROTOBUF",xg[xg.PBTXT=32]="PBTXT",xg[xg.PYTHON=33]="PYTHON",xg[xg.R=34]="R",xg[xg.RUBY=35]="RUBY",xg[xg.RUST=36]="RUST",xg[xg.SASS=37]="SASS",xg[xg.SCALA=38]="SCALA",xg[xg.SCSS=39]="SCSS",xg[xg.SHELL=40]="SHELL",xg[xg.SQL=41]="SQL",xg[xg.STARLARK=42]="STARLARK",xg[xg.SWIFT=43]="SWIFT",xg[xg.TSX=44]="TSX",xg[xg.TYPESCRIPT=45]="TYPESCRIPT",xg[xg.VISUALBASIC=46]="VISUALBASIC",xg[xg.VUE=47]="VUE",xg[xg.XML=48]="XML",xg[xg.XSL=49]="XSL",xg[xg.YAML=50]="YAML",xg[xg.SVELTE=51]="SVELTE",xg[xg.TOML=52]="TOML",xg[xg.DART=53]="DART",xg[xg.RST=54]="RST",xg[xg.OCAML=55]="OCAML",xg[xg.CMAKE=56]="CMAKE",xg[xg.PASCAL=57]="PASCAL",xg[xg.ELIXIR=58]="ELIXIR",xg[xg.FSHARP=59]="FSHARP",xg[xg.LISP=60]="LISP",xg[xg.MATLAB=61]="MATLAB",xg[xg.POWERSHELL=62]="POWERSHELL",xg[xg.SOLIDITY=63]="SOLIDITY",xg[xg.ADA=64]="ADA",xg[xg.OCAML_INTERFACE=65]="OCAML_INTERFACE",rg.util.setEnumType(bg,"exa.codeium_common_pb.Language",[{no:0,name:"LANGUAGE_UNSPECIFIED"},{no:1,name:"LANGUAGE_C"},{no:2,name:"LANGUAGE_CLOJURE"},{no:3,name:"LANGUAGE_COFFEESCRIPT"},{no:4,name:"LANGUAGE_CPP"},{no:5,name:"LANGUAGE_CSHARP"},{no:6,name:"LANGUAGE_CSS"},{no:7,name:"LANGUAGE_CUDACPP"},{no:8,name:"LANGUAGE_DOCKERFILE"},{no:9,name:"LANGUAGE_GO"},{no:10,name:"LANGUAGE_GROOVY"},{no:11,name:"LANGUAGE_HANDLEBARS"},{no:12,name:"LANGUAGE_HASKELL"},{no:13,name:"LANGUAGE_HCL"},{no:14,name:"LANGUAGE_HTML"},{no:15,name:"LANGUAGE_INI"},{no:16,name:"LANGUAGE_JAVA"},{no:17,name:"LANGUAGE_JAVASCRIPT"},{no:18,name:"LANGUAGE_JSON"},{no:19,name:"LANGUAGE_JULIA"},{no:20,name:"LANGUAGE_KOTLIN"},{no:21,name:"LANGUAGE_LATEX"},{no:22,name:"LANGUAGE_LESS"},{no:23,name:"LANGUAGE_LUA"},{no:24,name:"LANGUAGE_MAKEFILE"},{no:25,name:"LANGUAGE_MARKDOWN"},{no:26,name:"LANGUAGE_OBJECTIVEC"},{no:27,name:"LANGUAGE_OBJECTIVECPP"},{no:28,name:"LANGUAGE_PERL"},{no:29,name:"LANGUAGE_PHP"},{no:30,name:"LANGUAGE_PLAINTEXT"},{no:31,name:"LANGUAGE_PROTOBUF"},{no:32,name:"LANGUAGE_PBTXT"},{no:33,name:"LANGUAGE_PYTHON"},{no:34,name:"LANGUAGE_R"},{no:35,name:"LANGUAGE_RUBY"},{no:36,name:"LANGUAGE_RUST"},{no:37,name:"LANGUAGE_SASS"},{no:38,name:"LANGUAGE_SCALA"},{no:39,name:"LANGUAGE_SCSS"},{no:40,name:"LANGUAGE_SHELL"},{no:41,name:"LANGUAGE_SQL"},{no:42,name:"LANGUAGE_STARLARK"},{no:43,name:"LANGUAGE_SWIFT"},{no:44,name:"LANGUAGE_TSX"},{no:45,name:"LANGUAGE_TYPESCRIPT"},{no:46,name:"LANGUAGE_VISUALBASIC"},{no:47,name:"LANGUAGE_VUE"},{no:48,name:"LANGUAGE_XML"},{no:49,name:"LANGUAGE_XSL"},{no:50,name:"LANGUAGE_YAML"},{no:51,name:"LANGUAGE_SVELTE"},{no:52,name:"LANGUAGE_TOML"},{no:53,name:"LANGUAGE_DART"},{no:54,name:"LANGUAGE_RST"},{no:55,name:"LANGUAGE_OCAML"},{no:56,name:"LANGUAGE_CMAKE"},{no:57,name:"LANGUAGE_PASCAL"},{no:58,name:"LANGUAGE_ELIXIR"},{no:59,name:"LANGUAGE_FSHARP"},{no:60,name:"LANGUAGE_LISP"},{no:61,name:"LANGUAGE_MATLAB"},{no:62,name:"LANGUAGE_POWERSHELL"},{no:63,name:"LANGUAGE_SOLIDITY"},{no:64,name:"LANGUAGE_ADA"},{no:65,name:"LANGUAGE_OCAML_INTERFACE"}]);const vg=class e extends Op{constructor(e){super(),s(this,"completionId",""),s(this,"text",""),s(this,"prefix",""),s(this,"stop",""),s(this,"score",0),s(this,"tokens",[]),s(this,"decodedTokens",[]),s(this,"probabilities",[]),s(this,"adjustedProbabilities",[]),s(this,"generatedLength",Gp.zero),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(vg,"runtime",rg),s(vg,"typeName","exa.codeium_common_pb.Completion"),s(vg,"fields",rg.util.newFieldList((()=>[{no:1,name:"completion_id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"prefix",kind:"scalar",T:9},{no:4,name:"stop",kind:"scalar",T:9},{no:5,name:"score",kind:"scalar",T:1},{no:6,name:"tokens",kind:"scalar",T:4,repeated:!0},{no:7,name:"decoded_tokens",kind:"scalar",T:9,repeated:!0},{no:8,name:"probabilities",kind:"scalar",T:1,repeated:!0},{no:9,name:"adjusted_probabilities",kind:"scalar",T:1,repeated:!0},{no:10,name:"generated_length",kind:"scalar",T:4}])));let wg=vg;const kg=class e extends Op{constructor(e){super(),s(this,"ideName",""),s(this,"ideVersion",""),s(this,"extensionName",""),s(this,"extensionVersion",""),s(this,"apiKey",""),s(this,"locale",""),s(this,"sessionId",""),s(this,"requestId",Gp.zero),s(this,"userAgent",""),s(this,"url",""),s(this,"authSource",hg.CODEIUM),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(kg,"runtime",rg),s(kg,"typeName","exa.codeium_common_pb.Metadata"),s(kg,"fields",rg.util.newFieldList((()=>[{no:1,name:"ide_name",kind:"scalar",T:9},{no:7,name:"ide_version",kind:"scalar",T:9},{no:12,name:"extension_name",kind:"scalar",T:9},{no:2,name:"extension_version",kind:"scalar",T:9},{no:3,name:"api_key",kind:"scalar",T:9},{no:4,name:"locale",kind:"scalar",T:9},{no:10,name:"session_id",kind:"scalar",T:9},{no:9,name:"request_id",kind:"scalar",T:4},{no:13,name:"user_agent",kind:"scalar",T:9},{no:14,name:"url",kind:"scalar",T:9},{no:15,name:"auth_source",kind:"enum",T:rg.getEnumType(hg)}])));let Sg=kg;const Cg=class e extends Op{constructor(e){super(),s(this,"tabSize",Gp.zero),s(this,"insertSpaces",!1),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Cg,"runtime",rg),s(Cg,"typeName","exa.codeium_common_pb.EditorOptions"),s(Cg,"fields",rg.util.newFieldList((()=>[{no:1,name:"tab_size",kind:"scalar",T:4},{no:2,name:"insert_spaces",kind:"scalar",T:8}])));let Eg=Cg;e=class extends Op{constructor(e){super(),s(this,"eventType",pg.UNSPECIFIED),s(this,"eventJson",""),s(this,"timestampUnixMs",Gp.zero),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}},s(e,"runtime",rg),s(e,"typeName","exa.codeium_common_pb.Event"),s(e,"fields",rg.util.newFieldList((()=>[{no:1,name:"event_type",kind:"enum",T:rg.getEnumType(pg)},{no:2,name:"event_json",kind:"scalar",T:9},{no:3,name:"timestamp_unix_ms",kind:"scalar",T:3}])));class Ng extends ur{constructor(e,t){super(),s(this,"index"),s(this,"total"),this.index=e,this.total=t}toDOM(){const e=document.createElement("span");e.setAttribute("aria-hidden","true"),e.className="cm-codeium-cycle";const t=e.appendChild(document.createElement("span"));t.className="cm-codeium-cycle-explanation",t.innerText=`${this.index+1}/${this.total}`;const n=e.appendChild(document.createElement("button"));return n.className="cm-codeium-cycle-key",n.innerText="→ (Ctrl ])",n.dataset.action="codeium-cycle",e}ignoreEvent(){return!1}}const jg=hr.define({combine:e=>fr(e,{language:bg.TYPESCRIPT,timeout:150,widgetClass:Ng,alwaysOn:!0},{})}),_g=hr.define({combine:e=>fr(e,{override:()=>[]},{})}),Ig=jn.mark({class:"cm-ghostText"}),Ag=Nn.define({create:e=>null,update(e,t){var n;const r=t.state.facet(jg);for(const o of t.effects){if(o.is(wp)){const{changeSpecs:e,index:t}=o.value,s=e[t].map((e=>Ig.range(e.absoluteStartPos,e.absoluteEndPos))),i=null==(n=s.at(-1))?void 0:n.to;return{index:t,decorations:jn.set([...s,...void 0!==i&&e.length>1&&r.widgetClass?[jn.widget({widget:new r.widgetClass(t,e.length),side:1}).range(i)]:[]]),changeSpecs:e,reverseChangeSet:o.value.reverseChangeSet}}if(o.is(kp))return null;if(o.is(Sp))return null}return e?{...e,decorations:e.decorations.map(t.changes),reverseChangeSet:e.reverseChangeSet.map(t.changes)}:e},provide:e=>Cn.decorations.from(e,(e=>(null==e?void 0:e.decorations)||jn.none))}),Tg=pr.define(),Mg=pr.define();var Dg,Og;function Rg(e){const t=Dg[e];return"string"!=typeof t?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,(e=>"_"+e.toLowerCase()))}let Pg;(Og=Dg||(Dg={}))[Og.Canceled=1]="Canceled",Og[Og.Unknown=2]="Unknown",Og[Og.InvalidArgument=3]="InvalidArgument",Og[Og.DeadlineExceeded=4]="DeadlineExceeded",Og[Og.NotFound=5]="NotFound",Og[Og.AlreadyExists=6]="AlreadyExists",Og[Og.PermissionDenied=7]="PermissionDenied",Og[Og.ResourceExhausted=8]="ResourceExhausted",Og[Og.FailedPrecondition=9]="FailedPrecondition",Og[Og.Aborted=10]="Aborted",Og[Og.OutOfRange=11]="OutOfRange",Og[Og.Unimplemented=12]="Unimplemented",Og[Og.Internal=13]="Internal",Og[Og.Unavailable=14]="Unavailable",Og[Og.DataLoss=15]="DataLoss",Og[Og.Unauthenticated=16]="Unauthenticated";class Lg extends Error{constructor(e,t=Dg.Unknown,n,r,o){super(function(e,t){return e.length?`[${Rg(t)}] ${e}`:`[${Rg(t)}]`}(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(null!=n?n:{}),this.details=null!=r?r:[],this.cause=o}static from(e,t=Dg.Unknown){return e instanceof Lg?e:e instanceof Error?"AbortError"==e.name?new Lg(e.message,Dg.Canceled):new Lg(e.message,t,void 0,void 0,e):new Lg(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error&&(Object.getPrototypeOf(e)===Lg.prototype||"ConnectError"===e.name&&"code"in e&&"number"==typeof e.code&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&"string"==typeof e.rawMessage&&"cause"in e)}findDetails(e){const t="typeName"in e?{findMessage:t=>t===e.typeName?e:void 0}:e,n=[];for(const o of this.details){if("getType"in o){t.findMessage(o.getType().typeName)&&n.push(o);continue}const e=t.findMessage(o.type);if(e)try{n.push(e.fromBinary(o.value))}catch(r){}}return n}}var zg=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}},Fg=function(e){return this instanceof Fg?(this.v=e,this):new Fg(e)},Bg=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),s=[];return r={},i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=o[e](t)).value instanceof Fg?Promise.resolve(n.value.v).then(l,c):d(s[0][2],n)}catch(r){d(s[0][3],r)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}};function Ug(e){return Bg(this,arguments,(function*(){yield Fg(yield*function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:Fg(e[r](t)),done:!1}:o?o(t):t}:o}}(zg(e)))}))}var $g=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}},Vg=function(e){return this instanceof Vg?(this.v=e,this):new Vg(e)},Hg=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),s=[];return r={},i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=o[e](t)).value instanceof Vg?Promise.resolve(n.value.v).then(l,c):d(s[0][2],n)}catch(r){d(s[0][3],r)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}};function Wg(e,t){const n=function(){var n,r;return Hg(this,arguments,(function*(){const o=yield Vg(e);null===(n=null==t?void 0:t.onHeader)||void 0===n||n.call(t,o.header),yield Vg(yield*function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:Vg(e[r](t)),done:!1}:o?o(t):t}:o}}($g(o.message))),null===(r=null==t?void 0:t.onTrailer)||void 0===r||r.call(t,o.trailer)}))}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function Gg(e){if(!e.aborted)return;if(void 0!==e.reason)return e.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function qg(){return{get(e){return e.id in this?this[e.id]:e.defaultValue},set(e,t){return this[e.id]=t,this},delete(e){return delete this[e.id],this}}}function Yg(e,t,n){const r="string"==typeof t?t:t.typeName,o="string"==typeof n?n:n.name;return e.toString().replace(/\/?$/,`/${r}/${o}`)}function Jg(e,t){return t instanceof e?t:new e(t)}function Xg(e,t){function n(t){return!0===t.done?t:{done:t.done,value:Jg(e,t.value)}}return{[Symbol.asyncIterator](){const e=t[Symbol.asyncIterator](),r={next:()=>e.next().then(n)};return void 0!==e.throw&&(r.throw=t=>e.throw(t).then(n)),void 0!==e.return&&(r.return=t=>e.return(t).then(n)),r}}}function Kg(e,t){var n;return null!==(n=null==t?void 0:t.concat().reverse().reduce(((e,t)=>t(e)),e))&&void 0!==n?n:e}function Zg(e){var t;const n=Object.assign({},e);return null!==(t=n.ignoreUnknownFields)&&void 0!==t||(n.ignoreUnknownFields=!0),n}function Qg(e,t,n,r){const o=t?ey(e.I,r):ty(e.I,n);return{parse:(t?ey(e.O,r):ty(e.O,n)).parse,serialize:o.serialize}}function ey(e,t){return{parse(n){try{return e.fromBinary(n,t)}catch(r){const e=r instanceof Error?r.message:String(r);throw new Lg(`parse binary: ${e}`,Dg.InvalidArgument)}},serialize(e){try{return e.toBinary(t)}catch(n){const e=n instanceof Error?n.message:String(n);throw new Lg(`serialize binary: ${e}`,Dg.Internal)}}}}function ty(e,t){var n,r;const o=null!==(n=null==t?void 0:t.textEncoder)&&void 0!==n?n:new TextEncoder,s=null!==(r=null==t?void 0:t.textDecoder)&&void 0!==r?r:new TextDecoder,i=Zg(t);return{parse(t){try{const n=s.decode(t);return e.fromJsonString(n,i)}catch(n){throw Lg.from(n,Dg.InvalidArgument)}},serialize(e){try{const t=e.toJsonString(i);return o.encode(t)}catch(t){throw Lg.from(t,Dg.Internal)}}}}const ny=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i;function ry(e,t,n){if(t&&new Headers(t).forEach(((e,t)=>n.metadata.append(t,e))),"object"!=typeof e||null==e||Array.isArray(e)||!("code"in e)||"string"!=typeof e.code)throw n;const r=function(e){if(!Pg){Pg={};for(const e of Object.values(Dg))"string"!=typeof e&&(Pg[Rg(e)]=e)}return Pg[e]}(e.code);if(void 0===r)throw n;const o=e.message;if(null!=o&&"string"!=typeof o)throw n;const s=new Lg(null!=o?o:"",r,t);if("details"in e&&Array.isArray(e.details))for(const a of e.details){if(null===a||"object"!=typeof a||Array.isArray(a)||"string"!=typeof a.type||"string"!=typeof a.value||"debug"in a&&"object"!=typeof a.debug)throw n;try{s.details.push({type:a.type,value:am.dec(a.value),debug:a.debug})}catch(i){throw n}}return s}function oy(e){const t=new Lg("invalid end stream",Dg.InvalidArgument);let n;try{n=JSON.parse("string"==typeof e?e:(new TextDecoder).decode(e))}catch(o){throw t}if("object"!=typeof n||null==n||Array.isArray(n))throw t;const r=new Headers;if("metadata"in n){if("object"!=typeof n.metadata||null==n.metadata||Array.isArray(n.metadata))throw t;for(const[e,o]of Object.entries(n.metadata)){if(!Array.isArray(o)||o.some((e=>"string"!=typeof e)))throw t;for(const t of o)r.append(e,t)}}return{metadata:r,error:"error"in n?ry(n.error,r,t):void 0}}const sy="Content-Type",iy="Content-Length",ay="Content-Encoding",ly="Accept-Encoding",cy="Connect-Protocol-Version";function dy(e){const t=new Headers,n=new Headers;return e.forEach(((e,r)=>{r.toLowerCase().startsWith("trailer-")?n.set(r.substring(8),e):t.set(r,e)})),[t,n]}function uy(e,t,n,r,o){const s=new Headers(null!=r?r:{});return void 0!==n&&s.set("Connect-Timeout-Ms",`${n}`),s.set(sy,e==ig.Unary?t?"application/proto":"application/json":t?"application/connect+proto":"application/connect+json"),s.set(cy,"1"),s}function hy(e,t,n){const r=function(e){const t=null==e?void 0:e.match(ny);if(!t)return;return{stream:!!t[1],binary:!!t[3]}}(n.get("Content-Type"));if(200!==t){const o=new Lg(`HTTP ${t}`,function(e){switch(e){case 400:return Dg.InvalidArgument;case 401:return Dg.Unauthenticated;case 403:return Dg.PermissionDenied;case 404:return Dg.Unimplemented;case 408:return Dg.DeadlineExceeded;case 409:return Dg.Aborted;case 412:return Dg.FailedPrecondition;case 413:case 431:return Dg.ResourceExhausted;case 415:return Dg.Internal;case 429:case 502:case 503:case 504:return Dg.Unavailable;default:return Dg.Unknown}}(t),n);if(e==ig.Unary&&r&&!r.binary)return{isUnaryError:!0,unaryError:o};throw o}return{isUnaryError:!1}}const fy="application/";function py(e,t,n){let r="?connect=v1";const o=e.header.get(sy);0===(null==o?void 0:o.indexOf(fy))&&(r+="&encoding="+encodeURIComponent(o.slice(12)));const s=e.header.get(ay);null!==s&&"identity"!==s&&(r+="&compression="+encodeURIComponent(s),n=!0),n&&(r+="&base64=1"),r+="&message="+function(e,t){return t?am.enc(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):encodeURIComponent((new TextDecoder).decode(e))}(t,n);const i=e.url+r,a=new Headers(e.header);return[cy,sy,iy,ay,ly].forEach((e=>a.delete(e))),Object.assign(Object.assign({},e),{init:Object.assign(Object.assign({},e.init),{method:"GET"}),url:i,header:a})}function my(e){const{signal:t,cleanup:n}=function(e){const t=new AbortController,n=()=>{t.abort(new Lg("the operation timed out",Dg.DeadlineExceeded))};let r;return void 0!==e&&(e<=0?n():r=setTimeout(n,e)),{signal:t.signal,cleanup:()=>clearTimeout(r)}}(e.timeoutMs),r=function(...e){const t=new AbortController,n=e.filter((e=>void 0!==e)).concat(t.signal);for(const o of n){if(o.aborted){r.apply(o);break}o.addEventListener("abort",r)}function r(){t.signal.aborted||t.abort(Gg(this));for(const e of n)e.removeEventListener("abort",r)}return t}(e.signal,t);return[r.signal,function(e){const o=Lg.from(t.aborted?Gg(t):e);return r.abort(o),n(),Promise.reject(o)},function(){n(),r.abort()}]}var gy,yy,by,xy,vy,wy;(yy=gy||(gy={}))[yy.UNSPECIFIED=0]="UNSPECIFIED",yy[yy.INACTIVE=1]="INACTIVE",yy[yy.PROCESSING=2]="PROCESSING",yy[yy.SUCCESS=3]="SUCCESS",yy[yy.WARNING=4]="WARNING",yy[yy.ERROR=5]="ERROR",rg.util.setEnumType(gy,"exa.language_server_pb.CodeiumState",[{no:0,name:"CODEIUM_STATE_UNSPECIFIED"},{no:1,name:"CODEIUM_STATE_INACTIVE"},{no:2,name:"CODEIUM_STATE_PROCESSING"},{no:3,name:"CODEIUM_STATE_SUCCESS"},{no:4,name:"CODEIUM_STATE_WARNING"},{no:5,name:"CODEIUM_STATE_ERROR"}]),(xy=by||(by={}))[xy.UNSPECIFIED=0]="UNSPECIFIED",xy[xy.SINGLE=1]="SINGLE",xy[xy.MULTI=2]="MULTI",rg.util.setEnumType(by,"exa.language_server_pb.LineType",[{no:0,name:"LINE_TYPE_UNSPECIFIED"},{no:1,name:"LINE_TYPE_SINGLE"},{no:2,name:"LINE_TYPE_MULTI"}]),(wy=vy||(vy={}))[wy.UNSPECIFIED=0]="UNSPECIFIED",wy[wy.INLINE=1]="INLINE",wy[wy.BLOCK=2]="BLOCK",wy[wy.INLINE_MASK=3]="INLINE_MASK",rg.util.setEnumType(vy,"exa.language_server_pb.CompletionPartType",[{no:0,name:"COMPLETION_PART_TYPE_UNSPECIFIED"},{no:1,name:"COMPLETION_PART_TYPE_INLINE"},{no:2,name:"COMPLETION_PART_TYPE_BLOCK"},{no:3,name:"COMPLETION_PART_TYPE_INLINE_MASK"}]);const ky=class e extends Op{constructor(e){super(),s(this,"threshold",0),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(ky,"runtime",rg),s(ky,"typeName","exa.language_server_pb.MultilineConfig"),s(ky,"fields",rg.util.newFieldList((()=>[{no:1,name:"threshold",kind:"scalar",T:2}])));let Sy=ky;const Cy=class e extends Op{constructor(e){super(),s(this,"metadata"),s(this,"document"),s(this,"editorOptions"),s(this,"otherDocuments",[]),s(this,"experimentConfig"),s(this,"modelName",""),s(this,"multilineConfig"),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Cy,"runtime",rg),s(Cy,"typeName","exa.language_server_pb.GetCompletionsRequest"),s(Cy,"fields",rg.util.newFieldList((()=>[{no:1,name:"metadata",kind:"message",T:Sg},{no:2,name:"document",kind:"message",T:Fy},{no:3,name:"editor_options",kind:"message",T:Eg},{no:5,name:"other_documents",kind:"message",T:Fy,repeated:!0},{no:7,name:"experiment_config",kind:"message",T:Uy},{no:10,name:"model_name",kind:"scalar",T:9},{no:13,name:"multiline_config",kind:"message",T:Sy}])));let Ey=Cy;const Ny=class e extends Op{constructor(e){super(),s(this,"state"),s(this,"completionItems",[]),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Ny,"runtime",rg),s(Ny,"typeName","exa.language_server_pb.GetCompletionsResponse"),s(Ny,"fields",rg.util.newFieldList((()=>[{no:1,name:"state",kind:"message",T:Vy},{no:2,name:"completion_items",kind:"message",T:Ky,repeated:!0}])));let jy=Ny;const _y=class e extends Op{constructor(e){super(),s(this,"metadata"),s(this,"completionId",""),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(_y,"runtime",rg),s(_y,"typeName","exa.language_server_pb.AcceptCompletionRequest"),s(_y,"fields",rg.util.newFieldList((()=>[{no:1,name:"metadata",kind:"message",T:Sg},{no:2,name:"completion_id",kind:"scalar",T:9}])));let Iy=_y;const Ay=class e extends Op{constructor(e){super(),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Ay,"runtime",rg),s(Ay,"typeName","exa.language_server_pb.AcceptCompletionResponse"),s(Ay,"fields",rg.util.newFieldList((()=>[])));let Ty=Ay;const My=class e extends Op{constructor(e){super(),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(My,"runtime",rg),s(My,"typeName","exa.language_server_pb.GetAuthTokenRequest"),s(My,"fields",rg.util.newFieldList((()=>[])));let Dy=My;const Oy=class e extends Op{constructor(e){super(),s(this,"authToken",""),s(this,"uuid",""),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Oy,"runtime",rg),s(Oy,"typeName","exa.language_server_pb.GetAuthTokenResponse"),s(Oy,"fields",rg.util.newFieldList((()=>[{no:1,name:"auth_token",kind:"scalar",T:9},{no:2,name:"uuid",kind:"scalar",T:9}])));let Ry=Oy;const Py=class e extends Op{constructor(e){super(),s(this,"row",Gp.zero),s(this,"col",Gp.zero),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Py,"runtime",rg),s(Py,"typeName","exa.language_server_pb.DocumentPosition"),s(Py,"fields",rg.util.newFieldList((()=>[{no:1,name:"row",kind:"scalar",T:4},{no:2,name:"col",kind:"scalar",T:4}])));let Ly=Py;const zy=class e extends Op{constructor(e){super(),s(this,"absolutePath",""),s(this,"relativePath",""),s(this,"text",""),s(this,"editorLanguage",""),s(this,"language",bg.UNSPECIFIED),s(this,"cursorOffset",Gp.zero),s(this,"cursorPosition"),s(this,"lineEnding",""),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(zy,"runtime",rg),s(zy,"typeName","exa.language_server_pb.Document"),s(zy,"fields",rg.util.newFieldList((()=>[{no:1,name:"absolute_path",kind:"scalar",T:9},{no:2,name:"relative_path",kind:"scalar",T:9},{no:3,name:"text",kind:"scalar",T:9},{no:4,name:"editor_language",kind:"scalar",T:9},{no:5,name:"language",kind:"enum",T:rg.getEnumType(bg)},{no:6,name:"cursor_offset",kind:"scalar",T:4},{no:8,name:"cursor_position",kind:"message",T:Ly},{no:7,name:"line_ending",kind:"scalar",T:9}])));let Fy=zy;const By=class e extends Op{constructor(e){super(),s(this,"forceEnableExperiments",[]),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(By,"runtime",rg),s(By,"typeName","exa.language_server_pb.ExperimentConfig"),s(By,"fields",rg.util.newFieldList((()=>[{no:1,name:"force_enable_experiments",kind:"enum",T:rg.getEnumType(dg),repeated:!0}])));let Uy=By;const $y=class e extends Op{constructor(e){super(),s(this,"state",gy.UNSPECIFIED),s(this,"message",""),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s($y,"runtime",rg),s($y,"typeName","exa.language_server_pb.State"),s($y,"fields",rg.util.newFieldList((()=>[{no:1,name:"state",kind:"enum",T:rg.getEnumType(gy)},{no:2,name:"message",kind:"scalar",T:9}])));let Vy=$y;const Hy=class e extends Op{constructor(e){super(),s(this,"startOffset",Gp.zero),s(this,"endOffset",Gp.zero),s(this,"startPosition"),s(this,"endPosition"),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Hy,"runtime",rg),s(Hy,"typeName","exa.language_server_pb.Range"),s(Hy,"fields",rg.util.newFieldList((()=>[{no:1,name:"start_offset",kind:"scalar",T:4},{no:2,name:"end_offset",kind:"scalar",T:4},{no:3,name:"start_position",kind:"message",T:Ly},{no:4,name:"end_position",kind:"message",T:Ly}])));let Wy=Hy;const Gy=class e extends Op{constructor(e){super(),s(this,"text",""),s(this,"deltaCursorOffset",Gp.zero),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Gy,"runtime",rg),s(Gy,"typeName","exa.language_server_pb.Suffix"),s(Gy,"fields",rg.util.newFieldList((()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"delta_cursor_offset",kind:"scalar",T:3}])));let qy=Gy;const Yy=class e extends Op{constructor(e){super(),s(this,"text",""),s(this,"offset",Gp.zero),s(this,"type",vy.UNSPECIFIED),s(this,"prefix",""),s(this,"line",Gp.zero),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Yy,"runtime",rg),s(Yy,"typeName","exa.language_server_pb.CompletionPart"),s(Yy,"fields",rg.util.newFieldList((()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"offset",kind:"scalar",T:4},{no:3,name:"type",kind:"enum",T:rg.getEnumType(vy)},{no:4,name:"prefix",kind:"scalar",T:9},{no:5,name:"line",kind:"scalar",T:4}])));let Jy=Yy;const Xy=class e extends Op{constructor(e){super(),s(this,"completion"),s(this,"suffix"),s(this,"range"),s(this,"source",gg.UNSPECIFIED),s(this,"completionParts",[]),rg.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return rg.util.equals(e,t,n)}};s(Xy,"runtime",rg),s(Xy,"typeName","exa.language_server_pb.CompletionItem"),s(Xy,"fields",rg.util.newFieldList((()=>[{no:1,name:"completion",kind:"message",T:wg},{no:5,name:"suffix",kind:"message",T:qy},{no:2,name:"range",kind:"message",T:Wy},{no:3,name:"source",kind:"enum",T:rg.getEnumType(gg)},{no:8,name:"completion_parts",kind:"message",T:Jy,repeated:!0}])));let Ky=Xy;const Zy={typeName:"exa.language_server_pb.LanguageServerService",methods:{getCompletions:{name:"GetCompletions",I:Ey,O:jy,kind:ig.Unary},acceptCompletion:{name:"AcceptCompletion",I:Iy,O:Ty,kind:ig.Unary},getAuthToken:{name:"GetAuthToken",I:Dy,O:Ry,kind:ig.Unary}}};var Qy=function(e){return this instanceof Qy?(this.v=e,this):new Qy(e)},eb=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),s=[];return r={},i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=o[e](t)).value instanceof Qy?Promise.resolve(n.value.v).then(l,c):d(s[0][2],n)}catch(r){d(s[0][3],r)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}};const tb=function(e){var t;!function(){try{new Headers}catch(e){throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}();const n=null!==(t=e.useBinaryFormat)&&void 0!==t&&t;return{async unary(t,r,o,s,i,a,l){var c;const{serialize:d,parse:u}=Qg(r,n,e.jsonOptions,e.binaryOptions);return s=void 0===s?e.defaultTimeoutMs:s<=0?void 0:s,await function(e){const t=Kg(e.next,e.interceptors),[n,r,o]=my(e);return t(Object.assign(Object.assign({},e.req),{message:Jg(e.req.method.I,e.req.message),signal:n})).then((e=>(o(),e)),r)}({interceptors:e.interceptors,signal:o,timeoutMs:s,req:{stream:!1,service:t,method:r,url:Yg(e.baseUrl,t,r),init:{method:"POST",credentials:null!==(c=e.credentials)&&void 0!==c?c:"same-origin",redirect:"error",mode:"cors"},header:uy(r.kind,n,s,i),contextValues:null!=l?l:qg(),message:a},next:async o=>{var s;let i=null;!0===e.useHttpGet&&r.idempotency===lg.NoSideEffects?o=py(o,d(o.message),n):i=d(o.message);const a=null!==(s=e.fetch)&&void 0!==s?s:globalThis.fetch,l=await a(o.url,Object.assign(Object.assign({},o.init),{headers:o.header,signal:o.signal,body:i})),{isUnaryError:c,unaryError:h}=hy(r.kind,l.status,l.headers);if(c)throw ry(await l.json(),function(...e){const t=new Headers;for(const n of e)n.forEach(((e,n)=>{t.append(n,e)}));return t}(...dy(l.headers)),h);const[f,p]=dy(l.headers);return{stream:!1,service:t,method:r,header:f,message:n?u(new Uint8Array(await l.arrayBuffer())):r.O.fromJson(await l.json(),Zg(e.jsonOptions)),trailer:p}}})},async stream(t,r,o,s,i,a,l){var c;const{serialize:d,parse:u}=Qg(r,n,e.jsonOptions,e.binaryOptions);function h(e,t,n){return eb(this,arguments,(function*(){const r=function(e){let t,n=new Uint8Array(0);function r(e){const t=new Uint8Array(n.length+e.length);t.set(n),t.set(e,n.length),n=t}return new ReadableStream({start(){t=e.getReader()},async pull(e){let o;for(;;){if(void 0===o&&n.byteLength>=5){let e=0;for(let t=1;t<5;t++)e=(e<<8)+n[t];o={flags:n[0],length:e}}if(void 0!==o&&n.byteLength>=o.length+5)break;const e=await t.read();if(e.done)break;r(e.value)}if(void 0===o)return 0==n.byteLength?void e.close():void e.error(new Lg("premature end of stream",Dg.DataLoss));const s=n.subarray(5,5+o.length);n=n.subarray(5+o.length),e.enqueue({flags:o.flags,data:s})}})}(e).getReader();let o=!1;for(;;){const e=yield Qy(r.read());if(e.done)break;const{flags:s,data:i}=e.value;if(2&~s)yield yield Qy(u(i));else{o=!0;const e=oy(i);if(e.error){const t=e.error;throw n.forEach(((e,n)=>{t.metadata.append(n,e)})),t}e.metadata.forEach(((e,n)=>t.set(n,e)))}}if(!o)throw"missing EndStreamResponse"}))}async function f(e){if(r.kind!=ig.ServerStreaming)throw"The fetch API does not support streaming request bodies";const t=await e[Symbol.asyncIterator]().next();if(1==t.done)throw"missing request message";return function(e,t){const n=new Uint8Array(t.length+5);n.set(t,5);const r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.setUint8(0,e),r.setUint32(1,t.length),n}(0,d(t.value))}return s=void 0===s?e.defaultTimeoutMs:s<=0?void 0:s,await function(e){const t=Kg(e.next,e.interceptors),[n,r,o]=my(e),s=Object.assign(Object.assign({},e.req),{message:Xg(e.req.method.I,e.req.message),signal:n});let i=!1;return n.addEventListener("abort",(function(){var t,n;const r=e.req.message[Symbol.asyncIterator]();i||null===(t=r.throw)||void 0===t||t.call(r,this.reason).catch((()=>{})),null===(n=r.return)||void 0===n||n.call(r).catch((()=>{}))})),t(s).then((e=>Object.assign(Object.assign({},e),{message:{[Symbol.asyncIterator](){const t=e.message[Symbol.asyncIterator]();return{next:()=>t.next().then((e=>(1==e.done&&(i=!0,o()),e)),r)}}}})),r)}({interceptors:e.interceptors,timeoutMs:s,signal:o,req:{stream:!0,service:t,method:r,url:Yg(e.baseUrl,t,r),init:{method:"POST",credentials:null!==(c=e.credentials)&&void 0!==c?c:"same-origin",redirect:"error",mode:"cors"},header:uy(r.kind,n,s,i),contextValues:null!=l?l:qg(),message:a},next:async t=>{var n;const o=null!==(n=e.fetch)&&void 0!==n?n:globalThis.fetch,s=await o(t.url,Object.assign(Object.assign({},t.init),{headers:t.header,signal:t.signal,body:await f(t.message)}));if(hy(r.kind,s.status,s.headers),null===s.body)throw"missing response body";const i=new Headers;return Object.assign(Object.assign({},t),{header:s.headers,trailer:i,message:h(s.body,i,s.headers)})}})}}}({baseUrl:"https://web-backend.codeium.com",useBinaryFormat:!0}),nb=(ob=tb,function(e,t){const n={};for(const[r,o]of Object.entries(e.methods)){const s=t(Object.assign(Object.assign({},o),{localName:r,service:e}));null!=s&&(n[r]=s)}return n}(rb=Zy,(e=>{switch(e.kind){case ig.Unary:return function(e,t,n){return async function(r,o){var s,i;const a=await e.unary(t,n,null==o?void 0:o.signal,null==o?void 0:o.timeoutMs,null==o?void 0:o.headers,r,null==o?void 0:o.contextValues);return null===(s=null==o?void 0:o.onHeader)||void 0===s||s.call(o,a.header),null===(i=null==o?void 0:o.onTrailer)||void 0===i||i.call(o,a.trailer),a.message}}(ob,rb,e);case ig.ServerStreaming:return function(e,t,n){return function(r,o){return Wg(e.stream(t,n,null==o?void 0:o.signal,null==o?void 0:o.timeoutMs,null==o?void 0:o.headers,Ug([r]),null==o?void 0:o.contextValues),o)}}(ob,rb,e);case ig.ClientStreaming:return function(e,t,n){return async function(r,o){var s,i,a,l,c,d;const u=await e.stream(t,n,null==o?void 0:o.signal,null==o?void 0:o.timeoutMs,null==o?void 0:o.headers,r,null==o?void 0:o.contextValues);let h;null===(c=null==o?void 0:o.onHeader)||void 0===c||c.call(o,u.header);try{for(var f,p=!0,m=$g(u.message);!(s=(f=await m.next()).done);p=!0)l=f.value,p=!1,h=l}catch(g){i={error:g}}finally{try{p||s||!(a=m.return)||await a.call(m)}finally{if(i)throw i.error}}if(!h)throw new Lg("protocol error: missing response message",Dg.Internal);return null===(d=null==o?void 0:o.onTrailer)||void 0===d||d.call(o,u.trailer),h}}(ob,rb,e);case ig.BiDiStreaming:return function(e,t,n){return function(r,o){return Wg(e.stream(t,n,null==o?void 0:o.signal,null==o?void 0:o.timeoutMs,null==o?void 0:o.headers,r,null==o?void 0:o.contextValues),o)}}(ob,rb,e);default:return null}})));var rb,ob;let sb;try{sb=crypto.randomUUID()}catch{sb=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(+e^(crypto.getRandomValues(new Uint8Array(1))[0]??0)&15>>+e/4).toString(16)))}()}async function ib(e,t){const n=e.state.facet(jg),{override:r}=e.state.facet(_g),o=await r(),s=e.state,i=s.selection.main.head,a=s.doc.toString();try{const r=await async function({text:e,cursorOffset:t,config:n,otherDocuments:r}){return await nb.getCompletions({metadata:{ideName:"web",ideVersion:"0.0.5",extensionName:"@valtown/codemirror-codeium",extensionVersion:"1.0.0",apiKey:n.apiKey,sessionId:sb,authSource:n.authSource},document:{text:e,cursorOffset:BigInt(t),language:n.language,editorLanguage:"typescript",lineEnding:"\n"},editorOptions:{tabSize:2n,insertSpaces:!0},otherDocuments:r,multilineConfig:void 0},{headers:{Authorization:`Basic ${n.apiKey}-${sb}`}})}({text:a,cursorOffset:i,config:n,otherDocuments:o});if(!r||0===r.completionItems.length)return;if(void 0!==t&&i!==t||"active"===mr(e.state)||!e.hasFocus)return;const l=r.completionItems.map((e=>{let t=0;return e.completionParts.filter((e=>3!==e.type)).map((e=>{const n=Number(e.offset),r=2===e.type?`\n${e.text}`:e.text,o={absoluteStartPos:t+n,absoluteEndPos:t+n+r.length,from:n,to:n,insert:r};return t+=r.length,o}))})),c=0,d=l.at(c);if(!d)return;const u=gr.of(d,s.doc.length),h=u.invert(s.doc);e.dispatch({changes:u,effects:wp.of({index:c,reverseChangeSet:h,changeSpecs:l}),annotations:[Mg.of(null),Tg.of(null),yr.addToHistory.of(!1)]})}catch(l){console.warn("copilot completion failed",l),await new Promise((e=>setTimeout(e,300)))}}function ab(){let e=null,t=0;return Cn.updateListener.of((n=>{const r=n.view.state.facet(jg);if(!r.alwaysOn)return;if(!function(e){return e.docChanged&&!e.transactions.some((e=>e.effects.some((e=>e.is(kp)||e.is(Sp)))))}(n))return;if(e&&clearTimeout(e),function(e){if(!e.view.hasFocus)return!0;if(e.state.field(Ag))return!0;if("active"===mr(e.state))return!0;for(const t of e.transactions)if(void 0!==t.annotation(Tg))return!0}(n))return;const o=n.state.selection.main.head;r.shouldComplete&&!r.shouldComplete(new br(n.view.state,o,!1))||(e=setTimeout((async()=>{o===t&&await ib(n.view,t)}),r.timeout),t=o)}))}function lb(e){var t;const n=e.state.field(Ag);if(!n)return!1;const r=null==(t=n.reverseChangeSet)?void 0:t.invert(e.state.doc);e.dispatch({changes:n.reverseChangeSet,effects:kp.of(null),annotations:[Mg.of(null),Tg.of(null),yr.addToHistory.of(!1)]});let o=0;return null==r||r.iterChangedRanges(((e,t,n,r)=>{o=r})),e.dispatch({changes:r,selection:Sn.cursor(o),annotations:[Tg.of(null),yr.addToHistory.of(!0)]}),!0}const cb=e=>{const{state:t}=e,n=t.field(Ag);if(!n)return!1;const{changeSpecs:r}=n;if(r.length<2)return!1;const o=(n.index+1)%r.length,s=r.at(o);if(!s)return!1;const i=n.reverseChangeSet.apply(t.doc),a=gr.of(n.reverseChangeSet,t.doc.length).compose(gr.of(s,i.length)),l=gr.of(s,i.length).invert(i);return e.dispatch({changes:a,effects:wp.of({index:o,reverseChangeSet:l,changeSpecs:r}),annotations:[Mg.of(null),Tg.of(null),yr.addToHistory.of(!1)]}),!0};function db(e){const t=e.state.field(Ag);return!!t&&(e.dispatch({changes:t.reverseChangeSet,effects:Sp.of(null),annotations:[Mg.of(null),Tg.of(null),yr.addToHistory.of(!1)]}),!1)}function ub(){return Cn.domEventHandlers({keydown:(e,t)=>("]"!==e.key||!e.ctrlKey)&&("Shift"!==e.key&&"Control"!==e.key&&"Alt"!==e.key&&"Meta"!==e.key&&function(e,t){return!!e.state.field(Ag)&&("Tab"===t?lb(e):db(e))}(t,e.key)),mouseup(e,t){const n=e.target;return"BUTTON"===n.nodeName&&"codeium-cycle"===n.dataset.action?(cb(t),e.stopPropagation(),e.preventDefault(),!0):function(e){var t,n;let r=!1;const o=null==(t=e.state.selection.asSingle().ranges.at(0))?void 0:t.head,s=e.state.field(Ag);return!(void 0===o||!s)&&(null==(n=s.decorations)||n.between(o,o,(()=>{r=!0})),r)}(t)?lb(t):db(t)}})}const hb=e=>{const t=[];return"codeium"===e.copilot&&e.codeium_api_key&&t.push(function(e){return[jg.of(e),Ag,dr.highest(ar.of([{key:"Ctrl-]",run:cb}])),dr.highest(Cn.updateListener.of((e=>{e.focusChanged&&db(e.view)}))),dr.high(ub()),ab()]}({apiKey:e.codeium_api_key,language:bg.PYTHON}),_g.of({override:async()=>[{text:xr(""),language:bg.PYTHON,editorLanguage:"python"}]})),"github"===e.copilot&&t.push(vp({delay:500,fetchFn:async e=>{if(!Hl())return"";if(0===e.doc.length)return"";await new Promise((e=>setTimeout(e,20)));const t=e.doc.toString(),n=function(e,t){const n=e.doc.toString(),r=t.split("\n").length-n.split("\n").length,o=function(e,t){const n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}(e.doc,e.selection.main.head);return o.line+=r,{doc:{source:t,tabSize:e.tabSize,indentSize:1,insertSpaces:!0,path:ql,version:"replace_me",uri:`file://${ql}`,relativePath:ql,languageId:Gl,position:o}}}(e,xr(t)),r=function(e,t,n){if(0===e.completions.length)return"";const{displayText:r,position:o}=e.completions[0],s=o.character-t.character,i=s<0?r.slice(-s):r,a=n.doc.sliceString(n.selection.main.head,n.doc.length);for(let l=0;l<i.length;l++){const e=i.slice(l);if(a.startsWith(e))return i.slice(0,l)}return i}(await Wl().getCompletion(n),n.doc.position,e);return r&&E.debug("Copilot suggestion:",r),r}})),[...t,Vl().slice(0,-2)]};const fb=jn.mark({class:"underline"}),pb=In.define(),mb=In.define(),gb=Nn.define({create:()=>jn.none,update(e,t){let n=e.map(t.changes);for(const r of t.effects)r.is(pb)?n=e.update({add:[fb.range(r.value.from,r.value.to)]}):r.is(mb)&&(n=jn.none);return n},provide:e=>Cn.decorations.from(e)});class yb{constructor(e,t){this.view=void 0,this.commandClickMode=void 0,this.hoveredRange=void 0,this.onClick=void 0,this.keydown=e=>{"Meta"!==e.key&&"Control"!==e.key||(this.commandClickMode=!0,this.view.dom.addEventListener("mousemove",this.mousemove),this.view.dom.addEventListener("click",this.click))},this.keyup=e=>{"Meta"!==e.key&&"Control"!==e.key||this.exitCommandClickMode()},this.windowBlur=()=>{this.commandClickMode&&this.exitCommandClickMode()},this.mousemove=e=>{if(!e.metaKey&&!e.ctrlKey)return void this.exitCommandClickMode();if(!this.commandClickMode)return void this.clearUnderline();const t=this.view.posAtCoords({x:e.clientX,y:e.clientY});if(null==t)return void this.clearUnderline();const n=vr(this.view.state).cursorAt(t);if("VariableName"===n.name){const{from:e,to:r}=n;if(this.hoveredRange&&this.hoveredRange.from===e&&this.hoveredRange.to===r)return;this.clearUnderline(),this.hoveredRange={from:e,to:r,position:t},this.view.dispatch({effects:pb.of(this.hoveredRange)})}else this.clearUnderline()},this.click=e=>{if(this.hoveredRange){const t=this.view.state.doc.sliceString(this.hoveredRange.from,this.hoveredRange.to);e.preventDefault(),e.stopPropagation(),this.onClick(this.view,t),this.view.dispatch({selection:{head:this.hoveredRange.position,anchor:this.hoveredRange.position}})}},this.view=e,this.commandClickMode=!1,this.hoveredRange=null,this.onClick=t,window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.addEventListener("blur",this.windowBlur),window.addEventListener("mouseleave",this.windowBlur)}update(e){}destroy(){window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.removeEventListener("blur",this.windowBlur),window.removeEventListener("mouseleave",this.windowBlur),this.view.dom.removeEventListener("mousemove",this.mousemove),this.view.dom.removeEventListener("click",this.click)}exitCommandClickMode(){this.commandClickMode=!1,this.view.dom.removeEventListener("mousemove",this.mousemove),this.view.dom.removeEventListener("click",this.click),this.clearUnderline()}clearUnderline(){this.hoveredRange&&(this.view.dispatch({effects:mb.of(null)}),this.hoveredRange=null)}}const bb=({variant:e,settings:t,styles:n})=>{const r=Cn.theme({"&":{backgroundColor:t.background,color:t.foreground},".cm-content":{caretColor:t.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:t.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:t.selection},".cm-activeLine":{backgroundColor:t.lineHighlight},".cm-gutters":{backgroundColor:t.gutterBackground,color:t.gutterForeground},".cm-activeLineGutter":{backgroundColor:t.lineHighlight}},{dark:"dark"===e}),o=kr.define(n);return[r,Sr(o)]};bb({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:Cr.comment,color:"#404080"},{tag:[Cr.string,Cr.regexp],color:"#999999"},{tag:Cr.number,color:"#7090B0"},{tag:[Cr.bool,Cr.null],color:"#8080A0"},{tag:[Cr.punctuation,Cr.derefOperator],color:"#805080"},{tag:Cr.keyword,color:"#60B0FF"},{tag:Cr.definitionKeyword,color:"#B0FFF0"},{tag:Cr.moduleKeyword,color:"#60B0FF"},{tag:Cr.operator,color:"#A0A0FF"},{tag:[Cr.variableName,Cr.self],color:"#008080"},{tag:Cr.operatorKeyword,color:"#A0A0FF"},{tag:Cr.controlKeyword,color:"#80A0FF"},{tag:Cr.className,color:"#70E080"},{tag:[Cr.function(Cr.propertyName),Cr.propertyName],color:"#50A0A0"},{tag:Cr.tagName,color:"#009090"},{tag:Cr.modifier,color:"#B0FFF0"},{tag:[Cr.squareBracket,Cr.attributeName],color:"#D0D0FF"}]}),bb({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:Cr.comment,color:"#787b8099"},{tag:Cr.string,color:"#86b300"},{tag:Cr.regexp,color:"#4cbf99"},{tag:[Cr.number,Cr.bool,Cr.null],color:"#ffaa33"},{tag:Cr.variableName,color:"#5c6166"},{tag:[Cr.definitionKeyword,Cr.modifier],color:"#fa8d3e"},{tag:[Cr.keyword,Cr.special(Cr.brace)],color:"#fa8d3e"},{tag:Cr.operator,color:"#ed9366"},{tag:Cr.separator,color:"#5c6166b3"},{tag:Cr.punctuation,color:"#5c6166"},{tag:[Cr.definition(Cr.propertyName),Cr.function(Cr.variableName)],color:"#f2ae49"},{tag:[Cr.className,Cr.definition(Cr.typeName)],color:"#22a4e6"},{tag:[Cr.tagName,Cr.typeName,Cr.self,Cr.labelName],color:"#55b4d4"},{tag:Cr.angleBracket,color:"#55b4d480"},{tag:Cr.attributeName,color:"#f2ae49"}]}),bb({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:Cr.comment,color:"#6E6E6E"},{tag:[Cr.string,Cr.regexp,Cr.special(Cr.brace)],color:"#5C81B3"},{tag:Cr.number,color:"#C1E1B8"},{tag:Cr.bool,color:"#53667D"},{tag:[Cr.definitionKeyword,Cr.modifier,Cr.function(Cr.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[Cr.keyword,Cr.moduleKeyword,Cr.operatorKeyword,Cr.operator],color:"#697A8E",fontWeight:"bold"},{tag:[Cr.variableName,Cr.attributeName],color:"#708E67"},{tag:[Cr.function(Cr.variableName),Cr.definition(Cr.propertyName),Cr.derefOperator],color:"#fff"},{tag:Cr.tagName,color:"#A3D295"}]}),bb({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:Cr.comment,color:"#666666"},{tag:[Cr.string,Cr.special(Cr.brace)],color:"#54BE0D"},{tag:Cr.regexp,color:"#E9C062"},{tag:Cr.number,color:"#CF6A4C"},{tag:[Cr.keyword,Cr.operator],color:"#5EA6EA"},{tag:Cr.variableName,color:"#7587A6"},{tag:[Cr.definitionKeyword,Cr.modifier],color:"#F9EE98"},{tag:[Cr.propertyName,Cr.function(Cr.variableName)],color:"#937121"},{tag:[Cr.typeName,Cr.angleBracket,Cr.tagName],color:"#9B859D"}]}),bb({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:Cr.comment,color:"#6B4E32"},{tag:[Cr.keyword,Cr.operator,Cr.derefOperator],color:"#EF5D32"},{tag:Cr.className,color:"#EFAC32",fontWeight:"bold"},{tag:[Cr.typeName,Cr.propertyName,Cr.function(Cr.variableName),Cr.definition(Cr.variableName)],color:"#EFAC32"},{tag:Cr.definition(Cr.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:Cr.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[Cr.number,Cr.bool],color:"#6C99BB"},{tag:[Cr.variableName,Cr.self],color:"#7DAF9C"},{tag:[Cr.string,Cr.special(Cr.brace),Cr.regexp],color:"#D9D762"},{tag:[Cr.angleBracket,Cr.tagName,Cr.attributeName],color:"#EFCB43"}]}),bb({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:Cr.comment,color:"#404040"},{tag:[Cr.string,Cr.special(Cr.brace),Cr.regexp],color:"#00D8FF"},{tag:Cr.number,color:"#E62286"},{tag:[Cr.variableName,Cr.attributeName,Cr.self],color:"#E62286",fontWeight:"bold"},{tag:Cr.function(Cr.variableName),color:"#fff",fontWeight:"bold"}]}),bb({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:Cr.comment,color:"#BCC8BA"},{tag:[Cr.string,Cr.special(Cr.brace),Cr.regexp],color:"#5D90CD"},{tag:[Cr.number,Cr.bool,Cr.null],color:"#46A609"},{tag:Cr.keyword,color:"#AF956F"},{tag:[Cr.definitionKeyword,Cr.modifier],color:"#C52727"},{tag:[Cr.angleBracket,Cr.tagName,Cr.attributeName],color:"#606060"},{tag:Cr.self,color:"#000"}]}),bb({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:Cr.comment,color:"#0088FF"},{tag:Cr.string,color:"#3AD900"},{tag:Cr.regexp,color:"#80FFC2"},{tag:[Cr.number,Cr.bool,Cr.null],color:"#FF628C"},{tag:[Cr.definitionKeyword,Cr.modifier],color:"#FFEE80"},{tag:Cr.variableName,color:"#CCCCCC"},{tag:Cr.self,color:"#FF80E1"},{tag:[Cr.className,Cr.definition(Cr.propertyName),Cr.function(Cr.variableName),Cr.definition(Cr.typeName),Cr.labelName],color:"#FFDD00"},{tag:[Cr.keyword,Cr.operator],color:"#FF9D00"},{tag:[Cr.propertyName,Cr.typeName],color:"#80FFBB"},{tag:Cr.special(Cr.brace),color:"#EDEF7D"},{tag:Cr.attributeName,color:"#9EFFFF"},{tag:Cr.derefOperator,color:"#fff"}]}),bb({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:Cr.comment,color:"#AEAEAE"},{tag:[Cr.string,Cr.special(Cr.brace),Cr.regexp],color:"#8DFF8E"},{tag:[Cr.className,Cr.definition(Cr.propertyName),Cr.function(Cr.variableName),Cr.function(Cr.definition(Cr.variableName)),Cr.definition(Cr.typeName)],color:"#A3EBFF"},{tag:[Cr.number,Cr.bool,Cr.null],color:"#62E9BD"},{tag:[Cr.keyword,Cr.operator],color:"#2BF1DC"},{tag:[Cr.definitionKeyword,Cr.modifier],color:"#F8FBB1"},{tag:[Cr.variableName,Cr.self],color:"#B683CA"},{tag:[Cr.angleBracket,Cr.tagName,Cr.typeName,Cr.propertyName],color:"#60A4F1"},{tag:Cr.derefOperator,color:"#E0E0E0"},{tag:Cr.attributeName,color:"#7BACCA"}]}),bb({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:Cr.comment,color:"#6272a4"},{tag:[Cr.string,Cr.special(Cr.brace)],color:"#f1fa8c"},{tag:[Cr.number,Cr.self,Cr.bool,Cr.null],color:"#bd93f9"},{tag:[Cr.keyword,Cr.operator],color:"#ff79c6"},{tag:[Cr.definitionKeyword,Cr.typeName],color:"#8be9fd"},{tag:Cr.definition(Cr.typeName),color:"#f8f8f2"},{tag:[Cr.className,Cr.definition(Cr.propertyName),Cr.function(Cr.variableName),Cr.attributeName],color:"#50fa7b"}]}),bb({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:Cr.comment,color:"#AAAAAA"},{tag:[Cr.keyword,Cr.operator,Cr.typeName,Cr.tagName,Cr.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[Cr.attributeName,Cr.definition(Cr.propertyName)],color:"#4F9FD0"},{tag:[Cr.className,Cr.string,Cr.special(Cr.brace)],color:"#CF4F5F"},{tag:Cr.number,color:"#CF4F5F",fontWeight:"bold"},{tag:Cr.variableName,fontWeight:"bold"}]}),bb({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:Cr.comment,color:"#9995b7"},{tag:Cr.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[Cr.definitionKeyword,Cr.modifier],color:"#ff5792"},{tag:[Cr.className,Cr.tagName,Cr.definition(Cr.typeName)],color:"#0094f0"},{tag:[Cr.number,Cr.bool,Cr.null,Cr.special(Cr.brace)],color:"#5842ff"},{tag:[Cr.definition(Cr.propertyName),Cr.function(Cr.variableName)],color:"#0095a8"},{tag:Cr.typeName,color:"#b3694d"},{tag:[Cr.propertyName,Cr.variableName],color:"#fa8900"},{tag:Cr.operator,color:"#ff5792"},{tag:Cr.self,color:"#e64100"},{tag:[Cr.string,Cr.regexp],color:"#00b368"},{tag:[Cr.paren,Cr.bracket],color:"#0431fa"},{tag:Cr.labelName,color:"#00bdd6"},{tag:Cr.attributeName,color:"#e64100"},{tag:Cr.angleBracket,color:"#9995b7"}]}),bb({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:Cr.comment,color:"#9893a5"},{tag:[Cr.bool,Cr.null],color:"#286983"},{tag:Cr.number,color:"#d7827e"},{tag:Cr.className,color:"#d7827e"},{tag:[Cr.angleBracket,Cr.tagName,Cr.typeName],color:"#56949f"},{tag:Cr.attributeName,color:"#907aa9"},{tag:Cr.punctuation,color:"#797593"},{tag:[Cr.keyword,Cr.modifier],color:"#286983"},{tag:[Cr.string,Cr.regexp],color:"#ea9d34"},{tag:Cr.variableName,color:"#d7827e"}]}),bb({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:Cr.comment,color:"#CFCFCF"},{tag:[Cr.number,Cr.bool,Cr.null],color:"#E66C29"},{tag:[Cr.className,Cr.definition(Cr.propertyName),Cr.function(Cr.variableName),Cr.labelName,Cr.definition(Cr.typeName)],color:"#2EB43B"},{tag:Cr.keyword,color:"#D8B229"},{tag:Cr.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[Cr.definitionKeyword,Cr.modifier],color:"#925A47"},{tag:Cr.string,color:"#704D3D"},{tag:Cr.typeName,color:"#2F8996"},{tag:[Cr.variableName,Cr.propertyName],color:"#77ACB0"},{tag:Cr.self,color:"#77ACB0",fontWeight:"bold"},{tag:Cr.regexp,color:"#E3965E"},{tag:[Cr.tagName,Cr.angleBracket],color:"#BAA827"},{tag:Cr.attributeName,color:"#B06520"},{tag:Cr.derefOperator,color:"#000"}]}),bb({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:Cr.comment,color:"#93A1A1"},{tag:Cr.string,color:"#2AA198"},{tag:Cr.regexp,color:"#D30102"},{tag:Cr.number,color:"#D33682"},{tag:Cr.variableName,color:"#268BD2"},{tag:[Cr.keyword,Cr.operator,Cr.punctuation],color:"#859900"},{tag:[Cr.definitionKeyword,Cr.modifier],color:"#073642",fontWeight:"bold"},{tag:[Cr.className,Cr.self,Cr.definition(Cr.propertyName)],color:"#268BD2"},{tag:Cr.function(Cr.variableName),color:"#268BD2"},{tag:[Cr.bool,Cr.null],color:"#B58900"},{tag:Cr.tagName,color:"#268BD2",fontWeight:"bold"},{tag:Cr.angleBracket,color:"#93A1A1"},{tag:Cr.attributeName,color:"#93A1A1"},{tag:Cr.typeName,color:"#859900"}]}),bb({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:Cr.comment,color:"#8E908C"},{tag:[Cr.variableName,Cr.self,Cr.propertyName,Cr.attributeName,Cr.regexp],color:"#C82829"},{tag:[Cr.number,Cr.bool,Cr.null],color:"#F5871F"},{tag:[Cr.className,Cr.typeName,Cr.definition(Cr.typeName)],color:"#C99E00"},{tag:[Cr.string,Cr.special(Cr.brace)],color:"#718C00"},{tag:Cr.operator,color:"#3E999F"},{tag:[Cr.definition(Cr.propertyName),Cr.function(Cr.variableName)],color:"#4271AE"},{tag:Cr.keyword,color:"#8959A8"},{tag:Cr.derefOperator,color:"#4D4D4C"}]});const xb=bb({variant:"light",settings:{background:"#ffffff",foreground:"#000000",caret:"#000000",selection:"#d7d4f0",lineHighlight:"#cceeff44",gutterBackground:"var(--color-background)",gutterForeground:"var(--gray-10)"},styles:[{tag:Cr.comment,color:"#708090"},{tag:Cr.variableName,color:"#000000"},{tag:[Cr.string,Cr.special(Cr.brace)],color:"#a11"},{tag:Cr.number,color:"#164"},{tag:Cr.bool,color:"#219"},{tag:Cr.null,color:"#219"},{tag:Cr.keyword,color:"#708",fontWeight:500},{tag:Cr.className,color:"#00f"},{tag:Cr.definition(Cr.typeName),color:"#00f"},{tag:Cr.typeName,color:"#085"},{tag:Cr.angleBracket,color:"#000000"},{tag:Cr.tagName,color:"#170"},{tag:Cr.attributeName,color:"#00c"},{tag:Cr.operator,color:"#a2f",fontWeight:500},{tag:[Cr.function(Cr.variableName)],color:"#00c"},{tag:[Cr.propertyName],color:"#05a"}]}),vb=bb({variant:"dark",settings:{background:"#282c34",foreground:"#abb2bf",caret:"#528bff",selection:"#3E4451",lineHighlight:"#2c313c",gutterBackground:"var(--color-background)",gutterForeground:"var(--gray-10)"},styles:[{tag:Cr.comment,color:"#5c6370"},{tag:Cr.variableName,color:"#abb2bf"},{tag:[Cr.string,Cr.special(Cr.brace)],color:"#98c379"},{tag:Cr.number,color:"#d19a66"},{tag:Cr.bool,color:"#d19a66"},{tag:Cr.null,color:"#d19a66"},{tag:Cr.keyword,color:"#c678dd",fontWeight:500},{tag:Cr.className,color:"#61afef"},{tag:Cr.definition(Cr.typeName),color:"#61afef"},{tag:Cr.typeName,color:"#56b6c2"},{tag:Cr.angleBracket,color:"#abb2bf"},{tag:Cr.tagName,color:"#e06c75"},{tag:Cr.attributeName,color:"#d19a66"},{tag:Cr.operator,color:"#56b6c2",fontWeight:500},{tag:[Cr.function(Cr.variableName)],color:"#61afef"},{tag:[Cr.propertyName],color:"#e5c07b"}]});const wb="packages-install-input",kb=["%alias","%cd","%clear","%debug","%env","%load","%load_ext","%lsmagic","%matplotlib","%pwd","%who_ls","%system","%%time","%%timeit","%%writefile","%%capture","%%html","%%latex"];let Sb;function Cb(){const e=async e=>{const t=re.get(_r),n={...t,runtime:{...t.runtime,auto_reload:e}};await j({config:n}).then((()=>re.set(_r,n)))},t=()=>{requestAnimationFrame((()=>{const e=document.getElementById(wb);e&&e.focus()}))},n=[{match:"!pip install",onMatch:()=>{re.set(lh,(e=>({...e,isSidebarOpen:!0,selectedPanel:"packages"}))),t()},title:"Package Installation",description:A.jsxs(A.Fragment,{children:["The package manager sidebar has been opened.",A.jsx("br",{}),"Install packages directly from there instead."]})},{match:"!uv pip install",onMatch:()=>{re.set(lh,(e=>({...e,isSidebarOpen:!0,selectedPanel:"packages"}))),t()},title:"Package Installation",description:A.jsxs(A.Fragment,{children:["The package manager sidebar has been opened.",A.jsx("br",{}),"Install packages directly from there instead."]})},{match:"%autoreload 2",onMatch:async()=>{await e("autorun")},title:"Module reload",description:A.jsxs(A.Fragment,{children:["Module reload mode set to ",A.jsx("b",{children:"autorun"})," - module changes will re-run the cells that import them."]})},{match:"%autoreload 1",onMatch:async()=>{await e("lazy")},title:"Module reload",description:A.jsxs(A.Fragment,{children:["Module reload mode set to ",A.jsx("b",{children:"lazy"})," - module changes will mark the cells that import them as stale."]})},{match:"%autoreload 0",onMatch:async()=>{await e("off")},title:"Module reload",description:A.jsx(A.Fragment,{children:"Module reload disabled - module changes will not be detected."})},{match:"!ls",onMatch:()=>{},title:"Listing files",description:A.jsxs(A.Fragment,{children:["Shell commands are not directly supported.",A.jsx("br",{}),"Use ",A.jsx("code",{children:"import subprocess; subprocess.run(['ls'])"})," instead."]})},...kb.map((e=>({match:e,onMatch:()=>{},title:A.jsx(jr,{className:"inline",children:e}),description:A.jsxs(A.Fragment,{children:["Magic commands are not supported in marimo. Read more about replacements in the"," ",A.jsx("a",{href:"https://docs.marimo.io/guides/coming_from/jupyter/#adapting-to-the-absence-of-magic-commands",target:"_blank",className:"text-link underline cursor-pointer",rel:"noopener noreferrer",children:"documentation"}),"."]})})))],r=new Map(n.map((e=>[e.match,e])));return Cn.updateListener.of((e=>{if(e.docChanged){const t=e.state.selection.main,n=e.state.doc,o=n.lineAt(t.head),s=n.sliceString(o.from,t.anchor).trim(),i=r.get(s);i&&(i.onMatch(),Sb?Sb.upsert({title:i.title,description:i.description}):Sb=ie({title:i.title,description:i.description}))}}))}function Eb(){return[Cn.domEventHandlers({paste:(e,t)=>{var n;const r=null==(n=e.clipboardData)?void 0:n.getData("text/plain");if(!(null==r?void 0:r.includes("@app.cell")))return!1;const o=function(e){if(!e.includes("@app.cell"))return[];const t=[],n=e.split("\n");let r=[],o=!1,s=0,i=!1,a=!1,l=0;const c=/\(/g,d=/\)/g,u=new Set(["@"]);function h(e){return(e.match(c)||[]).length-(e.match(d)||[]).length}function f(){if(0!==r.length){for(;r.length>0&&r[r.length-1].trim().startsWith("return");)r.pop();r.some((e=>""!==e.trim()))&&t.push(function(e){const t=e.split("\n");if(0===t.length)return"";const n=t.filter((e=>e.trim().length>0));if(0===n.length)return"";const r=/^\s*/,o=Math.min(...n.map((e=>{var t;return(null==(t=e.match(r))?void 0:t[0].length)??Number.POSITIVE_INFINITY})));return 0===o?e.trim():t.map((e=>e.slice(o))).join("\n").trim()}(r.join("\n"))),r=[]}}for(const p of n){const e=p.trim();(e||o)&&(e.startsWith("@app.cell")?(f(),o=!0,s=1):s>0?(e.startsWith("def")&&e.includes("(")&&!e.includes("):")&&(i=!0,l=h(e)),s--):i?(l+=h(e),0===l&&(i=!1)):o&&(u.has(e[0])||e.startsWith("if __name__")?(f(),o=e.startsWith("@")):e.startsWith("return")?e.includes("(")&&!e.endsWith(")")&&(a=!0,l=h(e)):a?(l+=h(e),0===l&&(a=!1)):r.push(p)))}return f(),t}(r);if(0===o.length)return!1;return t.state.facet(Ir).createManyBelow(o),!0}})]}const Nb={showInput:"Mod-l",acceptEdit:"Mod-y",rejectEdit:"Mod-u"},jb=hr.define({combine:e=>fr(e,{onError:console.error,inputDebounceTime:300,keymaps:Nb},{onError:(e,t)=>e&&t,inputDebounceTime:(e,t)=>e&&t,keymaps:(e,t)=>e&&t})}),_b=In.define(),Ib=Nn.define({create:()=>({show:!1,lineFrom:0,lineTo:0}),update(e,t){for(const n of t.effects)if(n.is(_b))return n.value;return e}}),Ab=In.define(),Tb=In.define(),Mb=Nn.define({create:()=>({shouldFocus:!1,inputValue:""}),update(e,t){let n=e;for(const r of t.effects)r.is(Ab)&&(n={...n,inputValue:r.value}),r.is(Tb)&&(n={...n,shouldFocus:r.value});return n}}),Db=In.define(),Ob=Nn.define({create:()=>null,update(e,t){for(const n of t.effects)if(n.is(Db))return n.value;return e}}),Rb=In.define(),Pb=Nn.define({create:()=>!1,update(e,t){for(const n of t.effects)if(n.is(Rb))return n.value;return e}}),Lb=Cn.baseTheme({".cm-ai-input-container":{display:"flex",flexDirection:"column",gap:"4px",width:"min(calc(100% + 7px), 500px)",padding:"5px 5px",margin:"0 -6px",backgroundColor:"light-dark(rgb(241, 243, 245), rgb(40, 40, 40))"},".cm-ai-input":{display:"block",width:"100%",padding:"3px 8px",border:"2px solid rgb(51, 154, 240)",borderRadius:"5px",fontSize:"12px"},".cm-ai-help-info-button":{fontSize:"10px",paddingLeft:"10px",height:"18px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",display:"block",marginRight:"auto"},".cm-ai-help-info-button:hover":{color:"light-dark(rgb(89, 97, 105), rgb(190, 190, 190))"},".cm-ai-generate-button":{background:"#0E639C",border:"none",padding:"2px 6px",color:"#ffffff",cursor:"pointer",font:"inherit",borderRadius:"4px","&:hover":{backgroundColor:"#1177bb"}},".cm-line.cm-ai-selection, .cm-line.cm-ai-selection.cm-active-line":{backgroundColor:"light-dark(color-mix(in srgb, rgb(223, 227, 232) 50%, transparent), color-mix(in srgb, rgb(50, 50, 50) 50%, transparent)) !important"},".cm-line:has(.cm-new-code-line)":{backgroundColor:"light-dark(color-mix(in srgb, rgb(183, 235, 143) 50%, transparent), color-mix(in srgb, rgb(40, 100, 40) 50%, transparent)) !important"},".cm-old-code-container":{backgroundColor:"light-dark(rgb(255, 205, 205), rgb(100, 40, 40))",position:"relative",display:"flex",paddingTop:"0",width:"100%",alignItems:"center"},".cm-code-button":{position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"16px"},".cm-floating-buttons":{fontFamily:"sans-serif",position:"absolute",top:"-20px",left:"5px",display:"flex"},".cm-floating-button":{fontFamily:"sans-serif",padding:"2px 5px",fontSize:"10px",cursor:"pointer",fontWeight:"700"},".cm-floating-accept":{backgroundColor:"light-dark(rgb(55, 125, 34), rgb(40, 80, 25))",borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px",color:"white",filter:"brightness(90%)","&:hover":{filter:"brightness(100%)"}},".cm-floating-reject":{backgroundColor:"light-dark(rgb(220, 53, 69), rgb(180, 40, 50))",color:"white",borderTopRightRadius:"5px",borderBottomRightRadius:"5px",filter:"brightness(90%)","&:hover":{filter:"brightness(100%)"}},".hotkey":{display:"inline-block",padding:"0 4px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",fontSize:"90%"},".cm-ai-loading-indicator":{fontStyle:"italic",fontSize:"10px",paddingLeft:"12px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",opacity:"0",transition:"opacity 0.3s ease-in-out","&::after":{content:'""',display:"inline-block",animation:"ellipsis-pulse 1.5s steps(4, end) infinite"},"&:not(:empty)":{opacity:"1"}},".cm-ai-input:disabled":{opacity:"0.5"},"@keyframes ellipsis-pulse":{"0%":{content:"'.'"},"25%":{content:"'..'"},"50%":{content:"'...'"},"75%":{content:"''"}},".cm-ai-loading-container":{display:"flex",alignItems:"center",padding:"0 8px"},".cm-ai-cancel-button":{padding:"2px 8px",fontSize:"10px",borderRadius:"4px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",cursor:"pointer","&:hover":{background:"light-dark(rgb(223, 227, 232), rgb(50, 50, 50))"}},".hidden":{display:"none"}}),zb=e=>{const{state:t}=e,n=t.selection.main;if(n.empty)return!1;const r=t.doc,o=r.lineAt(n.from),s=r.lineAt(n.to);if(t.sliceDoc(o.from,s.to).trim().length<1)return!1;const i=Math.max(1,Math.min(o.number,r.lines)),a=Math.max(1,Math.min(s.number,r.lines));return e.dispatch({effects:[_b.of({show:!0,lineFrom:i,lineTo:a}),Tb.of(!0),Ab.of("")],selection:Sn.cursor(o.from)}),!0},Fb=e=>!!e.state.field(Ob)&&(e.dispatch({effects:[Db.of(null),_b.of({show:!1,lineFrom:0,lineTo:0}),Tb.of(!1),Ab.of(""),Rb.of(!1)]}),!0),Bb=e=>{const t=e.state.field(Ob);return!!t&&(e.dispatch({changes:{from:t.from,to:t.to,insert:t.oldCode},effects:[Db.of(null),_b.of({show:!1,lineFrom:0,lineTo:0}),Tb.of(!1),Ab.of(""),Rb.of(!1)]}),!0)},Ub="⌘",$b="⊞ Win",Vb="Ctrl";function Hb(e){return e.replace("Mod",navigator.platform.startsWith("Mac")?Ub:navigator.platform.startsWith("Win")?$b:Vb).replace("-"," ").toUpperCase()}function Wb(e,t){const n=document.createElement(e);return n.className=t,n}function Gb(e){var t,n;const r=e.state.facet(jb),o={...Nb,...r.keymaps},s=Wb("div","cm-ai-tooltip").appendChild(Wb("div","cm-ai-tooltip-button"));return s.innerHTML=`<span>Edit <span class="hotkey">${Hb(o.showInput)}</span></span>`,null==(t=s.querySelector("span"))||t.addEventListener("mousedown",(e=>{e.stopPropagation()})),null==(n=s.querySelector("span"))||n.addEventListener("click",(t=>{t.preventDefault(),zb(e)})),s}const qb=hr.define({combine:e=>fr(e,{render:Gb})}),Yb=En.fromClass((n=class{constructor(e){var n,r,i;s(this,"view"),s(this,"suppress"),s(this,"dom"),s(this,"mousedown",(()=>{this.suppress=!0})),s(this,"mouseup",(()=>{this.suppress=!1,this.display(this.view)})),n=this,i=e=>{var t;const n=e.state.selection.ranges.find((e=>!e.empty));if(n&&!this.suppress){const r=e.coordsAtPos(n.from);if(!r)return;this.dom.style.display="flex";const o=this.dom.getBoundingClientRect(),s=e.dom.getBoundingClientRect(),i=null==(t=e.dom.parentElement)?void 0:t.getBoundingClientRect(),a=s.width-o.width,l=Math.min(r.left,a);let c=r.top-o.height;c=i?Math.max(i.y,c):c,this.dom.style.left=`${l}px`,this.dom.style.top=`${c}px`,requestAnimationFrame((()=>{this.dom&&(this.dom.ariaHidden="false")}))}else this.dom.style.display="none",this.dom.ariaHidden="true"},(r=t).has(n)?o("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,i),this.view=e;const a=e.state.facet(qb);this.suppress=!1,document.addEventListener("mousedown",this.mousedown),document.addEventListener("mouseup",this.mouseup);const l=a.render(e);e.dom.appendChild(l),this.dom=l}update(e){this.display(e.view)}docViewUpdate(e){this.display(e)}display(e){e.state.field(Ib).show?this.dom.style.display="none":e.requestMeasure({read:i(this,t)})}destroy(){document.removeEventListener("mousedown",this.mousedown),document.removeEventListener("mouseup",this.mouseup),this.dom.remove()}},t=new WeakMap,n)),Jb=Cn.baseTheme({".cm-ai-tooltip-button":{userSelect:"none",fontFamily:"system-ui, -apple-system, sans-serif",position:"fixed",display:"flex",boxSizing:"border-box",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",backgroundColor:"#0E639C",color:"#ffffff",border:"1px solid transparent",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:"999",transition:"opacity 0.5s","&[aria-hidden='true']":{opacity:"0"},"&[aria-hidden='false']":{opacity:"1"},"& > span":{pointerEvents:"auto",cursor:"pointer",display:"inline-block",padding:"2px"},"&:hover":{backgroundColor:"#1177bb"}}});class Xb extends ur{constructor(e){super(),s(this,"oldCode"),this.oldCode=e}toDOM(e){const t=Wb("div","cm-old-code-container");t.setAttribute("role","region"),t.setAttribute("aria-label","Previous code version");const n=Wb("div","cm-old-code cm-line");n.textContent=this.oldCode;const r=Wb("div","cm-floating-buttons"),o=e.state.facet(jb),s={...Nb,...o.keymaps},i=Wb("button","cm-floating-button cm-floating-accept");i.innerHTML=`<span class="hotkey">${Hb(s.acceptEdit)}</span> Accept`,i.setAttribute("aria-label","Accept changes"),i.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),e.focus(),Fb(e)}));const a=Wb("button","cm-floating-button cm-floating-reject");return a.innerHTML=`<span class="hotkey">${Hb(s.rejectEdit)}</span> Reject`,a.setAttribute("aria-label","Reject changes"),a.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),e.focus(),Bb(e)})),r.append(i,a),t.append(n,r),t}updateDOM(e,t){return!0}}class Kb extends ur{constructor(e){super(),s(this,"complete"),s(this,"abortController",null),s(this,"dom",null),s(this,"input",null),s(this,"loadingContainer",null),s(this,"helpInfo",null),s(this,"inputContainer",null),s(this,"form",null),s(this,"view",null),s(this,"onKeyDown",(async e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&this.onCancel():(e.preventDefault(),await this.handleSubmit())})),s(this,"onCancel",(()=>{this.cleanup();const e=this.view;e&&(e.dispatch({effects:[_b.of({show:!1,lineFrom:0,lineTo:0}),Rb.of(!1)]}),e.focus())})),s(this,"handleSubmit",(async e=>{var t;const n=this.view;if(!n)return;const r=n.state.facet(jb);null==e||e.stopPropagation();const o=n.state.field(Ib),{input:s}=this;if(!s)return;const i=s.value.trim();if(!o.show||!i)return;const a=n.state.doc.line(o.lineFrom),l=n.state.doc.line(o.lineTo),c=a.from,d=l.to,u=n.state.sliceDoc(c,d),h=n.state.sliceDoc(0,c),f=n.state.sliceDoc(d);this.abortController=new AbortController,n.dispatch({effects:Rb.of(!0)}),this.toggleLoading(!0);try{const e=await this.complete({prompt:i,selection:u,codeBefore:h,codeAfter:f,editorView:n,signal:this.abortController.signal});if(!n.state.field(Ib).show)return;if(!e||"string"!=typeof e)throw new Error("Invalid completion result");n.dispatch({changes:{from:c,to:d,insert:e},effects:[_b.of({show:!1,lineFrom:0,lineTo:0}),Db.of({from:c,to:c+e.length,oldCode:u,newCode:e}),Rb.of(!1)]})}catch(p){if(p instanceof DOMException&&"AbortError"===p.name)return;null==(t=r.onError)||t.call(r,p)}finally{this.cleanup(),this.toggleLoading(!1),n.focus()}})),this.complete=e}toDOM(e){if(this.dom)return this.dom;this.view=e;const t=e.state.field(Mb),n=e.state.field(Pb),r=Wb("div","cm-ai-input-container");this.inputContainer=r,this.dom=r;const o=Wb("form","cm-ai-input-form");this.form=o,o.setAttribute("role","search"),o.setAttribute("aria-label","AI editing instructions"),o.addEventListener("submit",(e=>e.preventDefault()));const s=Wb("input","cm-ai-input");this.input=s,o.append(s),s.placeholder="Editing instructions...",s.setAttribute("aria-label","AI editing instructions"),s.setAttribute("autocomplete","off"),s.setAttribute("spellcheck","true"),s.value=t.inputValue;const i=Wb("div","cm-ai-loading-container");this.loadingContainer=i;const a=Wb("div","cm-ai-loading-indicator");a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),a.textContent="Generating";const l=Wb("button","cm-ai-cancel-button");l.textContent="Cancel",l.setAttribute("aria-label","Cancel code generation"),l.addEventListener("click",this.onCancel),i.append(l,a);const c=Wb("div","cm-ai-help-info");this.helpInfo=c;const d=c.appendChild(document.createElement("button"));d.className="cm-ai-help-info-button",d.textContent="Esc to close",d.addEventListener("click",this.onCancel);const u=Wb("button","cm-ai-generate-button");function h(e){c.replaceChildren(e?u:d)}u.textContent="⏎ Generate",u.setAttribute("aria-label","Generate code"),u.addEventListener("click",this.handleSubmit),this.toggleLoading(n),t.shouldFocus&&requestAnimationFrame((()=>{s.value=t.inputValue,s.focus(),e.dispatch({effects:Tb.of(!1)})})),h(s.value),s.addEventListener("input",(function(){e.dispatch({effects:Ab.of(s.value)});const t=s.value.trim();if(t===f)return;f=t,h(t)})),s.addEventListener("keydown",this.onKeyDown);let f="";return r}toggleLoading(e){var t;this.inputContainer&&this.form&&this.loadingContainer&&this.helpInfo&&(null==(t=this.inputContainer)||t.replaceChildren(this.form,e?this.loadingContainer:this.helpInfo))}updateDOM(e,t){return this.dom=e,this.input=e.querySelector(".cm-ai-input"),!0}cleanup(){var e,t,n;null==(e=this.abortController)||e.abort(),this.abortController=null,null==(t=this.dom)||t.remove(),null==(n=this.input)||n.remove(),this.dom=null,this.input=null}destroy(){this.cleanup()}}function Zb(e){if(!e.prompt)throw new Error("prompt function is required");return[jb.of(e),Ib,Mb,Ob,Pb,[Yb,Jb],Lb,ar.of([{key:Nb.showInput,run:zb}]),dr.highest([ar.of([{key:Nb.acceptEdit,run:Fb},{key:Nb.rejectEdit,run:Bb}])]),Qb,ex,tx,nx]}const Qb=Cn.updateListener.of((e=>{const t=e.state.field(Ib);if(!t.show||!e.docChanged)return;let{lineFrom:n,lineTo:r}=t,o=!1;e.changes.iterChanges(((t,s,i,a)=>{const l=e.state.doc.lineAt(t).number;if(l<n){const t=e.state.doc.lineAt(a).number-e.state.doc.lineAt(i).number;n+=t,r+=t,o=!0}else if(l<=r){const t=e.state.doc.lineAt(a).number-e.state.doc.lineAt(i).number;r+=t,o=!0}})),o&&e.view.dispatch({effects:[_b.of({show:!0,lineFrom:n,lineTo:r})]})})),ex=Cn.decorations.of((e=>{const t=e.state.field(Ob);return t?jn.set([jn.mark({class:"cm-new-code-line"}).range(t.from,t.to)]):jn.none})),tx=Cn.decorations.compute([Ib],(e=>{const t=e.field(Ib),n=e.facet(jb),r=[];if(t.show){const o=t.lineFrom,s=t.lineTo;for(let t=o;t<=s;t++){const s=e.doc.line(t).from;r.push(jn.line({class:"cm-ai-selection"}).range(s)),t===o&&r.push(jn.widget({widget:new Kb(n.prompt),side:-1}).range(s))}}return jn.set(r)})),nx=Nn.define({create:e=>jn.none,update(e,t){const n=t.state.field(Ob);return n?jn.set([jn.widget({widget:new Xb(n.oldCode),block:!0}).range(n.from)]):jn.none},provide:e=>Cn.decorations.from(e)});function rx(e){const{showPlaceholder:t,enableAI:n}=e;return t?"marimo-import":n?"ai":"none"}const ox=e=>{const{cellId:t,keymapConfig:n,hotkeys:r,enableAI:o,cellActions:s,completionConfig:i}=e,a=rx(e);return[Yl(n),[Cn.domEventHandlers({drop:(e,t)=>{var n,r;const o=null==(n=e.dataTransfer)?void 0:n.files[0];if(null==o?void 0:o.type.startsWith("text/"))return e.preventDefault(),Er(t,o),!0;if(null==o?void 0:o.type.startsWith("image/"))return e.preventDefault(),Nr(t,o),!0;const s=null==(r=e.dataTransfer)?void 0:r.getData("text/plain");if(s){e.preventDefault();const n=t.posAtCoords({x:e.clientX,y:e.clientY});return null!==n&&t.dispatch({changes:{from:n,to:n,insert:s},scrollIntoView:!0}),!0}return!1},dragover:e=>{e.preventDefault()}})],Eb(),Cb(),Mr(i,r,a),Dr(t,r,s),sx(e),[gb,(l=(e,t)=>{wr(e,t)},En.define((e=>new yb(e,l)))),Cn.baseTheme({".underline":{textDecoration:"underline",cursor:"pointer",color:"var(--link)"}})],o&&xu("inline_ai_tooltip")?Zb({prompt:e=>async function(e){var t,n;const r=`\nGiven the following code context, ${e.prompt}\n\nSELECTED CODE:\n${e.selection}\n\nCODE BEFORE SELECTION:\n${e.codeBefore}\n\nCODE AFTER SELECTION:\n${e.codeAfter}\n\nInstructions:\n1. Modify ONLY the selected code\n2. Keep the same indentation selected code\n3. Maintain consistent style with surrounding code\n4. Ensure the edit is complete and can be inserted directly\n5. Return ONLY the replacement code, no explanations, no code fences.\n\nYour task: ${e.prompt}`,o=await fetch(Ar("api/ai/completion").toString(),{method:"POST",headers:Tr.headers(),body:JSON.stringify({prompt:r,code:"",includeOtherCode:"",language:e.language})}),s=(null==(t=e.selection.match(/^\s*/))?void 0:t[0])||"",i=null==(n=o.body)?void 0:n.getReader();if(!i)throw new Error("Failed to get response reader");let a="";for(;;){const{done:e,value:t}=await i.read();if(e)break;a+=(new TextDecoder).decode(t)}return a.startsWith(s)||(a=s+a),a}({prompt:e.prompt,selection:e.selection,codeBefore:e.codeBefore,codeAfter:e.codeAfter,language:J(e.editorView)})}):[]];var l},sx=e=>{const{theme:t,hotkeys:n,completionConfig:r,cellId:o}=e,s=rx(e);return[Cn.lineWrapping,Or(),Rr(),Pr(),Lr(),zr(),Fr(),Br(),Ur({position:"fixed",parent:document.querySelector("#App")??void 0}),$r(),"dark"===t?vb:xb,Vr(),hb(r),Hr(),Wr(),dr.high(ar.of(Zr)),Gr(),qr(),Yr.of("    "),Sr(Qr,{fallback:!0}),ar.of(eo),Jr({placeholderType:s,completionConfig:r,hotkeys:n,cellId:o}),Xr.of(to()),Kr.allowMultipleSelections.of(!0),dp(n),ar.of([{key:"Tab",run:e=>no(e)||(e=>{const{from:t,to:n}=e.state.selection.main;if(t!==n)return!1;const r=e.state.doc.lineAt(n);return""!==r.text.slice(0,n-r.from).trim()&&ao(e)})(e)||ro(e),preventDefault:!0},{key:n.getHotkey("completion.moveDown").key,run:e=>null!==mr(e.state)&&(oo(!0)(e),!0),preventDefault:!0},{key:n.getHotkey("completion.moveUp").key,run:e=>null!==mr(e.state)&&(oo(!1)(e),!0),preventDefault:!0}]),ar.of([...so,io])]};function ix(e){const t=e.current;if(null===t)throw new ReferenceError("Attempting to dereference null object.");return t}var ax="ContextMenu",[lx,cx]=ho(ax,[lo]),dx=lo(),[ux,hx]=lx(ax),fx=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:o,modal:s=!0}=e,[i,a]=l.useState(!1),c=dx(t),d=No(r),u=l.useCallback((e=>{a(e),d(e)}),[d]);return A.jsx(ux,{scope:t,open:i,onOpenChange:u,modal:s,children:A.jsx(jo,{...c,dir:o,open:i,onOpenChange:u,modal:s,children:n})})};fx.displayName=ax;var px="ContextMenuTrigger",mx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=e,s=hx(px,n),i=dx(n),a=l.useRef({x:0,y:0}),c=l.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),d=l.useRef(0),u=l.useCallback((()=>window.clearTimeout(d.current)),[]),h=e=>{a.current={x:e.clientX,y:e.clientY},s.onOpenChange(!0)};return l.useEffect((()=>u),[u]),l.useEffect((()=>{r&&u()}),[r,u]),A.jsxs(A.Fragment,{children:[A.jsx(fo,{...i,virtualRef:c}),A.jsx(po.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:mo(e.onContextMenu,(e=>{u(),h(e),e.preventDefault()})),onPointerDown:r?e.onPointerDown:mo(e.onPointerDown,jx((e=>{u(),d.current=window.setTimeout((()=>h(e)),700)}))),onPointerMove:r?e.onPointerMove:mo(e.onPointerMove,jx(u)),onPointerCancel:r?e.onPointerCancel:mo(e.onPointerCancel,jx(u)),onPointerUp:r?e.onPointerUp:mo(e.onPointerUp,jx(u))})]})}));mx.displayName=px;var gx=e=>{const{__scopeContextMenu:t,...n}=e,r=dx(t);return A.jsx(_o,{...r,...n})};gx.displayName="ContextMenuPortal";var yx="ContextMenuContent",bx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=hx(yx,n),s=dx(n),i=l.useRef(!1);return A.jsx(go,{...s,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{var n;null==(n=e.onCloseAutoFocus)||n.call(e,t),!t.defaultPrevented&&i.current&&t.preventDefault(),i.current=!1},onInteractOutside:t=>{var n;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||o.modal||(i.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));bx.displayName=yx;l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(yo,{...o,...r,ref:t})})).displayName="ContextMenuGroup";var xx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(bo,{...o,...r,ref:t})}));xx.displayName="ContextMenuLabel";var vx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(uo,{...o,...r,ref:t})}));vx.displayName="ContextMenuItem";var wx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(xo,{...o,...r,ref:t})}));wx.displayName="ContextMenuCheckboxItem";l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(vo,{...o,...r,ref:t})})).displayName="ContextMenuRadioGroup";var kx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(wo,{...o,...r,ref:t})}));kx.displayName="ContextMenuRadioItem";var Sx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(ko,{...o,...r,ref:t})}));Sx.displayName="ContextMenuItemIndicator";var Cx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(co,{...o,...r,ref:t})}));Cx.displayName="ContextMenuSeparator";l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(So,{...o,...r,ref:t})})).displayName="ContextMenuArrow";var Ex=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(Co,{...o,...r,ref:t})}));Ex.displayName="ContextMenuSubTrigger";var Nx=l.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=dx(n);return A.jsx(Eo,{...o,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));function jx(e){return t=>"mouse"!==t.pointerType?e(t):void 0}Nx.displayName="ContextMenuSubContent";var _x=bx,Ix=xx,Ax=vx,Tx=wx,Mx=kx,Dx=Sx,Ox=Cx,Rx=Ex,Px=Nx;const Lx=fx,zx=mx,Fx=To(gx);l.forwardRef(((e,t)=>{const n=_.c(14);let r,o,s,i,a,l,c;return n[0]!==e?(({className:o,inset:s,children:r,...i}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s,n[4]=i):(r=n[1],o=n[2],s=n[3],i=n[4]),n[5]!==o||n[6]!==s?(a=Mo({className:o,inset:s}),n[5]=o,n[6]=s,n[7]=a):a=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx(Lo,{className:"ml-auto h-4 w-4"}),n[8]=l):l=n[8],n[9]!==r||n[10]!==i||n[11]!==t||n[12]!==a?(c=A.jsxs(Rx,{ref:t,className:a,...i,children:[r,l]}),n[9]=r,n[10]=i,n[11]=t,n[12]=a,n[13]=c):c=n[13],c})).displayName=Rx.displayName;const Bx="data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2";l.forwardRef(((e,t)=>{const n=_.c(9);let r,o,s,i;return n[0]!==e?(({className:r,...o}=e),n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]),n[3]!==r?(s=Ln(Do({subcontent:!0}),Bx,r),n[3]=r,n[4]=s):s=n[4],n[5]!==o||n[6]!==t||n[7]!==s?(i=A.jsx(Px,{ref:t,className:s,...o}),n[5]=o,n[6]=t,n[7]=s,n[8]=i):i=n[8],i})).displayName=Px.displayName;const Ux=l.forwardRef(((e,t)=>{const n=_.c(9);let r,o,s,i;return n[0]!==e?(({className:r,...o}=e),n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]),n[3]!==r?(s=Ln(Do(),Bx,r),n[3]=r,n[4]=s):s=n[4],n[5]!==o||n[6]!==t||n[7]!==s?(i=A.jsx(Fx,{children:A.jsx(Oo,{children:A.jsx(_x,{ref:t,className:s,...o})})}),n[5]=o,n[6]=t,n[7]=s,n[8]=i):i=n[8],i}));Ux.displayName=_x.displayName;const $x=l.forwardRef(((e,t)=>{const n=_.c(13);let r,o,s,i,a,l;return n[0]!==e?(({className:r,inset:o,variant:i,...s}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s,n[4]=i):(r=n[1],o=n[2],s=n[3],i=n[4]),n[5]!==r||n[6]!==o||n[7]!==i?(a=Ao({className:r,inset:o,variant:i}),n[5]=r,n[6]=o,n[7]=i,n[8]=a):a=n[8],n[9]!==s||n[10]!==t||n[11]!==a?(l=A.jsx(Ax,{ref:t,className:a,...s}),n[9]=s,n[10]=t,n[11]=a,n[12]=l):l=n[12],l}));$x.displayName=Ax.displayName;l.forwardRef(((e,t)=>{const n=_.c(15);let r,o,s,i,a,l,c,d;return n[0]!==e?(({className:s,children:o,checked:r,...i}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s,n[4]=i):(r=n[1],o=n[2],s=n[3],i=n[4]),n[5]!==s?(a=Ro({className:s}),n[5]=s,n[6]=a):a=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(l=Ro(),n[7]=l):l=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx("span",{className:l,children:A.jsx(Dx,{children:A.jsx(zo,{className:"h-4 w-4"})})}),n[8]=c):c=n[8],n[9]!==r||n[10]!==o||n[11]!==i||n[12]!==t||n[13]!==a?(d=A.jsxs(Tx,{ref:t,className:a,checked:r,...i,children:[c,o]}),n[9]=r,n[10]=o,n[11]=i,n[12]=t,n[13]=a,n[14]=d):d=n[14],d})).displayName=Tx.displayName;l.forwardRef(((e,t)=>{const n=_.c(13);let r,o,s,i,a,l,c;return n[0]!==e?(({className:o,children:r,...s}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s):(r=n[1],o=n[2],s=n[3]),n[4]!==o?(i=Ro({className:o}),n[4]=o,n[5]=i):i=n[5],n[6]===Symbol.for("react.memo_cache_sentinel")?(a=Ro(),n[6]=a):a=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx("span",{className:a,children:A.jsx(Dx,{children:A.jsx(Fo,{className:"h-4 w-4 fill-current"})})}),n[7]=l):l=n[7],n[8]!==r||n[9]!==s||n[10]!==t||n[11]!==i?(c=A.jsxs(Mx,{ref:t,className:i,...s,children:[l,r]}),n[8]=r,n[9]=s,n[10]=t,n[11]=i,n[12]=c):c=n[12],c})).displayName=Mx.displayName;l.forwardRef(((e,t)=>{const n=_.c(11);let r,o,s,i,a;return n[0]!==e?(({className:r,inset:o,...s}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s):(r=n[1],o=n[2],s=n[3]),n[4]!==r||n[5]!==o?(i=Po({className:r,inset:o}),n[4]=r,n[5]=o,n[6]=i):i=n[6],n[7]!==s||n[8]!==t||n[9]!==i?(a=A.jsx(Ix,{ref:t,className:i,...s}),n[7]=s,n[8]=t,n[9]=i,n[10]=a):a=n[10],a})).displayName=Ix.displayName;const Vx=l.forwardRef(((e,t)=>{const n=_.c(9);let r,o,s,i;return n[0]!==e?(({className:r,...o}=e),n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]),n[3]!==r?(s=Ln(Io({className:r})),n[3]=r,n[4]=s):s=n[4],n[5]!==o||n[6]!==t||n[7]!==s?(i=A.jsx(Ox,{ref:t,className:s,...o}),n[5]=o,n[6]=t,n[7]=s,n[8]=i):i=n[8],i}));Vx.displayName=Ox.displayName;const Hx=e=>{const t=_.c(14),{appClosed:n,onClick:r,tooltipContent:o}=e;let s;t[0]!==r?(s=()=>null==r?void 0:r({code:""}),t[0]=r,t[1]=s):s=t[1];const i=n&&" inactive-button";let a,l,c,d,u;return t[2]!==i?(a=Ln("shoulder-button hover-action",i),t[2]=i,t[3]=a):a=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx(Bo,{strokeWidth:1.8}),t[4]=l):l=t[4],t[5]!==s||t[6]!==a?(c=A.jsx(Ll,{onClick:s,className:a,onMouseDown:dt.preventFocus,shape:"circle",size:"small",color:"hint-green","data-testid":"create-cell-button",children:l}),t[5]=s,t[6]=a,t[7]=c):c=t[7],t[8]!==c||t[9]!==o?(d=A.jsx(ht,{content:o,usePortal:!1,children:c}),t[8]=c,t[9]=o,t[10]=d):d=t[10],t[11]!==r||t[12]!==d?(u=A.jsx(Wx,{onClick:r,children:d}),t[11]=r,t[12]=d,t[13]=u):u=t[13],u},Wx=e=>{const t=_.c(24),{children:n,onClick:r}=e;if(!r)return n;let o,s,i,a,l,c,d,u,h,f,p,m;return t[0]!==n?(o=A.jsx(zx,{children:n}),t[0]=n,t[1]=o):o=t[1],t[2]!==r?(s=e=>{e.stopPropagation(),r({code:""})},t[2]=r,t[3]=s):s=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(i=A.jsx("div",{className:"mr-3 text-muted-foreground",children:A.jsx(Nl,{})}),t[4]=i):i=t[4],t[5]!==s?(a=A.jsxs($x,{onSelect:s,children:[i,"Python cell"]},"python"),t[5]=s,t[6]=a):a=t[6],t[7]!==r?(l=e=>{e.stopPropagation(),r({code:(new Ut).defaultCode})},t[7]=r,t[8]=l):l=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx("div",{className:"mr-3 text-muted-foreground",children:A.jsx(El,{})}),t[9]=c):c=t[9],t[10]!==l?(d=A.jsxs($x,{onSelect:l,children:[c,"Markdown cell"]},"markdown"),t[10]=l,t[11]=d):d=t[11],t[12]!==r?(u=e=>{e.stopPropagation(),r({code:(new Uo).getDefaultCode()})},t[12]=r,t[13]=u):u=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(h=A.jsx("div",{className:"mr-3 text-muted-foreground",children:A.jsx(Ne,{size:13,strokeWidth:1.5})}),t[14]=h):h=t[14],t[15]!==u?(f=A.jsxs($x,{onSelect:u,children:[h,"SQL cell"]},"sql"),t[15]=u,t[16]=f):f=t[16],t[17]!==a||t[18]!==d||t[19]!==f?(p=A.jsxs(Ux,{children:[a,d,f]}),t[17]=a,t[18]=d,t[19]=f,t[20]=p):p=t[20],t[21]!==o||t[22]!==p?(m=A.jsxs(Lx,{children:[o,p]}),t[21]=o,t[22]=p,t[23]=m):m=t[23],m},Gx=$o("rounded-full shadow-xsSolid border p-[5px] transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 [&>svg]:size-3 active:shadow-none bg-background",{variants:{variant:{default:"hover:bg-accent hover:text-accent-foreground",stale:"bg-[var(--yellow-3)] hover:bg-[var(--yellow-4)] text-[var(--yellow-11)]",green:"hover:bg-[var(--grass-2)] hover:text-[var(--grass-11)] hover:border-[var(--grass-7)],",disabled:"opacity-50 cursor-not-allowed",danger:"hover:bg-[var(--red-3)] hover:text-[var(--red-11)]"}},defaultVariants:{variant:"default"}}),qx=e=>{const t=_.c(21);let n,r,o,s,i;t[0]!==e?(({children:n,tooltip:s,disabled:o,variant:i,...r}=e),t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s,t[5]=i):(n=t[1],r=t[2],o=t[3],s=t[4],i=t[5]);const a=void 0!==o&&o;let l,c,d;t[6]!==a||t[7]!==r?(l=e=>{var t;a||null==(t=r.onClick)||t.call(r,e)},t[6]=a,t[7]=r,t[8]=l):l=t[8],t[9]!==r.className||t[10]!==i?(c=Ln(Gx({variant:i}),r.className),t[9]=r.className,t[10]=i,t[11]=c):c=t[11],t[12]!==n||t[13]!==a||t[14]!==r||t[15]!==l||t[16]!==c?(d=A.jsx("button",{disabled:a,...r,onClick:l,onMouseDown:dt.preventFocus,className:c,children:n}),t[12]=n,t[13]=a,t[14]=r,t[15]=l,t[16]=c,t[17]=d):d=t[17];const u=d;if(s){let e;return t[18]!==u||t[19]!==s?(e=A.jsx(ht,{content:s,side:"top",delayDuration:200,usePortal:!1,children:u}),t[18]=u,t[19]=s,t[20]=e):e=t[20],e}return u},Yx=({children:e,className:t})=>A.jsx(hu,{className:Ln("flex items-center gap-1 bg-background m-[2px] rounded-full",t),children:e});const Jx=e=>{const t=_.c(22),{onClick:n,appClosed:r,needsRun:o,status:s,config:i,edited:a}=e,l="disabled-transitively"===s,c="running"===s||"queued"===s,d=r||c||!i.disabled&&l&&!a;let u;t[0]!==r||t[1]!==d||t[2]!==c||t[3]!==o?(u=function(e,t,n,r){return e?"disabled":t&&!n?"stale":n||r?"disabled":"green"}(r,o,c,d),t[0]=r,t[1]=d,t[2]=c,t[3]=o,t[4]=u):u=t[4];const h=u;if(i.disabled){let e,r;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(wd,{}),t[5]=e):e=t[5],t[6]!==d||t[7]!==n||t[8]!==h?(r=A.jsx(qx,{tooltip:"Add code to notebook",disabled:d,onClick:n,variant:h,"data-testid":"run-button",children:e}),t[6]=d,t[7]=n,t[8]=h,t[9]=r):r=t[9],r}if(!i.disabled&&l&&!a){let e,r;return t[10]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(Fd,{strokeWidth:1.2}),t[10]=e):e=t[10],t[11]!==d||t[12]!==n||t[13]!==h?(r=A.jsx(qx,{disabled:d,tooltip:"This cell can't be run because it has a disabled ancestor",onClick:n,variant:h,"data-testid":"run-button",children:e}),t[11]=d,t[12]=n,t[13]=h,t[14]=r):r=t[14],r}let f,p,m;if(r)f="App disconnected";else if("queued"===s)f="This cell is already queued to run";else if("running"===s)f="This cell is already running.";else{let e;t[15]===Symbol.for("react.memo_cache_sentinel")?(e=Gt("cell.run"),t[15]=e):e=t[15],f=e}return t[16]===Symbol.for("react.memo_cache_sentinel")?(p=A.jsx(Fd,{strokeWidth:1.2}),t[16]=p):p=t[16],t[17]!==d||t[18]!==n||t[19]!==f||t[20]!==h?(m=A.jsx(qx,{tooltip:f,disabled:d,onClick:n,variant:h,"data-testid":"run-button",children:p}),t[17]=d,t[18]=n,t[19]=f,t[20]=h,t[21]=m):m=t[21],m},Xx=e=>{const t=_.c(10),{status:n,appClosed:r,onClick:o}=e;let s;s=r?"App disconnected":"running"===n?"A cell can't be deleted when it's running":"queued"===n?"A cell can't be deleted when it's queued to run":"Delete";const i=s,a=(r||("running"===n||"queued"===n))&&"inactive-button";let l,c,d,u,h;return t[0]!==a?(l=Ln("hover:bg-transparent text-destructive/60 hover:text-destructive",a),t[0]=a,t[1]=l):l=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(c={boxShadow:"none"},d=A.jsx(De,{size:14}),t[2]=c,t[3]=d):(c=t[2],d=t[3]),t[4]!==o||t[5]!==l?(u=A.jsx(te,{variant:"ghost",size:"icon",onClick:o,"data-testid":"delete-button",onMouseDown:dt.preventFocus,className:l,style:c,children:d}),t[4]=o,t[5]=l,t[6]=u):u=t[6],t[7]!==u||t[8]!==s?(h=A.jsx(ht,{content:i,usePortal:!1,children:u}),t[7]=u,t[8]=s,t[9]=h):h=t[9],h};const Kx=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!0}),Zx=new Intl.DateTimeFormat("en-US",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!0}),Qx=e=>{const t=_.c(79),{editing:n,status:r,disabled:o,staleInputs:s,edited:i,interrupted:a,elapsedTime:l,runStartTimestamp:c,lastRunStartTimestamp:d,uninstantiated:u}=e;if(!n)return null;const h=c??d;let f;t[0]!==h?(f=h?A.jsx(tv,{lastRanTime:h}):null,t[0]=h,t[1]=f):f=t[1];const p=f;if(o&&"running"===r)return E.error("CellStatusComponent: disabled and running"),null;if(o&&s){let e,n,r,o;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{children:"This cell is stale, but it's disabled and can't be run"}),t[2]=e):e=t[2],t[3]!==p?(n=A.jsxs("div",{className:"flex flex-col gap-1",children:[e,p]}),t[3]=p,t[4]=n):n=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"stale",children:A.jsxs(_u,{children:[A.jsx(Kc,{className:"h-5 w-5",strokeWidth:1.5}),A.jsx(Ho,{className:"h-3 w-3",strokeWidth:2.5})]})}),t[5]=r):r=t[5],t[6]!==n?(o=A.jsx(ht,{content:n,usePortal:!0,children:r}),t[6]=n,t[7]=o):o=t[7],o}if(o){let e,n,r,o;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{children:"This cell is disabled"}),t[8]=e):e=t[8],t[9]!==p?(n=A.jsxs("div",{className:"flex flex-col gap-1",children:[e,p]}),t[9]=p,t[10]=n):n=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx("div",{className:"cell-status-icon cell-status-disabled","data-testid":"cell-status","data-status":"disabled",children:A.jsx(Kc,{className:"h-5 w-5",strokeWidth:1.5})}),t[11]=r):r=t[11],t[12]!==n?(o=A.jsx(ht,{content:n,usePortal:!0,children:r}),t[12]=n,t[13]=o):o=t[13],o}if(!s&&"disabled-transitively"===r){let e,n,r,o;return t[14]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{children:"An ancestor of this cell is disabled, so it can't be run"}),t[14]=e):e=t[14],t[15]!==p?(n=A.jsxs("div",{className:"flex flex-col gap-1",children:[e,p]}),t[15]=p,t[16]=n):n=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"disabled-transitively",children:A.jsxs(_u,{layerTop:!0,children:[A.jsx(lu,{className:"h-5 w-5",strokeWidth:1.5}),A.jsx(Kc,{className:"h-3 w-3",strokeWidth:2.5})]})}),t[17]=r):r=t[17],t[18]!==n?(o=A.jsx(ht,{content:n,usePortal:!0,children:r}),t[18]=n,t[19]=o):o=t[19],o}if(s&&"disabled-transitively"===r){let e,n,r,o;return t[20]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{children:"This cell is stale, but an ancestor is disabled so it can't be run"}),t[20]=e):e=t[20],t[21]!==p?(n=A.jsxs("div",{className:"flex flex-col gap-1",children:[e,p]}),t[21]=p,t[22]=n):n=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"stale",children:A.jsxs(_u,{children:[A.jsx(Ho,{className:"h-5 w-5",strokeWidth:1}),A.jsx(Kc,{className:"h-3 w-3",strokeWidth:2.5})]})}),t[23]=r):r=t[23],t[24]!==n?(o=A.jsx(ht,{content:n,usePortal:!0,children:r}),t[24]=n,t[25]=o):o=t[25],o}if("running"===r){let e,n,r,o,s;return t[26]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{children:"This cell is running"}),t[26]=e):e=t[26],t[27]!==p?(n=A.jsxs("div",{className:"flex flex-col gap-1",children:[e,p]}),t[27]=p,t[28]=n):n=t[28],t[29]!==c?(r=Vo.fromSeconds(c)||Vo.now(),t[29]=c,t[30]=r):r=t[30],t[31]!==r?(o=A.jsx("div",{className:"cell-status-icon elapsed-time running","data-testid":"cell-status","data-status":"running",children:A.jsx(rv,{startTime:r})}),t[31]=r,t[32]=o):o=t[32],t[33]!==n||t[34]!==o?(s=A.jsx(ht,{content:n,usePortal:!0,children:o}),t[33]=n,t[34]=o,t[35]=s):s=t[35],s}if("queued"===r){let e,n,r,o;return t[36]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{children:"This cell is queued to run"}),t[36]=e):e=t[36],t[37]!==p?(n=A.jsxs("div",{className:"flex flex-col gap-1",children:[e,p]}),t[37]=p,t[38]=n):n=t[38],t[39]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx("div",{className:"cell-status-icon cell-status-queued","data-testid":"cell-status","data-status":"queued",children:A.jsx(yc,{className:"h-5 w-5",strokeWidth:1.5})}),t[39]=r):r=t[39],t[40]!==n?(o=A.jsx(ht,{content:n,usePortal:!0,children:r}),t[40]=n,t[41]=o):o=t[41],o}if(i||a||s||u){let e;t[42]!==l?(e=nv(l),t[42]=l,t[43]=e):e=t[43];const n=e;let r;t[44]!==l||t[45]!==n?(r=l?A.jsx(ev,{elapsedTime:n}):null,t[44]=l,t[45]=n,t[46]=r):r=t[46];const o=r;let s,c,d,h,f,m="";if(u)s="This cell has not yet been run";else if(a){let e;s="This cell was interrupted when it was last run",t[47]!==o?(e=A.jsxs("span",{children:["This cell ran for ",o," before being interrupted"]}),t[47]=o,t[48]=e):e=t[48],m=e}else if(i){let e;s="This cell has been modified since it was last run",t[49]!==o?(e=A.jsxs("span",{children:["This cell took ",o," to run"]}),t[49]=o,t[50]=e):e=t[50],m=e}else{let e;s="This cell has not been run with the latest inputs",t[51]!==o?(e=A.jsxs("span",{children:["This cell took ",o," to run"]}),t[51]=o,t[52]=e):e=t[52],m=e}return t[53]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx("div",{className:"cell-status-stale","data-testid":"cell-status","data-status":"outdated",children:A.jsx(Ho,{className:"h-5 w-5",strokeWidth:1.5})}),t[53]=c):c=t[53],t[54]!==s?(d=A.jsx(ht,{content:s,usePortal:!0,children:c}),t[54]=s,t[55]=d):d=t[55],t[56]!==l||t[57]!==n||t[58]!==p||t[59]!==m?(h=l&&A.jsx(ht,{content:A.jsxs("div",{className:"flex flex-col gap-1",children:[m,p]}),usePortal:!0,children:A.jsx("div",{className:"elapsed-time hover-action","data-testid":"cell-status","data-status":"outdated",children:A.jsx("span",{children:n})})}),t[56]=l,t[57]=n,t[58]=p,t[59]=m,t[60]=h):h=t[60],t[61]!==d||t[62]!==h?(f=A.jsxs("div",{className:"cell-status-icon flex items-center gap-2",children:[d,h]}),t[61]=d,t[62]=h,t[63]=f):f=t[63],f}if(null!==l){let e;t[64]!==l?(e=nv(l),t[64]=l,t[65]=e):e=t[65];const n=e;let r;t[66]!==l||t[67]!==n?(r=l?A.jsx(ev,{elapsedTime:n}):null,t[66]=l,t[67]=n,t[68]=r):r=t[68];const o=r;let s,i,a,c;return t[69]!==o?(s=A.jsxs("span",{children:["This cell took ",o," to run"]}),t[69]=o,t[70]=s):s=t[70],t[71]!==p||t[72]!==s?(i=A.jsxs("div",{className:"flex flex-col gap-1",children:[s,p]}),t[71]=p,t[72]=s,t[73]=i):i=t[73],t[74]!==n?(a=A.jsx("div",{className:"cell-status-icon elapsed-time hover-action","data-testid":"cell-status","data-status":"idle",children:A.jsx("span",{children:n})}),t[74]=n,t[75]=a):a=t[75],t[76]!==i||t[77]!==a?(c=A.jsx(ht,{content:i,usePortal:!0,children:a}),t[76]=i,t[77]=a,t[78]=c):c=t[78],c}return null},ev=e=>{const t=_.c(2);let n;return t[0]!==e.elapsedTime?(n=A.jsx("span",{className:"tracking-wide font-semibold",children:e.elapsedTime}),t[0]=e.elapsedTime,t[1]=n):n=t[1],n},tv=e=>{const t=_.c(18),n=1e3*e.lastRanTime;let r,o,s,i,a,l,c,d,u;if(t[0]!==n){const e=new Date(n),d=new Date,u=e.toDateString()===d.toDateString()?Kx:Zx;i="Ran at",a=" ",l=A.jsx("strong",{className:"tracking-wide font-semibold",children:u.format(e)}),c=" ",r="text-muted-foreground",o="(",s=yu(e),t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=i,t[5]=a,t[6]=l,t[7]=c}else r=t[1],o=t[2],s=t[3],i=t[4],a=t[5],l=t[6],c=t[7];return t[8]!==r||t[9]!==o||t[10]!==s?(d=A.jsxs("span",{className:r,children:[o,s," ago)"]}),t[8]=r,t[9]=o,t[10]=s,t[11]=d):d=t[11],t[12]!==i||t[13]!==a||t[14]!==l||t[15]!==c||t[16]!==d?(u=A.jsxs("span",{children:[i,a,l,c,d]}),t[12]=i,t[13]=a,t[14]=l,t[15]=c,t[16]=d,t[17]=u):u=t[17],u};function nv(e){if(null===e)return"";const t=e,n=t/1e3;if(n>=60){return`${Math.floor(n/60)}m${Math.floor(n%60)}s`}return n>=1?`${n.toFixed(2).toString()}s`:`${t.toFixed(0).toString()}ms`}const rv=e=>{const t=_.c(6);let n;t[0]!==e.startTime?(n=e.startTime.toMilliseconds(),t[0]=e.startTime,t[1]=n):n=t[1];const r=function(e){const t=l.useRef(e),[n,r]=l.useState(e);return l.useEffect((()=>{const e=setInterval((()=>{r(Vo.now().toMilliseconds())}),17);return()=>clearInterval(e)}),[]),n-t.current}(n);let o,s;return t[2]!==r?(o=nv(r),t[2]=r,t[3]=o):o=t[3],t[4]!==o?(s=A.jsx("span",{children:o}),t[4]=o,t[5]=s):s=t[5],s},ov={display:"none"};function sv(e){let{id:t,value:n}=e;return m.createElement("div",{id:t,style:ov},n)}function iv(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return m.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const av=l.createContext(null);const lv={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},cv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function dv(e){let{announcements:t=cv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=lv}=e;const{announce:s,announcement:i}=function(){const[e,t]=l.useState("");return{announce:l.useCallback((e=>{null!=e&&t(e)}),[]),announcement:e}}(),a=Wo("DndLiveRegion"),[c,d]=l.useState(!1);if(l.useEffect((()=>{d(!0)}),[]),function(e){const t=l.useContext(av);l.useEffect((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}(l.useMemo((()=>({onDragStart(e){let{active:n}=e;s(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&s(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;s(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;s(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;s(t.onDragCancel({active:n,over:r}))}})),[s,t])),!c)return null;const u=m.createElement(m.Fragment,null,m.createElement(sv,{id:r,value:o.draggable}),m.createElement(iv,{id:a,announcement:i}));return n?is.createPortal(u,n):u}var uv,hv;function fv(){}function pv(e,t){return l.useMemo((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}(hv=uv||(uv={})).DragStart="dragStart",hv.DragMove="dragMove",hv.DragEnd="dragEnd",hv.DragCancel="dragCancel",hv.DragOver="dragOver",hv.RegisterDroppable="registerDroppable",hv.SetDroppableDisabled="setDroppableDisabled",hv.UnregisterDroppable="unregisterDroppable";const mv=Object.freeze({x:0,y:0});function gv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function bv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function xv(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function vv(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function wv(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const kv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=wv(t,t.left,t.top),s=[];for(const i of r){const{id:e}=i,t=n.get(e);if(t){const n=gv(wv(t),o);s.push({id:e,data:{droppableContainer:i,value:n}})}}return s.sort(yv)};function Sv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,a=s-n;if(r<o&&n<s){const n=t.width*t.height,r=e.width*e.height,o=i*a;return Number((o/(n+r-o)).toFixed(4))}return 0}const Cv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:e}=s,r=n.get(e);if(r){const n=Sv(r,t);n>0&&o.push({id:e,data:{droppableContainer:s,value:n}})}}return o.sort(bv)};function Ev(e,t){const{top:n,left:r,bottom:o,right:s}=t;return n<=e.y&&e.y<=o&&r<=e.x&&e.x<=s}function Nv(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:mv}function jv(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const _v=jv(1);const Iv={ignoreTransform:!1};function Av(e,t){void 0===t&&(t=Iv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=Xo(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:a}=r,l=e.left-i-(1-o)*parseFloat(n),c=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,u=s?e.height/s:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(n,t,r))}const{top:r,left:o,width:s,height:i,bottom:a,right:l}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:l}}function Tv(e){return Av(e,{ignoreTransform:!0})}function Mv(e,t){const n=[];return e?function r(o){if(null!=t&&n.length>=t)return n;if(!o)return n;if(rs(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!os(o)||ss(o))return n;if(n.includes(o))return n;const s=Xo(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=Xo(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(o,s)&&n.push(o),function(e,t){return void 0===t&&(t=Xo(e).getComputedStyle(e)),"fixed"===t.position}(o,s)?n:r(o.parentNode)}(e):n}function Dv(e){const[t]=Mv(e,1);return null!=t?t:null}function Ov(e){return ns&&e?us(e)?e:hs(e)?rs(e)||e===Ko(e).scrollingElement?window:os(e)?e:null:null:null}function Rv(e){return us(e)?e.scrollX:e.scrollLeft}function Pv(e){return us(e)?e.scrollY:e.scrollTop}function Lv(e){return{x:Rv(e),y:Pv(e)}}var zv,Fv;function Bv(e){return!(!ns||!e)&&e===document.scrollingElement}function Uv(e){const t={x:0,y:0},n=Bv(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}(Fv=zv||(zv={}))[Fv.Forward=1]="Forward",Fv[Fv.Backward=-1]="Backward";const $v={x:.2,y:.2};function Vv(e,t,n,r,o){let{top:s,left:i,right:a,bottom:l}=n;void 0===r&&(r=10),void 0===o&&(o=$v);const{isTop:c,isBottom:d,isLeft:u,isRight:h}=Uv(e),f={x:0,y:0},p={x:0,y:0},m=t.height*o.y,g=t.width*o.x;return!c&&s<=t.top+m?(f.y=zv.Backward,p.y=r*Math.abs((t.top+m-s)/m)):!d&&l>=t.bottom-m&&(f.y=zv.Forward,p.y=r*Math.abs((t.bottom-m-l)/m)),!h&&a>=t.right-g?(f.x=zv.Forward,p.x=r*Math.abs((t.right-g-a)/g)):!u&&i<=t.left+g&&(f.x=zv.Backward,p.x=r*Math.abs((t.left+g-i)/g)),{direction:f,speed:p}}function Hv(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Wv(e){return e.reduce(((e,t)=>es(e,Lv(t))),mv)}const Gv=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+Rv(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Pv(t)),0)}]];class qv{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Mv(t),r=Wv(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,i]of Gv)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=i(n),s=r[o]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yv{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Jv(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Xv,Kv,Zv,Qv;function ew(e){e.preventDefault()}function tw(e){e.stopPropagation()}(Kv=Xv||(Xv={})).Click="click",Kv.DragStart="dragstart",Kv.Keydown="keydown",Kv.ContextMenu="contextmenu",Kv.Resize="resize",Kv.SelectionChange="selectionchange",Kv.VisibilityChange="visibilitychange",(Qv=Zv||(Zv={})).Space="Space",Qv.Down="ArrowDown",Qv.Right="ArrowRight",Qv.Left="ArrowLeft",Qv.Up="ArrowUp",Qv.Esc="Escape",Qv.Enter="Enter",Qv.Tab="Tab";const nw={start:[Zv.Space,Zv.Enter],cancel:[Zv.Esc],end:[Zv.Space,Zv.Enter,Zv.Tab]},rw=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Zv.Right:return{...n,x:n.x+25};case Zv.Left:return{...n,x:n.x-25};case Zv.Down:return{...n,y:n.y+25};case Zv.Up:return{...n,y:n.y-25}}};class ow{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Yv(Ko(t)),this.windowListeners=new Yv(Xo(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xv.Resize,this.handleCancel),this.windowListeners.add(Xv.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(Xv.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=Av),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);Dv(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(mv)}handleKeyDown(e){if(Zo(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=nw,coordinateGetter:s=rw,scrollBehavior:i="smooth"}=r,{code:a}=e;if(o.end.includes(a))return void this.handleEnd(e);if(o.cancel.includes(a))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:mv;this.referenceCoordinates||(this.referenceCoordinates=c);const d=s(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=Qo(d,c),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:s,isRight:a,isLeft:l,isBottom:c,maxScroll:u,minScroll:h}=Uv(n),f=Hv(n),p={x:Math.min(o===Zv.Right?f.right-f.width/2:f.right,Math.max(o===Zv.Right?f.left:f.left+f.width/2,d.x)),y:Math.min(o===Zv.Down?f.bottom-f.height/2:f.bottom,Math.max(o===Zv.Down?f.top:f.top+f.height/2,d.y))},m=o===Zv.Right&&!a||o===Zv.Left&&!l,g=o===Zv.Down&&!c||o===Zv.Up&&!s;if(m&&p.x!==d.x){const e=n.scrollLeft+t.x,s=o===Zv.Right&&e<=u.x||o===Zv.Left&&e>=h.x;if(s&&!t.y)return void n.scrollTo({left:e,behavior:i});r.x=s?n.scrollLeft-e:o===Zv.Right?n.scrollLeft-u.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:i});break}if(g&&p.y!==d.y){const e=n.scrollTop+t.y,s=o===Zv.Down&&e<=u.y||o===Zv.Up&&e>=h.y;if(s&&!t.x)return void n.scrollTo({top:e,behavior:i});r.y=s?n.scrollTop-e:o===Zv.Down?n.scrollTop-u.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:i});break}}this.handleMove(e,es(Qo(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function sw(e){return Boolean(e&&"distance"in e)}function iw(e){return Boolean(e&&"delay"in e)}ow.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=nw,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==o||o({event:e.nativeEvent}),!0)}return!1}}];class aw{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=Xo(e);return e instanceof t?e:Ko(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=Ko(s),this.documentListeners=new Yv(this.document),this.listeners=new Yv(n),this.windowListeners=new Yv(Xo(s)),this.initialCoordinates=null!=(r=ts(o))?r:mv,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Xv.Resize,this.handleCancel),this.windowListeners.add(Xv.DragStart,ew),this.windowListeners.add(Xv.VisibilityChange,this.handleCancel),this.windowListeners.add(Xv.ContextMenu,ew),this.documentListeners.add(Xv.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(iw(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(sw(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Xv.Click,tw,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xv.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:i}}=o;if(!r)return;const a=null!=(t=ts(e))?t:mv,l=Qo(r,a);if(!n&&i){if(sw(i)){if(null!=i.tolerance&&Jv(l,i.tolerance))return this.handleCancel();if(Jv(l,i.distance))return this.handleStart()}return iw(i)&&Jv(l,i.tolerance)?this.handleCancel():void this.handlePending(i,l)}e.cancelable&&e.preventDefault(),s(a)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Zv.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const lw={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cw extends aw{constructor(e){const{event:t}=e,n=Ko(t.target);super(e,lw,n)}}cw.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const dw={move:{name:"mousemove"},end:{name:"mouseup"}};var uw,hw;(hw=uw||(uw={}))[hw.RightClick=2]="RightClick";(class extends aw{constructor(e){super(e,dw,Ko(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==uw.RightClick&&(null==r||r({event:n}),!0)}}];const fw={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var pw,mw,gw,yw;function bw(e){let{acceleration:t,activator:n=pw.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=gw.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:f}=e;const p=function(e){let{delta:t,disabled:n}=e;const r=cs(t);return as((e=>{if(n||!r||!e)return xw;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[zv.Backward]:e.x[zv.Backward]||-1===o.x,[zv.Forward]:e.x[zv.Forward]||1===o.x},y:{[zv.Backward]:e.y[zv.Backward]||-1===o.y,[zv.Forward]:e.y[zv.Forward]||1===o.y}}}),[n,t,r])}({delta:h,disabled:!s}),[m,g]=ls(),y=l.useRef({x:0,y:0}),b=l.useRef({x:0,y:0}),x=l.useMemo((()=>{switch(n){case pw.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case pw.DraggableRect:return o}}),[n,o,c]),v=l.useRef(null),w=l.useCallback((()=>{const e=v.current;if(!e)return;const t=y.current.x*b.current.x,n=y.current.y*b.current.y;e.scrollBy(t,n)}),[]),k=l.useMemo((()=>a===gw.TreeOrder?[...d].reverse():d),[a,d]);l.useEffect((()=>{if(s&&d.length&&x){for(const e of k){if(!1===(null==r?void 0:r(e)))continue;const n=d.indexOf(e),o=u[n];if(!o)continue;const{direction:s,speed:a}=Vv(e,o,x,t,f);for(const e of["x","y"])p[e][s[e]]||(a[e]=0,s[e]=0);if(a.x>0||a.y>0)return g(),v.current=e,m(w,i),y.current=a,void(b.current=s)}y.current={x:0,y:0},b.current={x:0,y:0},g()}else g()}),[t,w,r,g,s,i,JSON.stringify(x),JSON.stringify(p),m,d,k,u,JSON.stringify(f)])}(class extends aw{constructor(e){super(e,fw)}static setup(){return window.addEventListener(fw.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(fw.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1)&&(null==r||r({event:n}),!0)}}],(mw=pw||(pw={}))[mw.Pointer=0]="Pointer",mw[mw.DraggableRect=1]="DraggableRect",(yw=gw||(gw={}))[yw.TreeOrder=0]="TreeOrder",yw[yw.ReversedTreeOrder=1]="ReversedTreeOrder";const xw={x:{[zv.Backward]:!1,[zv.Forward]:!1},y:{[zv.Backward]:!1,[zv.Forward]:!1}};var vw,ww,kw;(ww=vw||(vw={}))[ww.Always=0]="Always",ww[ww.BeforeDragging=1]="BeforeDragging",ww[ww.WhileDragging=2]="WhileDragging",(kw||(kw={})).Optimized="optimized";const Sw=new Map;function Cw(e,t){return as((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function Ew(e){let{callback:t,disabled:n}=e;const r=Jo(t),o=l.useMemo((()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)}),[n]);return l.useEffect((()=>()=>null==o?void 0:o.disconnect()),[o]),o}function Nw(e){return new qv(Av(e),e)}function jw(e,t,n){void 0===t&&(t=Nw);const[r,o]=l.useState(null);function s(){o((r=>{if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=r?r:n)?o:null;const s=t(e);return JSON.stringify(r)===JSON.stringify(s)?r:s}))}const i=function(e){let{callback:t,disabled:n}=e;const r=Jo(t),o=l.useMemo((()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)}),[r,n]);return l.useEffect((()=>()=>null==o?void 0:o.disconnect()),[o]),o}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){s();break}}}}),a=Ew({callback:s});return Yo((()=>{s(),e?(null==a||a.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==a||a.disconnect(),null==i||i.disconnect())}),[e]),r}const _w=[];function Iw(e,t){void 0===t&&(t=[]);const n=l.useRef(null);return l.useEffect((()=>{n.current=null}),t),l.useEffect((()=>{const t=e!==mv;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?Qo(e,n.current):mv}function Aw(e){return l.useMemo((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const Tw=[];function Mw(e){let{measure:t}=e;const[n,r]=l.useState(null),o=Ew({callback:l.useCallback((e=>{for(const{target:n}of e)if(os(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t])}),s=l.useCallback((e=>{const n=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return os(t)?t:e}(e);null==o||o.disconnect(),n&&(null==o||o.observe(n)),r(n?t(n):null)}),[t,o]),[i,a]=qo(s);return l.useMemo((()=>({nodeRef:i,rect:n,setRef:a})),[n,i,a])}const Dw=[{sensor:cw,options:{}},{sensor:ow,options:{}}],Ow={current:{}},Rw={draggable:{measure:Tv},droppable:{measure:Tv,strategy:vw.WhileDragging,frequency:kw.Optimized},dragOverlay:{measure:Av}};class Pw extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Lw={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Pw,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Rw,measureDroppableContainers:fv,windowRect:null,measuringScheduled:!1},zw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fv,draggableNodes:new Map,over:null,measureDroppableContainers:fv},Fw=l.createContext(zw),Bw=l.createContext(Lw);function Uw(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Pw}}}function $w(e,t){switch(t.type){case uv.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case uv.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case uv.DragEnd:case uv.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case uv.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Pw(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case uv.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Pw(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case uv.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Pw(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Vw(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=l.useContext(Fw),s=cs(r),i=cs(null==n?void 0:n.id);return l.useEffect((()=>{if(!t&&!r&&s&&null!=i){if(!Zo(s))return;if(document.activeElement===s.target)return;const e=o.get(i);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=ds(e);if(t){t.focus();break}}}))}}),[r,t,o,i,s]),null}const Hw=l.createContext({...mv,scaleX:1,scaleY:1});var Ww,Gw;(Gw=Ww||(Ww={}))[Gw.Uninitialized=0]="Uninitialized",Gw[Gw.Initializing=1]="Initializing",Gw[Gw.Initialized=2]="Initialized";const qw=l.memo((function(e){var t,n,r,o;let{id:s,accessibility:i,autoScroll:a=!0,children:c,sensors:d=Dw,collisionDetection:u=Cv,measuring:h,modifiers:f,...p}=e;const g=l.useReducer($w,void 0,Uw),[y,b]=g,[x,v]=function(){const[e]=l.useState((()=>new Set)),t=l.useCallback((t=>(e.add(t),()=>e.delete(t))),[e]);return[l.useCallback((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[w,k]=l.useState(Ww.Uninitialized),S=w===Ww.Initialized,{draggable:{active:C,nodes:E,translate:N},droppable:{containers:j}}=y,_=null!=C?E.get(C):null,I=l.useRef({initial:null,translated:null}),A=l.useMemo((()=>{var e;return null!=C?{id:C,data:null!=(e=null==_?void 0:_.data)?e:Ow,rect:I}:null}),[C,_]),T=l.useRef(null),[M,D]=l.useState(null),[O,R]=l.useState(null),P=Go(p,Object.values(p)),L=Wo("DndDescribedBy",s),z=l.useMemo((()=>j.getEnabled()),[j]),F=(B=h,l.useMemo((()=>({draggable:{...Rw.draggable,...null==B?void 0:B.draggable},droppable:{...Rw.droppable,...null==B?void 0:B.droppable},dragOverlay:{...Rw.dragOverlay,...null==B?void 0:B.dragOverlay}})),[null==B?void 0:B.draggable,null==B?void 0:B.droppable,null==B?void 0:B.dragOverlay]));var B;const{droppableRects:U,measureDroppableContainers:$,measuringScheduled:V}=function(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=l.useState(null),{frequency:a,measure:c,strategy:d}=o,u=l.useRef(e),h=function(){switch(d){case vw.Always:return!1;case vw.BeforeDragging:return n;default:return!n}}(),f=Go(h),p=l.useCallback((function(e){void 0===e&&(e=[]),f.current||i((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[f]),m=l.useRef(null),g=as((t=>{if(h&&!n)return Sw;if(!t||t===Sw||u.current!==e||null!=s){const t=new Map;for(let n of e){if(!n)continue;if(s&&s.length>0&&!s.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new qv(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,s,n,h,c]);return l.useEffect((()=>{u.current=e}),[e]),l.useEffect((()=>{h||p()}),[n,h]),l.useEffect((()=>{s&&s.length>0&&i(null)}),[JSON.stringify(s)]),l.useEffect((()=>{h||"number"!=typeof a||null!==m.current||(m.current=setTimeout((()=>{p(),m.current=null}),a))}),[a,h,p,...r]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:null!=s}}(z,{dragging:S,dependencies:[N.x,N.y],config:F.droppable}),H=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return as((e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(E,C),W=l.useMemo((()=>O?ts(O):null),[O]),G=function(){const e=!1===(null==M?void 0:M.autoScrollEnabled),t="object"==typeof a?!1===a.enabled:!1===a,n=S&&!e&&!t;if("object"==typeof a)return{...a,enabled:n};return{enabled:n}}(),q=function(e,t){return Cw(e,t)}(H,F.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=l.useRef(!1),{x:i,y:a}="boolean"==typeof o?{x:o,y:o}:o;Yo((()=>{if(!i&&!a||!t)return void(s.current=!1);if(s.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const o=Nv(n(e),r);if(i||(o.x=0),a||(o.y=0),s.current=!0,Math.abs(o.x)>0||Math.abs(o.y)>0){const t=Dv(e);t&&t.scrollBy({top:o.y,left:o.x})}}),[t,i,a,r,n])}({activeNode:null!=C?E.get(C):null,config:G.layoutShiftCompensation,initialRect:q,measure:F.draggable.measure});const Y=jw(H,F.draggable.measure,q),J=jw(H?H.parentElement:null),X=l.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),K=j.getNodeFor(null==(t=X.current.over)?void 0:t.id),Z=Mw({measure:F.dragOverlay.measure}),Q=null!=(n=Z.nodeRef.current)?n:H,ee=S?null!=(r=Z.rect)?r:Y:null,te=Boolean(Z.nodeRef.current&&Z.rect),ne=Nv(re=te?null:Y,Cw(re));var re;const oe=Aw(Q?Xo(Q):null),se=function(e){const t=l.useRef(e),n=as((n=>e?n&&n!==_w&&e&&t.current&&e.parentNode===t.current.parentNode?n:Mv(e):_w),[e]);return l.useEffect((()=>{t.current=e}),[e]),n}(S?null!=K?K:H:null),ie=function(e,t){void 0===t&&(t=Av);const[n]=e,r=Aw(n?Xo(n):null),[o,s]=l.useState(Tw);function i(){s((()=>e.length?e.map((e=>Bv(e)?r:new qv(t(e),e))):Tw))}const a=Ew({callback:i});return Yo((()=>{null==a||a.disconnect(),i(),e.forEach((e=>null==a?void 0:a.observe(e)))}),[e]),o}(se),ae=function(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}(f,{transform:{x:N.x-ne.x,y:N.y-ne.y,scaleX:1,scaleY:1},activatorEvent:O,active:A,activeNodeRect:Y,containerNodeRect:J,draggingNodeRect:ee,over:X.current.over,overlayNodeRect:Z.rect,scrollableAncestors:se,scrollableAncestorRects:ie,windowRect:oe}),le=W?es(W,N):null,ce=function(e){const[t,n]=l.useState(null),r=l.useRef(e),o=l.useCallback((e=>{const t=Ov(e.target);t&&n((e=>e?(e.set(t,Lv(t)),new Map(e)):null))}),[]);return l.useEffect((()=>{const t=r.current;if(e!==t){s(t);const i=e.map((e=>{const t=Ov(e);return t?(t.addEventListener("scroll",o,{passive:!0}),[t,Lv(t)]):null})).filter((e=>null!=e));n(i.length?new Map(i):null),r.current=e}return()=>{s(e),s(t)};function s(e){e.forEach((e=>{const t=Ov(e);null==t||t.removeEventListener("scroll",o)}))}}),[o,e]),l.useMemo((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>es(e,t)),mv):Wv(e):mv),[e,t])}(se),de=Iw(ce),ue=Iw(ce,[Y]),he=es(ae,de),fe=ee?_v(ee,ae):null,pe=A&&fe?u({active:A,collisionRect:fe,droppableRects:U,droppableContainers:z,pointerCoordinates:le}):null,me=vv(pe,"id"),[ge,ye]=l.useState(null),be=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(te?ae:es(ae,ue),null!=(o=null==ge?void 0:ge.rect)?o:null,Y),xe=l.useRef(null),ve=l.useCallback(((e,t)=>{let{sensor:n,options:r}=t;if(null==T.current)return;const o=E.get(T.current);if(!o)return;const s=e.nativeEvent,i=new n({active:T.current,activeNode:o,event:s,options:r,context:X,onAbort(e){if(!E.get(e))return;const{onDragAbort:t}=P.current,n={id:e};null==t||t(n),x({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!E.get(e))return;const{onDragPending:o}=P.current,s={id:e,constraint:t,initialCoordinates:n,offset:r};null==o||o(s),x({type:"onDragPending",event:s})},onStart(e){const t=T.current;if(null==t)return;const n=E.get(t);if(!n)return;const{onDragStart:r}=P.current,o={activatorEvent:s,active:{id:t,data:n.data,rect:I}};is.unstable_batchedUpdates((()=>{null==r||r(o),k(Ww.Initializing),b({type:uv.DragStart,initialCoordinates:e,active:t}),x({type:"onDragStart",event:o}),D(xe.current),R(s)}))},onMove(e){b({type:uv.DragMove,coordinates:e})},onEnd:a(uv.DragEnd),onCancel:a(uv.DragCancel)});function a(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:o}=X.current;let i=null;if(t&&o){const{cancelDrop:a}=P.current;if(i={activatorEvent:s,active:t,collisions:n,delta:o,over:r},e===uv.DragEnd&&"function"==typeof a){await Promise.resolve(a(i))&&(e=uv.DragCancel)}}T.current=null,is.unstable_batchedUpdates((()=>{b({type:e}),k(Ww.Uninitialized),ye(null),D(null),R(null),xe.current=null;const t=e===uv.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=P.current[t];null==e||e(i),x({type:t,event:i})}}))}}xe.current=i}),[E]),we=function(e,t){return l.useMemo((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(d,l.useCallback(((e,t)=>(n,r)=>{const o=n.nativeEvent,s=E.get(r);if(null!==T.current||!s||o.dndKit||o.defaultPrevented)return;const i={active:s};!0===e(n,t.options,i)&&(o.dndKit={capturedBy:t.sensor},T.current=r,ve(n,t))}),[E,ve]));!function(e){l.useEffect((()=>{if(!ns)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(d),Yo((()=>{Y&&w===Ww.Initializing&&k(Ww.Initialized)}),[Y,w]),l.useEffect((()=>{const{onDragMove:e}=P.current,{active:t,activatorEvent:n,collisions:r,over:o}=X.current;if(!t||!n)return;const s={active:t,activatorEvent:n,collisions:r,delta:{x:he.x,y:he.y},over:o};is.unstable_batchedUpdates((()=>{null==e||e(s),x({type:"onDragMove",event:s})}))}),[he.x,he.y]),l.useEffect((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:o}=X.current;if(!e||null==T.current||!t||!o)return;const{onDragOver:s}=P.current,i=r.get(me),a=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:o.x,y:o.y},over:a};is.unstable_batchedUpdates((()=>{ye(a),null==s||s(l),x({type:"onDragOver",event:l})}))}),[me]),Yo((()=>{X.current={activatorEvent:O,active:A,activeNode:H,collisionRect:fe,collisions:pe,droppableRects:U,draggableNodes:E,draggingNode:Q,draggingNodeRect:ee,droppableContainers:j,over:ge,scrollableAncestors:se,scrollAdjustedTranslate:he},I.current={initial:ee,translated:fe}}),[A,H,pe,fe,E,Q,ee,U,j,ge,se,he]),bw({...G,delta:N,draggingRect:fe,pointerCoordinates:le,scrollableAncestors:se,scrollableAncestorRects:ie});const ke=l.useMemo((()=>({active:A,activeNode:H,activeNodeRect:Y,activatorEvent:O,collisions:pe,containerNodeRect:J,dragOverlay:Z,draggableNodes:E,droppableContainers:j,droppableRects:U,over:ge,measureDroppableContainers:$,scrollableAncestors:se,scrollableAncestorRects:ie,measuringConfiguration:F,measuringScheduled:V,windowRect:oe})),[A,H,Y,O,pe,J,Z,E,j,U,ge,$,se,ie,F,V,oe]),Se=l.useMemo((()=>({activatorEvent:O,activators:we,active:A,activeNodeRect:Y,ariaDescribedById:{draggable:L},dispatch:b,draggableNodes:E,over:ge,measureDroppableContainers:$})),[O,we,A,Y,b,L,E,ge,$]);return m.createElement(av.Provider,{value:v},m.createElement(Fw.Provider,{value:Se},m.createElement(Bw.Provider,{value:ke},m.createElement(Hw.Provider,{value:be},c)),m.createElement(Vw,{disabled:!1===(null==i?void 0:i.restoreFocus)})),m.createElement(dv,{...i,hiddenTextDescribedById:L}))})),Yw=l.createContext(null),Jw="button";function Xw(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=Wo("Draggable"),{activators:i,activatorEvent:a,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:f}=l.useContext(Fw),{role:p=Jw,roleDescription:m="draggable",tabIndex:g=0}=null!=o?o:{},y=(null==c?void 0:c.id)===t,b=l.useContext(y?Hw:Yw),[x,v]=qo(),[w,k]=qo(),S=function(e,t){return l.useMemo((()=>e.reduce(((e,n)=>{let{eventName:r,handler:o}=n;return e[r]=e=>{o(e,t)},e}),{})),[e,t])}(i,t),C=Go(n);Yo((()=>(h.set(t,{id:t,key:s,node:x,activatorNode:w,data:C}),()=>{const e=h.get(t);e&&e.key===s&&h.delete(t)})),[h,t]);return{active:c,activatorEvent:a,activeNodeRect:d,attributes:l.useMemo((()=>({role:p,tabIndex:g,"aria-disabled":r,"aria-pressed":!(!y||p!==Jw)||void 0,"aria-roledescription":m,"aria-describedby":u.draggable})),[r,p,g,y,m,u.draggable]),isDragging:y,listeners:r?void 0:S,node:x,over:f,setNodeRef:v,setActivatorNodeRef:k,transform:b}}const Kw={timeout:25};function Zw(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Qw(e,t){return e.reduce(((e,n,r)=>{const o=t.get(n);return o&&(e[r]=o),e}),Array(e.length))}function ek(e){return null!==e&&e>=0}const tk={scaleX:1,scaleY:1},nk=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:o,overIndex:s,index:i}=e;const a=null!=(t=n[o])?t:r;if(!a)return null;const l=function(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];if(!r||!o&&!s)return 0;if(n<t)return o?r.left-(o.left+o.width):s.left-(r.left+r.width);return s?s.left-(r.left+r.width):r.left-(o.left+o.width)}(n,i,o);if(i===o){const e=n[s];return e?{x:o<s?e.left+e.width-(a.left+a.width):e.left-a.left,y:0,...tk}:null}return i>o&&i<=s?{x:-a.width-l,y:0,...tk}:i<o&&i>=s?{x:a.width+l,y:0,...tk}:{x:0,y:0,...tk}};const rk=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=Zw(t,r,n),i=t[o],a=s[o];return a&&i?{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}:null},ok={scaleX:1,scaleY:1},sk=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=e;const a=null!=(t=s[n])?t:r;if(!a)return null;if(o===n){const e=s[i];return e?{x:0,y:n<i?e.top+e.height-(a.top+a.height):e.top-a.top,...ok}:null}const l=function(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];if(!r)return 0;if(n<t)return o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0;return s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0}(s,o,n);return o>n&&o<=i?{x:0,y:-a.height-l,...ok}:o<n&&o>=i?{x:0,y:a.height+l,...ok}:{x:0,y:0,...ok}};const ik="Sortable",ak=m.createContext({activeIndex:-1,containerId:ik,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rk,disabled:{draggable:!1,droppable:!1}});function lk(e){let{children:t,id:n,items:r,strategy:o=rk,disabled:s=!1}=e;const{active:i,dragOverlay:a,droppableRects:c,over:d,measureDroppableContainers:u}=l.useContext(Bw),h=Wo(ik,n),f=Boolean(null!==a.rect),p=l.useMemo((()=>r.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[r]),g=null!=i,y=i?p.indexOf(i.id):-1,b=d?p.indexOf(d.id):-1,x=l.useRef(p),v=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,x.current),w=-1!==b&&-1===y||v,k=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(s);Yo((()=>{v&&g&&u(p)}),[v,p,g,u]),l.useEffect((()=>{x.current=p}),[p]);const S=l.useMemo((()=>({activeIndex:y,containerId:h,disabled:k,disableTransforms:w,items:p,overIndex:b,useDragOverlay:f,sortedRects:Qw(p,c),strategy:o})),[y,h,k.draggable,k.droppable,w,p,b,c,f,o]);return m.createElement(ak.Provider,{value:S},t)}const ck=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Zw(n,r,o).indexOf(t)},dk=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((a===s||o!==i)&&(!!n||i!==o&&t===l))},uk={duration:200,easing:"ease"},hk="transform",fk=ps.Transition.toString({property:hk,duration:0,easing:"linear"}),pk={roleDescription:"sortable"};function mk(e){let{animateLayoutChanges:t=dk,attributes:n,disabled:r,data:o,getNewIndex:s=ck,id:i,strategy:a,resizeObserverConfig:c,transition:d=uk}=e;const{items:u,containerId:h,activeIndex:f,disabled:p,disableTransforms:m,sortedRects:g,overIndex:y,useDragOverlay:b,strategy:x}=l.useContext(ak),v=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,p),w=u.indexOf(i),k=l.useMemo((()=>({sortable:{containerId:h,index:w,items:u},...o})),[h,o,w,u]),S=l.useMemo((()=>u.slice(u.indexOf(i))),[u,i]),{rect:C,node:E,isOver:N,setNodeRef:j}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=Wo("Droppable"),{active:i,dispatch:a,over:c,measureDroppableContainers:d}=l.useContext(Fw),u=l.useRef({disabled:n}),h=l.useRef(!1),f=l.useRef(null),p=l.useRef(null),{disabled:m,updateMeasurementsFor:g,timeout:y}={...Kw,...o},b=Go(null!=g?g:r),x=Ew({callback:l.useCallback((()=>{h.current?(null!=p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{d(Array.isArray(b.current)?b.current:[b.current]),p.current=null}),y)):h.current=!0}),[y]),disabled:m||!i}),v=l.useCallback(((e,t)=>{x&&(t&&(x.unobserve(t),h.current=!1),e&&x.observe(e))}),[x]),[w,k]=qo(v),S=Go(t);return l.useEffect((()=>{x&&w.current&&(x.disconnect(),h.current=!1,x.observe(w.current))}),[w,x]),l.useEffect((()=>(a({type:uv.RegisterDroppable,element:{id:r,key:s,disabled:n,node:w,rect:f,data:S}}),()=>a({type:uv.UnregisterDroppable,key:s,id:r}))),[r]),l.useEffect((()=>{n!==u.current.disabled&&(a({type:uv.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)}),[r,s,n,a]),{active:i,rect:f,isOver:(null==c?void 0:c.id)===r,node:w,over:c,setNodeRef:k}}({id:i,data:k,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:_,activatorEvent:I,activeNodeRect:A,attributes:T,setNodeRef:M,listeners:D,isDragging:O,over:R,setActivatorNodeRef:P,transform:L}=Xw({id:i,data:k,attributes:{...pk,...n},disabled:v.draggable}),z=fs(j,M),F=Boolean(_),B=F&&!m&&ek(f)&&ek(y),U=!b&&O,$=U&&B?L:null,V=B?null!=$?$:(null!=a?a:x)({rects:g,activeNodeRect:A,activeIndex:f,overIndex:y,index:w}):null,H=ek(f)&&ek(y)?s({id:i,items:u,activeIndex:f,overIndex:y}):w,W=null==_?void 0:_.id,G=l.useRef({activeId:W,items:u,newIndex:H,containerId:h}),q=u!==G.current.items,Y=t({active:_,containerId:h,isDragging:O,isSorting:F,id:i,index:w,items:u,newIndex:G.current.newIndex,previousItems:G.current.items,previousContainerId:G.current.containerId,transition:d,wasDragging:null!=G.current.activeId}),J=function(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=l.useState(null),a=l.useRef(n);return Yo((()=>{if(!t&&n!==a.current&&r.current){const e=o.current;if(e){const t=Av(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&i(n)}}n!==a.current&&(a.current=n)}),[t,n,r,o]),l.useEffect((()=>{s&&i(null)}),[s]),s}({disabled:!Y,index:w,node:E,rect:C});return l.useEffect((()=>{F&&G.current.newIndex!==H&&(G.current.newIndex=H),h!==G.current.containerId&&(G.current.containerId=h),u!==G.current.items&&(G.current.items=u)}),[F,H,h,u]),l.useEffect((()=>{if(W===G.current.activeId)return;if(null!=W&&null==G.current.activeId)return void(G.current.activeId=W);const e=setTimeout((()=>{G.current.activeId=W}),50);return()=>clearTimeout(e)}),[W]),{active:_,activeIndex:f,attributes:T,data:k,rect:C,index:w,newIndex:H,items:u,isOver:N,isSorting:F,isDragging:O,listeners:D,node:E,overIndex:y,over:R,setNodeRef:z,setActivatorNodeRef:P,setDroppableNodeRef:j,setDraggableNodeRef:M,transform:null!=J?J:V,transition:function(){if(J||q&&G.current.newIndex===w)return fk;if(U&&!Zo(I)||!d)return;if(F||Y)return ps.Transition.toString({...d,property:hk});return}()}}function gk(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const yk=[Zv.Down,Zv.Right,Zv.Up,Zv.Left],bk=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:a}}=t;if(yk.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];s.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const s=o.get(n.id);if(s)switch(e.code){case Zv.Down:r.top<s.top&&t.push(n);break;case Zv.Up:r.top>s.top&&t.push(n);break;case Zv.Left:r.left>s.left&&t.push(n);break;case Zv.Right:r.left<s.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=xv(t),s=[];for(const i of r){const{id:e}=i,t=n.get(e);if(t){const n=xv(t),r=o.reduce(((e,t,r)=>e+gv(n[r],t)),0),a=Number((r/4).toFixed(4));s.push({id:e,data:{droppableContainer:i,value:a}})}}return s.sort(yv)})({collisionRect:r,droppableRects:o,droppableContainers:t});let c=vv(l,"id");if(c===(null==i?void 0:i.id)&&l.length>1&&(c=l[1].id),null!=c){const e=s.get(n.id),t=s.get(c),i=t?o.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&i&&e&&t){const n=Mv(l).some(((e,t)=>a[t]!==e)),o=xk(e,t),s=function(e,t){if(!gk(e)||!gk(t))return!1;if(!xk(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!o?{x:0,y:0}:{x:s?r.width-i.width:0,y:s?r.height-i.height:0},d={x:i.left,y:i.top};return c.x&&c.y?d:Qo(d,c)}}}};function xk(e,t){return!(!gk(e)||!gk(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}function vk(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}const wk=m.createContext(null),kk=l.memo((()=>l.useContext(wk)));kk.displayName="DragHandle";const Sk=m.forwardRef(((e,t)=>{const n=_.c(21);let r,o,s,i,a;n[0]!==e?(({cellId:o,canMoveX:r,...s}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s):(r=n[1],o=n[2],s=n[3]),n[4]!==o?(i=o.toString(),n[4]=o,n[5]=i):i=n[5],n[6]!==i?(a={id:i},n[6]=i,n[7]=a):a=n[7];const{attributes:l,listeners:c,setNodeRef:d,transform:u,transition:h,isDragging:f}=mk(a);let p;n[8]!==u?(p=function(e){return!e||0===e.x&&0===e.y&&1===e.scaleX&&1===e.scaleY}(u)?null:u,n[8]=u,n[9]=p):p=n[9];const m=p,g=null==m?void 0:h;let y;return n[10]!==l||n[11]!==r||n[12]!==o||n[13]!==f||n[14]!==c||n[15]!==s||n[16]!==t||n[17]!==d||n[18]!==m||n[19]!==g?(y=A.jsx(Ck,{ref:t,cellId:o,canMoveX:r,...s,attributes:l,listeners:c,setNodeRef:d,transform:m,transition:g,isDragging:f}),n[10]=l,n[11]=r,n[12]=o,n[13]=f,n[14]=c,n[15]=s,n[16]=t,n[17]=d,n[18]=m,n[19]=g,n[20]=y):y=n[20],y}));Sk.displayName="SortableCell";const Ck=m.forwardRef(((e,t)=>{const n=_.c(37);let r,o,s,i,a,l,c,d,u,h;if(n[0]!==e){const{cellId:t,canMoveX:h,children:f,attributes:p,listeners:m,setNodeRef:g,transform:y,transition:b,isDragging:x,...v}=e;o=h,s=f,r=p,a=m,c=g,d=y,u=b,i=x,l=v,n[0]=e,n[1]=r,n[2]=o,n[3]=s,n[4]=i,n[5]=a,n[6]=l,n[7]=c,n[8]=d,n[9]=u}else r=n[1],o=n[2],s=n[3],i=n[4],a=n[5],l=n[6],c=n[7],d=n[8],u=n[9];n[10]!==o||n[11]!==d?(h=d?ps.Transform.toString({x:o?d.x:0,y:d.y,scaleX:1,scaleY:1}):void 0,n[10]=o,n[11]=d,n[12]=h):h=n[12];const f=i?2:void 0;let p;n[13]!==h||n[14]!==f||n[15]!==u?(p={transform:h,transition:u,zIndex:f,position:"relative"},n[13]=h,n[14]=f,n[15]=u,n[16]=p):p=n[16];const m=p;let g,y;n[17]===Symbol.for("react.memo_cache_sentinel")?(g=A.jsx(vd,{strokeWidth:1,size:20}),n[17]=g):g=n[17],n[18]!==r||n[19]!==a?(y=A.jsx("div",{...r,...a,onMouseDown:dt.preventFocus,"data-testid":"drag-button",className:"py-[1px] cursor-grab opacity-50 hover:opacity-100 hover-action hover:bg-muted rounded border border-transparent hover:border-border active:bg-accent",children:g}),n[18]=r,n[19]=a,n[20]=y):y=n[20];const b=y,x=Boolean(d);let v;n[21]!==t||n[22]!==c?(v=e=>{vk(t,c)(e)},n[21]=t,n[22]=c,n[23]=v):v=n[23];const w=x&&"is-moving";let k,S,C;return n[24]!==l.className||n[25]!==w?(k=Ln(l.className,w,"outline-offset-4 outline-primary/40 rounded-lg"),n[24]=l.className,n[25]=w,n[26]=k):k=n[26],n[27]!==s||n[28]!==b?(S=A.jsx(wk.Provider,{value:b,children:s}),n[27]=s,n[28]=b,n[29]=S):S=n[29],n[30]!==i||n[31]!==l||n[32]!==m||n[33]!==v||n[34]!==k||n[35]!==S?(C=A.jsx("div",{tabIndex:-1,ref:v,...l,"data-is-dragging":i,className:k,style:m,children:S}),n[30]=i,n[31]=l,n[32]=m,n[33]=v,n[34]=k,n[35]=S,n[36]=C):C=n[36],C}));Ck.displayName="SortableCellInternal";const Ek=m.memo(m.forwardRef(((e,t)=>{const n=_.c(34);let r,o,s;n[0]!==e?(({children:r,showTooltip:s,...o}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s):(r=n[1],o=n[2],s=n[3]);const i=void 0===s||s,[a,c]=l.useState(!1);let d;n[4]!==o?(d={cell:o},n[4]=o,n[5]=d):d=n[5];const u=$u(d),h=ms();let f,p,m,g,y,b;if(n[6]===Symbol.for("react.memo_cache_sentinel")?(f=()=>({toggle:()=>c(jk)}),n[6]=f):f=n[6],l.useImperativeHandle(t,f),n[7]===Symbol.for("react.memo_cache_sentinel")?(p=A.jsx(nt,{placeholder:"Search actions...",className:"h-6 m-1"}),n[7]=p):p=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(m=A.jsx(rt,{children:"No results"}),n[8]=m):m=n[8],n[9]!==u){let e;n[11]!==u.length?(e=(e,t)=>A.jsxs(l.Fragment,{children:[A.jsx(qe,{children:e.map((e=>A.jsx(Qe,{onSelect:()=>{e.disableClick||(e.handle(),c(!1))},variant:e.variant,children:A.jsxs("div",{className:"flex items-center flex-1",children:[e.icon&&A.jsx("div",{className:"mr-2 w-5 text-muted-foreground",children:e.icon}),A.jsx("div",{className:"flex-1",children:e.label}),A.jsxs("div",{className:"flex-shrink-0 text-sm",children:[e.hotkey&&gs(e.hotkey),e.rightElement]})]})},e.label)))},t),t<u.length-1&&A.jsx(Je,{})]},t),n[11]=u.length,n[12]=e):e=n[12],g=u.map(e),n[9]=u,n[10]=g}else g=n[10];n[13]!==g?(y=A.jsxs(Un,{children:[p,A.jsxs(ys,{children:[m,g]})]}),n[13]=g,n[14]=y):y=n[14],n[15]!==h||n[16]!==y?(b=A.jsx(Bn,{className:"w-[300px] p-0 pt-1",...h,children:y}),n[15]=h,n[16]=y,n[17]=b):b=n[17];const x=b;if(!i){let e,t;return n[18]!==r?(e=A.jsx(bs,{asChild:!0,children:r}),n[18]=r,n[19]=e):e=n[19],n[20]!==x||n[21]!==a||n[22]!==e?(t=A.jsxs(Vn,{open:a,onOpenChange:c,children:[e,x]}),n[20]=x,n[21]=a,n[22]=e,n[23]=t):t=n[23],t}let v;n[24]===Symbol.for("react.memo_cache_sentinel")?(v=A.jsx(xs,{tabIndex:-1,children:Gt("cell.cellActions")}),n[24]=v):v=n[24];const w=!a&&v;let k,S,C;return n[25]!==r?(k=A.jsx(vs,{children:A.jsx(bs,{className:"flex",children:r})}),n[25]=r,n[26]=k):k=n[26],n[27]!==w||n[28]!==k?(S=A.jsxs(ws,{delayDuration:200,disableHoverableContent:!0,children:[w,k]}),n[27]=w,n[28]=k,n[29]=S):S=n[29],n[30]!==x||n[31]!==a||n[32]!==S?(C=A.jsxs(Vn,{open:a,onOpenChange:c,children:[S,x]}),n[30]=x,n[31]=a,n[32]=S,n[33]=C):C=n[33],C}))),Nk=m.memo((e=>{const t=_.c(5),{children:n,cellId:r}=e;let o,s;t[0]!==r?(s=function(e){return Q((t=>Xu(e,t(le))))}(r),t[0]=r,t[1]=s):s=t[1],o=s;const i=ue(o);if(!i)return null;let a;return t[2]!==n||t[3]!==i?(a=A.jsx(Ek,{showTooltip:!1,...i,children:n}),t[2]=n,t[3]=i,t[4]=a):a=t[4],a}));function jk(e){return!e}Nk.displayName="ConnectionCellActionsDropdown";const _k=e=>{const t=_.c(30);let n,r,o;t[0]!==e?(({children:n,...r}=e),t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]),t[3]!==r?(o={cell:r},t[3]=r,t[4]=o):o=t[4];const s=$u(o),[i,a]=m.useState(),l=Boolean(i);let c,d,u,h,f,p,g,y,b;if(t[5]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx(ut,{size:13,strokeWidth:1.5}),t[5]=c):c=t[5],t[6]!==r.cellId?(d=async()=>{var e;if(null==(e=window.getSelection())?void 0:e.toString())return void document.execCommand("copy");const t=document.getElementById($.create(r.cellId));t?await lt(t.textContent??""):E.warn("cell-context-menu: output not found")},t[6]=r.cellId,t[7]=d):d=t[7],t[8]!==s||t[9]!==n||t[10]!==i||t[11]!==r||t[12]!==l||t[13]!==d){const e=[{label:"Copy",hidden:l,icon:c,handle:d},{label:"Cut",hidden:Boolean(i),icon:A.jsx(Wd,{size:13,strokeWidth:1.5}),handle:Ik},{label:"Paste",hidden:Boolean(i),icon:A.jsx(id,{size:13,strokeWidth:1.5}),handle:async()=>{const{getEditorView:e}=r,t=e();if(t)try{const e=await navigator.clipboard.readText();if(e){const{from:n,to:r}=t.state.selection.main,o=t.state.update({changes:{from:n,to:r,insert:e}});t.dispatch(o)}}catch(n){const e=n;E.error("Failed to paste from clipboard",e),ks({command:"paste"})}}},{label:"Copy image",hidden:!i,icon:A.jsx(sd,{size:13,strokeWidth:1.5}),handle:async()=>{if(i){const e=await fetch(i.src),t=await e.blob(),n=new ClipboardItem({[t.type]:t});await navigator.clipboard.write([n]).then(Ak).catch(Tk)}}},{icon:A.jsx(cc,{size:13,strokeWidth:1.5}),label:"Download image",hidden:!i,handle:()=>{if(i){const e=document.createElement("a");e.download="image.png",e.href=i.src,e.click()}}},{label:"Go to Definition",icon:A.jsx(Cs,{size:13,strokeWidth:1.5}),handle:()=>{const{getEditorView:e}=r,t=e();t&&Ss(t)}}];let o;h=Lx,t[19]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{e.target instanceof HTMLImageElement?a(e.target):a(void 0)},t[19]=o):o=t[19],t[20]!==n?(g=A.jsx(zx,{onContextMenu:o,asChild:!0,children:n}),t[20]=n,t[21]=g):g=t[21],u=Ux,f="w-[300px]",p=[e,...s].map(Dk),t[8]=s,t[9]=n,t[10]=i,t[11]=r,t[12]=l,t[13]=d,t[14]=u,t[15]=h,t[16]=f,t[17]=p,t[18]=g}else u=t[14],h=t[15],f=t[16],p=t[17],g=t[18];return t[22]!==u||t[23]!==f||t[24]!==p?(y=A.jsx(u,{className:f,children:p}),t[22]=u,t[23]=f,t[24]=p,t[25]=y):y=t[25],t[26]!==h||t[27]!==g||t[28]!==y?(b=A.jsxs(h,{children:[g,y]}),t[26]=h,t[27]=g,t[28]=y,t[29]=b):b=t[29],b};function Ik(){document.execCommand("cut")}function Ak(){ie({title:"Copied image to clipboard"})}function Tk(e){ie({title:"Failed to copy image to clipboard. Try downloading instead.",description:e.message}),E.error("Failed to copy image to clipboard",e)}function Mk(e){return e.hidden?null:A.jsx($x,{onSelect:t=>{e.handle(t)},variant:e.variant,children:A.jsxs("div",{className:"flex items-center flex-1",children:[e.icon&&A.jsx("div",{className:"mr-2 w-5 text-muted-foreground",children:e.icon}),A.jsx("div",{className:"flex-1",children:e.label}),A.jsxs("div",{className:"flex-shrink-0 text-sm",children:[e.hotkey&&gs(e.hotkey),e.rightElement]})]})},e.label)}function Dk(e,t){return A.jsxs(l.Fragment,{children:[e.map(Mk),t<e.length-1&&A.jsx(Vx,{})]},t)}const Ok=e=>{const t=_.c(24),{editorView:n,code:r,currentLanguageAdapter:o,onAfterToggle:s}=e;let i,a;t[0]!==r?(a=(new Ut).isSupported(r)||""===r.trim(),t[0]=r,t[1]=a):a=t[1],i=a;const l=i;let c,d;t[2]!==r?(d=(new Uo).isSupported(r)||""===r.trim(),t[2]=r,t[3]=d):d=t[3],c=d;const u=c&&"python"===o;let h,f;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=A.jsx(Ne,{color:"var(--sky-11)",strokeWidth:2.5,className:"w-4 h-4"}),t[4]=h):h=t[4],t[5]!==o||t[6]!==n||t[7]!==s||t[8]!==u?(f=A.jsx(Rk,{editorView:n,currentLanguageAdapter:o,canSwitchToLanguage:u,icon:h,toType:"sql",displayName:"SQL",onAfterToggle:s}),t[5]=o,t[6]=n,t[7]=s,t[8]=u,t[9]=f):f=t[9];const p=l&&"python"===o;let m,g,y,b,x;return t[10]===Symbol.for("react.memo_cache_sentinel")?(m=A.jsx(El,{fill:"var(--sky-11)",color:"black",className:"w-4 h-4"}),t[10]=m):m=t[10],t[11]!==o||t[12]!==n||t[13]!==s||t[14]!==p?(g=A.jsx(Rk,{editorView:n,currentLanguageAdapter:o,canSwitchToLanguage:p,icon:m,toType:"markdown",displayName:"Markdown",onAfterToggle:s}),t[11]=o,t[12]=n,t[13]=s,t[14]=p,t[15]=g):g=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(y=A.jsx(Nl,{fill:"var(--sky-11)",color:"black",className:"w-4 h-4"}),t[16]=y):y=t[16],t[17]!==o||t[18]!==n?(b=A.jsx(Rk,{editorView:n,currentLanguageAdapter:o,canSwitchToLanguage:!0,icon:y,toType:"python",displayName:"Python",onAfterToggle:or.NOOP}),t[17]=o,t[18]=n,t[19]=b):b=t[19],t[20]!==g||t[21]!==b||t[22]!==f?(x=A.jsxs("div",{className:"absolute right-3 top-2 z-20 flex hover-action gap-1",children:[f,g,b]}),t[20]=g,t[21]=b,t[22]=f,t[23]=x):x=t[23],x},Rk=e=>{const t=_.c(10),{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:o,icon:s,toType:i,displayName:a,onAfterToggle:l}=e;let c;t[0]!==n||t[1]!==l||t[2]!==i?(c=()=>{n&&(Ee(n,i),l())},t[0]=n,t[1]=l,t[2]=i,t[3]=c):c=t[3];const d=c;if(!o)return null;if(r===i)return null;const u=`View as ${a}`;let h,f;return t[4]!==d||t[5]!==s?(h=A.jsx(te,{"data-testid":"language-toggle-button",variant:"text",size:"xs",className:"opacity-80 px-1",onClick:d,children:s}),t[4]=d,t[5]=s,t[6]=h):h=t[6],t[7]!==u||t[8]!==h?(f=A.jsx(ht,{content:u,children:h}),t[7]=u,t[8]=h,t[9]=f):f=t[9],f};var Pk={modified:{doc:""},original:{doc:""}},Lk=l.createContext(Pk);function zk(e,t){return Es({},e,t,{modified:Es({},e.modified,t.modified),original:Es({},e.original,t.original)})}var Fk=()=>l.useContext(Lk),Bk=e=>{var{children:t,theme:n}=e,[r,o]=l.useReducer(zk,Es({},Pk,{theme:n}));return l.useEffect((()=>o({theme:n})),[n]),A.jsx(Lk.Provider,{value:Es({},r,{dispatch:o}),children:t})},Uk=["extensions","value","selection","onChange"],$k=e=>{var{extensions:t=[],value:n,selection:r,onChange:o}=e,s=Ns(e,Uk),{theme:i,dispatch:a}=Fk(),c=js(Es({},s,{theme:i}));return l.useEffect((()=>a({original:{doc:n,selection:r,extensions:[...c,...t]},originalExtension:{onChange:o,option:s,extension:[t]}})),[e]),null};$k.displayName="CodeMirrorMerge.Original";var Vk=["extensions","value","selection","onChange"],Hk=e=>{var{extensions:t=[],value:n,selection:r,onChange:o}=e,s=Ns(e,Vk),{theme:i,dispatch:a}=Fk(),c=js(Es({},s,{theme:i}));return l.useEffect((()=>{a({modified:{doc:n,selection:r,extensions:[...c,...t]},modifiedExtension:{onChange:o,option:s,extension:[t]}})}),[e]),null};Hk.displayName="CodeMirrorMerge.Modified";class Wk{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}offset(e,t){return new Wk(this.fromA+e,this.toA+e,this.fromB+t,this.toB+t)}}function Gk(e,t,n,r,o,s){if(e==r)return[];let i=Qk(e,t,n,r,o,s),a=eS(e,t+i,n,r,o+i,s),l=(n-=a)-(t+=i),c=(s-=a)-(o+=i);if(!l||!c)return[new Wk(t,n,o,s)];if(l>c){let i=e.slice(t,n).indexOf(r.slice(o,s));if(i>-1)return[new Wk(t,t+i,o,o),new Wk(t+i+c,n,s,s)]}else if(c>l){let i=r.slice(o,s).indexOf(e.slice(t,n));if(i>-1)return[new Wk(t,t,o,o+i),new Wk(n,n,o+i+l,s)]}if(1==l||1==c)return[new Wk(t,n,o,s)];let d=nS(e,t,n,r,o,s);if(d){let[i,a,l]=d;return Gk(e,t,i,r,o,a).concat(Gk(e,i+l,n,r,a+l,s))}return function(e,t,n,r,o,s){let i=n-t,a=s-o;if(qk<1e9&&Math.min(i,a)>16*qk)return Math.min(i,a)>64*qk?[new Wk(t,n,o,s)]:rS(e,t,n,r,o,s);let l=Math.ceil((i+a)/2);Jk.reset(l),Xk.reset(l);let c=(n,s)=>e.charCodeAt(t+n)==r.charCodeAt(o+s),d=(t,o)=>e.charCodeAt(n-t-1)==r.charCodeAt(s-o-1),u=(i-a)%2!=0?Xk:null,h=u?null:Jk;for(let f=0;f<l;f++){if(f>qk)return rS(e,t,n,r,o,s);let p=Jk.advance(f,i,a,l,u,!1,c)||Xk.advance(f,i,a,l,h,!0,d);if(p)return Kk(e,t,n,t+p[0],r,o,s,o+p[1])}return[new Wk(t,n,o,s)]}(e,t,n,r,o,s)}let qk=1e9;class Yk{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let t=0;t<this.len;t++)this.vec[t]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,t,n,r,o,s,i){for(let a=-e+this.start;a<=e-this.end;a+=2){let l=r+a,c=a==-e||a!=e&&this.vec[l-1]<this.vec[l+1]?this.vec[l+1]:this.vec[l-1]+1,d=c-a;for(;c<t&&d<n&&i(c,d);)c++,d++;if(this.vec[l]=c,c>t)this.end+=2;else if(d>n)this.start+=2;else if(o){let e=r+(t-n)-a;if(e>=0&&e<this.len&&-1!=o.vec[e])if(s){let n=o.vec[e];if(n>=t-c)return[n,r+n-e]}else{if(c>=t-o.vec[e])return[c,d]}}}return null}}const Jk=new Yk,Xk=new Yk;function Kk(e,t,n,r,o,s,i,a){let l=!1;return pS(e,r)||++r!=n||(l=!0),pS(o,a)||++a!=i||(l=!0),l?[new Wk(t,n,s,i)]:Gk(e,t,r,o,s,a).concat(Gk(e,r,n,o,a,i))}function Zk(e,t){let n=1,r=Math.min(e,t);for(;n<r;)n<<=1;return n}function Qk(e,t,n,r,o,s){if(t==n||t==s||e.charCodeAt(t)!=r.charCodeAt(o))return 0;let i=Zk(n-t,s-o);for(let a=t,l=o;;){let o=a+i,c=l+i;if(o>n||c>s||e.slice(a,o)!=r.slice(l,c)){if(1==i)return a-t-(pS(e,a)?0:1);i>>=1}else{if(o==n||c==s)return o-t;a=o,l=c}}}function eS(e,t,n,r,o,s){if(t==n||o==s||e.charCodeAt(n-1)!=r.charCodeAt(s-1))return 0;let i=Zk(n-t,s-o);for(let a=n,l=s;;){let s=a-i,c=l-i;if(s<t||c<o||e.slice(s,a)!=r.slice(c,l)){if(1==i)return n-a-(pS(e,a)?0:1);i>>=1}else{if(s==t||c==o)return n-s;a=s,l=c}}}function tS(e,t,n,r,o,s,i,a){let l=r.slice(o,s),c=null;for(;;){if(c||i<a)return c;for(let a=t+i;;){pS(e,a)||a++;let d=a+i;if(pS(e,d)||(d+=d==a+1?1:-1),d>=n)break;let u=e.slice(a,d),h=-1;for(;-1!=(h=l.indexOf(u,h+1));){let i=Qk(e,d,n,r,o+h+u.length,s),l=eS(e,t,a,r,o,o+h),f=u.length+i+l;(!c||c[2]<f)&&(c=[a-l,o+h-l,f])}a=d}if(a<0)return c;i>>=1}}function nS(e,t,n,r,o,s){let i=n-t,a=s-o;if(i<a){let i=nS(r,o,s,e,t,n);return i&&[i[1],i[0],i[2]]}return i<4||2*a<i?null:tS(e,t,n,r,o,s,Math.floor(i/4),-1)}function rS(e,t,n,r,o,s){let i,a=n-t,l=s-o;if(a<l){let l=tS(r,o,s,e,t,n,Math.floor(a/6),50);i=l&&[l[1],l[0],l[2]]}else i=tS(e,t,n,r,o,s,Math.floor(l/6),50);if(!i)return[new Wk(t,n,o,s)];let[c,d,u]=i;return Gk(e,t,c,r,o,d).concat(Gk(e,c+u,n,r,d+u,s))}function oS(e,t){for(let n=1;n<e.length;n++){let r=e[n-1],o=e[n];r.toA>o.fromA-t&&r.toB>o.fromB-t&&(e[n-1]=new Wk(r.fromA,o.toA,r.fromB,o.toB),e.splice(n--,1))}}let sS;try{sS=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(NJ){}function iS(e){return e>48&&e<58||e>64&&e<91||e>96&&e<123}function aS(e,t){if(t==e.length)return 0;let n=e.charCodeAt(t);return n<192?iS(n)?1:0:sS?hS(n)&&t!=e.length-1?sS.test(e.slice(t,t+2))?2:0:sS.test(String.fromCharCode(n))?1:0:0}function lS(e,t){if(!t)return 0;let n=e.charCodeAt(t-1);return n<192?iS(n)?1:0:sS?fS(n)&&1!=t?sS.test(e.slice(t-2,t))?2:0:sS.test(String.fromCharCode(n))?1:0:0}function cS(e,t,n){if(t==e.length||!lS(e,t))return t;for(let r=t,o=t+n;;){let n=aS(e,r);if(!n)return r;if(r+=n,r>o)return t}}function dS(e,t,n){if(!t||!aS(e,t))return t;for(let r=t,o=t-n;;){let n=lS(e,r);if(!n)return r;if(r-=n,r<o)return t}}function uS(e,t,n){for(let r=t,o=t-n;;){let n=r?e.charCodeAt(r-1):10;if(10==n)return r;if(r--,r<o||32!=n&&9!=n)return t}}const hS=e=>e>=55296&&e<=56319,fS=e=>e>=56320&&e<=57343;function pS(e,t){return!t||t==e.length||!hS(e.charCodeAt(t-1))||!fS(e.charCodeAt(t))}function mS(e,t,n){var r;return qk=(null!==(r=null==n?void 0:n.scanLimit)&&void 0!==r?r:1e9)>>1,function(e,t,n){for(;;){oS(n,1);let r=!1;for(let o=0;o<n.length;o++){let s,i,a=n[o];(s=Qk(e,a.fromA,a.toA,t,a.fromB,a.toB))&&(a=n[o]=new Wk(a.fromA+s,a.toA,a.fromB+s,a.toB)),(i=eS(e,a.fromA,a.toA,t,a.fromB,a.toB))&&(a=n[o]=new Wk(a.fromA,a.toA-i,a.fromB,a.toB-i));let l=a.toA-a.fromA,c=a.toB-a.fromB;if(l&&c)continue;let d=a.fromA-(o?n[o-1].toA:0),u=(o<n.length-1?n[o+1].fromA:e.length)-a.toA;if(!d||!u)continue;let h=l?e.slice(a.fromA,a.toA):t.slice(a.fromB,a.toB);d<=h.length&&e.slice(a.fromA-d,a.fromA)==h.slice(h.length-d)?(n[o]=new Wk(a.fromA-d,a.toA-d,a.fromB-d,a.toB-d),r=!0):u<=h.length&&e.slice(a.toA,a.toA+u)==h.slice(0,u)&&(n[o]=new Wk(a.fromA+u,a.toA+u,a.fromB+u,a.toB+u),r=!0)}if(!r)break}return n}(e,t,Gk(e,0,e.length,t,0,t.length))}function gS(e,t,n){return function(e,t,n){for(let r=0,o=0;o<e.length;o++){let s=e[o],i=s.toA-s.fromA,a=s.toB-s.fromB;if(i&&a||i>3||a>3){let l=o==e.length-1?t.length:e[o+1].fromA,c=s.fromA-r,d=l-s.toA,u=dS(t,s.fromA,Math.min(c,5)),h=cS(t,s.toA,Math.min(d,5)),f=s.fromA-u,p=h-s.toA;if(!i||!a){let d,m,g=Math.max(i,a),[y,b,x]=i?[t,s.fromA,s.toA]:[n,s.fromB,s.toB];f&&p?(g>f&&t.slice(u,s.fromA)==y.slice(x-f,x)?(s=e[o]=new Wk(u,u+i,s.fromB-f,s.toB-f),u=s.fromA,h=cS(t,s.toA,Math.min(l-s.toA,5))):g>p&&t.slice(s.toA,h)==y.slice(b,b+p)&&(s=e[o]=new Wk(h-i,h,s.fromB+p,s.toB+p),h=s.toA,u=dS(t,s.fromA,Math.min(s.fromA-r,5))),f=s.fromA-u,p=h-s.toA):f||p||!(m=s.fromA-(d=uS(t,s.fromA,c)))||t.slice(d,s.fromA)!=y.slice(x-m,x)||(s=e[o]=new Wk(d,d+i,s.fromB-m,s.toB-m))}(f||p)&&(s=e[o]=new Wk(s.fromA-f,s.toA+p,s.fromB-f,s.toB+p)),r=s.toA}}return oS(e,3),e}(mS(e,t,n),e,t)}const yS=hr.define({combine:e=>e[0]}),bS=In.define(),xS=Nn.define({create:e=>null,update(e,t){for(let n of t.effects)n.is(bS)&&(e=n.value);return e}});class vS{constructor(e,t,n,r,o){this.changes=e,this.fromA=t,this.toA=n,this.fromB=r,this.toB=o}offset(e,t){return e||t?new vS(this.changes,this.fromA+e,this.toA+e,this.fromB+t,this.toB+t):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,t,n){return SS(gS(e.toString(),t.toString(),n),e,t,0,0)}static updateA(e,t,n,r,o){return jS(NS(e,r,!0,n.length),e,t,n,o)}static updateB(e,t,n,r,o){return jS(NS(e,r,!1,t.length),e,t,n,o)}}function wS(e,t,n,r){let o=n.lineAt(e),s=r.lineAt(t);return o.to==e&&s.to==t&&e<n.length&&t<r.length?[e+1,t+1]:[o.from,s.from]}function kS(e,t,n,r){let o=n.lineAt(e),s=r.lineAt(t);return o.from==e&&s.from==t?[e,t]:[o.to+1,s.to+1]}function SS(e,t,n,r,o){let s=[];for(let i=0;i<e.length;i++){let a=e[i],[l,c]=wS(a.fromA+r,a.fromB+o,t,n),[d,u]=kS(a.toA+r,a.toB+o,t,n),h=[a.offset(-l+r,-c+o)];for(;i<e.length-1;){let s=e[i+1],[a,f]=wS(s.fromA+r,s.fromB+o,t,n);if(a>d+1&&f>u+1)break;h.push(s.offset(-l+r,-c+o)),[d,u]=kS(s.toA+r,s.toB+o,t,n),i++}s.push(new vS(h,l,Math.max(l,d),c,Math.max(c,u)))}return s}const CS=1e3;function ES(e,t,n,r){let o=0,s=e.length;for(;;){if(o==s){let r=0,s=0;o&&({toA:r,toB:s}=e[o-1]);let i=t-(n?r:s);return[r+i,s+i]}let i=o+s>>1,a=e[i],[l,c]=n?[a.fromA,a.toA]:[a.fromB,a.toB];if(l>t)s=i;else{if(!(c<=t))return r?[a.fromA,a.fromB]:[a.toA,a.toB];o=i+1}}}function NS(e,t,n,r){let o=[];return t.iterChangedRanges(((s,i,a,l)=>{let c=0,d=n?t.length:r,u=0,h=n?r:t.length;s>CS&&([c,u]=ES(e,s-CS,n,!0)),i<t.length-CS&&([d,h]=ES(e,i+CS,n,!1));let f,p=l-a-(i-s),[m,g]=n?[p,0]:[0,p];o.length&&(f=o[o.length-1]).toA>=c?o[o.length-1]={fromA:f.fromA,fromB:f.fromB,toA:d,toB:h,diffA:f.diffA+m,diffB:f.diffB+g}:o.push({fromA:c,toA:d,fromB:u,toB:h,diffA:m,diffB:g})})),o}function jS(e,t,n,r,o){if(!e.length)return t;let s=0,i=0,a=0,l=[];for(let c of e){let e=c.fromA+i,d=c.toA+i+c.diffA,u=c.fromB+a,h=c.toB+a+c.diffB;for(;s<t.length;){let n=t[s];if(n.toA+i<=e&&n.toB+a<=u)l.push(n.offset(i,a));else if(n.fromA+i>d)break;s++}for(let t of SS(gS(n.sliceString(e,d),r.sliceString(u,h),o),n,r,e,u))l.push(t);for(i+=c.diffA,a+=c.diffB;s<t.length;){let e=t[s];if(e.fromA>d+i&&e.fromB>h+a)break;s++}}for(;s<t.length;)l.push(t[s++].offset(i,a));return l}const _S=En.fromClass(class{constructor(e){({deco:this.deco,gutter:this.gutter}=PS(e))}update(e){var t,n;(e.docChanged||e.viewportChanged||(t=e.startState,n=e.state,t.field(xS,!1)!=n.field(xS,!1))||function(e,t){return e.facet(yS)!=t.facet(yS)}(e.startState,e.state))&&({deco:this.deco,gutter:this.gutter}=PS(e.view))}},{decorations:e=>e.deco}),IS=dr.low(As({class:"cm-changeGutter",markers:e=>{var t;return(null===(t=e.plugin(_S))||void 0===t?void 0:t.gutter)||Ts.empty}}));const AS=jn.line({class:"cm-changedLine"}),TS=jn.mark({class:"cm-changedText"}),MS=jn.mark({tagName:"ins",class:"cm-insertedLine"}),DS=jn.mark({tagName:"del",class:"cm-deletedLine"}),OS=new class extends Ms{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function RS(e,t,n,r,o,s){let i=n?e.fromA:e.fromB,a=n?e.toA:e.toB,l=0;if(i!=a){o.add(i,i,AS),o.add(i,a,n?DS:MS),s&&s.add(i,i,OS);for(let c=t.iterRange(i,a-1),d=i;!c.next().done;){if(c.lineBreak){d++,o.add(d,d,AS),s&&s.add(d,d,OS);continue}let t=d+c.value.length;if(r)for(;l<e.changes.length;){let r=e.changes[l],s=i+(n?r.fromA:r.fromB),a=i+(n?r.toA:r.toB),c=Math.max(d,s),u=Math.min(t,a);if(c<u&&o.add(c,u,TS),!(a<t))break;l++}d=t}}}function PS(e){let t=e.state.field(xS),{side:n,highlightChanges:r,markGutter:o}=e.state.facet(yS),s="a"==n,i=new _n,a=o?new _n:null,{from:l,to:c}=e.viewport;for(let d of t){if((s?d.fromA:d.fromB)>=c)break;(s?d.toA:d.toB)>l&&RS(d,e.state.doc,s,r,i,a)}return{deco:i.finish(),gutter:a&&a.finish()}}class LS extends ur{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}const zS=In.define({map:(e,t)=>e.map(t)}),FS=Nn.define({create:()=>jn.none,update:(e,t)=>{for(let n of t.effects)if(n.is(zS))return n.value;return e.map(t.changes)},provide:e=>Cn.decorations.from(e)}),BS=.01;const US=In.define({map:(e,t)=>t.mapPos(e)});class $S extends ur{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent="⦚ "+e.state.phrase("$ unchanged lines",this.lines)+" ⦚",t.addEventListener("click",(t=>{let n=e.posAtDOM(t.target);e.dispatch({effects:US.of(n)});let{side:r,sibling:o}=e.state.facet(yS);o&&o().dispatch({effects:US.of(VS(n,e.state.field(xS),"a"==r))})})),t}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}}function VS(e,t,n){let r=0,o=0;for(let s=0;;s++){let i=s<t.length?t[s]:null;if(!i||(n?i.fromA:i.fromB)>=e)return o+(e-r);[r,o]=n?[i.toA,i.toB]:[i.toB,i.toA]}}const HS=Nn.define({create:e=>jn.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(US)&&(e=e.update({filter:e=>e!=n.value}));return e},provide:e=>Cn.decorations.from(e)});function WS({margin:e=3,minSize:t=4}){return HS.init((n=>function(e,t,n){let r=new _n,o="a"==e.facet(yS).side,s=e.field(xS),i=1;for(let a=0;;a++){let l=a<s.length?s[a]:null,c=a?i+t:1,d=l?e.doc.lineAt(o?l.fromA:l.fromB).number-1-t:e.doc.lines,u=d-c+1;if(u>=n&&r.add(e.doc.line(c).from,e.doc.line(d).to,jn.replace({widget:new $S(u),block:!0})),!l)break;i=e.doc.lineAt(Math.min(e.doc.length,o?l.toA:l.toB)).number}return r.finish()}(n,e,t)))}const GS=Cn.styleModule.of(new Is({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),qS=Cn.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb2266, #22bb2266) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff8866, #88ff8866) bottom/100% 2px no-repeat"},".cm-insertedLine, .cm-deletedLine":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer"},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"}}),YS=new _s,JS=new _s;class XS{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig;let t=[dr.low(_S),qS,GS,FS,Cn.updateListener.of((e=>{this.measuring<0&&(e.heightChanged||e.viewportChanged)&&!e.transactions.some((e=>e.effects.some((e=>e.is(zS)))))&&this.measure()}))],n=[yS.of({side:"a",sibling:()=>this.b,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&n.push(IS);let r=Kr.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],Cn.editorAttributes.of({class:"cm-merge-a"}),JS.of(n),t]}),o=[yS.of({side:"b",sibling:()=>this.a,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&o.push(IS);let s=Kr.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],Cn.editorAttributes.of({class:"cm-merge-b"}),JS.of(o),t]});this.chunks=vS.build(r.doc,s.doc,this.diffConf);let i=[xS.init((()=>this.chunks)),YS.of(e.collapseUnchanged?WS(e.collapseUnchanged):[])];r=r.update({effects:In.appendConfig.of(i)}).state,s=s.update({effects:In.appendConfig.of(i)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let a=e.orientation||"a-b",l=document.createElement("div");l.className="cm-mergeViewEditor";let c=document.createElement("div");c.className="cm-mergeViewEditor",this.editorDOM.appendChild("a-b"==a?l:c),this.editorDOM.appendChild("a-b"==a?c:l),this.a=new Cn({state:r,parent:l,root:e.root,dispatchTransactions:e=>this.dispatch(e,this.a)}),this.b=new Cn({state:s,parent:c,root:e.root,dispatchTransactions:e=>this.dispatch(e,this.b)}),this.setupRevertControls(!!e.revertControls,"b-to-a"==e.revertControls,e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,t){if(e.some((e=>e.docChanged))){let n=e[e.length-1],r=e.reduce(((e,t)=>e.compose(t.changes)),gr.empty(e[0].startState.doc.length));this.chunks=t==this.a?vS.updateA(this.chunks,n.newDoc,this.b.state.doc,r,this.diffConf):vS.updateB(this.chunks,this.a.state.doc,n.newDoc,r,this.diffConf),t.update([...e,n.state.update({effects:bS.of(this.chunks)})]);let o=t==this.a?this.b:this.a;o.update([o.state.update({effects:bS.of(this.chunks)})]),this.scheduleMeasure()}else t.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let t="b-a"!=e.orientation;if(t!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let e=this.a.dom.parentNode,n=this.b.dom.parentNode;e.remove(),n.remove(),this.editorDOM.insertBefore(t?e:n,this.editorDOM.firstChild),this.editorDOM.appendChild(t?n:e),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let t=!!this.revertDOM,n=this.revertToA,r=this.renderRevert;"revertControls"in e&&(t=!!e.revertControls,n="b-to-a"==e.revertControls),"renderRevertControl"in e&&(r=e.renderRevertControl),this.setupRevertControls(t,n,r)}let t="highlightChanges"in e,n="gutter"in e,r="collapseUnchanged"in e;if(t||n||r){let o=[],s=[];if(t||n){let r=this.a.state.facet(yS),i=n?!1!==e.gutter:r.markGutter,a=t?!1!==e.highlightChanges:r.highlightChanges;o.push(JS.reconfigure([yS.of({side:"a",sibling:()=>this.b,highlightChanges:a,markGutter:i}),i?IS:[]])),s.push(JS.reconfigure([yS.of({side:"b",sibling:()=>this.a,highlightChanges:a,markGutter:i}),i?IS:[]]))}if(r){let t=YS.reconfigure(e.collapseUnchanged?WS(e.collapseUnchanged):[]);o.push(t),s.push(t)}this.a.dispatch({effects:o}),this.b.dispatch({effects:s})}this.scheduleMeasure()}setupRevertControls(e,t,n){this.revertToA=t,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=n,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",(e=>this.revertClicked(e))),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame((()=>{this.measuring=-1,this.measure()}))}}measure(){!function(e,t,n){let r=new _n,o=new _n,s=e.state.field(FS).iter(),i=t.state.field(FS).iter(),a=0,l=0,c=0,d=0;for(let p=0;;p++){let u=p<n.length?n[p]:null;if(a<(u?u.fromA:e.state.doc.length)){let n=e.lineBlockAt(a).top+c-(t.lineBlockAt(l).top+d);n<-.01?(c-=n,r.add(a,a,jn.widget({widget:new LS(-n),block:!0,side:-1}))):n>BS&&(d+=n,o.add(l,l,jn.widget({widget:new LS(n),block:!0,side:-1})))}if(!u)break;for(a=u.toA,l=u.toB;s.value&&s.from<a;)c-=s.value.spec.widget.height,s.next();for(;i.value&&i.from<l;)d-=i.value.spec.widget.height,i.next()}for(;s.value;)c-=s.value.spec.widget.height,s.next();for(;i.value;)d-=i.value.spec.widget.height,i.next();let u=e.contentHeight+c-(t.contentHeight+d);u<BS?r.add(e.state.doc.length,e.state.doc.length,jn.widget({widget:new LS(-u),block:!0,side:1})):u>BS&&o.add(t.state.doc.length,t.state.doc.length,jn.widget({widget:new LS(u),block:!0,side:1}));let h=r.finish(),f=o.finish();Ts.eq([h],[e.state.field(FS)])||e.dispatch({effects:zS.of(h)}),Ts.eq([f],[t.state.field(FS)])||t.dispatch({effects:zS.of(f)})}(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,t=e.firstChild,n=this.a.viewport,r=this.b.viewport;for(let o=0;o<this.chunks.length;o++){let s=this.chunks[o];if(s.fromA>n.to||s.fromB>r.to)break;if(s.fromA<n.from||s.fromB<r.from)continue;let i=this.a.lineBlockAt(s.fromA).top+"px";for(;t&&+t.dataset.chunk<o;)t=KS(t);t&&t.dataset.chunk==String(o)?(t.style.top!=i&&(t.style.top=i),t=t.nextSibling):e.insertBefore(this.renderRevertButton(i,o),t)}for(;t;)t=KS(t)}renderRevertButton(e,t){let n;if(this.renderRevert)n=this.renderRevert();else{n=document.createElement("button");let e=this.a.state.phrase("Revert this chunk");n.setAttribute("aria-label",e),n.setAttribute("title",e),n.textContent=this.revertToLeft?"⇜":"⇝"}return n.style.top=e,n.setAttribute("data-chunk",String(t)),n}revertClicked(e){let t,n=e.target;for(;n&&n.parentNode!=this.revertDOM;)n=n.parentNode;if(n&&(t=this.chunks[n.dataset.chunk])){let[n,r,o,s,i,a]=this.revertToA?[this.b,this.a,t.fromB,t.toB,t.fromA,t.toA]:[this.a,this.b,t.fromA,t.toA,t.fromB,t.toB],l=n.state.sliceDoc(o,Math.max(o,s-1));o!=s&&a<=r.state.doc.length&&(l+=n.state.lineBreak),r.dispatch({changes:{from:i,to:Math.min(r.state.doc.length,a),insert:l},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function KS(e){let t=e.nextSibling;return e.remove(),t}var ZS=["className","children","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","destroyRerender","renderRevertControl","diffConfig"],QS=["modified","modifiedExtension","original","originalExtension","theme","dispatch"],eC=m.forwardRef(((e,t)=>{var{className:n,children:r,orientation:o,revertControls:s,highlightChanges:i,gutter:a,collapseUnchanged:c,destroyRerender:d=!0,renderRevertControl:u,diffConfig:h}=e,f=Ns(e,ZS),p=Fk(),{modified:m,modifiedExtension:g,original:y,originalExtension:b,theme:x,dispatch:v}=p,w=Ns(p,QS),k=l.useRef(null),S=l.useRef(),C={orientation:o,revertControls:s,highlightChanges:i,gutter:a,collapseUnchanged:c,renderRevertControl:u,diffConfig:h};l.useImperativeHandle(t,(()=>({container:k.current,view:S.current,modified:m,original:y,config:Es({a:y,b:m,parent:k.current},C)})),[k,S,m,y,C]);var E=Cn.updateListener.of((e=>{if(e.docChanged&&"function"==typeof(null==b?void 0:b.onChange)){var t=e.state.doc.toString();null==b||b.onChange(t,e)}})),N=Cn.updateListener.of((e=>{if(e.docChanged&&"function"==typeof(null==g?void 0:g.onChange)){var t=e.state.doc.toString();null==g||g.onChange(t,e)}}));l.useEffect((()=>{!S.current&&k.current&&b&&g&&(S.current=new XS(Es({a:Es({},y,{extensions:[...(null==b?void 0:b.extension)||[],...js(Es({},null==b?void 0:b.option,{theme:x})),E]}),b:Es({},m,{extensions:[...(null==g?void 0:g.extension)||[],...js(Es({},null==g?void 0:g.option,{theme:x})),N]}),parent:k.current},C)),v({view:S.current}))}),[S,k,b,g]),l.useEffect((()=>{if(y&&y.doc&&S.current){var e,t,n=null==(e=S.current)?void 0:e.a.state.doc.toString();if(n!==y.doc)null==(t=S.current)||t.a.dispatch({changes:{from:0,to:n.length,insert:y.doc||""}})}if(m&&m.doc&&S.current){var r,o,s=null==(r=S.current)?void 0:r.b.state.doc.toString();if(s!==m.doc)null==(o=S.current)||o.b.dispatch({changes:{from:0,to:s.length,insert:m.doc||""}})}if(d&&S.current){var i=S.current.a.state.selection.ranges[0].from,a=S.current.b.state.selection.ranges[0].from;S.current.destroy(),S.current=new XS(Es({a:Es({},y,{extensions:[...(null==b?void 0:b.extension)||[],...js(Es({},null==b?void 0:b.option,{theme:x}))]}),b:Es({},m,{extensions:[...(null==g?void 0:g.extension)||[],...js(Es({},null==g?void 0:g.option,{theme:x}))]}),parent:k.current},C)),i&&(S.current.a.focus(),S.current.a.dispatch({selection:{anchor:i,head:i}})),a&&(S.current.b.focus(),S.current.b.dispatch({selection:{anchor:a,head:a}}))}}),[S,x,k.current,y,m,b,g,d]),l.useEffect((()=>()=>S.current&&S.current.destroy()),[]),l.useEffect((()=>{if(S.current){var e={};w.orientation!==o&&(e.orientation=o),w.revertControls!==s&&(e.revertControls=s),w.highlightChanges!==i&&(e.highlightChanges=i),w.gutter!==a&&(e.gutter=a),w.collapseUnchanged!==c&&(e.collapseUnchanged=c),w.renderRevertControl!==u&&(e.collapseUnchanged=c),Object.keys(e).length&&v&&S.current&&(S.current.reconfigure(Es({},e)),v(Es({},e)))}}),[v,S,o,s,i,a,c,u]);return A.jsx("div",Es({ref:k,className:"cm-merge-theme"+(n?" "+n:"")},f,{children:r}))}));eC.displayName="CodeMirrorMerge.Internal";var tC=["theme"],nC=m.forwardRef(((e,t)=>{var{theme:n}=e,r=Ns(e,tC);return A.jsx(Bk,{theme:n,children:A.jsx(eC,Es({},r,{ref:t}))})}));nC.Original=$k,nC.Modified=Hk,nC.displayName="CodeMirrorMerge";const rC=nC.Original,oC=nC.Modified,sC=[Os(),Cn.lineWrapping],iC=e=>{const t=_.c(55),{className:n,onChange:r,initialPrompt:o,currentLanguageAdapter:s,currentCode:i,declineChange:a,acceptChange:c,enabled:d,children:u}=e;let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h={},t[0]=h):h=t[0];const[f,p]=l.useState(h),[g,y]=He(Ou);let b,x,v,w,k;t[1]===Symbol.for("react.memo_cache_sentinel")?(b=Ar("api/ai/completion").toString(),x=Tr.headers(),t[1]=b,t[2]=x):(b=t[1],x=t[2]),t[3]!==i||t[4]!==g?(v=g?xr(i):"",t[3]=i,t[4]=g,t[5]=v):v=t[5],t[6]!==f||t[7]!==i||t[8]!==s||t[9]!==v?(w={...f,includeOtherCode:v,code:i,language:s},t[6]=f,t[7]=i,t[8]=s,t[9]=v,t[10]=w):w=t[10],t[11]!==o||t[12]!==w?(k={api:b,headers:x,initialInput:o,streamProtocol:"text",experimental_throttle:100,body:w,onError:aC},t[11]=o,t[12]=w,t[13]=k):k=t[13];const{completion:S,input:C,stop:E,isLoading:N,setCompletion:j,setInput:I,handleSubmit:T}=Ds(k),M=m.useRef(null);let D,O,R,P;t[14]!==d?(D=()=>{const e=M.current;d&&e&&(requestAnimationFrame((()=>{var t;null==(t=e.view)||t.focus()})),Rs(M.current.view))},O=[d],t[14]=d,t[15]=D,t[16]=O):(D=t[15],O=t[16]),l.useEffect(D,O),t[17]!==d||t[18]!==o||t[19]!==I?(P=()=>{d&&I(o||"")},R=[d,o,I],t[17]=d,t[18]=o,t[19]=I,t[20]=R,t[21]=P):(R=t[20],P=t[21]),l.useEffect(P,R);const{theme:L}=Be();let z;t[22]!==n?(z=Ln("flex flex-col w-full rounded-[inherit] overflow-hidden",n),t[22]=n,t[23]=z):z=t[23];const F=d&&"max-h-[400px] min-h-11 visible",B=!d&&"max-h-0 min-h-0 invisible";let U,$,V,H;t[24]!==F||t[25]!==B?(U=Ln("flex items-center gap-2 border-b px-3 transition-all rounded-[inherit] rounded-b-none duration-300 overflow-hidden",F,B),t[24]=F,t[25]=B,t[26]=U):U=t[26],t[27]!==c||t[28]!==S||t[29]!==a||t[30]!==d||t[31]!==T||t[32]!==g||t[33]!==C||t[34]!==N||t[35]!==j||t[36]!==y||t[37]!==I||t[38]!==E||t[39]!==L?($=d&&A.jsxs(A.Fragment,{children:[A.jsx(be,{className:"text-[var(--blue-10)] flex-shrink-0",size:16}),A.jsx(Ps,{inputRef:M,theme:L,onClose:()=>{a(),j("")},value:C,onChange:e=>{I(e),p(Ls(e))},onSubmit:()=>{N||T()}}),N&&A.jsxs(te,{"data-testid":"stop-completion-button",variant:"text",size:"xs",className:"mb-0",onClick:E,children:[A.jsx(zs,{className:"animate-spin mr-1",size:14}),"Stop"]}),!N&&S&&A.jsx(te,{"data-testid":"accept-completion-button",variant:"text",size:"xs",className:"mb-0",disabled:N,onClick:()=>{c(S),j("")},children:A.jsx("span",{className:"text-[var(--grass-11)] opacity-100",children:"Accept"})}),A.jsx("div",{className:"h-full w-px bg-border mx-2"}),A.jsx(ht,{content:"Include code from other cells",children:A.jsxs("div",{className:"flex flex-row items-start gap-1 overflow-hidden",children:[A.jsx(Fs,{"data-testid":"include-other-cells-checkbox",id:"include-other-cells",checked:g,onCheckedChange:e=>y(Boolean(e))}),A.jsx(ze,{htmlFor:"include-other-cells",className:"text-muted-foreground text-xs whitespace-nowrap ellipsis",children:"Include all code"})]})}),A.jsx(te,{"data-testid":"decline-completion-button",variant:"text",size:"icon",disabled:N,onClick:()=>{E(),a(),j("")},children:A.jsx(Tn,{className:"text-[var(--red-10)]",size:16})})]}),t[27]=c,t[28]=S,t[29]=a,t[30]=d,t[31]=T,t[32]=g,t[33]=C,t[34]=N,t[35]=j,t[36]=y,t[37]=I,t[38]=E,t[39]=L,t[40]=$):$=t[40],t[41]!==U||t[42]!==$?(V=A.jsx("div",{className:U,children:$}),t[41]=U,t[42]=$,t[43]=V):V=t[43],t[44]!==S||t[45]!==i||t[46]!==d||t[47]!==r||t[48]!==L?(H=S&&d&&A.jsxs(nC,{className:"cm",theme:L,children:[A.jsx(rC,{onChange:r,value:i,extensions:sC}),A.jsx(oC,{value:S,editable:!1,readOnly:!0,extensions:sC})]}),t[44]=S,t[45]=i,t[46]=d,t[47]=r,t[48]=L,t[49]=H):H=t[49];const W=(!S||!d)&&u;let G;return t[50]!==z||t[51]!==V||t[52]!==H||t[53]!==W?(G=A.jsxs("div",{className:z,children:[V,H,W]}),t[50]=z,t[51]=V,t[52]=H,t[53]=W,t[54]=G):G=t[54],G};function aC(e){ie({title:"Completion failed",description:Bs(e)})}const lC=()=>new Map,cC=e=>{const t=lC();return e.forEach(((e,n)=>{t.set(n,e)})),t},dC=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},uC=()=>new Set,hC=e=>e[e.length-1],fC=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},pC=Array.from,mC=Array.isArray;class gC{constructor(){this._observers=lC()}on(e,t){return dC(this._observers,e,uC).add(t),t}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return pC((this._observers.get(e)||lC()).values()).forEach((e=>e(...t)))}destroy(){this._observers=lC()}}class yC{constructor(){this._observers=lC()}on(e,t){dC(this._observers,e,uC).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return pC((this._observers.get(e)||lC()).values()).forEach((e=>e(...t)))}destroy(){this._observers=lC()}}const bC=Math.floor,xC=Math.abs,vC=(e,t)=>e<t?e:t,wC=(e,t)=>e>t?e:t,kC=Math.pow,SC=e=>0!==e?e<0:1/e<0,CC=64,EC=128,NC=127,jC=Number.MAX_SAFE_INTEGER,_C=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&bC(e)===e),IC=String.fromCharCode,AC=/^\s*/g,TC=/([A-Z])/g,MC=(e,t)=>(e=>e.replace(AC,""))(e.replace(TC,(e=>`${t}${(e=>e.toLowerCase())(e)}`))),DC="undefined"!=typeof TextEncoder?new TextEncoder:null,OC=DC?e=>DC.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r};let RC="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});RC&&1===RC.decode(new Uint8Array).length&&(RC=null);class PC{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const LC=()=>new PC,zC=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},FC=e=>{const t=new Uint8Array(zC(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},BC=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},UC=BC,$C=(e,t)=>{for(;t>NC;)BC(e,EC|NC&t),t=bC(t/128);BC(e,NC&t)},VC=(e,t)=>{const n=SC(t);for(n&&(t=-t),BC(e,(t>63?EC:0)|(n?CC:0)|63&t),t=bC(t/64);t>0;)BC(e,(t>NC?EC:0)|NC&t),t=bC(t/128)},HC=new Uint8Array(3e4),WC=HC.length/3,GC=DC&&DC.encodeInto?(e,t)=>{if(t.length<WC){const n=DC.encodeInto(t,HC).written||0;$C(e,n);for(let t=0;t<n;t++)BC(e,HC[t])}else YC(e,OC(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;$C(e,r);for(let o=0;o<r;o++)BC(e,n.codePointAt(o))},qC=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=vC(n-r,t.length),s=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(wC(2*n,s)),e.cbuf.set(t.subarray(o)),e.cpos=s)},YC=(e,t)=>{$C(e,t.byteLength),qC(e,t)},JC=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*wC(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},XC=new DataView(new ArrayBuffer(4)),KC=(e,t)=>{switch(typeof t){case"string":BC(e,119),GC(e,t);break;case"number":_C(t)&&xC(t)<=2147483647?(BC(e,125),VC(e,t)):(n=t,XC.setFloat32(0,n),XC.getFloat32(0)===n?(BC(e,124),((e,t)=>{JC(e,4).setFloat32(0,t,!1)})(e,t)):(BC(e,123),((e,t)=>{JC(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":BC(e,122),((e,t)=>{JC(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)BC(e,126);else if(mC(t)){BC(e,117),$C(e,t.length);for(let n=0;n<t.length;n++)KC(e,t[n])}else if(t instanceof Uint8Array)BC(e,116),YC(e,t);else{BC(e,118);const n=Object.keys(t);$C(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];GC(e,o),KC(e,t[o])}}break;case"boolean":BC(e,t?120:121);break;default:BC(e,127)}var n};class ZC extends PC{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&$C(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const QC=e=>{e.count>0&&(VC(e.encoder,1===e.count?e.s:-e.s),e.count>1&&$C(e.encoder,e.count-2))};class eE{constructor(){this.encoder=new PC,this.s=0,this.count=0}write(e){this.s===e?this.count++:(QC(this),this.count=1,this.s=e)}toUint8Array(){return QC(this),FC(this.encoder)}}const tE=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);VC(e.encoder,t),e.count>1&&$C(e.encoder,e.count-2)}};class nE{constructor(){this.encoder=new PC,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(tE(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return tE(this),FC(this.encoder)}}class rE{constructor(){this.sarr=[],this.s="",this.lensE=new eE}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new PC;return this.sarr.push(this.s),this.s="",GC(e,this.sarr.join("")),qC(e,this.lensE.toUint8Array()),FC(e)}}const oE=e=>new Error(e),sE=()=>{throw oE("Method unimplemented")},iE=()=>{throw oE("Unexpected case")},aE=oE("Unexpected end of array"),lE=oE("Integer out of Range");class cE{constructor(e){this.arr=e,this.pos=0}}const dE=e=>new cE(e),uE=e=>((e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n})(e,fE(e)),hE=e=>e.arr[e.pos++],fE=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const r=e.arr[e.pos++];if(t+=(r&NC)*n,n*=128,r<EC)return t;if(t>jC)throw lE}throw aE},pE=e=>{let t=e.arr[e.pos++],n=63&t,r=64;const o=(t&CC)>0?-1:1;if(!(t&EC))return o*n;const s=e.arr.length;for(;e.pos<s;){if(t=e.arr[e.pos++],n+=(t&NC)*r,r*=128,t<EC)return o*n;if(n>jC)throw lE}throw aE},mE=RC?e=>RC.decode(uE(e)):e=>{let t=fE(e);if(0===t)return"";{let n=String.fromCodePoint(hE(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(hE(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},gE=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},yE=[e=>{},e=>null,pE,e=>gE(e,4).getFloat32(0,!1),e=>gE(e,8).getFloat64(0,!1),e=>gE(e,8).getBigInt64(0,!1),e=>!1,e=>!0,mE,e=>{const t=fE(e),n={};for(let r=0;r<t;r++){n[mE(e)]=bE(e)}return n},e=>{const t=fE(e),n=[];for(let r=0;r<t;r++)n.push(bE(e));return n},uE],bE=e=>yE[127-hE(e)](e);class xE extends cE{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){var e;return 0===this.count&&(this.s=this.reader(this),(e=this).pos!==e.arr.length?this.count=fE(this)+1:this.count=-1),this.count--,this.s}}class vE extends cE{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=pE(this);const e=SC(this.s);this.count=1,e&&(this.s=-this.s,this.count=fE(this)+2)}return this.count--,this.s}}class wE extends cE{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=pE(this),t=1&e;this.diff=bC(e/2),this.count=1,t&&(this.count=fE(this)+2)}return this.s+=this.diff,this.count--,this.s}}class kE{constructor(e){this.decoder=new vE(e),this.str=mE(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}const SE=crypto.getRandomValues.bind(crypto),CE=()=>SE(new Uint32Array(1))[0],EE="10000000-1000-4000-8000-100000000000",NE=()=>EE.replace(/[018]/g,(e=>(e^CE()&15>>e/4).toString(16))),jE=Date.now,_E=e=>new Promise(e);Promise.all.bind(Promise);const IE=e=>void 0===e?null:e;let AE=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},TE=!0;try{"undefined"!=typeof localStorage&&localStorage&&(AE=localStorage,TE=!1)}catch(jJ){}const ME=AE,DE=Object.assign,OE=Object.keys,RE=e=>OE(e).length,PE=e=>OE(e).length,LE=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),zE=Object.freeze,FE=e=>{for(const t in e){const n=e[t];"object"!=typeof n&&"function"!=typeof n||FE(e[t])}return zE(e)},BE=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&BE(e,t,n+1)}},UE=e=>e,$E=(e,t)=>{if(null==e||null==t)return((e,t)=>e===t)(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!$E(e.get(n),t.get(n)))return!1;break;case Object:if(RE(e)!==RE(t))return!1;for(const n in e)if(!LE(e,n)||!$E(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!$E(e[n],t[n]))return!1;break;default:return!1}return!0};var VE={};const HE="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),WE="undefined"!=typeof window&&"undefined"!=typeof document&&!HE;let GE;const qE=e=>(()=>{if(void 0===GE)if(HE){GE=lC();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&GE.set(t,""),t=r):null!==t&&(GE.set(t,r),t=null)}null!==t&&GE.set(t,"")}else"object"==typeof location?(GE=lC(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,n]=e.split("=");GE.set(`--${MC(t,"-")}`,n),GE.set(`-${MC(t,"-")}`,n)}}))):GE=lC();return GE})().has(e),YE=e=>IE(HE?VE[e.toUpperCase().replaceAll("-","_")]:ME.getItem(e)),JE=e=>qE("--"+e)||null!==YE(e);JE("production");const XE=HE&&["true","1","2"].includes(VE.FORCE_COLOR)||!qE("--no-colors")&&!JE("no-color")&&(!HE||process.stdout.isTTY)&&(!HE||qE("--color")||null!==YE("COLORTERM")||(YE("TERM")||"").includes("color")),KE=e=>new Uint8Array(e),ZE=WE?e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=IC(e[n]);return btoa(t)}:e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),QE=WE?e=>{const t=atob(e),n=KE(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}:e=>{const t=Buffer.from(e,"base64");return n=t.buffer,r=t.byteOffset,o=t.byteLength,new Uint8Array(n,r,o);var n,r,o};class eN{constructor(e,t){this.left=e,this.right=t}}const tN=(e,t)=>new eN(e,t);"undefined"!=typeof DOMParser&&new DOMParser;const nN=Symbol,rN=nN(),oN=nN(),sN=nN(),iN=nN(),aN=nN(),lN=nN(),cN=nN(),dN=nN(),uN=nN(),hN={[rN]:tN("font-weight","bold"),[oN]:tN("font-weight","normal"),[sN]:tN("color","blue"),[aN]:tN("color","green"),[iN]:tN("color","grey"),[lN]:tN("color","red"),[cN]:tN("color","purple"),[dN]:tN("color","orange"),[uN]:tN("color","black")},fN=XE?e=>{var t;1===e.length&&(null==(t=e[0])?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[],o=lC();let s=[],i=0;for(;i<e.length;i++){const t=e[i],s=hN[t];if(void 0!==s)o.set(s.left,s.right);else{if(void 0===t)break;if(t.constructor!==String&&t.constructor!==Number)break;{const e=((e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n})(o,((e,t)=>`${t}:${e};`)).join("");i>0||e.length>0?(n.push("%c"+t),r.push(e)):n.push(t)}}}for(i>0&&(s=r,s.unshift(n.join("")));i<e.length;i++){const t=e[i];t instanceof Symbol||s.push(t)}return s}:e=>{var t;1===e.length&&(null==(t=e[0])?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[];let o=0;for(;o<e.length;o++){const t=e[o];if(void 0===t)break;if(t.constructor===String||t.constructor===Number)n.push(t);else if(t.constructor===Object)break}for(o>0&&r.push(n.join(""));o<e.length;o++){const t=e[o];t instanceof Symbol||r.push(t)}return r},pN=(...e)=>{console.warn(...fN(e)),e.unshift(dN),mN.forEach((t=>t.print(e)))},mN=uC(),gN=e=>({[Symbol.iterator](){return this},next:e}),yN=(e,t)=>gN((()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}}));class bN{constructor(e,t){this.clock=e,this.len=t}}class xN{constructor(){this.clients=new Map}}const vN=(e,t,n)=>t.clients.forEach(((t,r)=>{const o=e.doc.store.clients.get(r);for(let s=0;s<t.length;s++){const r=t[s];xj(e,o,r.clock,r.len,n)}})),wN=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=bC((n+r)/2),s=e[o],i=s.clock;if(i<=t){if(t<i+s.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},kN=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=wC(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n}))},SN=e=>{const t=new xN;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,o)=>{if(!t.clients.has(o)){const s=r.slice();for(let t=n+1;t<e.length;t++)fC(s,e[t].clients.get(o)||[]);t.clients.set(o,s)}}));return kN(t),t},CN=(e,t,n,r)=>{dC(e.clients,t,(()=>[])).push(new bN(n,r))},EN=e=>{const t=new xN;return e.clients.forEach(((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const o=n.id.clock;let s=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])s+=n.length;r.push(new bN(o,s))}}r.length>0&&t.clients.set(n,r)})),t},NN=(e,t)=>{$C(e.restEncoder,t.clients.size),pC(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{e.resetDsCurVal(),$C(e.restEncoder,t);const r=n.length;$C(e.restEncoder,r);for(let o=0;o<r;o++){const t=n[o];e.writeDsClock(t.clock),e.writeDsLen(t.len)}}))},jN=e=>{const t=new xN,n=fE(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=fE(e.restDecoder),r=fE(e.restDecoder);if(r>0){const o=dC(t.clients,n,(()=>[]));for(let t=0;t<r;t++)o.push(new bN(e.readDsClock(),e.readDsLen()))}}return t},_N=(e,t,n)=>{const r=new xN,o=fE(e.restDecoder);for(let s=0;s<o;s++){e.resetDsCurVal();const o=fE(e.restDecoder),s=fE(e.restDecoder),i=n.clients.get(o)||[],a=hj(n,o);for(let n=0;n<s;n++){const n=e.readDsClock(),s=n+e.readDsLen();if(n<a){a<s&&CN(r,o,a,s-a);let e=pj(i,n),l=i[e];for(!l.deleted&&l.id.clock<n&&(i.splice(e+1,0,lI(t,l,n-l.id.clock)),e++);e<i.length&&(l=i[e++],l.id.clock<s);)l.deleted||(s<l.id.clock+l.length&&i.splice(e,0,lI(t,l,s-l.id.clock)),l.delete(t))}else CN(r,o,n,s-n)}}if(r.clients.size>0){const e=new zN;return $C(e.restEncoder,0),NN(e,r),e.toUint8Array()}return null},IN=CE;class AN extends gC{constructor({guid:e=NE(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:i=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=IN(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new dj,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=i,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=_E((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const a=()=>_E((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])})),this.whenSynced=a()}load(){const e=this._item;null===e||this.shouldLoad||Ej(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(pC(this.subdocs).map((e=>e.guid)))}transact(e,t=null){return Ej(this,e,t)}get(e,t=Xj){const n=dC(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==Xj&&r!==t){if(r===Xj){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,p_)}getText(e=""){return this.get(e,M_)}getMap(e=""){return this.get(e,g_)}getXmlElement(e=""){return this.get(e,R_)}getXmlFragment(e=""){return this.get(e,O_)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){this.isDestroyed=!0,pC(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new AN({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Ej(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class TN{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return fE(this.restDecoder)}readDsLen(){return fE(this.restDecoder)}}class MN extends TN{readLeftID(){return QN(fE(this.restDecoder),fE(this.restDecoder))}readRightID(){return QN(fE(this.restDecoder),fE(this.restDecoder))}readClient(){return fE(this.restDecoder)}readInfo(){return hE(this.restDecoder)}readString(){return mE(this.restDecoder)}readParentInfo(){return 1===fE(this.restDecoder)}readTypeRef(){return fE(this.restDecoder)}readLen(){return fE(this.restDecoder)}readAny(){return bE(this.restDecoder)}readBuf(){return(e=>{const t=KE(e.byteLength);return t.set(e),t})(uE(this.restDecoder))}readJSON(){return JSON.parse(mE(this.restDecoder))}readKey(){return mE(this.restDecoder)}}class DN{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=fE(this.restDecoder),this.dsCurrVal}readDsLen(){const e=fE(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class ON extends DN{constructor(e){super(e),this.keys=[],fE(e),this.keyClockDecoder=new wE(uE(e)),this.clientDecoder=new vE(uE(e)),this.leftClockDecoder=new wE(uE(e)),this.rightClockDecoder=new wE(uE(e)),this.infoDecoder=new xE(uE(e),hE),this.stringDecoder=new kE(uE(e)),this.parentInfoDecoder=new xE(uE(e),hE),this.typeRefDecoder=new vE(uE(e)),this.lenDecoder=new vE(uE(e))}readLeftID(){return new KN(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new KN(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return bE(this.restDecoder)}readBuf(){return uE(this.restDecoder)}readJSON(){return bE(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class RN{constructor(){this.restEncoder=LC()}toUint8Array(){return FC(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){$C(this.restEncoder,e)}writeDsLen(e){$C(this.restEncoder,e)}}class PN extends RN{writeLeftID(e){$C(this.restEncoder,e.client),$C(this.restEncoder,e.clock)}writeRightID(e){$C(this.restEncoder,e.client),$C(this.restEncoder,e.clock)}writeClient(e){$C(this.restEncoder,e)}writeInfo(e){UC(this.restEncoder,e)}writeString(e){GC(this.restEncoder,e)}writeParentInfo(e){$C(this.restEncoder,e?1:0)}writeTypeRef(e){$C(this.restEncoder,e)}writeLen(e){$C(this.restEncoder,e)}writeAny(e){KC(this.restEncoder,e)}writeBuf(e){YC(this.restEncoder,e)}writeJSON(e){GC(this.restEncoder,JSON.stringify(e))}writeKey(e){GC(this.restEncoder,e)}}class LN{constructor(){this.restEncoder=LC(),this.dsCurrVal=0}toUint8Array(){return FC(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,$C(this.restEncoder,t)}writeDsLen(e){0===e&&iE(),$C(this.restEncoder,e-1),this.dsCurrVal+=e}}class zN extends LN{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new nE,this.clientEncoder=new eE,this.leftClockEncoder=new nE,this.rightClockEncoder=new nE,this.infoEncoder=new ZC(UC),this.stringEncoder=new rE,this.parentInfoEncoder=new ZC(UC),this.typeRefEncoder=new eE,this.lenEncoder=new eE}toUint8Array(){const e=LC();return $C(e,0),YC(e,this.keyClockEncoder.toUint8Array()),YC(e,this.clientEncoder.toUint8Array()),YC(e,this.leftClockEncoder.toUint8Array()),YC(e,this.rightClockEncoder.toUint8Array()),YC(e,FC(this.infoEncoder)),YC(e,this.stringEncoder.toUint8Array()),YC(e,FC(this.parentInfoEncoder)),YC(e,this.typeRefEncoder.toUint8Array()),YC(e,this.lenEncoder.toUint8Array()),qC(e,FC(this.restEncoder)),FC(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){KC(this.restEncoder,e)}writeBuf(e){YC(this.restEncoder,e)}writeJSON(e){KC(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const FN=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{hj(t,n)>e&&r.set(n,e)})),uj(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),$C(e.restEncoder,r.size),pC(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([n,r])=>{((e,t,n,r)=>{r=wC(r,t[0].id.clock);const o=pj(t,r);$C(e.restEncoder,t.length-o),e.writeClient(n),$C(e.restEncoder,r);const s=t[o];s.write(e,r-s.id.clock);for(let i=o+1;i<t.length;i++)t[i].write(e,0)})(e,t.clients.get(n),n,r)}))},BN=(e,t,n,r=new ON(e))=>Ej(t,(e=>{e.local=!1;let t=!1;const n=e.doc,o=n.store,s=((e,t)=>{const n=lC(),r=fE(e.restDecoder);for(let o=0;o<r;o++){const r=fE(e.restDecoder),o=new Array(r),s=e.readClient();let i=fE(e.restDecoder);n.set(s,{i:0,refs:o});for(let n=0;n<r;n++){const r=e.readInfo();switch(31&r){case 0:{const t=e.readLen();o[n]=new B_(QN(s,i),t),i+=t;break}case 10:{const t=fE(e.restDecoder);o[n]=new pI(QN(s,i),t),i+=t;break}default:{const a=!(192&r),l=new uI(QN(s,i),null,(r&EC)===EC?e.readLeftID():null,null,(r&CC)===CC?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,!a||32&~r?null:e.readString(),hI(e,r));o[n]=l,i+=l.length}}}}return n})(r,n),i=((e,t,n)=>{const r=[];let o=pC(n.keys()).sort(((e,t)=>e-t));if(0===o.length)return null;const s=()=>{if(0===o.length)return null;let e=n.get(o[o.length-1]);for(;e.refs.length===e.i;){if(o.pop(),!(o.length>0))return null;e=n.get(o[o.length-1])}return e};let i=s();if(null===i)return null;const a=new dj,l=new Map,c=(e,t)=>{const n=l.get(e);(null==n||n>t)&&l.set(e,t)};let d=i.refs[i.i++];const u=new Map,h=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,a.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):a.clients.set(t,[e]),o=o.filter((e=>e!==t))}r.length=0};for(;;){if(d.constructor!==pI){const o=dC(u,d.id.client,(()=>hj(t,d.id.client)))-d.id.clock;if(o<0)r.push(d),c(d.id.client,d.id.clock-1),h();else{const s=d.getMissing(e,t);if(null!==s){r.push(d);const e=n.get(s)||{refs:[],i:0};if(e.refs.length!==e.i){d=e.refs[e.i++];continue}c(s,hj(t,s)),h()}else(0===o||o<d.length)&&(d.integrate(e,o),u.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(null!==i&&i.i<i.refs.length)d=i.refs[i.i++];else{if(i=s(),null===i)break;d=i.refs[i.i++]}}if(a.clients.size>0){const e=new zN;return FN(e,a,new Map),$C(e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null})(e,o,s),a=o.pendingStructs;if(a){for(const[e,n]of a.missing)if(n<hj(o,e)){t=!0;break}if(i){for(const[e,t]of i.missing){const n=a.missing.get(e);(null==n||n>t)&&a.missing.set(e,t)}a.update=Oj([a.update,i.update])}}else o.pendingStructs=i;const l=_N(r,e,o);if(o.pendingDs){const t=new ON(dE(o.pendingDs));fE(t.restDecoder);const n=_N(t,e,o);o.pendingDs=l&&n?Oj([l,n]):l||n}else o.pendingDs=l;if(t){const t=o.pendingStructs.update;o.pendingStructs=null,UN(e.doc,t)}}),n,!1),UN=(e,t,n,r=ON)=>{const o=dE(t);BN(o,e,n,new r(o))},$N=(e,t=new Uint8Array([0]),n=new zN)=>{((e,t,n=new Map)=>{FN(e,t.store,n),NN(e,EN(t.store))})(n,e,VN(t));const r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(Rj(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===PN)return Mj(r.map(((e,t)=>0===t?e:Fj(e))));if(n.constructor===zN)return Oj(r)}return r[0]},VN=e=>(e=>{const t=new Map,n=fE(e.restDecoder);for(let r=0;r<n;r++){const n=fE(e.restDecoder),r=fE(e.restDecoder);t.set(n,r)}return t})(new TN(dE(e))),HN=(e,t)=>($C(e.restEncoder,t.size),pC(t.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{$C(e.restEncoder,t),$C(e.restEncoder,n)})),e),WN=(e,t=new LN)=>(e instanceof Map?HN(t,e):((e,t)=>{HN(e,uj(t.store))})(t,e),t.toUint8Array());class GN{constructor(){this.l=[]}}const qN=()=>new GN,YN=(e,t)=>e.l.push(t),JN=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},XN=(e,t,n)=>BE(e.l,[t,n]);class KN{constructor(e,t){this.client=e,this.clock=t}}const ZN=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,QN=(e,t)=>new KN(e,t),ej=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw iE()},tj=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class nj{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}const rj=e=>{const t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),null!=e.assoc&&(t.assoc=e.assoc),t},oj=e=>new nj(null==e.type?null:QN(e.type.client,e.type.clock),e.tname??null,null==e.item?null:QN(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class sj{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const ij=(e,t,n)=>{let r=null,o=null;return null===e._item?o=ej(e):r=QN(e._item.id.client,e._item.id.clock),new nj(r,o,t,n)},aj=(e,t,n=!0)=>{const r=t.store,o=e.item,s=e.type,i=e.tname,a=e.assoc;let l=null,c=0;if(null!==o){if(hj(r,o.client)<=o.clock)return null;const e=n?iI(r,o):((e,t)=>{const n=mj(e,t);return{item:n,diff:t.clock-n.id.clock}})(r,o),t=e.item;if(!(t instanceof uI))return null;if(l=t.parent,null===l._item||!l._item.deleted){c=t.deleted||!t.countable?0:e.diff+(a>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==i)l=t.get(i);else{if(null===s)throw iE();{if(hj(r,s.client)<=s.clock)return null;const{item:e}=n?iI(r,s):{item:mj(r,s)};if(!(e instanceof uI&&e.content instanceof sI))return null;l=e.content.type}}c=a>=0?l._length:0}return((e,t,n=0)=>new sj(e,t,n))(l,c,e.assoc)},lj=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!wN(t.ds,e.id),cj=(e,t)=>{const n=dC(e.meta,cj,uC),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<hj(r,n)&&yj(e,QN(n,t))})),vN(e,t.ds,(e=>{})),n.add(t))};class dj{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const uj=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},hj=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},fj=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw iE()}n.push(t)},pj=(e,t)=>{let n=0,r=e.length-1,o=e[r],s=o.id.clock;if(s===t)return r;let i=bC(t/(s+o.length-1)*r);for(;n<=r;){if(o=e[i],s=o.id.clock,s<=t){if(t<s+o.length)return i;n=i+1}else r=i-1;i=bC((n+r)/2)}throw iE()},mj=(e,t)=>{const n=e.clients.get(t.client);return n[pj(n,t.clock)]},gj=(e,t,n)=>{const r=pj(t,n),o=t[r];return o.id.clock<n&&o instanceof uI?(t.splice(r+1,0,lI(e,o,n-o.id.clock)),r+1):r},yj=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[gj(e,n,t.clock)]},bj=(e,t,n)=>{const r=t.clients.get(n.client),o=pj(r,n.clock),s=r[o];return n.clock!==s.id.clock+s.length-1&&s.constructor!==B_&&r.splice(o+1,0,lI(e,s,n.clock-s.id.clock+1)),s},xj=(e,t,n,r,o)=>{if(0===r)return;const s=n+r;let i,a=gj(e,t,n);do{i=t[a++],s<i.id.clock+i.length&&gj(e,t,s),o(i)}while(a<t.length&&t[a].id.clock<s)};class vj{constructor(e,t,n){this.doc=e,this.deleteSet=new xN,this.beforeState=uj(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const wj=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1})(t.afterState,((e,n)=>t.beforeState.get(n)!==e)))&&(kN(t.deleteSet),((e,t)=>{FN(e,t.doc.store,t.beforeState)})(e,t),NN(e,t.deleteSet),!0),kj=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&dC(e.changed,t,uC).add(n)},Sj=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=e[--o-1])n instanceof uI&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const s=t-o;return s&&e.splice(t+1-s,s),s},Cj=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,s=n.deleteSet,i=n._mergeStructs;try{kN(s),n.afterState=uj(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),XN(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),BE(e,[]),n._needFormattingCleanup&&I_(n)}finally{r.gc&&((e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const s=o[r],i=s.clock+s.len;for(let r=pj(e,s.clock),o=e[r];r<e.length&&o.id.clock<i;o=e[++r]){const o=e[r];if(s.clock+s.len<=o.id.clock)break;o instanceof uI&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}})(s,o,r.gcFilter),((e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=vC(r.length-1,1+pj(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+Sj(r,e)}}))})(s,o),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=wC(pj(e,r),1);for(let t=e.length-1;t>=n;)t-=1+Sj(e,t)}}));for(let e=i.length-1;e>=0;e--){const{client:t,clock:n}=i[e].id,r=o.clients.get(t),s=pj(r,n);s+1<r.length&&Sj(r,s+1)>1||s>0&&Sj(r,s)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(((...e)=>{console.log(...fN(e)),mN.forEach((t=>t.print(e)))})(dN,rN,"[yjs] ",oN,lN,"Changed the client-id because another client seems to be using it."),r.clientID=IN()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new PN;wj(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new zN;wj(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),c.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Cj(e,t+1)}}},Ej=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let s=!1,i=null;null===e._transaction&&(s=!0,e._transaction=new vj(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{i=t(e._transaction)}finally{if(s){const t=e._transaction===o[0];e._transaction=null,t&&Cj(o,0)}}return i};class Nj{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const jj=(e,t,n)=>{vN(e,n.deletions,(e=>{e instanceof uI&&t.scope.some((t=>tj(t,e)))&&aI(e,!1)}))},_j=(e,t,n)=>{let r=null;const o=e.doc,s=e.scope;Ej(o,(n=>{for(;t.length>0&&null===e.currStackItem;){const r=o.store,i=t.pop(),a=new Set,l=[];let c=!1;vN(n,i.insertions,(e=>{if(e instanceof uI){if(null!==e.redone){let{item:t,diff:o}=iI(r,e.id);o>0&&(t=yj(n,QN(t.id.client,t.id.clock+o))),e=t}!e.deleted&&s.some((t=>tj(t,e)))&&l.push(e)}})),vN(n,i.deletions,(e=>{e instanceof uI&&s.some((t=>tj(t,e)))&&!wN(i.insertions,e.id)&&a.add(e)})),a.forEach((t=>{c=null!==dI(n,t,a,i.insertions,e.ignoreRemoteMapChanges,e)||c}));for(let t=l.length-1;t>=0;t--){const r=l[t];e.deleteFilter(r)&&(r.delete(n),c=!0)}e.currStackItem=c?i:null}n.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),r=n}),e);const i=e.currStackItem;if(null!=i){const t=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:i,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return i};class Ij extends gC{constructor(e,{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:r=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:i=(mC(e)?e[0].doc:e.doc)}={}){super(),this.scope=[],this.doc=i,this.addToScope(e),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some((t=>e.changedParentTypes.has(t)))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const o=new xN;e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0,s=t-r;s>0&&CN(o,n,r,s)}));const s=jE();let i=!1;if(this.lastChange>0&&s-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=SN([t.deletions,e.deleteSet]),t.insertions=SN([t.insertions,o])}else r.push(new Nj(e.deleteSet,o)),i=!0;t||n||(this.lastChange=s),vN(e,e.deleteSet,(e=>{e instanceof uI&&this.scope.some((t=>tj(t,e)))&&aI(e,!0)}));const a=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];i?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(e){(e=mC(e)?e:[e]).forEach((e=>{this.scope.every((t=>t!==e))&&(e.doc!==this.doc&&pN("[yjs#509] Not same Y.Doc"),this.scope.push(e))}))}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((n=>{e&&(this.undoStack.forEach((e=>jj(n,this,e))),this.undoStack=[]),t&&(this.redoStack.forEach((e=>jj(n,this,e))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=_j(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=_j(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class Aj{constructor(e,t){this.gen=function*(e){const t=fE(e.restDecoder);for(let n=0;n<t;n++){const t=fE(e.restDecoder),n=e.readClient();let r=fE(e.restDecoder);for(let o=0;o<t;o++){const t=e.readInfo();if(10===t){const t=fE(e.restDecoder);yield new pI(QN(n,r),t),r+=t}else if(31&t){const o=!(192&t),s=new uI(QN(n,r),null,(t&EC)===EC?e.readLeftID():null,null,(t&CC)===CC?e.readRightID():null,o?e.readParentInfo()?e.readString():e.readLeftID():null,!o||32&~t?null:e.readString(),hI(e,t));yield s,r+=s.length}else{const t=e.readLen();yield new B_(QN(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===pI);return this.curr}}class Tj{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Mj=e=>Oj(e,MN,PN),Dj=(e,t)=>{if(e.constructor===B_){const{client:n,clock:r}=e.id;return new B_(QN(n,r+t),e.length-t)}if(e.constructor===pI){const{client:n,clock:r}=e.id;return new pI(QN(n,r+t),e.length-t)}{const n=e,{client:r,clock:o}=n.id;return new uI(QN(r,o+t),null,QN(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Oj=(e,t=ON,n=zN)=>{if(1===e.length)return e[0];const r=e.map((e=>new t(dE(e))));let o=r.map((e=>new Aj(e,!0))),s=null;const i=new n,a=new Tj(i);for(;o=o.filter((e=>null!==e.curr)),o.sort(((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===pI?1:-1:n}return t.curr.id.client-e.curr.id.client})),0!==o.length;){const e=o[0],t=e.curr.id.client;if(null!==s){let n=e.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=s.struct.id.clock+s.struct.length&&n.id.client>=s.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>s.struct.id.clock+s.struct.length)continue;if(t!==s.struct.id.client)Lj(a,s.struct,s.offset),s={struct:n,offset:0},e.next();else if(s.struct.id.clock+s.struct.length<n.id.clock)if(s.struct.constructor===pI)s.struct.length=n.id.clock+n.length-s.struct.id.clock;else{Lj(a,s.struct,s.offset);const e=n.id.clock-s.struct.id.clock-s.struct.length;s={struct:new pI(QN(t,s.struct.id.clock+s.struct.length),e),offset:0}}else{const t=s.struct.id.clock+s.struct.length-n.id.clock;t>0&&(s.struct.constructor===pI?s.struct.length-=t:n=Dj(n,t)),s.struct.mergeWith(n)||(Lj(a,s.struct,s.offset),s={struct:n,offset:0},e.next())}}else s={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===s.struct.id.clock+s.struct.length&&n.constructor!==pI;n=e.next())Lj(a,s.struct,s.offset),s={struct:n,offset:0}}null!==s&&(Lj(a,s.struct,s.offset),s=null),zj(a);const l=r.map((e=>jN(e))),c=SN(l);return NN(i,c),i.toUint8Array()},Rj=(e,t,n=ON,r=zN)=>{const o=VN(t),s=new r,i=new Tj(s),a=new n(dE(e)),l=new Aj(a,!1);for(;l.curr;){const e=l.curr,t=e.id.client,n=o.get(t)||0;if(l.curr.constructor!==pI)if(e.id.clock+e.length>n)for(Lj(i,e,wC(n-e.id.clock,0)),l.next();l.curr&&l.curr.id.client===t;)Lj(i,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===t&&l.curr.id.clock+l.curr.length<=n;)l.next();else l.next()}zj(i);const c=jN(a);return NN(s,c),s.toUint8Array()},Pj=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:FC(e.encoder.restEncoder)}),e.encoder.restEncoder=LC(),e.written=0)},Lj=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Pj(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),$C(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},zj=e=>{Pj(e);const t=e.encoder.restEncoder;$C(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];$C(t,r.written),qC(t,r.restEncoder)}},Fj=e=>((e,t,n,r)=>{const o=new n(dE(e)),s=new Aj(o,!1),i=new r,a=new Tj(i);for(let c=s.curr;null!==c;c=s.next())Lj(a,t(c),0);zj(a);const l=jN(o);return NN(i,l),i.toUint8Array()})(e,UE,ON,PN),Bj="You must not compute changes after the event-handler fired.";class Uj{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=$j(this.currentTarget,this.target))}deletes(e){return wN(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw oE(Bj);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let o,s;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",s=hC(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",s=hC(e.content.getContent())):(o="add",s=void 0)}else{if(!this.deletes(r))return;o="delete",s=hC(r.content.getContent())}e.set(n,{action:o,oldValue:s})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw oE(Bj);const t=this.target,n=uC(),r=uC(),o=[];e={added:n,deleted:r,delta:o,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const s=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(s(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(s(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):(null!==e&&void 0!==e.retain||(s(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&s()}this._changes=e}return e}}const $j=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},Vj=()=>{pN("Invalid access: Add Yjs type to a document before reading data.")};let Hj=0;class Wj{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=Hj++}}const Gj=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Hj++},qj=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>xC(t-e.index)<xC(t-n.index)?e:n));let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=Hj++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&xC(n.index-o)<r.parent.length/80?(Gj(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return Gj(r,t,n),r}{const r=new Wj(t,n);return e.push(r),r}})(e._searchMarker,r,o)},Yj=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=wC(t,o.index+n))}},Jj=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;dC(o,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;XN(r._eH,n,t)};class Xj{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=qN(),this._dEH=qN(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw sE()}clone(){throw sE()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){YN(this._eH,e)}observeDeep(e){YN(this._dEH,e)}unobserve(e){JN(this._eH,e)}unobserveDeep(e){JN(this._dEH,e)}toJSON(){}}const Kj=(e,t,n)=>{e.doc??Vj(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let s=e._start;for(;null!==s&&r>0;){if(s.countable&&!s.deleted){const e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)o.push(e[n]),r--;t=0}}s=s.right}return o},Zj=e=>{e.doc??Vj();const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},Qj=(e,t)=>{let n=0,r=e._start;for(e.doc??Vj();null!==r;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let r=0;r<o.length;r++)t(o[r],n++,e)}r=r.right}},e_=(e,t)=>{const n=[];return Qj(e,((r,o)=>{n.push(t(r,o,e))})),n},t_=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},n_=(e,t)=>{e.doc??Vj();const n=qj(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},r_=(e,t,n,r)=>{let o=n;const s=e.doc,i=s.clientID,a=s.store,l=null===n?t._start:n.right;let c=[];const d=()=>{c.length>0&&(o=new uI(QN(i,hj(a,i)),o,o&&o.lastId,l,l&&l.id,t,null,new J_(c)),o.integrate(e,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(d(),n.constructor){case Uint8Array:case ArrayBuffer:o=new uI(QN(i,hj(a,i)),o,o&&o.lastId,l,l&&l.id,t,null,new U_(new Uint8Array(n))),o.integrate(e,0);break;case AN:o=new uI(QN(i,hj(a,i)),o,o&&o.lastId,l,l&&l.id,t,null,new H_(n)),o.integrate(e,0);break;default:if(!(n instanceof Xj))throw new Error("Unexpected content type in insert operation");o=new uI(QN(i,hj(a,i)),o,o&&o.lastId,l,l&&l.id,t,null,new sI(n)),o.integrate(e,0)}}})),d()},o_=()=>oE("Length exceeded!"),s_=(e,t,n,r)=>{if(n>t._length)throw o_();if(0===n)return t._searchMarker&&Yj(t._searchMarker,n,r.length),r_(e,t,null,r);const o=n,s=qj(t,n);let i=t._start;for(null!==s&&(i=s.p,0===(n-=s.index)&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));null!==i;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&yj(e,QN(i.id.client,i.id.clock+n));break}n-=i.length}return t._searchMarker&&Yj(t._searchMarker,o,r.length),r_(e,t,i,r)},i_=(e,t,n,r)=>{if(0===r)return;const o=n,s=r,i=qj(t,n);let a=t._start;for(null!==i&&(a=i.p,n-=i.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&yj(e,QN(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&null!==a;)a.deleted||(r<a.length&&yj(e,QN(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw o_();t._searchMarker&&Yj(t._searchMarker,o,-s+r)},a_=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},l_=(e,t,n,r)=>{const o=t._map.get(n)||null,s=e.doc,i=s.clientID;let a;if(null==r)a=new J_([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new J_([r]);break;case Uint8Array:a=new U_(r);break;case AN:a=new H_(r);break;default:if(!(r instanceof Xj))throw new Error("Unexpected content type");a=new sI(r)}new uI(QN(i,hj(s.store,i)),o,o&&o.lastId,null,null,t,n,a).integrate(e,0)},c_=(e,t)=>{e.doc??Vj();const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},d_=e=>{const t={};return e.doc??Vj(),e._map.forEach(((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},u_=(e,t)=>{e.doc??Vj();const n=e._map.get(t);return void 0!==n&&!n.deleted},h_=e=>{return e.doc??Vj(),t=e._map.entries(),n=e=>!e[1].deleted,gN((()=>{let e;do{e=t.next()}while(!e.done&&!n(e.value));return e}));var t,n};class f_ extends Uj{}class p_ extends Xj{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new p_;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new p_}clone(){const e=new p_;return e.insert(0,this.toArray().map((e=>e instanceof Xj?e.clone():e))),e}get length(){return this.doc??Vj(),this._length}_callObserver(e,t){super._callObserver(e,t),Jj(this,e,new f_(this,e))}insert(e,t){null!==this.doc?Ej(this.doc,(n=>{s_(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?Ej(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;r_(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Ej(this.doc,(n=>{i_(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return n_(this,e)}toArray(){return Zj(this)}slice(e=0,t=this.length){return Kj(this,e,t)}toJSON(){return this.map((e=>e instanceof Xj?e.toJSON():e))}map(e){return e_(this,e)}forEach(e){Qj(this,e)}[Symbol.iterator](){return t_(this)}_write(e){e.writeTypeRef(Z_)}}class m_ extends Uj{constructor(e,t,n){super(e,t),this.keysChanged=n}}class g_ extends Xj{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new g_}clone(){const e=new g_;return this.forEach(((t,n)=>{e.set(n,t instanceof Xj?t.clone():t)})),e}_callObserver(e,t){Jj(this,e,new m_(this,e,t))}toJSON(){this.doc??Vj();const e={};return this._map.forEach(((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof Xj?r.toJSON():r}})),e}get size(){return[...h_(this)].length}keys(){return yN(h_(this),(e=>e[0]))}values(){return yN(h_(this),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return yN(h_(this),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){this.doc??Vj(),this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Ej(this.doc,(t=>{a_(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Ej(this.doc,(n=>{l_(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return c_(this,e)}has(e){return u_(this,e)}clear(){null!==this.doc?Ej(this.doc,(e=>{this.forEach((function(t,n,r){a_(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(Q_)}}const y_=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&((e,t)=>e===t||PE(e)===PE(t)&&((e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0})(e,((e,n)=>(void 0!==e||LE(t,n))&&t[n]===e)))(e,t);class b_{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){if(null===this.right&&iE(),this.right.content.constructor===G_)this.right.deleted||k_(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const x_=(e,t,n)=>{for(;null!==t.right&&n>0;){if(t.right.content.constructor===G_)t.right.deleted||k_(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&yj(e,QN(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},v_=(e,t,n,r)=>{const o=new Map,s=r?qj(t,n):null;if(s){const t=new b_(s.p.left,s.p,s.index,o);return x_(e,t,n-s.index)}{const r=new b_(null,t._start,0,o);return x_(e,r,n)}},w_=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===G_&&y_(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,s=o.clientID;r.forEach(((r,i)=>{const a=n.left,l=n.right,c=new uI(QN(s,hj(o.store,s)),a,a&&a.lastId,l,l&&l.id,t,null,new G_(i,r));c.integrate(e,0),n.right=c,n.forward()}))},k_=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},S_=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===G_&&y_(t[e.right.content.key]??null,e.right.content.value));)e.forward()},C_=(e,t,n,r)=>{const o=e.doc,s=o.clientID,i=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!y_(c,l)){i.set(a,c);const{left:r,right:d}=n;n.right=new uI(QN(s,hj(o.store,s)),r,r&&r.lastId,d,d&&d.id,t,null,new G_(a,l)),n.right.integrate(e,0),n.forward()}}return i},E_=(e,t,n,r,o)=>{n.currentAttributes.forEach(((e,t)=>{void 0===o[t]&&(o[t]=null)}));const s=e.doc,i=s.clientID;S_(n,o);const a=C_(e,t,n,o),l=r.constructor===String?new X_(r):r instanceof Xj?new sI(r):new W_(r);let{left:c,right:d,index:u}=n;t._searchMarker&&Yj(t._searchMarker,n.index,l.getLength()),d=new uI(QN(i,hj(s.store,i)),c,c&&c.lastId,d,d&&d.id,t,null,l),d.integrate(e,0),n.right=d,n.index=u,n.forward(),w_(e,t,n,a)},N_=(e,t,n,r,o)=>{const s=e.doc,i=s.clientID;S_(n,o);const a=C_(e,t,n,o);e:for(;null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===G_));){if(!n.right.deleted)switch(n.right.content.constructor){case G_:{const{key:t,value:s}=n.right.content,i=o[t];if(void 0!==i){if(y_(i,s))a.delete(t);else{if(0===r)break e;a.set(t,s)}n.right.delete(e)}else n.currentAttributes.set(t,s);break}default:r<n.right.length&&yj(e,QN(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new uI(QN(i,hj(s.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new X_(o)),n.right.integrate(e,0),n.forward()}w_(e,t,n,a)},j_=(e,t,n,r,o)=>{let s=t;const i=lC();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===G_){const e=s.content;i.set(e.key,e)}s=s.right}let a=0,l=!1;for(;t!==s;){if(n===t&&(l=!0),!t.deleted){const n=t.content;switch(n.constructor){case G_:{const{key:s,value:c}=n,d=r.get(s)??null;i.get(s)===n&&d!==c||(t.delete(e),a++,l||(o.get(s)??null)!==c||d===c||(null===d?o.delete(s):o.set(s,d))),l||t.deleted||k_(o,n);break}}}t=t.right}return a},__=e=>{let t=0;return Ej(e.doc,(n=>{let r=e._start,o=e._start,s=lC();const i=cC(s);for(;o;){if(!1===o.deleted)if(o.content.constructor===G_)k_(i,o.content);else t+=j_(n,r,o,s,i),s=cC(i),r=o;o=o.right}})),t},I_=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const s=e.beforeState.get(r)||0;o!==s&&xj(e,n.store.clients.get(r),s,o,(e=>{e.deleted||e.content.constructor!==G_||e.constructor===B_||t.add(e.parent)}))}Ej(n,(n=>{vN(e,e.deleteSet,(e=>{if(e instanceof B_||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===G_?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===G_){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)__(e)}))},A_=(e,t,n)=>{const r=n,o=cC(t.currentAttributes),s=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case sI:case W_:case X_:n<t.right.length&&yj(e,QN(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}s&&j_(e,s,t.right,o,t.currentAttributes);const i=(t.left||t.right).parent;return i._searchMarker&&Yj(i._searchMarker,t.index,-r+n),t};class T_ extends Uj{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Ej(e,(e=>{const n=new Map,r=new Map;let o=this.target._start,s=null;const i={};let a="",l=0,c=0;const d=()=>{if(null!==s){let e=null;switch(s){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof a||a.length>0)&&(e={insert:a},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),a="";break;case"retain":l>0&&(e={retain:l},(e=>{for(const t in e)return!1;return!0})(i)||(e.attributes=DE({},i))),l=0}e&&t.push(e),s=null}};for(;null!==o;){switch(o.content.constructor){case sI:case W_:this.adds(o)?this.deletes(o)||(d(),s="insert",a=o.content.getContent()[0],d()):this.deletes(o)?("delete"!==s&&(d(),s="delete"),c+=1):o.deleted||("retain"!==s&&(d(),s="retain"),l+=1);break;case X_:this.adds(o)?this.deletes(o)||("insert"!==s&&(d(),s="insert"),a+=o.content.str):this.deletes(o)?("delete"!==s&&(d(),s="delete"),c+=o.length):o.deleted||("retain"!==s&&(d(),s="retain"),l+=o.length);break;case G_:{const{key:t,value:a}=o.content;if(this.adds(o)){if(!this.deletes(o)){const l=n.get(t)??null;y_(l,a)?null!==a&&o.delete(e):("retain"===s&&d(),y_(a,r.get(t)??null)?delete i[t]:i[t]=a)}}else if(this.deletes(o)){r.set(t,a);const e=n.get(t)??null;y_(e,a)||("retain"===s&&d(),i[t]=e)}else if(!o.deleted){r.set(t,a);const n=i[t];void 0!==n&&(y_(n,a)?null!==n&&o.delete(e):("retain"===s&&d(),null===a?delete i[t]:i[t]=a))}o.deleted||("insert"===s&&d(),k_(n,o.content));break}}o=o.right}for(d();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class M_ extends Xj{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Vj(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(jJ){console.error(jJ)}this._pending=null}_copy(){return new M_}clone(){const e=new M_;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new T_(this,e,t);Jj(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Vj();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===X_&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Ej(this.doc,(n=>{const r=new b_(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const s=e[o];if(void 0!==s.insert){const i=t||"string"!=typeof s.insert||o!==e.length-1||null!==r.right||"\n"!==s.insert.slice(-1)?s.insert:s.insert.slice(0,-1);("string"!=typeof i||i.length>0)&&E_(n,this,r,i,s.attributes||{})}else void 0!==s.retain?N_(n,this,r,s.retain,s.attributes||{}):void 0!==s.delete&&A_(n,r,s.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){this.doc??Vj();const r=[],o=new Map,s=this.doc;let i="",a=this._start;function l(){if(i.length>0){const e={};let t=!1;o.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:i};t&&(n.attributes=e),r.push(n),i=""}}const c=()=>{for(;null!==a;){if(lj(a,e)||void 0!==t&&lj(a,t))switch(a.content.constructor){case X_:{const r=o.get("ychange");void 0===e||lj(a,e)?void 0===t||lj(a,t)?void 0!==r&&(l(),o.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.type||(l(),o.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.type||(l(),o.set("ychange",n?n("removed",a.id):{type:"removed"})),i+=a.content.str;break}case sI:case W_:{l();const e={insert:a.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach(((e,n)=>{t[n]=e}))}r.push(e);break}case G_:lj(a,e)&&(l(),k_(o,a.content))}a=a.right}l()};return e||t?Ej(s,(n=>{e&&cj(n,e),t&&cj(n,t),c()}),"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?Ej(r,(r=>{const o=v_(r,this,e,!n);n||(n={},o.currentAttributes.forEach(((e,t)=>{n[t]=e}))),E_(r,this,o,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n){const r=this.doc;null!==r?Ej(r,(r=>{const o=v_(r,this,e,!n);E_(r,this,o,t,n||{})})):this._pending.push((()=>this.insertEmbed(e,t,n||{})))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?Ej(n,(n=>{A_(n,v_(n,this,e,!0),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?Ej(r,(r=>{const o=v_(r,this,e,!1);null!==o.right&&N_(r,this,o,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?Ej(this.doc,(t=>{a_(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?Ej(this.doc,(n=>{l_(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return c_(this,e)}getAttributes(){return d_(this)}_write(e){e.writeTypeRef(eI)}}class D_{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Vj()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==R_&&t.constructor!==O_||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class O_ extends Xj{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new O_}clone(){const e=new O_;return e.insert(0,this.toArray().map((e=>e instanceof Xj?e.clone():e))),e}get length(){return this.doc??Vj(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new D_(this,e)}querySelector(e){e=e.toUpperCase();const t=new D_(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),pC(new D_(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){Jj(this,e,new P_(this,t,e))}toString(){return e_(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),Qj(this,(o=>{r.insertBefore(o.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?Ej(this.doc,(n=>{s_(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Ej(this.doc,(n=>{const r=e&&e instanceof Xj?e._item:e;r_(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw oE("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?Ej(this.doc,(n=>{i_(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return Zj(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return n_(this,e)}slice(e=0,t=this.length){return Kj(this,e,t)}forEach(e){Qj(this,e)}_write(e){e.writeTypeRef(nI)}}class R_ extends O_{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new R_(this.nodeName)}clone(){const e=new R_(this.nodeName);return((e,t)=>{for(const n in e)t(e[n],n)})(this.getAttributes(),((t,n)=>{"string"==typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof Xj?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const s in e)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?Ej(this.doc,(t=>{a_(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Ej(this.doc,(n=>{l_(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return c_(this,e)}hasAttribute(e){return u_(this,e)}getAttributes(e){return e?((e,t)=>{const n={};return e._map.forEach(((e,r)=>{let o=e;for(;null!==o&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;null!==o&&lj(o,t)&&(n[r]=o.content.getContent()[o.length-1])})),n})(this,e):d_(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),o=this.getAttributes();for(const s in o){const e=o[s];"string"==typeof e&&r.setAttribute(s,e)}return Qj(this,(o=>{r.appendChild(o.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(tI),e.writeKey(this.nodeName)}}class P_ extends Uj{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class L_ extends g_{constructor(e){super(),this.hookName=e}_copy(){return new L_(this.hookName)}clone(){const e=new L_(this.hookName);return this.forEach(((t,n)=>{e.set(n,t)})),e}toDOM(e=document,t={},n){const r=t[this.hookName];let o;return o=void 0!==r?r.createDom(this):document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(o,this),o}_write(e){e.writeTypeRef(rI),e.writeKey(this.hookName)}}class z_ extends M_{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new z_}clone(){const e=new z_;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((e=>{const t=[];for(const r in e.attributes){const n=[];for(const t in e.attributes[r])n.push({key:t,value:e.attributes[r][t]});n.sort(((e,t)=>e.key<t.key?-1:1)),t.push({nodeName:r,attrs:n})}t.sort(((e,t)=>e.nodeName<t.nodeName?-1:1));let n="";for(let r=0;r<t.length;r++){const e=t[r];n+=`<${e.nodeName}`;for(let t=0;t<e.attrs.length;t++){const r=e.attrs[t];n+=` ${r.key}="${r.value}"`}n+=">"}n+=e.insert;for(let r=t.length-1;r>=0;r--)n+=`</${t[r].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(oI)}}class F_{constructor(e,t){this.id=e,this.length=t}get deleted(){throw sE()}mergeWith(e){return!1}write(e,t,n){throw sE()}integrate(e,t){throw sE()}}class B_ extends F_{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),fj(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class U_{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new U_(this.content)}splice(e){throw sE()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class $_{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new $_(this.len)}splice(e){const t=new $_(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){CN(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const V_=(e,t)=>new AN({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class H_{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new H_(V_(this.doc.guid,this.opts))}splice(e){throw sE()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class W_{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new W_(this.embed)}splice(e){throw sE()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class G_{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new G_(this.key,this.value)}splice(e){throw sE()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class q_{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new q_(this.arr)}splice(e){const t=new q_(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const Y_="development"===YE("node_env");class J_{constructor(e){this.arr=e,Y_&&FE(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new J_(this.arr)}splice(e){const t=new J_(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class X_{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new X_(this.str)}splice(e){const t=new X_(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const K_=[e=>new p_,e=>new g_,e=>new M_,e=>new R_(e.readKey()),e=>new O_,e=>new L_(e.readKey()),e=>new z_],Z_=0,Q_=1,eI=2,tI=3,nI=4,rI=5,oI=6;class sI{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new sI(this.type._copy())}splice(e){throw sE()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const iI=(e,t)=>{let n,r=t,o=0;do{o>0&&(r=QN(r.client,r.clock+o)),n=mj(e,r),o=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof uI);return{item:n,diff:o}},aI=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},lI=(e,t,n)=>{const{client:r,clock:o}=t.id,s=new uI(QN(r,o+n),t,QN(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),null!==t.redone&&(s.redone=QN(t.redone.client,t.redone.clock+n)),t.right=s,null!==s.right&&(s.right.left=s),e._mergeStructs.push(s),null!==s.parentSub&&null===s.right&&s.parent._map.set(s.parentSub,s),t.length=n,s},cI=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1})(e,(e=>wN(e.deletions,t))),dI=(e,t,n,r,o,s)=>{const i=e.doc,a=i.store,l=i.clientID,c=t.redone;if(null!==c)return yj(e,c);let d,u=t.parent._item,h=null;if(null!==u&&!0===u.deleted){if(null===u.redone&&(!n.has(u)||null===dI(e,u,n,r,o,s)))return null;for(;null!==u.redone;)u=yj(e,u.redone)}const f=null===u?t.parent:u.content.type;if(null===t.parentSub){for(h=t.left,d=t;null!==h;){let t=h;for(;null!==t&&t.parent._item!==u;)t=null===t.redone?null:yj(e,t.redone);if(null!==t&&t.parent._item===u){h=t;break}h=h.left}for(;null!==d;){let t=d;for(;null!==t&&t.parent._item!==u;)t=null===t.redone?null:yj(e,t.redone);if(null!==t&&t.parent._item===u){d=t;break}d=d.right}}else if(d=null,t.right&&!o){for(h=t;null!==h&&null!==h.right&&(h.right.redone||wN(r,h.right.id)||cI(s.undoStack,h.right.id)||cI(s.redoStack,h.right.id));)for(h=h.right;h.redone;)h=yj(e,h.redone);if(h&&null!==h.right)return null}else h=f._map.get(t.parentSub)||null;const p=hj(a,l),m=QN(l,p),g=new uI(m,h,h&&h.lastId,d,d&&d.id,f,t.parentSub,t.content.copy());return t.redone=m,aI(g,!0),g.integrate(e,0),g};class uI extends F_{constructor(e,t,n,r,o,s,i,a){super(e,a.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=s,this.parentSub=i,this.redone=null,this.content=a,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=hj(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=hj(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===KN&&this.id.client!==this.parent.client&&this.parent.clock>=hj(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=bj(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=yj(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===B_||this.right&&this.right.constructor===B_)this.parent=null;else if(this.parent){if(this.parent.constructor===KN){const e=mj(t,this.parent);e.constructor===B_?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===uI&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===uI&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=bj(e,e.doc.store,QN(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),ZN(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(ZN(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(mj(e.doc.store,t.origin)))break;r.has(mj(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),fj(e.doc.store,this),this.content.integrate(e,this),kj(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new B_(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:QN(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&ZN(e.origin,this.lastId)&&this.right===e&&ZN(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),CN(e.deleteSet,this.id.client,this.id.clock,this.length),kj(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw iE();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[pj(r,t.id.clock)]=n})(e,this,new B_(this.id,this.length)):this.content=new $_(this.length)}write(e,t){const n=t>0?QN(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,s=31&this.content.getRef()|(null===n?0:EC)|(null===r?0:CC)|(null===o?0:32);if(e.writeInfo(s),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=ej(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===KN?(e.writeParentInfo(!1),e.writeLeftID(t)):iE();null!==o&&e.writeString(o)}this.content.write(e,t)}}const hI=(e,t)=>fI[31&t](e),fI=[()=>{iE()},e=>new $_(e.readLen()),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new q_(n)},e=>new U_(e.readBuf()),e=>new X_(e.readString()),e=>new W_(e.readJSON()),e=>new G_(e.readKey(),e.readJSON()),e=>new sI(K_[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new J_(n)},e=>new H_(V_(e.readString(),e.readAny())),()=>{iE()}];class pI extends F_{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){iE()}write(e,t){e.writeInfo(10),$C(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const mI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},gI="__ $YJS$ __";!0===mI[gI]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),mI[gI]=!0;class yI{constructor(e,t){this.yanchor=e,this.yhead=t}toJSON(){return{yanchor:rj(this.yanchor),yhead:rj(this.yhead)}}static fromJSON(e){return new yI(oj(e.yanchor),oj(e.yhead))}}class bI{constructor(e,t){this.ytext=e,this.awareness=t,this.undoManager=new Ij(e)}toYPos(e,t=0){return((e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return ij(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return ij(e,QN(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return ij(e,r.lastId,n);r=r.right}return ij(e,null,n)})(this.ytext,e,t)}fromYPos(e){const t=aj(oj(e),this.ytext.doc);if(null==t||t.type!==this.ytext)throw new Error("[y-codemirror] The position you want to retrieve was created by a different document");return{pos:t.index,assoc:t.assoc}}toYRange(e){const t=e.assoc,n=this.toYPos(e.anchor,t),r=this.toYPos(e.head,t);return new yI(n,r)}fromYRange(e){const t=this.fromYPos(e.yanchor),n=this.fromYPos(e.yhead);return t.pos===n.pos?Sn.cursor(n.pos,n.assoc):Sn.range(t.pos,n.pos)}}const xI=hr.define({combine:e=>e[e.length-1]}),vI=pr.define();const wI=En.fromClass(class{constructor(e){this.view=e,this.conf=e.state.facet(xI),this._observer=(t,n)=>{if(n.origin!==this.conf){const n=t.delta,r=[];let o=0;for(let e=0;e<n.length;e++){const t=n[e];null!=t.insert?r.push({from:o,to:o,insert:t.insert}):null!=t.delete?(r.push({from:o,to:o+t.delete,insert:""}),o+=t.delete):o+=t.retain}e.dispatch({changes:r,annotations:[vI.of(this.conf)]})}},this._ytext=this.conf.ytext,this._ytext.observe(this._observer)}update(e){if(!e.docChanged||e.transactions.length>0&&e.transactions[0].annotation(vI)===this.conf)return;const t=this.conf.ytext;t.doc.transact((()=>{let n=0;e.changes.iterChanges(((e,r,o,s,i)=>{const a=i.sliceString(0,i.length,"\n");e!==r&&t.delete(e+n,r-e),a.length>0&&t.insert(e+n,a),n+=a.length-(r-e)}))}),this.conf)}destroy(){this._ytext.unobserve(this._observer)}});class kI{constructor(e){this.undoManager=e}addTrackedOrigin(e){this.undoManager.addTrackedOrigin(e)}removeTrackedOrigin(e){this.undoManager.removeTrackedOrigin(e)}undo(){return null!=this.undoManager.undo()}redo(){return null!=this.undoManager.redo()}}const SI=hr.define({combine:e=>e[e.length-1]});const CI=En.fromClass(class{constructor(e){this.view=e,this.conf=e.state.facet(SI),this._undoManager=this.conf.undoManager,this.syncConf=e.state.facet(xI),this._beforeChangeSelection=null,this._mux=(()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}})(),this._onStackItemAdded=({stackItem:e,changedParentTypes:t})=>{t.has(this.syncConf.ytext)&&this._beforeChangeSelection&&!e.meta.has(this)&&e.meta.set(this,this._beforeChangeSelection)},this._onStackItemPopped=({stackItem:t})=>{const n=t.meta.get(this);if(n){const t=this.syncConf.fromYRange(n);e.dispatch(e.state.update({selection:t,effects:[Cn.scrollIntoView(t)]})),this._storeSelection()}},this._storeSelection=()=>{this._beforeChangeSelection=this.syncConf.toYRange(this.view.state.selection.main)},this._undoManager.on("stack-item-added",this._onStackItemAdded),this._undoManager.on("stack-item-popped",this._onStackItemPopped),this._undoManager.addTrackedOrigin(this.syncConf)}update(e){!e.selectionSet||0!==e.transactions.length&&e.transactions[0].annotation(vI)===this.syncConf||this._storeSelection()}destroy(){this._undoManager.off("stack-item-added",this._onStackItemAdded),this._undoManager.off("stack-item-popped",this._onStackItemPopped),this._undoManager.removeTrackedOrigin(this.syncConf)}}),EI=(e,t,{undoManager:n=new Ij(e)}={})=>{const r=new bI(e,t),o=[xI.of(r),wI];return!1!==n&&o.push(SI.of(new kI(n)),CI,Cn.domEventHandlers({beforeinput:(e,t)=>"historyUndo"===e.inputType?(({state:e,dispatch:t})=>e.facet(SI).undo()||!0)(t):"historyRedo"===e.inputType&&(({state:e,dispatch:t})=>e.facet(SI).redo()||!0)(t)})),o},NI=new Map;const jI="undefined"==typeof BroadcastChannel?class{constructor(e){var t;this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:QE(t.newValue||"")}),t=this._onChange,TE||addEventListener("storage",t)}postMessage(e){ME.setItem(this.room,ZE(new Uint8Array(e)))}close(){var e;e=this._onChange,TE||removeEventListener("storage",e)}}:BroadcastChannel,_I=e=>dC(NI,e,(()=>{const t=uC(),n=new jI(e);return n.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:n,subs:t}})),II=(e,t,n=null)=>{const r=_I(e);r.bc.postMessage(t),r.subs.forEach((e=>e(t,n)))},AI=(e,t)=>{$C(e,0);const n=(e=>WN(e,new RN))(t);YC(e,n)},TI=(e,t,n)=>{$C(e,1),YC(e,((e,t)=>$N(e,t,new PN))(t,n))},MI=(e,t,n)=>{try{((e,t,n)=>{UN(e,t,n,MN)})(t,uE(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},DI=MI,OI=(e,t,n,r)=>{const o=fE(e);switch(o){case 0:((e,t,n)=>{TI(t,n,uE(e))})(e,t,n);break;case 1:MI(e,n,r);break;case 2:DI(e,n,r);break;default:throw new Error("Unknown message type")}return o},RI=3e4;class PI extends yC{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=jE();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&RI<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)})),t.length>0&&LI(this,t,"timeout")}),bC(3e3)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,o=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:jE()});const s=[],i=[],a=[],l=[];null===e?l.push(t):null==o?null!=e&&s.push(t):(i.push(t),$E(o,e)||a.push(t)),(s.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:s,updated:a,removed:l},"local"]),this.emit("update",[{added:s,updated:i,removed:l},"local"])}setLocalStateField(e,t){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const LI=(e,t,n)=>{const r=[];for(let o=0;o<t.length;o++){const n=t[o];if(e.states.has(n)){if(e.states.delete(n),n===e.clientID){const t=e.meta.get(n);e.meta.set(n,{clock:t.clock+1,lastUpdated:jE()})}r.push(n)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},zI=(e,t,n=e.states)=>{const r=t.length,o=LC();$C(o,r);for(let s=0;s<r;s++){const r=t[s],i=n.get(r)||null,a=e.meta.get(r).clock;$C(o,r),$C(o,a),GC(o,JSON.stringify(i))}return FC(o)},FI=[];FI[0]=(e,t,n,r,o)=>{$C(e,0);const s=OI(t,e,n.doc,n);r&&1===s&&!n.synced&&(n.synced=!0)},FI[3]=(e,t,n,r,o)=>{$C(e,1),YC(e,zI(n.awareness,Array.from(n.awareness.getStates().keys())))},FI[1]=(e,t,n,r,o)=>{((e,t,n)=>{const r=dE(t),o=jE(),s=[],i=[],a=[],l=[],c=fE(r);for(let d=0;d<c;d++){const t=fE(r);let n=fE(r);const c=JSON.parse(mE(r)),d=e.meta.get(t),u=e.states.get(t),h=void 0===d?0:d.clock;(h<n||h===n&&null===c&&e.states.has(t))&&(null===c?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,c),e.meta.set(t,{clock:n,lastUpdated:o}),void 0===d&&null!==c?s.push(t):void 0!==d&&null===c?l.push(t):null!==c&&($E(c,u)||a.push(t),i.push(t)))}(s.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:s,updated:a,removed:l},n]),(s.length>0||i.length>0||l.length>0)&&e.emit("update",[{added:s,updated:i,removed:l},n])})(n.awareness,uE(t),n)},FI[2]=(e,t,n,r,o)=>{((e,t,n)=>{0===fE(e)&&n(t,mE(e))})(t,n.doc,((e,t)=>BI(n,t)))};const BI=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),UI=(e,t,n)=>{const r=dE(t),o=LC(),s=fE(r),i=e.messageHandlers[s];return i?i(o,r,e,n,s):console.error("Unable to compute message"),o},$I=(e,t,n)=>{t===e.ws&&(e.emit("connection-close",[n,e]),e.ws=null,t.close(),e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,LI(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(VI,vC(100*kC(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e))},VI=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url,e.protocols);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=jE();const r=UI(e,new Uint8Array(n.data),!0);zC(r)>1&&t.send(FC(r))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=n=>{$I(e,t,n)},t.onopen=()=>{e.wsLastMessageReceived=jE(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const n=LC();if($C(n,0),AI(n,e.doc),t.send(FC(n)),null!==e.awareness.getLocalState()){const n=LC();$C(n,1),YC(n,zI(e.awareness,[e.doc.clientID])),t.send(FC(n))}},e.emit("status",[{status:"connecting"}])}},HI=(e,t)=>{const n=e.ws;e.wsconnected&&n&&n.readyState===n.OPEN&&n.send(t),e.bcconnected&&II(e.bcChannel,t,e)};class WI extends gC{constructor(e,t,n,{connect:r=!0,awareness:o=new PI(n),params:s={},protocols:i=[],WebSocketPolyfill:a=WebSocket,resyncInterval:l=-1,maxBackoffTime:c=2500,disableBc:d=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+t,this.maxBackoffTime=c,this.params=s,this.protocols=i,this.roomname=t,this.doc=n,this._WS=a,this.awareness=o,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=d,this.wsUnsuccessfulReconnects=0,this.messageHandlers=FI.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=r,this._resyncInterval=0,l>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=LC();$C(e,0),AI(e,n),this.ws.send(FC(e))}}),l)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=UI(this,new Uint8Array(e),!1);zC(t)>1&&II(this.bcChannel,FC(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=LC();$C(t,0),((e,t)=>{$C(e,2),YC(e,t)})(t,e),HI(this,FC(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:n},r)=>{const s=e.concat(t).concat(n),i=LC();$C(i,1),YC(i,zI(o,s)),HI(this,FC(i))},this._exitHandler=()=>{LI(this.awareness,[n.clientID],"app closed")},HE&&"undefined"!=typeof process&&process.on("exit",this._exitHandler),o.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&3e4<jE()-this.wsLastMessageReceived&&$I(this,this.ws,null)}),3e3),r&&this.connect()}get url(){const e=((e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n})(this.params,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&");return this.serverUrl+"/"+this.roomname+(0===e.length?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),HE&&"undefined"!=typeof process&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;var e,t;this.bcconnected||(e=this.bcChannel,t=this._bcSubscriber,_I(e).subs.add(t),this.bcconnected=!0);const n=LC();$C(n,0),AI(n,this.doc),II(this.bcChannel,FC(n),this);const r=LC();$C(r,0),TI(r,this.doc),II(this.bcChannel,FC(r),this);const o=LC();$C(o,3),II(this.bcChannel,FC(o),this);const s=LC();$C(s,1),YC(s,zI(this.awareness,[this.doc.clientID])),II(this.bcChannel,FC(s),this)}disconnectBc(){const e=LC();$C(e,1),YC(e,zI(this.awareness,[this.doc.clientID],new Map)),HI(this,FC(e)),this.bcconnected&&(((e,t)=>{const n=_I(e),r=n.subs.delete(t);r&&0===n.subs.size&&(n.bc.close(),NI.delete(e))})(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&$I(this,this.ws,null)}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(VI(this),this.connectBc())}}const GI="code",qI="language";class YI{constructor(){this.providers=new Map,this.listenForConnectionChanges()}static getInstance(){return YI.instance||(YI.instance=new YI),YI.instance}getOrCreateProvider(e,t=""){var n;const r=this.providers.get(e);if(r)return{provider:r,ytext:r.doc.getText(GI),ylanguage:r.doc.getText(qI)};const o=new AN,s=o.getText(GI),i=o.getText(qI);t&&(null==(n=s.doc)||n.transact((()=>{s.delete(0,s.length),s.insert(0,t)})));const a={session_id:$s()},l=new URLSearchParams(window.location.search).get(Us.filePath);l&&(a.file=l);const c=new WI("ws",e,o,{params:a,resyncInterval:5e3});return this.providers.set(e,c),c.on("connection-close",(()=>{E.warn("RTC: connection closed. This could lead to data loss.")})),c.on("connection-error",(()=>{E.warn("RTC: connection error. This could lead to data loss.")})),{provider:c,ytext:s,ylanguage:i}}listenForConnectionChanges(){re.sub(ft,(()=>{const e=re.get(ft);(e.state===mt.CLOSED||e.state===mt.CLOSING)&&this.disconnectAll()}))}disconnect(e){const t=this.providers.get(e);t&&(t.destroy(),this.providers.delete(e))}disconnectAll(){for(const[e]of this.providers)this.disconnect(e)}}function JI(e,t,n=""){if(I())return{extension:[],code:n};const r=YI.getInstance(),{ytext:o,ylanguage:s,provider:i}=r.getOrCreateProvider(e,n),a=En.define((e=>{const n=n=>{if(E.debug(`RTC: sync=${n}, ytext.length=${o.toJSON()}`),!n){const t=o.toJSON();e.dispatch({changes:{from:0,to:e.state.doc.length,insert:t}})}n&&t(o.toJSON())};return i.on("sync",n),{destroy(){i.off("sync",n)}}})),l=[En.define((e=>{const t=()=>{const t=s.toJSON(),n=e.state.field(Hs).type;if(t!==n){E.debug(`[debug] Received language change: ${n} -> ${t}`);const r=Ws[t]();Ee(e,r.type,{keepCodeAsIs:!0})}};return s.observe(t),{destroy(){s.unobserve(t)}}})),Cn.updateListener.of((e=>{var t;for(const n of e.transactions)for(const e of n.effects)if(e.is(Vs)){const n=s.toJSON();n!==e.value.type&&(E.debug(`[debug] Setting language: ${n} -> ${e.value.type}`),null==(t=s.doc)||t.transact((()=>{s.delete(0,s.length),s.insert(0,e.value.type)})))}})),a,EI(o,null)];return{code:o.toJSON(),extension:l}}YI.instance=void 0;const XI=({theme:e,showPlaceholder:t,allowFocus:n,id:r,config:o,code:s,status:i,serializedEditorState:a,setEditorView:c,runCell:d,userConfig:u,editorViewRef:h,editorViewParentRef:f,hidden:p,hasOutput:m,temporarilyShowCode:g,languageAdapter:y,setLanguageAdapter:b,showLanguageToggles:x=!0})=>{var v;const[w,k]=He(Du),S=function(){const e=_.c(2),t=fe(qu);let n;return e[0]!==t?(n=e=>{Fe!==e&&t(e)},e[0]=t,e[1]=n):n=e[1],n}(),C="running"===i||"queued"===i,E=W(),N=Uu(),j="markdown"===y,I=H((()=>!C&&(E.deleteCell({cellId:r}),!0))),T=H((()=>{const e=!o.hide_code;return Oe({configs:{[r]:{hide_code:e}}}),E.updateCellConfig({cellId:r,config:{hide_code:e}}),e})),M=ue(me),D=H((()=>{Bu(M,E.createNewCell)})),O=Gs(u),R=l.useMemo((()=>{const n=ox({cellId:r,showPlaceholder:t,enableAI:O,cellActions:{...E,afterToggleMarkdown:D,onRun:d,deleteCell:I,createManyBelow:e=>{for(const t of[...e].reverse())E.createNewCell({code:t,before:!1,cellId:r,skipIfCodeExists:!0})},splitCell:N,toggleHideCode:T,aiCellCompletion:()=>{let e=!1;return k((t=>(null==t?void 0:t.cellId)===r?(e=!0,null):{cellId:r})),e}},completionConfig:u.completion,keymapConfig:u.keymap,theme:e,hotkeys:new qs(u.keymap.overrides??{})});return n.push(En.define((e=>{const t=e.state.field(Hs);return b(t.type),{update(e){const t=e.state.field(Hs);b(t.type)}}}))),n}),[r,u.keymap,u.completion,O,e,t,E,N,T,I,d,k,D,b]),P=H((()=>{if(xu("rtc_v2")){const e=JI(r,(e=>{E.updateCellCode({cellId:r,code:e,formattingChange:!0})}));R.push(e.extension),s=e.code}const e=new Cn({state:Kr.create({doc:s,extensions:R})});c(e),Ee(e,Ys(e.state).type)})),L=H((()=>{if(vn(null!==h.current,"Editor view is not initialized"),xu("rtc_v2")){const e=JI(r,(e=>{E.updateCellCode({cellId:r,code:e,formattingChange:!0})}));R.push(e.extension)}h.current.dispatch({effects:[In.reconfigure.of([R]),Js(h.current,u.completion,new qs(u.keymap.overrides??{}))]})})),z=H((()=>{if(vn(a,"Editor view is not initialized"),xu("rtc_v2")){const e=JI(r,(e=>{E.updateCellCode({cellId:r,code:e,formattingChange:!0})}),s);R.push(e.extension)}const e=new Cn({state:Kr.fromJSON(a,{doc:s,extensions:R},{history:Xs})});Ee(e,Ys(e.state).type),c(e),E.clearSerializedEditorState({cellId:r})}));l.useEffect((()=>{null===a?null===h.current?P():L():z(),null!==h.current&&f&&null!==f.current&&f.current.replaceChildren(h.current.dom)}),[P,L,z,h,f,a,R]);const F=null===h.current||null!==a;l.useEffect((()=>{const e=null!==re.get(le).scrollKey;F&&n&&!e&&requestAnimationFrame((()=>{var e,t;null==(e=h.current)||e.focus(),null==(t=h.current)||t.dom.scrollIntoView({behavior:"smooth",block:"nearest"})}))}),[F,n,h]),l.useEffect((()=>{const e=h.current;return()=>{null==e||e.destroy()}}),[h]);const B=p&&!j||p&&j&&!m;let U="";return j&&p&&m?U="h-0 overflow-hidden":p&&(U="opacity-20 h-8 overflow-hidden"),A.jsx(iC,{enabled:(null==w?void 0:w.cellId)===r,initialPrompt:null==w?void 0:w.initialPrompt,currentCode:(null==(v=h.current)?void 0:v.state.doc.toString())??s,currentLanguageAdapter:y,declineChange:H((()=>{var e;k(null),null==(e=h.current)||e.focus()})),onChange:H((e=>{var t;null==(t=h.current)||t.dispatch({changes:{from:0,to:h.current.state.doc.length,insert:e}})})),acceptChange:H((e=>{var t,n;null==(t=h.current)||t.dispatch({changes:{from:0,to:h.current.state.doc.length,insert:e}}),null==(n=h.current)||n.focus(),k(null)})),children:A.jsxs("div",{className:"relative w-full",onFocus:()=>S(r),children:[B&&A.jsx(Ks,{tooltip:"Edit code",className:"absolute inset-0 z-10",onClick:g}),A.jsx(KI,{className:U,editorView:h.current,ref:f}),!p&&x&&A.jsx("div",{className:"absolute top-1 right-5",children:A.jsx(Ok,{code:s,editorView:h.current,currentLanguageAdapter:y,onAfterToggle:D})})]})})},KI=m.forwardRef(((e,t)=>{const n=_.c(10),{className:r,editorView:o}=e,s=l.useRef(null);let i,a,c,d,u;return n[0]!==o?(i=()=>{null!==o&&null!==s.current&&0===s.current.children.length&&s.current.append(o.dom)},a=[o,s],n[0]=o,n[1]=i,n[2]=a):(i=n[1],a=n[2]),l.useEffect(i,a),n[3]!==r?(c=Ln("cm",r),n[3]=r,n[4]=c):c=n[4],n[5]!==t?(d=e=>{t?vk(t,s)(e):vk(s)(e)},n[5]=t,n[6]=d):d=n[6],n[7]!==c||n[8]!==d?(u=A.jsx("div",{className:c,ref:d,"data-testid":"cell-editor"}),n[7]=c,n[8]=d,n[9]=u):u=n[9],u}));KI.displayName="CellCodeMirrorEditor";const ZI=xu("rtc_v2")?function(e){const t=t=>{const n=_.c(2);if(ue(ft).state===mt.CONNECTING)return null;let r;return n[0]!==t?(r=A.jsx(e,{...t}),n[0]=t,n[1]=r):r=n[1],r};return t.displayName=`WithWaitUntilConnected(${e.displayName})`,t}(l.memo(XI)):l.memo(XI),QI=e=>{const t=_.c(10);let n,r,o,s;return t[0]!==e.left?(n=A.jsx("div",{className:"flex-1 flex item-center gap-2",children:e.left}),t[0]=e.left,t[1]=n):n=t[1],t[2]!==e.center?(r=A.jsx("div",{className:"flex-1 flex item-center gap-2 justify-center",children:e.center}),t[2]=e.center,t[3]=r):r=t[3],t[4]!==e.right?(o=A.jsx("div",{className:"flex-1 flex item-center gap-2 justify-end",children:e.right}),t[4]=e.right,t[5]=o):o=t[5],t[6]!==n||t[7]!==r||t[8]!==o?(s=A.jsxs("div",{className:"flex items-center gap-2 w-full px-3",children:[n,r,o]}),t[6]=n,t[7]=r,t[8]=o,t[9]=s):s=t[9],s},eA=e=>{const t=_.c(8);if(!e.canCollapse&&!e.isCollapsed)return null;const n=e.isCollapsed?"Expand":"Collapse";let r,o,s;return t[0]!==e.isCollapsed?(r=A.jsx(tA,{isCollapsed:e.isCollapsed}),t[0]=e.isCollapsed,t[1]=r):r=t[1],t[2]!==n||t[3]!==r?(o=A.jsx(ht,{content:n,children:r}),t[2]=n,t[3]=r,t[4]=o):o=t[4],t[5]!==e.onClick||t[6]!==o?(s=A.jsx(te,{variant:"text",size:"icon",onClick:e.onClick,children:o}),t[5]=e.onClick,t[6]=o,t[7]=s):s=t[7],s},tA=e=>{const t=_.c(2),{isCollapsed:n}=e;let r;return t[0]!==n?(r=n?A.jsx(Te,{className:"w-5 h-5 flex-shrink-0"}):A.jsx(Ie,{className:"w-5 h-5 flex-shrink-0"}),t[0]=n,t[1]=r):r=t[1],r},nA=l.memo((e=>{const t=_.c(24),{onClick:n,count:r,cellId:o}=e,s=Zn();let i;t[0]!==o||t[1]!==s?(i=Zs(s,o),t[0]=o,t[1]=s,t[2]=i):i=t[2];const a=i;let l,c;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=Ln("flex items-center justify-between w-[calc(100%-2rem)] h-9 bg-muted rounded-b mx-4 opacity-80 hover:opacity-100 cursor-pointer"),t[3]=l):l=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx(ei,{className:"w-4 h-4 flex-shrink-0"}),t[4]=c):c=t[4];const d=1===r?"cell":"cells";let u,h,f,p,m,g,y;return t[5]!==r||t[6]!==d?(u=A.jsxs(A.Fragment,{children:[c,A.jsxs("span",{className:"text-sm text-gray-500",children:[r," ",d," collapsed"]})]}),t[5]=r,t[6]=d,t[7]=u):u=t[7],t[8]!==a.errored?(h=a.errored&&A.jsx(ht,{content:"Has errors",delayDuration:100,children:A.jsx(Md,{className:"w-4 h-4 flex-shrink-0 text-destructive"})}),t[8]=a.errored,t[9]=h):h=t[9],t[10]!==a.stale?(f=a.stale&&A.jsx(ht,{content:"Has stale cells",delayDuration:100,children:A.jsx(Qs,{className:"w-4 h-4 flex-shrink-0 text-[var(--yellow-11)]"})}),t[10]=a.stale,t[11]=f):f=t[11],t[12]!==a.runningOrQueued?(p=a.runningOrQueued&&A.jsx(ht,{content:"Running",delayDuration:100,children:A.jsx(zs,{className:"w-4 h-4 flex-shrink-0 animate-spin"})}),t[12]=a.runningOrQueued,t[13]=p):p=t[13],t[14]!==h||t[15]!==f||t[16]!==p?(m=A.jsxs(A.Fragment,{children:[h,f,p]}),t[14]=h,t[15]=f,t[16]=p,t[17]=m):m=t[17],t[18]!==u||t[19]!==m?(g=A.jsx(QI,{center:u,right:m}),t[18]=u,t[19]=m,t[20]=g):g=t[20],t[21]!==n||t[22]!==g?(y=A.jsx("div",{onClick:n,className:l,children:g}),t[21]=n,t[22]=g,t[23]=y):y=t[23],y}));nA.displayName="CollapsedCellBanner";const rA=e=>{const t=_.c(6),{appClosed:n,status:r}=e,o=Mf("running"===r);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=Gt("global.interrupt"),t[0]=s):s=t[0];const i=n||!o,a=o?ti:or.NOOP,l=o?"stale":"disabled";let c,d;return t[1]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx(L,{strokeWidth:1.5}),t[1]=c):c=t[1],t[2]!==i||t[3]!==a||t[4]!==l?(d=A.jsx(qx,{tooltip:s,disabled:i,onClick:a,variant:l,"data-testid":"run-button",children:c}),t[2]=i,t[3]=a,t[4]=l,t[5]=d):d=t[5],d},oA={width:void 0,height:void 0};function sA(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}function iA(e,t){const n=_.c(9);let r;n[0]!==e.current||n[1]!==t?(r=n=>{null===e.current||e.current.contains(n.relatedTarget)||null===t.current||X(t.current)},n[0]=e.current,n[1]=t,n[2]=r):r=n[2];const o=H(r);let s;n[3]!==e.current||n[4]!==t?(s=n=>{if(e.current===document.activeElement&&null!==t.current&&"active"===mr(t.current.state)){for(const e of fi)if(n.key===e.key&&e.run){e.run(t.current),n.preventDefault(),n.stopPropagation();break}t.current.focus()}},n[3]=e.current,n[4]=t,n[5]=s):s=n[5];const i=H(s);let a;return n[6]!==o||n[7]!==i?(a={closeCompletionHandler:o,resumeCompletionHandler:i},n[6]=o,n[7]=i,n[8]=a):a=n[8],a}function aA(e,t,n,r,o,s,i,a,l){const c=_.c(51);let d,u,h,f,p,m,g,y,b,x,v,w,k,S,C,E;c[0]!==r||c[1]!==t||c[2]!==n?(d=()=>{n(),r.moveToNextCell({cellId:t,before:!1})},u=()=>{n(),r.moveToNextCell({cellId:t,before:!0})},c[0]=r,c[1]=t,c[2]=n,c[3]=d,c[4]=u):(d=c[3],u=c[4]),c[5]!==r||c[6]!==t?(h=()=>r.createNewCell({cellId:t,before:!0}),f=()=>r.createNewCell({cellId:t,before:!1}),p=()=>r.moveCell({cellId:t,before:!0}),m=()=>r.moveCell({cellId:t,before:!1}),c[5]=r,c[6]=t,c[7]=h,c[8]=f,c[9]=p,c[10]=m):(h=c[7],f=c[8],p=c[9],m=c[10]),c[11]!==r||c[12]!==o||c[13]!==t?(g=()=>o?r.moveCell({cellId:t,direction:"left"}):void 0,y=()=>o?r.moveCell({cellId:t,direction:"right"}):void 0,c[11]=r,c[12]=o,c[13]=t,c[14]=g,c[15]=y):(g=c[14],y=c[15]),c[16]!==r||c[17]!==s.hide_code||c[18]!==t||c[19]!==(null==e?void 0:e.current)||c[20]!==i.current?(b=()=>{var n,o,a;const l=!s.hide_code;Oe({configs:{[t]:{hide_code:l}}}),r.updateCellConfig({cellId:t,config:{hide_code:l}}),l?(null==(n=i.current)||n.contentDOM.blur(),null==(o=null==e?void 0:e.current)||o.focus()):null==(a=i.current)||a.focus()},c[16]=r,c[17]=s.hide_code,c[18]=t,c[19]=null==e?void 0:e.current,c[20]=i.current,c[21]=b):b=c[21],c[22]!==r||c[23]!==t?(k=()=>r.moveToNextCell({cellId:t,before:!1}),x=()=>r.moveToNextCell({cellId:t,before:!0}),v=()=>r.sendToBottom({cellId:t}),w=()=>r.sendToTop({cellId:t}),c[22]=r,c[23]=t,c[24]=x,c[25]=v,c[26]=w,c[27]=k):(x=c[24],v=c[25],w=c[26],k=c[27]),c[28]!==t||c[29]!==i||c[30]!==a?(S=()=>{let e;e=!1,a((n=>(null==n?void 0:n.cellId)===t?(e=!0,null):{cellId:t})),e&&ix(i).focus()},c[28]=t,c[29]=i,c[30]=a,c[31]=S):S=c[31],c[32]!==l.current?(C=()=>{var e;null==(e=l.current)||e.toggle()},c[32]=l.current,c[33]=C):C=c[33],c[34]!==n||c[35]!==d||c[36]!==u||c[37]!==x||c[38]!==v||c[39]!==w||c[40]!==S||c[41]!==C||c[42]!==h||c[43]!==f||c[44]!==p||c[45]!==m||c[46]!==g||c[47]!==y||c[48]!==b||c[49]!==k?(E={"cell.run":n,"cell.runAndNewBelow":d,"cell.runAndNewAbove":u,"cell.createAbove":h,"cell.createBelow":f,"cell.moveUp":p,"cell.moveDown":m,"cell.moveLeft":g,"cell.moveRight":y,"cell.hideCode":b,"cell.focusDown":k,"cell.focusUp":x,"cell.sendToBottom":v,"cell.sendToTop":w,"cell.aiCompletion":S,"cell.cellActions":C},c[34]=n,c[35]=d,c[36]=u,c[37]=x,c[38]=v,c[39]=w,c[40]=S,c[41]=C,c[42]=h,c[43]=f,c[44]=p,c[45]=m,c[46]=g,c[47]=y,c[48]=b,c[49]=k,c[50]=E):E=c[50],Jl(e,E)}function lA(e,t,n,r,o,s){const i=_.c(16);let a,l,c,d,u;i[0]!==n||i[1]!==t?(a=e=>(!e||!dt.fromInput(e))&&(n.moveToNextCell({cellId:t,before:!1,noCreate:!0}),!0),l=e=>(!e||!dt.fromInput(e))&&(n.moveToNextCell({cellId:t,before:!0,noCreate:!0}),!0),i[0]=n,i[1]=t,i[2]=a,i[3]=l):(a=i[2],l=i[3]),i[4]!==r?(c=()=>(r(),!1),i[4]=r,i[5]=c):c=i[5],i[6]!==n||i[7]!==t||i[8]!==s||i[9]!==o.keymap.preset?(d="vim"!==o.keymap.preset||s?{}:{j:e=>(!e||!dt.fromInput(e))&&(n.moveToNextCell({cellId:t,before:!1,noCreate:!0}),!0),k:e=>(!e||!dt.fromInput(e))&&(n.moveToNextCell({cellId:t,before:!0,noCreate:!0}),!0)},i[6]=n,i[7]=t,i[8]=s,i[9]=o.keymap.preset,i[10]=d):d=i[10],i[11]!==a||i[12]!==l||i[13]!==c||i[14]!==d?(u={ArrowDown:a,ArrowUp:l,Enter:c,...d},i[11]=a,i[12]=l,i[13]=c,i[14]=d,i[15]=u):u=i[15],Xl(e,u)}const cA=l.forwardRef(((e,t)=>{const n=_.c(13),{id:r,output:o,interrupted:s,errored:i,stopped:a,name:l,outputStale:c}=e;let d;n[0]===Symbol.for("react.memo_cache_sentinel")?(d=ii("marimo-cell","hover-actions-parent z-10",{published:!0}),n[0]=d):d=n[0];const u=d;let h;n[1]!==r?(h=Et.create(r),n[1]=r,n[2]=h):h=n[2];const f=h,p=si(null==o?void 0:o.mimetype);if(i||s||a||p)return null;let m,g;return n[3]!==r||n[4]!==o||n[5]!==c?(m=A.jsx(di,{allowExpand:!1,forceExpand:!0,output:o,className:"output-area",cellId:r,stale:c}),n[3]=r,n[4]=o,n[5]=c,n[6]=m):m=n[6],n[7]!==f||n[8]!==r||n[9]!==l||n[10]!==t||n[11]!==m?(g=A.jsx("div",{tabIndex:-1,id:f,ref:t,className:u,"data-cell-id":r,"data-cell-name":l,children:m}),n[7]=f,n[8]=r,n[9]=l,n[10]=t,n[11]=m,n[12]=g):g=n[12],g}));cA.displayName="ReadonlyCellComponent";const dA=({theme:e,showPlaceholder:t,allowFocus:n,id:r,code:o,output:s,consoleOutputs:i,status:a,runStartTimestamp:c,lastRunStartTimestamp:d,runElapsedTimeMs:u,edited:h,interrupted:f,errored:p,stopped:m,staleInputs:g,serializedEditorState:y,debuggerActive:b,appClosed:x,canDelete:v,actions:w,deleteCell:k,userConfig:S,outline:C,isCollapsed:N,collapseCount:j,config:I,canMoveX:T,name:M,editorView:D,setEditorView:O,outputStale:R})=>{const P=l.useRef(null),L=l.useRef(null),z=l.useRef(null),F=l.useRef(null),B=fe(Du),U=Iu(r),[$,V]=l.useState(),W=I.disabled||"disabled-transitively"===a,G=li({executionTime:u,status:a,errored:p,interrupted:f,stopped:m}),q=h||f||g&&!W,Y="running"===a||"queued"===a,J=("queued"===a||h||g)&&!f,X=l.useCallback((()=>D.current),[D]),{closeCompletionHandler:K,resumeCompletionHandler:Z}=iA(P,D),{isCellCodeShown:Q,isMarkdown:ee,isMarkdownCodeHidden:te,temporarilyShowCode:ne,showHiddenMarkdownCode:re}=function(e,t,n,r){const o=_.c(13),[s,i]=l.useState(!1),a=!e.hide_code||s,c="markdown"===t,d=c&&!a;let u;o[0]!==n||o[1]!==r||o[2]!==a?(u=()=>{var e,t;if(!a){i(!0),null==(e=n.current)||e.focus();const o=null==(t=r.current)?void 0:t.parentElement;if(!o)return void E.error("Cell: No parent element found for editor view");const s=()=>{requestAnimationFrame((()=>{var e;o.contains(document.activeElement)||(i(!1),null==(e=n.current)||e.dom.blur(),o.removeEventListener("focusout",s))}))};o.addEventListener("focusout",s)}},o[0]=n,o[1]=r,o[2]=a,o[3]=u):u=o[3];const h=u;let f;o[4]!==d||o[5]!==h?(f=()=>{d&&h()},o[4]=d,o[5]=h,o[6]=f):f=o[6];const p=f;let m;return o[7]!==a||o[8]!==c||o[9]!==d||o[10]!==p||o[11]!==h?(m={isCellCodeShown:a,isMarkdown:c,isMarkdownCodeHidden:d,temporarilyShowCode:h,showHiddenMarkdownCode:p},o[7]=a,o[8]=c,o[9]=d,o[10]=p,o[11]=h,o[12]=m):m=o[12],m}(I,$,D,z);aA(P,r,U,w,T,I,D,B,L),lA(P,r,w,re,S,Q);const oe=hi(C),se=!oi(s),ie=i.length>0,ae=S.display.cell_output,le=se&&"above"===ae,ce=se&&"below"===ae,[de,ue]=l.useState(!1),[he,pe]=l.useState(!1);!function(e){const{ref:t,box:n="content-box",skip:r}=e,o=l.useRef({...oA}),s=l.useRef(void 0);s.current=e.onResize,l.useEffect((()=>{if(!t.current||r)return;if("undefined"==typeof window||!("ResizeObserver"in window))return;const e=new ResizeObserver((([e])=>{const t="border-box"===n?"borderBoxSize":"device-pixel-content-box"===n?"devicePixelContentBoxSize":"contentBoxSize",r=sA(e,t,"inlineSize"),i=sA(e,t,"blockSize");if(o.current.width!==r||o.current.height!==i){const e={width:r,height:i};o.current.width=r,o.current.height=i,s.current&&s.current(e)}}));return e.observe(t.current,{box:n}),()=>{e.disconnect()}}),[n,t,r])}({ref:F,skip:!ee,onResize:e=>{const t=e.height&&e.height<68,n=te&&(t||"below"===ae);ue(n),oe&&n?pe(!0):he&&pe(!1)}});const me=e=>A.jsx(Ks,{tooltip:"Edit markdown",className:Ln("z-20 relative",e),onClick:ne}),ge=se&&A.jsxs("div",{className:"relative",onDoubleClick:re,children:[A.jsx("div",{className:"absolute top-5 -left-8 z-10 print:hidden",children:A.jsx(eA,{isCollapsed:N,onClick:()=>{N?w.expandCell({cellId:r}):w.collapseCell({cellId:r})},canCollapse:oe})}),te&&ce&&me("top-3"),A.jsx(di,{allowExpand:!0,forceExpand:te,output:s,className:"output-area",cellId:r,stale:R}),te&&le&&me("bottom-3")]}),ye=ii("marimo-cell","hover-actions-parent z-10",{interactive:!0,"needs-run":q,"has-error":p,stopped:m,disabled:I.disabled,stale:"disabled-transitively"===a,borderless:te&&se}),be=Et.create(r),xe=H((e=>{B({cellId:r,initialPrompt:e.prompt})}));return A.jsx(ai,{children:A.jsx(_k,{cellId:r,config:I,status:a,getEditorView:X,hasOutput:se,hasConsoleOutput:ie,name:M,children:A.jsxs(Sk,{tabIndex:-1,ref:P,"data-status":a,onBlur:K,onKeyDown:Z,cellId:r,canMoveX:T,title:I.disabled?"This cell is disabled":"disabled-transitively"===a?"This cell has a disabled ancestor":void 0,children:[A.jsxs("div",{className:ye,id:be,ref:F,"data-cell-id":r,"data-cell-name":M,children:["above"===ae&&ge,A.jsxs("div",{className:Ln("tray"),"data-hidden":te,children:[A.jsx("div",{className:"absolute right-2 -top-4 z-10",children:A.jsx(fA,{edited:h,appClosed:x,status:a,cellConfig:I,needsRun:q,hasOutput:se,hasConsoleOutput:ie,cellActionDropdownRef:L,cellId:r,name:M,getEditorView:X,onRun:U})}),A.jsx(hA,{cellId:r,className:Ln(te&&le&&"-top-7",te&&ce&&"-bottom-8",te&&he&&"-left-[3.8rem]"),appClosed:x,actions:w}),A.jsx(ZI,{theme:e,showPlaceholder:t,allowFocus:n,id:r,code:o,config:I,status:a,serializedEditorState:y,runCell:U,setEditorView:O,userConfig:S,editorViewRef:D,editorViewParentRef:z,hidden:!Q,hasOutput:se,temporarilyShowCode:ne,languageAdapter:$,setLanguageAdapter:V}),A.jsx(uA,{className:Ln(te&&"below"===ae&&"top-14"),edited:h,status:a,isCellStatusInline:de,uninstantiated:G,disabled:I.disabled,runElapsedTimeMs:u,runStartTimestamp:c,lastRunStartTimestamp:d,staleInputs:g,interrupted:f}),A.jsx("div",{className:"shoulder-bottom hover-action",children:v&&Q&&A.jsx(Xx,{appClosed:x,status:a,onClick:()=>{Y||x||k({cellId:r})}})})]}),"below"===ae&&ge,A.jsx(bc,{consoleOutputs:i,stale:J,cellName:M,onRefactorWithAI:xe,onSubmitDebugger:(e,t)=>{w.setStdinResponse({cellId:r,response:e,outputIndex:t}),ui({text:e})},cellId:r,debuggerActive:b})]}),N&&A.jsx(nA,{onClick:()=>w.expandCell({cellId:r}),count:j,cellId:r})]})})})},uA=e=>{const t=_.c(19),{className:n,disabled:r,edited:o,interrupted:s,isCellStatusInline:i,lastRunStartTimestamp:a,runElapsedTimeMs:l,runStartTimestamp:c,staleInputs:d,status:u,uninstantiated:h}=e,f=void 0!==r&&r;let p;t[0]!==f||t[1]!==o||t[2]!==s||t[3]!==a||t[4]!==l||t[5]!==c||t[6]!==d||t[7]!==u||t[8]!==h?(p=A.jsx(Qx,{status:u,staleInputs:d,interrupted:s,editing:!0,edited:o,disabled:f,elapsedTime:l,runStartTimestamp:c,uninstantiated:h,lastRunStartTimestamp:a}),t[0]=f,t[1]=o,t[2]=s,t[3]=a,t[4]=l,t[5]=c,t[6]=d,t[7]=u,t[8]=h,t[9]=p):p=t[9];const m=p;let g;t[10]!==n?(g=Ln("shoulder-right z-20",n),t[10]=n,t[11]=g):g=t[11];const y=!i&&m;let b;t[12]===Symbol.for("react.memo_cache_sentinel")?(b=A.jsx(kk,{}),t[12]=b):b=t[12];const x=i&&m;let v,w;return t[13]!==x?(v=A.jsxs("div",{className:"flex gap-2 items-end",children:[b,x]}),t[13]=x,t[14]=v):v=t[14],t[15]!==g||t[16]!==y||t[17]!==v?(w=A.jsxs("div",{className:g,children:[y,v]}),t[15]=g,t[16]=y,t[17]=v,t[18]=w):w=t[18],w},hA=e=>{const t=_.c(21),{className:n,appClosed:r,actions:o,cellId:s}=e;let i;t[0]!==o||t[1]!==s?(i=e=>{const t=void 0===e?{}:e;return o.createNewCell({cellId:s,before:!1,...t})},t[0]=o,t[1]=s,t[2]=i):i=t[2];const a=H(i);let l;t[3]!==o||t[4]!==s?(l=e=>{const t=void 0===e?{}:e;return o.createNewCell({cellId:s,before:!0,...t})},t[3]=o,t[4]=s,t[5]=l):l=t[5];const c=H(l);let d,u;t[6]!==n?(d=Ln("absolute flex flex-col gap-[2px] justify-center h-full left-[-34px] z-20",n),t[6]=n,t[7]=d):d=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(u=Gt("cell.createAbove"),t[8]=u):u=t[8];const h=r?void 0:c;let f,p,m;t[9]!==r||t[10]!==h?(f=A.jsx(Hx,{tooltipContent:u,appClosed:r,onClick:h}),t[9]=r,t[10]=h,t[11]=f):f=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(p=A.jsx("div",{className:"flex-1"}),t[12]=p):p=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(m=Gt("cell.createBelow"),t[13]=m):m=t[13];const g=r?void 0:a;let y,b;return t[14]!==r||t[15]!==g?(y=A.jsx(Hx,{tooltipContent:m,appClosed:r,onClick:g}),t[14]=r,t[15]=g,t[16]=y):y=t[16],t[17]!==d||t[18]!==f||t[19]!==y?(b=A.jsxs("div",{className:d,children:[f,p,y]}),t[17]=d,t[18]=f,t[19]=y,t[20]=b):b=t[20],b},fA=e=>{const t=_.c(27),{edited:n,appClosed:r,status:o,cellConfig:s,needsRun:i,hasOutput:a,hasConsoleOutput:l,onRun:c,cellActionDropdownRef:d,cellId:u,getEditorView:h,name:f,includeCellActions:p}=e,m=void 0===p||p,g=!i&&"hover-action";let y;t[0]!==g?(y=Ln(g),t[0]=g,t[1]=y):y=t[1];const b=r?or.NOOP:c;let x,v,w,k;return t[2]!==r||t[3]!==s||t[4]!==n||t[5]!==i||t[6]!==o||t[7]!==b?(x=A.jsx(Jx,{edited:n,onClick:b,appClosed:r,status:o,config:s,needsRun:i}),t[2]=r,t[3]=s,t[4]=n,t[5]=i,t[6]=o,t[7]=b,t[8]=x):x=t[8],t[9]!==r||t[10]!==o?(v=A.jsx(rA,{status:o,appClosed:r}),t[9]=r,t[10]=o,t[11]=v):v=t[11],t[12]!==d||t[13]!==s||t[14]!==u||t[15]!==h||t[16]!==l||t[17]!==a||t[18]!==m||t[19]!==f||t[20]!==o?(w=m&&A.jsx(Ek,{ref:d,cellId:u,status:o,getEditorView:h,name:f,config:s,hasOutput:a,hasConsoleOutput:l,children:A.jsx(qx,{variant:"green",tooltip:null,"data-testid":"cell-actions-button",children:A.jsx(yc,{strokeWidth:1.5})})}),t[12]=d,t[13]=s,t[14]=u,t[15]=h,t[16]=l,t[17]=a,t[18]=m,t[19]=f,t[20]=o,t[21]=w):w=t[21],t[22]!==y||t[23]!==x||t[24]!==v||t[25]!==w?(k=A.jsxs(Yx,{className:y,children:[x,v,w]}),t[22]=y,t[23]=x,t[24]=v,t[25]=w,t[26]=k):k=t[26],k},pA=({theme:e,showPlaceholder:t,allowFocus:n,id:r,code:o,output:s,consoleOutputs:i,status:a,runStartTimestamp:c,lastRunStartTimestamp:d,runElapsedTimeMs:u,edited:h,interrupted:f,errored:p,stopped:m,staleInputs:g,serializedEditorState:y,debuggerActive:b,appClosed:x,canDelete:v,actions:w,deleteCell:k,userConfig:S,config:C,canMoveX:E,name:N,editorView:j,setEditorView:_})=>{const I=l.useRef(null),T=l.useRef(null),M=l.useRef(null),D=fe(Du),O=Iu(r),R=C.disabled||"disabled-transitively"===a,P=li({executionTime:u,status:a,errored:p,interrupted:f,stopped:m}),L=h||f||g&&!R,z="running"===a||"queued"===a,F=("queued"===a||h||g)&&!f,B=l.useCallback((()=>j.current),[j]),{closeCompletionHandler:U,resumeCompletionHandler:$}=iA(I,j);aA(I,r,O,w,E,C,j,D,T),lA(I,r,w,or.NOOP,S,!0);const V=!oi(s),W=i.length>0,G=si(null==s?void 0:s.mimetype),q=ii("marimo-cell","hover-actions-parent z-10 border shadow-sm","!border-[var(--blue-5)] !rounded-sm",{"needs-run":L,"has-error":p,stopped:m}),Y=Et.create(r),J=H((e=>{D({cellId:r,initialPrompt:e.prompt})}));return A.jsx(ai,{children:A.jsx(_k,{cellId:r,config:C,status:a,getEditorView:B,hasOutput:V,hasConsoleOutput:W,name:N,children:A.jsxs("div",{className:q,"data-status":a,id:Y,ref:I,onBlur:U,onKeyDown:$,title:C.disabled?"This cell is disabled":"disabled-transitively"===a?"This cell has a disabled ancestor":void 0,"data-cell-id":r,"data-cell-name":N,"data-setup-cell":!0,children:[A.jsxs("div",{className:Ln("tray"),"data-hidden":!1,children:[A.jsx("div",{className:"absolute right-2 -top-4 z-10",children:A.jsx(fA,{edited:h,appClosed:x,status:a,cellConfig:C,needsRun:L,hasOutput:V,hasConsoleOutput:W,cellActionDropdownRef:T,cellId:r,name:N,getEditorView:B,onRun:O,includeCellActions:!1})}),A.jsx(ZI,{theme:e,showPlaceholder:t,allowFocus:n,id:r,code:o,config:C,status:a,serializedEditorState:y,runCell:O,setEditorView:_,userConfig:S,editorViewRef:j,editorViewParentRef:M,hidden:!1,hasOutput:V,temporarilyShowCode:or.NOOP,languageAdapter:"python",setLanguageAdapter:or.NOOP,showLanguageToggles:!1}),A.jsx(uA,{edited:h,status:a,isCellStatusInline:!1,uninstantiated:P,disabled:C.disabled,runElapsedTimeMs:u,runStartTimestamp:c,lastRunStartTimestamp:d,staleInputs:g,interrupted:f}),A.jsx("div",{className:"shoulder-bottom hover-action",children:v&&A.jsx(Xx,{appClosed:x,status:a,onClick:()=>{z||x||k({cellId:r})}})})]}),A.jsxs("div",{className:"py-1 px-2 flex justify-end gap-2 last:rounded-b",children:[A.jsx("span",{className:"text-muted-foreground text-xs font-bold",children:"setup cell"}),A.jsx(ht,{content:A.jsxs("span",{className:"max-w-16",children:["This ",A.jsx("b",{children:"setup cell"})," is guaranteed to run before all other cells. Include ",A.jsx("br",{}),"initialization or imports and constants required by top-level functions."]}),children:A.jsx(ci,{size:16,strokeWidth:1.5,className:"rounded-lg text-muted-foreground"})})]}),G&&A.jsx(di,{allowExpand:!0,forceExpand:!0,output:s,className:"output-area",cellId:r,stale:!1}),A.jsx(bc,{consoleOutputs:i,stale:F,cellName:"_",onRefactorWithAI:J,onSubmitDebugger:(e,t)=>{w.setStdinResponse({cellId:r,response:e,outputIndex:t}),ui({text:e})},cellId:r,debuggerActive:b})]})})})},mA=l.memo(l.forwardRef(((e,t)=>{const{status:n,output:r,runStartTimestamp:o,interrupted:s,staleInputs:i,edited:a,id:c,mode:d}=e;E.debug("Rendering Cell",c);const u=l.useRef(null);l.useImperativeHandle(t,(()=>({get editorView(){return ix(u)}})),[u]);const h=ni({status:n,output:r,runStartTimestamp:o,interrupted:s,staleInputs:i},a);return c===ri?A.jsx(pA,{...e,editorView:u,setEditorView:e=>{u.current=e},outputStale:h}):"edit"===d?A.jsx(dA,{...e,editorView:u,setEditorView:e=>{u.current=e},outputStale:h}):A.jsx(cA,{...e,outputStale:h})}))),gA=e=>{const t=_.c(10),{width:n}=e,{banners:r}=xc(),{removeBanner:o}=vc();if(0===r.length)return null;const s="columns"===n&&"sticky left-12 w-full max-w-[80vw]";let i,a,l;if(t[0]!==s?(i=Ln("flex flex-col gap-4 mb-5 print:hidden",s),t[0]=s,t[1]=i):i=t[1],t[2]!==r||t[3]!==o){let e;t[5]!==o?(e=e=>A.jsxs(pi,{kind:e.variant||"info",className:"flex flex-col rounded p-3",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[A.jsx(mi,{className:"w-5 h-5 inline-block mr-2"}),e.title]}),A.jsx(te,{"data-testid":"remove-banner-button",variant:"text",size:"icon",onClick:()=>o(e.id),children:A.jsx(Tn,{className:"w-5 h-5"})})]}),A.jsxs("div",{className:"flex justify-between items-end",children:[A.jsx("span",{children:gi({html:e.description})}),"restart"===e.action&&A.jsx(yA,{})]})]},e.id),t[5]=o,t[6]=e):e=t[6],a=r.map(e),t[2]=r,t[3]=o,t[4]=a}else a=t[4];return t[7]!==i||t[8]!==a?(l=A.jsx("div",{className:i,children:a}),t[7]=i,t[8]=a,t[9]=l):l=t[9],l},yA=()=>{const e=_.c(3),t=ih();let n,r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=A.jsx($d,{className:"w-3 h-3 mr-2"}),e[0]=n):n=e[0],e[1]!==t?(r=A.jsxs(te,{"data-testid":"restart-session-button",variant:"link",size:"xs",onClick:t,children:[n,"Restart"]}),e[1]=t,e[2]=r):r=e[2],r};const bA=(e,t)=>function(e,t){const n=/^(\d+)\.(\d+)\.(\d+)(?:-([\w.-]+))?(?:\+([\w.-]+))?$/,r=e=>{const t=e.match(n);if(!t)return null;const[,r,o,s,i]=t;return{major:Number.parseInt(r,10),minor:Number.parseInt(o,10),patch:Number.parseInt(s,10),preRelease:i||""}};try{const n=r(e),o=r(t);return n&&o?n.major!==o.major?n.major-o.major:n.minor!==o.minor?n.minor-o.minor:n.patch!==o.patch?n.patch-o.patch:""===n.preRelease&&""!==o.preRelease?1:""!==n.preRelease&&""===o.preRelease?-1:n.preRelease.localeCompare(o.preRelease):e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}catch{return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}}(t,e);const xA=()=>{const e=_.c(66),{packageAlert:t}=wc(),{clearPackageAlert:n}=kc(),[r]=Ue();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={},e[0]=o):o=e[0];const[s,i]=l.useState(o);if(null===t)return null;const a="pixi"!==r.package_management.manager;if(Sc(t)){let o,l,c,d,u,h,f,p,m,g;if(e[1]===Symbol.for("react.memo_cache_sentinel")?(o=A.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[A.jsx(Od,{className:"w-5 h-5 inline-block mr-2"}),"Missing packages"]}),e[1]=o):o=e[1],e[2]!==n||e[3]!==t.id?(l=()=>n(t.id),e[2]=n,e[3]=t.id,e[4]=l):l=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx(Tn,{className:"w-5 h-5"}),e[5]=c):c=e[5],e[6]!==l?(d=A.jsxs("div",{className:"flex justify-between",children:[o,A.jsx(te,{variant:"text","data-testid":"remove-banner-button",size:"icon",onClick:l,children:c})]}),e[6]=l,e[7]=d):d=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsx("p",{children:"The following packages were not found:"}),e[8]=u):u=e[8],e[9]!==s||e[10]!==a||e[11]!==t.packages){let n;e[13]!==s||e[14]!==a?(n=(e,t)=>A.jsxs("li",{className:"flex items-center gap-1 font-mono text-sm",children:[A.jsx(Qc,{size:"1rem"}),e,a&&A.jsx(SA,{value:s[e]??"latest",onChange:t=>i((n=>({...n,[e]:t}))),packageName:e})]},t),e[13]=s,e[14]=a,e[15]=n):n=e[15],h=t.packages.map(n),e[9]=s,e[10]=a,e[11]=t.packages,e[12]=h}else h=e[12];return e[16]!==h?(f=A.jsxs("div",{children:[u,A.jsx("ul",{className:"list-disc ml-4 mt-1",children:h})]}),e[16]=h,e[17]=f):f=e[17],e[18]!==n||e[19]!==s||e[20]!==t.id||e[21]!==t.isolated||e[22]!==t.packages||e[23]!==r.package_management.manager?(p=A.jsx("div",{className:"ml-auto flex flex-row items-baseline",children:t.isolated?A.jsxs(A.Fragment,{children:[A.jsx(wA,{manager:r.package_management.manager,packages:t.packages,versions:s,clearPackageAlert:()=>n(t.id)}),!I()&&A.jsxs(A.Fragment,{children:[A.jsx("span",{className:"px-2 text-sm",children:"with"})," ",A.jsx(kA,{})]})]}):A.jsxs("p",{children:["If you set up a"," ",A.jsx("a",{href:"https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments",className:"text-accent-foreground hover:underline",target:"_blank",rel:"noreferrer",children:"virtual environment"}),", marimo can install these packages for you."]})}),e[18]=n,e[19]=s,e[20]=t.id,e[21]=t.isolated,e[22]=t.packages,e[23]=r.package_management.manager,e[24]=p):p=e[24],e[25]!==f||e[26]!==p?(m=A.jsxs("div",{className:"flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",children:[f,p]}),e[25]=f,e[26]=p,e[27]=m):m=e[27],e[28]!==d||e[29]!==m?(g=A.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-12 min-w-[400px] z-[200] opacity-95",children:A.jsxs(pi,{kind:"danger",className:"flex flex-col rounded py-3 px-5 animate-in slide-in-from-left",children:[d,m]})}),e[28]=d,e[29]=m,e[30]=g):g=e[30],g}if(Cc(t)){let r;e[31]!==t.packages?(r=function(e){const t=new Set(Object.values(e)),n=t.has("queued")||t.has("installing")?"installing":t.has("failed")?"failed":"installed";if("installing"===n)return{status:"installing",title:"Installing packages",titleIcon:A.jsx(ad,{className:"w-5 h-5 inline-block mr-2"}),description:"Installing packages:"};if("installed"===n)return{status:"installed",title:"All packages installed!",titleIcon:A.jsx(Dd,{className:"w-5 h-5 inline-block mr-2"}),description:"Installed packages:"};return{status:"failed",title:"Some packages failed to install",titleIcon:A.jsx(Od,{className:"w-5 h-5 inline-block mr-2"}),description:"See terminal for error logs."}}(t.packages),e[31]=t.packages,e[32]=r):r=e[32];const{status:o,title:s,titleIcon:i,description:a}=r;"installed"===o&&setTimeout((()=>n(t.id)),1e4);const l="failed"===o?"danger":"info";let c,d,u,h,f;e[33]!==s||e[34]!==i?(c=A.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[i,s]}),e[33]=s,e[34]=i,e[35]=c):c=e[35],e[36]!==n||e[37]!==t.id?(d=()=>n(t.id),e[36]=n,e[37]=t.id,e[38]=d):d=e[38],e[39]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsx(Tn,{className:"w-5 h-5"}),e[39]=u):u=e[39],e[40]!==d?(h=A.jsx(te,{variant:"text","data-testid":"remove-banner-button",size:"icon",onClick:d,children:u}),e[40]=d,e[41]=h):h=e[41],e[42]!==c||e[43]!==h?(f=A.jsxs("div",{className:"flex justify-between",children:[c,h]}),e[42]=c,e[43]=h,e[44]=f):f=e[44];const p="installed"===o&&"text-accent-foreground";let m,g,y,b,x,v,w;if(e[45]!==p?(m=Ln("flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",p),e[45]=p,e[46]=m):m=e[46],e[47]!==a?(g=A.jsx("p",{children:a}),e[47]=a,e[48]=g):g=e[48],e[49]!==t.packages||e[50]!==o){let n;e[52]!==o?(n=(e,t)=>{const[n,r]=e;return A.jsxs("li",{className:Ln("flex items-center gap-1 font-mono text-sm","installing"===r&&"font-semibold","failed"===r&&"text-destructive","installed"===r&&"text-accent-foreground","installed"===r&&"failed"===o&&"text-muted-foreground"),children:[A.jsx(vA,{status:r}),n]},t)},e[52]=o,e[53]=n):n=e[53],y=Object.entries(t.packages).map(n),e[49]=t.packages,e[50]=o,e[51]=y}else y=e[51];return e[54]!==y?(b=A.jsx("ul",{className:"list-disc ml-4 mt-1",children:y}),e[54]=y,e[55]=b):b=e[55],e[56]!==g||e[57]!==b?(x=A.jsxs("div",{children:[g,b]}),e[56]=g,e[57]=b,e[58]=x):x=e[58],e[59]!==x||e[60]!==m?(v=A.jsx("div",{className:m,children:x}),e[59]=x,e[60]=m,e[61]=v):v=e[61],e[62]!==v||e[63]!==l||e[64]!==f?(w=A.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-12 min-w-[400px] z-[200] opacity-95",children:A.jsxs(pi,{kind:l,className:"flex flex-col rounded pt-3 pb-4 px-5",children:[f,v]})}),e[62]=v,e[63]=l,e[64]=f,e[65]=w):w=e[65],w}return P(t),null};const vA=e=>{const t=_.c(4),{status:n}=e;switch(n){case"queued":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(Qc,{size:"1rem"}),t[0]=e):e=t[0],e}case"installing":{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(ad,{size:"1rem"}),t[1]=e):e=t[1],e}case"installed":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(Yt,{size:"1rem"}),t[2]=e):e=t[2],e}case"failed":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(Tn,{size:"1rem"}),t[3]=e):e=t[3],e}default:return P(n),null}},wA=e=>{const t=_.c(9),{manager:n,packages:r,versions:o,clearPackageAlert:s}=e;let i,a,l,c;return t[0]!==s||t[1]!==n||t[2]!==r||t[3]!==o?(i=async()=>{s();const e={...o};for(const t of r)e[t]=e[t]??"";await Ei({manager:n,versions:e}).catch(CA)},t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=i):i=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(a=A.jsx(ad,{className:"w-4 h-4 mr-2"}),l=A.jsx("span",{className:"font-semibold",children:"Install"}),t[5]=a,t[6]=l):(a=t[5],l=t[6]),t[7]!==i?(c=A.jsxs(te,{variant:"outline","data-testid":"install-packages-button",size:"sm",onClick:i,children:[a,l]}),t[7]=i,t[8]=c):c=t[8],c},kA=()=>{const e=_.c(16),[t,n]=Ue();let r,o;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=Rt(yi),e[0]=r):r=e[0],e[1]!==t?(o={resolver:r,defaultValues:t},e[1]=t,e[2]=o):o=e[2];const s=Pt(o);let i;e[3]!==n?(i=async e=>{await j({config:e}).then((()=>{n(e)}))},e[3]=n,e[4]=i):i=e[4];const a=i;let l,c,d,u;return e[5]!==s||e[6]!==a?(l=s.handleSubmit(a),e[5]=s,e[6]=a,e[7]=l):l=e[7],e[8]!==s.control?(c=A.jsx("div",{className:"flex flex-col gap-3",children:A.jsx(bi,{control:s.control,name:"package_management.manager",render:NA})}),e[8]=s.control,e[9]=c):c=e[9],e[10]!==l||e[11]!==c?(d=A.jsx("form",{onChange:l,className:"flex flex-col gap-5",children:c}),e[10]=l,e[11]=c,e[12]=d):d=e[12],e[13]!==s||e[14]!==d?(u=A.jsx(xi,{...s,children:d}),e[13]=s,e[14]=d,e[15]=u):u=e[15],u},SA=e=>{const t=_.c(21),{value:n,onChange:r,packageName:o}=e;let s,i;t[0]!==o?(s=async()=>{const e=await fetch(`https://pypi.org/pypi/${t=o,t.replaceAll(/\[.*]/g,"").trim()}/json`,{method:"GET",signal:AbortSignal.timeout(5e3)});var t;const n=await e.json();return["latest",...Object.keys(n.releases).sort(bA).slice(0,100)]},i=[o],t[0]=o,t[1]=s,t[2]=i):(s=t[1],i=t[2]);const{data:a,loading:l,error:c}=On(s,i);let d;t[3]!==a?(d=void 0===a?[]:a,t[3]=a,t[4]=d):d=t[4];const u=d;if(c){let e,o,s;return t[5]!==r?(e=e=>r(e.target.value),t[5]=r,t[6]=e):e=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(o=A.jsx("option",{value:"latest",children:"latest"}),t[7]=o):o=t[7],t[8]!==e||t[9]!==n?(s=A.jsx(ht,{content:"Failed to fetch package versions",children:A.jsx(ki,{value:n,onChange:e,disabled:!0,className:"inline-flex ml-2",children:o})}),t[8]=e,t[9]=n,t[10]=s):s=t[10],s}let h,f,p;return t[11]!==r?(h=e=>r(e.target.value),t[11]=r,t[12]=h):h=t[12],t[13]!==u||t[14]!==l?(f=l?A.jsx("option",{value:"latest",children:"latest"}):u.map(jA),t[13]=u,t[14]=l,t[15]=f):f=t[15],t[16]!==l||t[17]!==h||t[18]!==f||t[19]!==n?(p=A.jsx(ki,{value:n,onChange:h,disabled:l,className:"inline-flex ml-2",children:f}),t[16]=l,t[17]=h,t[18]=f,t[19]=n,t[20]=p):p=t[20],p};function CA(e){E.error(e)}function EA(e){return A.jsx("option",{value:e,children:e},e)}function NA(e){const{field:t}=e;return A.jsxs(vi,{children:[A.jsx(wi,{children:A.jsx(ki,{"data-testid":"install-package-manager-select",onChange:e=>t.onChange(e.target.value),value:t.value,disabled:t.disabled,className:"inline-flex mr-2",children:Si.map(EA)})}),A.jsx(Ci,{})]})}function jA(e){return A.jsx("option",{value:e,children:e},e)}const _A=e=>{let{transform:t}=e;return{...t,x:0}},IA={threshold:{x:0,y:.1}},AA=m.memo((e=>{const t=_.c(23),{children:n,multiColumn:r}=e,{dropCellOverCell:o,dropCellOverColumn:s,moveColumn:i,compactColumns:a}=W(),[c,d]=l.useState(null),[u,h]=l.useState(null),[f]=$e();let p;e:{if("columns"===f.width){p=Ni.EMPTY;break e}let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[_A],t[0]=e):e=t[0],p=e}const m=p;let g,y;t[1]===Symbol.for("react.memo_cache_sentinel")?(g={activationConstraint:{distance:8}},t[1]=g):g=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(y={coordinateGetter:bk},t[2]=y):y=t[2];const b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo((()=>[...t].filter((e=>null!=e))),[...t])}(pv(cw,g),pv(ow,y));let x;t[3]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{d(e.active.id);const t=q();h(t.cellIds)},t[3]=x):x=t[3];const v=H(x);let w;t[4]!==u?(w=()=>{d(null),h(null)},t[4]=u,t[5]=w):w=t[5];const k=H(w);let S;t[6]!==c?(S=e=>{const t=e.droppableContainers.filter(DA);if(c&&MA(c))return kv({...e,droppableContainers:t});const n=(e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const o=[];for(const s of t){const{id:e}=s,t=n.get(e);if(t&&Ev(r,t)){const n=xv(t).reduce(((e,t)=>e+gv(r,t)),0),i=Number((n/4).toFixed(4));o.push({id:e,data:{droppableContainer:s,value:i}})}}return o.sort(yv)})({...e,droppableContainers:t}),r=vv(n.length>0?n:Cv({...e,droppableContainers:t}),"id");if(!r)return[];vn(MA(r),`Expected column id. Got: ${r}`);const o=q().cellIds.get(r);if(vn(o,`Expected column. Got: ${r}`),o&&0===o.topLevelIds.length)return[{id:r}];const s=new Set(o.topLevelIds),i=kv({...e,droppableContainers:e.droppableContainers.filter((e=>e.id!==r&&s.has(e.id)))});if(i.length>0){const e=i[0].id;return vn(TA(e),`Expected cell id. Got: ${e}`),[{id:e}]}return[]},t[6]=c,t[7]=S):S=t[7];const C=S;let E;t[8]!==o||t[9]!==s||t[10]!==i?(E=e=>{const{active:t,over:n}=e,r=null==n?void 0:n.id;if(null!=r&&t.id!==r){if(TA(t.id)){if(MA(r))return void s({cellId:t.id,columnId:r});if(TA(r))return void o({cellId:t.id,overCellId:r})}MA(t.id)&&MA(r)&&i({column:t.id,overColumn:r})}},t[8]=o,t[9]=s,t[10]=i,t[11]=E):E=t[11];const N=H(E);let j;t[12]!==a?(j=e=>{const{active:t,over:n}=e;null!==n&&t.id!==n.id&&a()},t[12]=a,t[13]=j):j=t[13];const I=H(j),T=r?C:kv;let M;return t[14]!==n||t[15]!==k||t[16]!==I||t[17]!==N||t[18]!==v||t[19]!==m||t[20]!==b||t[21]!==T?(M=A.jsx(qw,{autoScroll:IA,sensors:b,collisionDetection:T,modifiers:m,onDragEnd:I,onDragStart:v,onDragCancel:k,onDragOver:N,children:n}),t[14]=n,t[15]=k,t[16]=I,t[17]=N,t[18]=v,t[19]=m,t[20]=b,t[21]=T,t[22]=M):M=t[22],M}));function TA(e){return"string"==typeof e&&!e.startsWith("tree_")}function MA(e){return"string"==typeof e&&e.startsWith("tree_")}function DA(e){return MA(e.id)}const OA=m.forwardRef(((e,t)=>{const n=_.c(62);let r,o,s,i,a,l;n[0]!==e?(({columnId:i,canDelete:r,canMoveLeft:o,canMoveRight:s,...a}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s,n[4]=i,n[5]=a):(r=n[1],o=n[2],s=n[3],i=n[4],a=n[5]),n[6]!==i?(l={id:i},n[6]=i,n[7]=l):l=n[7];const{attributes:c,listeners:d,setNodeRef:u,transform:h,transition:f,isDragging:p,isOver:m}=mk(l);let g;n[8]!==h?(g=h?ps.Transform.toString({x:h.x,y:0,scaleX:1,scaleY:1}):void 0,n[8]=h,n[9]=g):g=n[9];const y=p?2:void 0;let b;n[10]!==g||n[11]!==y||n[12]!==f?(b={transform:g,transition:f,zIndex:y,position:"relative","--gutter-width":"50px"},n[10]=g,n[11]=y,n[12]=f,n[13]=b):b=n[13];const x=b,{deleteColumn:v,moveColumn:w,addColumn:k}=W();let S;n[14]===Symbol.for("react.memo_cache_sentinel")?(S=Ln("h-full hover:bg-muted rounded-none"),n[14]=S):S=n[14];const C=S,E=PA;let N;n[15]!==i||n[16]!==w?(N=()=>w({column:i,overColumn:"_left_"}),n[15]=i,n[16]=w,n[17]=N):N=n[17];const j=!o;let I,T,M;n[18]===Symbol.for("react.memo_cache_sentinel")?(I=A.jsx(Ae,{className:"size-4"}),n[18]=I):I=n[18],n[19]!==N||n[20]!==j?(T=A.jsx(ht,{content:"Move column left",side:"top",delayDuration:300,children:A.jsx(te,{variant:"text",size:"sm",className:C,onClick:N,disabled:j,children:I})}),n[19]=N,n[20]=j,n[21]=T):T=n[21],n[22]!==i||n[23]!==w?(M=()=>w({column:i,overColumn:"_right_"}),n[22]=i,n[23]=w,n[24]=M):M=n[24];const D=!s;let O,R,P,L,z,F,B,U;n[25]===Symbol.for("react.memo_cache_sentinel")?(O=A.jsx(Te,{className:"size-4"}),n[25]=O):O=n[25],n[26]!==M||n[27]!==D?(R=A.jsx(ht,{content:"Move column right",side:"top",delayDuration:300,children:A.jsx(te,{variant:"text",size:"sm",className:C,onClick:M,disabled:D,children:O})}),n[26]=M,n[27]=D,n[28]=R):R=n[28],n[29]!==c||n[30]!==d?(P=A.jsx("div",{className:"flex gap-2 h-full flex-grow active:bg-accent cursor-grab",...c,...d,"data-testid":"column-drag-button"}),n[29]=c,n[30]=d,n[31]=P):P=n[31],n[32]!==r||n[33]!==i||n[34]!==v?(L=r&&A.jsx(ht,{content:"Delete column",side:"top",delayDuration:300,children:A.jsx(te,{variant:"text",size:"sm",className:"opacity-0 group-hover:opacity-70 group-hover:hover:opacity-100 text-destructive h-full hover:bg-destructive/20 rounded-none",onClick:()=>v({columnId:i}),children:A.jsx(Tn,{className:"size-4"})})}),n[32]=r,n[33]=i,n[34]=v,n[35]=L):L=n[35],n[36]!==k||n[37]!==i?(z=()=>{k({columnId:i}),requestAnimationFrame(E)},n[36]=k,n[37]=i,n[38]=z):z=n[38],n[39]===Symbol.for("react.memo_cache_sentinel")?(F=A.jsx(Bo,{className:"size-4"}),n[39]=F):F=n[39],n[40]!==z?(B=A.jsx(ht,{content:"Add column",side:"top",delayDuration:300,children:A.jsx(te,{variant:"text",size:"sm",className:C,onClick:z,children:F})}),n[40]=z,n[41]=B):B=n[41],n[42]!==R||n[43]!==P||n[44]!==L||n[45]!==B||n[46]!==T?(U=A.jsxs("div",{className:"h-6 group flex items-center rounded-t-lg border hover:border-border border-[var(--slate-3)] overflow-hidden bg-[var(--slate-1)]",children:[T,R,P,L,B]}),n[42]=R,n[43]=P,n[44]=L,n[45]=B,n[46]=T,n[47]=U):U=n[47];const $=U;let V;n[48]!==t||n[49]!==u?(V=e=>{vk(t,u)(e)},n[48]=t,n[49]=u,n[50]=V):V=n[50];const H=p?"":a.className,G=p?"z-20":"z-1 hover:z-10 focus-within:z-10",q=m&&"bg-accent/20";let Y,J;return n[51]!==H||n[52]!==G||n[53]!==q?(Y=Ln(H,G,q),n[51]=H,n[52]=G,n[53]=q,n[54]=Y):Y=n[54],n[55]!==$||n[56]!==p||n[57]!==a||n[58]!==x||n[59]!==V||n[60]!==Y?(J=A.jsxs("div",{tabIndex:-1,ref:V,...a,style:x,"data-is-dragging":p,className:Y,children:[$,a.children]}),n[55]=$,n[56]=p,n[57]=a,n[58]=x,n[59]=V,n[60]=Y,n[61]=J):J=n[61],J}));OA.displayName="SortableColumn";const RA=l.memo(OA);function PA(){const e=document.getElementById("App");e&&e.scrollTo({left:e.scrollLeft+1e3,behavior:"smooth"})}const LA=l.memo((e=>{const t=_.c(15),n=l.useRef(null),r="columns"===e.width&&"w-contentWidth box-content min-h-[100px] px-11 py-6";let o,s;t[0]!==r?(o=Ln("flex flex-col gap-5",r),t[0]=r,t[1]=o):o=t[1],t[2]!==e.children||t[3]!==o?(s=A.jsx("div",{className:o,children:e.children}),t[2]=e.children,t[3]=o,t[4]=s):s=t[4];const i=s;if("columns"===e.width){let r;return t[5]!==i||t[6]!==e.canDelete||t[7]!==e.canMoveLeft||t[8]!==e.canMoveRight||t[9]!==e.columnId||t[10]!==e.footer?(r=A.jsxs(RA,{tabIndex:-1,ref:n,canDelete:e.canDelete,columnId:e.columnId,canMoveLeft:e.canMoveLeft,canMoveRight:e.canMoveRight,className:"group/column",children:[i,e.footer]}),t[5]=i,t[6]=e.canDelete,t[7]=e.canMoveLeft,t[8]=e.canMoveRight,t[9]=e.columnId,t[10]=e.footer,t[11]=r):r=t[11],r}let a;return t[12]!==i||t[13]!==e.footer?(a=A.jsxs(A.Fragment,{children:[i,e.footer]}),t[12]=i,t[13]=e.footer,t[14]=a):a=t[14],a}));LA.displayName="Column";const zA=e=>{const t=_.c(8),n=ue(ji),r="columns"===e.appConfig.width;let o,s,i;return t[0]!==e?(o=A.jsx(FA,{...e}),t[0]=e,t[1]=o):o=t[1],t[2]!==n||t[3]!==o?(s=A.jsx(lk,{id:"column-container",items:n,strategy:nk,children:o}),t[2]=n,t[3]=o,t[4]=s):s=t[4],t[5]!==r||t[6]!==s?(i=A.jsx(AA,{multiColumn:r,children:s}),t[5]=r,t[6]=s,t[7]=i):i=t[7],i},FA=e=>{const t=_.c(47),{mode:n,userConfig:r,appConfig:o,connStatus:s}=e,i=Zn(),a=W(),{theme:c}=Be(),{toggleSidebarPanel:d}=uh(),{invisible:u}=Ec(i.cellIds.idLength,n);zl("global.focusTop",a.focusTopCell),zl("global.focusBottom",a.focusBottomCell),zl("global.toggleSidebar",d),zl("global.foldCode",a.foldAll),zl("global.unfoldCode",a.unfoldAll),zl("global.formatAll",$A),zl("cell.hideCode",or.NOOP),zl("cell.format",or.NOOP);const h=zu(),f=a.scrollToTarget;let p,m,g,y,b,x,v,w,k,S,C,E,N,j;if(t[0]!==i.scrollKey||t[1]!==f?(p=()=>{null!==i.scrollKey&&f()},t[0]=i.scrollKey,t[1]=f,t[2]=p):p=t[2],t[3]!==i.cellIds||t[4]!==i.scrollKey||t[5]!==f?(m=[i.cellIds,i.scrollKey,f],t[3]=i.cellIds,t[4]=i.scrollKey,t[5]=f,t[6]=m):m=t[6],l.useEffect(p,m),t[7]!==a||t[8]!==o||t[9]!==s||t[10]!==u||t[11]!==n||t[12]!==i||t[13]!==h||t[14]!==c||t[15]!==r){const e=i.cellIds.getColumns();let l;t[25]!==i.cellIds?(l=i.cellIds.hasOnlyOneId(),t[25]=i.cellIds,t[26]=l):l=t[26];const d=l;let f;t[27]!==i.cellIds.inOrderIds?(f=i.cellIds.inOrderIds.includes(ri),t[27]=i.cellIds.inOrderIds,t[28]=f):f=t[28];const p=f;g=Nc,v="pb-[40vh]",w=u,k=o,S="pr-4",t[29]===Symbol.for("react.memo_cache_sentinel")?(C=A.jsx(xA,{}),t[29]=C):C=t[29],t[30]!==o.width?(y=A.jsx(gA,{width:o.width}),t[30]=o.width,t[31]=y):y=t[31];const m="columns"===o.width&&"grid grid-flow-col auto-cols-min gap-6";t[32]!==m?(b=Ln(m),t[32]=m,t[33]=b):b=t[33],x=e.map(((t,l)=>A.jsx(BA,{column:t,index:l,columnsLength:e.length,appConfig:o,notebook:i,mode:n,userConfig:r,connStatus:s,actions:a,theme:c,hasOnlyOneCell:d,invisible:u,hasSetupCell:p,onDeleteCell:h},t.id))),t[7]=a,t[8]=o,t[9]=s,t[10]=u,t[11]=n,t[12]=i,t[13]=h,t[14]=c,t[15]=r,t[16]=g,t[17]=y,t[18]=b,t[19]=x,t[20]=v,t[21]=w,t[22]=k,t[23]=S,t[24]=C}else g=t[16],y=t[17],b=t[18],x=t[19],v=t[20],w=t[21],k=t[22],S=t[23],C=t[24];return t[34]!==b||t[35]!==x?(E=A.jsx("div",{className:b,children:x}),t[34]=b,t[35]=x,t[36]=E):E=t[36],t[37]===Symbol.for("react.memo_cache_sentinel")?(N=A.jsx(jc,{}),t[37]=N):N=t[37],t[38]!==g||t[39]!==y||t[40]!==E||t[41]!==v||t[42]!==w||t[43]!==k||t[44]!==S||t[45]!==C?(j=A.jsxs(g,{className:v,invisible:w,appConfig:k,innerClassName:S,children:[C,y,E,N]}),t[38]=g,t[39]=y,t[40]=E,t[41]=v,t[42]=w,t[43]=k,t[44]=S,t[45]=C,t[46]=j):j=t[46],j},BA=e=>{const t=_.c(41),{column:n,index:r,columnsLength:o,appConfig:s,notebook:i,mode:a,userConfig:l,connStatus:c,actions:d,theme:u,hasOnlyOneCell:h,invisible:f,hasSetupCell:p,onDeleteCell:m}=e,g=c.state!==mt.OPEN,y=n.id,b=r>0,x=r<o-1,v=s.width,w=o>1,k=n.id,S="columns"===s.width&&"opacity-0 group-hover/column:opacity-100";let C,E;t[0]!==S?(C=Ln(S),t[0]=S,t[1]=C):C=t[1],t[2]!==n.id||t[3]!==C?(E=A.jsx(UA,{columnId:k,className:C}),t[2]=n.id,t[3]=C,t[4]=E):E=t[4];const N=`column-${r+1}`,j=n.topLevelIds;let I,T,M,D;return t[5]!==d||t[6]!==g||t[7]!==p||t[8]!==r||t[9]!==f||t[10]!==a||t[11]!==i||t[12]!==m||t[13]!==u||t[14]!==l?(I=0===r&&p&&A.jsx(mA,{theme:u,showPlaceholder:!1,allowFocus:!f,...i.cellData[ri],...i.cellRuntime[ri],...d,runElapsedTimeMs:i.cellRuntime[ri].runElapsedTimeMs??i.cellData[ri].lastExecutionTime,canDelete:!0,mode:a,appClosed:g,ref:i.cellHandles[ri],userConfig:l,isCollapsed:!1,collapseCount:0,canMoveX:!1,actions:d,deleteCell:m},ri),t[5]=d,t[6]=g,t[7]=p,t[8]=r,t[9]=f,t[10]=a,t[11]=i,t[12]=m,t[13]=u,t[14]=l,t[15]=I):I=t[15],t[16]!==d||t[17]!==g||t[18]!==s.width||t[19]!==n||t[20]!==h||t[21]!==f||t[22]!==a||t[23]!==i||t[24]!==m||t[25]!==u||t[26]!==l?(T=n.topLevelIds.map((e=>{if(e===ri)return null;const t=i.cellData[e],r=i.cellRuntime[e];return A.jsx(mA,{theme:u,showPlaceholder:h,allowFocus:!f,id:t.id,code:t.code,outline:r.outline,output:r.output,consoleOutputs:r.consoleOutputs,status:r.status,edited:t.edited,interrupted:r.interrupted,errored:r.errored,stopped:r.stopped,staleInputs:r.staleInputs,runStartTimestamp:r.runStartTimestamp,lastRunStartTimestamp:r.lastRunStartTimestamp,runElapsedTimeMs:r.runElapsedTimeMs??t.lastExecutionTime,serializedEditorState:t.serializedEditorState,canDelete:!h,mode:a,appClosed:g,ref:i.cellHandles[e],userConfig:l,debuggerActive:r.debuggerActive,config:t.config,name:t.name,isCollapsed:n.isCollapsed(e),collapseCount:n.getCount(e),canMoveX:"columns"===s.width,actions:d,deleteCell:m},t.id.toString())})),t[16]=d,t[17]=g,t[18]=s.width,t[19]=n,t[20]=h,t[21]=f,t[22]=a,t[23]=i,t[24]=m,t[25]=u,t[26]=l,t[27]=T):T=t[27],t[28]!==n.topLevelIds||t[29]!==N||t[30]!==I||t[31]!==T?(M=A.jsxs(lk,{id:N,items:j,strategy:sk,children:[I,T]}),t[28]=n.topLevelIds,t[29]=N,t[30]=I,t[31]=T,t[32]=M):M=t[32],t[33]!==s.width||t[34]!==n.id||t[35]!==M||t[36]!==b||t[37]!==x||t[38]!==w||t[39]!==E?(D=A.jsx(LA,{columnId:y,canMoveLeft:b,canMoveRight:x,width:v,canDelete:w,footer:E,children:M}),t[33]=s.width,t[34]=n.id,t[35]=M,t[36]=b,t[37]=x,t[38]=w,t[39]=E,t[40]=D):D=t[40],D},UA=e=>{const t=_.c(18),{columnId:n,className:r}=e,{createNewCell:o}=W(),s=ue(me),[i,a]=_i(!1),l=ue(pe),c=ue(Ii).sql;let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=Ln("mb-0 rounded-none sm:px-4 md:px-5 lg:px-8 tracking-wide no-wrap whitespace-nowrap","hover:bg-accent hover:text-accent-foreground font-semibold uppercase text-xs"),t[0]=d):d=t[0];const u=d;let h;t[1]!==l||t[2]!==s||t[3]!==n||t[4]!==o||t[5]!==i||t[6]!==a.toggle||t[7]!==c?(h=()=>i?A.jsx(Ai,{onClose:a.toggle}):A.jsxs(A.Fragment,{children:[A.jsxs(te,{className:u,variant:"text",size:"sm",onClick:()=>o({cellId:{type:"__end__",columnId:n},before:!1}),children:[A.jsx(Yd,{className:"mr-2 size-4 flex-shrink-0"}),"Python"]}),A.jsxs(te,{className:u,variant:"text",size:"sm",onClick:()=>{Bu(s,o),o({cellId:{type:"__end__",columnId:n},before:!1,code:(new Ut).defaultCode})},children:[A.jsx(Kd,{className:"mr-2 size-4 flex-shrink-0"}),"Markdown"]}),A.jsx(ht,{content:c?null:A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("span",{children:["Additional dependencies required:",A.jsx(jr,{className:"inline",children:"pip install 'marimo[sql]'"}),"."]}),A.jsx("span",{children:"You will need to restart the notebook after installing."})]}),delayDuration:100,asChild:!1,children:A.jsxs(te,{className:u,variant:"text",size:"sm",disabled:!c,onClick:()=>{Bu(s,o),o({cellId:{type:"__end__",columnId:n},before:!1,code:(new Uo).getDefaultCode()})},children:[A.jsx(Ne,{className:"mr-2 size-4 flex-shrink-0"}),"SQL"]})}),A.jsx(ht,{content:l?null:A.jsx("span",{children:"Enable via settings under AI Assist"}),delayDuration:100,asChild:!1,children:A.jsxs(te,{className:u,variant:"text",size:"sm",disabled:!l,onClick:a.toggle,children:[A.jsx(be,{className:"mr-2 size-4 flex-shrink-0"}),"Generate with AI"]})})]}),t[1]=l,t[2]=s,t[3]=n,t[4]=o,t[5]=i,t[6]=a.toggle,t[7]=c,t[8]=h):h=t[8];const f=h,p=!i&&"w-fit",m=i&&"opacity-100 w-full max-w-4xl shadow-lg shadow-[var(--blue-3)]";let g,y,b;return t[9]!==r||t[10]!==p||t[11]!==m?(g=Ln("shadow-sm border border-border rounded transition-all duration-200 overflow-hidden divide-x divide-border flex",p,m,r),t[9]=r,t[10]=p,t[11]=m,t[12]=g):g=t[12],t[13]!==f?(y=f(),t[13]=f,t[14]=y):y=t[14],t[15]!==g||t[16]!==y?(b=A.jsx("div",{className:"flex justify-center mt-4 pt-6 pb-32 group gap-4 w-full print:hidden",children:A.jsx("div",{className:g,children:y})}),t[15]=g,t[16]=y,t[17]=b):b=t[17],b};function $A(){nr()}const VA=e=>{const t=_.c(61),{userConfig:n,appConfig:r,hideControls:o}=e,s=void 0!==o&&o;Ti(Li,cp);const{setCells:i,mergeAllColumns:a}=W(),c=ue(Ct),d=ue(Mi),u=ue(Di),h=$t(),f=fe(Bf),p="edit"===c.mode,m="present"===c.mode,g=ue(Oi);let y;t[0]===Symbol.for("react.memo_cache_sentinel")?(y=[],t[0]=y):y=t[0],l.useEffect(WA,y);const b=n.runtime.auto_instantiate;let x,v,w;t[1]!==i||t[2]!==f?(x=(e,t)=>{i(e);const n=e.map(GA),r=e.map(qA),o=e.map(YA);f({names:n,codes:r,configs:o,layout:t})},t[1]=i,t[2]=f,t[3]=x):x=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(v=$s(),t[4]=v):v=t[4],t[5]!==x||t[6]!==n.runtime.auto_instantiate?(w={autoInstantiate:b,setCells:x,sessionId:v},t[5]=x,t[6]=n.runtime.auto_instantiate,t[7]=w):w=t[7];const{connection:k}=_c(w);let S,C;t[8]!==r.app_title||t[9]!==h?(S=()=>{document.title=r.app_title||_t.basename(h??"")||"Untitled Notebook"},C=[r.app_title,h],t[8]=r.app_title,t[9]=h,t[10]=S,t[11]=C):(S=t[10],C=t[11]),l.useEffect(S,C);const E=cs(r.width);let N,j;t[12]!==r.width||t[13]!==a||t[14]!==E?(N=()=>{"columns"===E&&"columns"!==r.width&&a()},t[12]=r.width,t[13]=a,t[14]=E,t[15]=N):N=t[15],t[16]!==r.width||t[17]!==a||t[18]!==d||t[19]!==E?(j=[r.width,E,a,d],t[16]=r.width,t[17]=a,t[18]=d,t[19]=E,t[20]=j):j=t[20],l.useEffect(N,j);const I=function(){const e=_.c(2),t=Tu();let n;return e[0]!==t?(n=()=>t(G(q())),e[0]=t,e[1]=n):n=e[1],H(n)}(),T=Au(),M=fh();let D,O,R,P;t[21]!==I?(D=()=>{I()},t[21]=I,t[22]=D):D=t[22],zl("global.runStale",D),zl("global.interrupt",JA),t[23]!==M?(O=()=>{M()},t[23]=M,t[24]=O):O=t[24],zl("global.hideCode",O),t[25]!==T?(R=()=>{T()},t[25]=T,t[26]=R):R=t[26],zl("global.runAll",R),t[27]!==r||t[28]!==k||t[29]!==n||t[30]!==c.mode?(P=A.jsx(zA,{connStatus:k,mode:c.mode,userConfig:n,appConfig:r}),t[27]=r,t[28]=k,t[29]=n,t[30]=c.mode,t[31]=P):P=t[31];const L=P,z=r.width;let F,B,U,$,V,Y,J;return t[32]===Symbol.for("react.memo_cache_sentinel")?(F=Ln("pt-4 sm:pt-12 pb-2 mb-4 print:hidden z-50","sticky left-0"),t[32]=F):F=t[32],t[33]!==h||t[34]!==p?(B=p&&A.jsx("div",{className:"flex items-center justify-center container",children:A.jsx(ap,{filename:h})}),t[33]=h,t[34]=p,t[35]=B):B=t[35],t[36]!==k||t[37]!==B?(U=A.jsx(Tc,{connection:k,className:F,children:B}),t[36]=k,t[37]=B,t[38]=U):U=t[38],t[39]!==r||t[40]!==L||t[41]!==u||t[42]!==c.mode?($=u&&A.jsx(Ic,{appConfig:r,mode:c.mode,children:L}),t[39]=r,t[40]=L,t[41]=u,t[42]=c.mode,t[43]=$):$=t[43],t[44]!==r.width||t[45]!==k||t[46]!==g||t[47]!==U||t[48]!==$?(V=A.jsxs(Mc,{connection:k,isRunning:g,width:z,children:[U,$]}),t[44]=r.width,t[45]=k,t[46]=g,t[47]=U,t[48]=$,t[49]=V):V=t[49],t[50]!==r||t[51]!==k||t[52]!==s||t[53]!==m||t[54]!==g||t[55]!==I||t[56]!==M?(Y=!s&&A.jsx(Ri,{children:A.jsx(np,{presenting:m,onTogglePresenting:M,onInterrupt:ti,onRun:I,closed:k.state===mt.CLOSED,running:g,appConfig:r})}),t[50]=r,t[51]=k,t[52]=s,t[53]=m,t[54]=g,t[55]=I,t[56]=M,t[57]=Y):Y=t[57],t[58]!==V||t[59]!==Y?(J=A.jsxs(A.Fragment,{children:[V,Y]}),t[58]=V,t[59]=Y,t[60]=J):J=t[60],J};function HA(){Ac.INSTANCE.stop()}function WA(){return Ac.INSTANCE.start(Pi),HA}function GA(e){return e.name}function qA(e){return e.code}function YA(e){return e.config}function JA(){ti()}const{createElement:XA,createContext:KA,forwardRef:ZA,useCallback:QA,useContext:eT,useEffect:tT,useImperativeHandle:nT,useLayoutEffect:rT,useMemo:oT,useRef:sT,useState:iT}=zi,aT=zi[`useId${Math.random()}`.slice(0,5)],lT=rT,cT=KA(null);cT.displayName="PanelGroupContext";const dT=lT,uT="function"==typeof aT?aT:()=>null;let hT=0;function fT(e=null){const t=uT(),n=sT(e||t||null);return null===n.current&&(n.current=""+hT++),null!=e?e:n.current}function pT({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:o,forwardedRef:s,id:i,maxSize:a,minSize:l,onCollapse:c,onExpand:d,onResize:u,order:h,style:f,tagName:p="div",...m}){const g=eT(cT);if(null===g)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:b,getPanelSize:x,getPanelStyle:v,groupId:w,isPanelCollapsed:k,reevaluatePanelConstraints:S,registerPanel:C,resizePanel:E,unregisterPanel:N}=g,j=fT(i),_=sT({callbacks:{onCollapse:c,onExpand:d,onResize:u},constraints:{collapsedSize:n,collapsible:r,defaultSize:o,maxSize:a,minSize:l},id:j,idIsFromProps:void 0!==i,order:h});sT({didLogMissingDefaultSizeWarning:!1}),dT((()=>{const{callbacks:e,constraints:t}=_.current,s={...t};_.current.id=j,_.current.idIsFromProps=void 0!==i,_.current.order=h,e.onCollapse=c,e.onExpand=d,e.onResize=u,t.collapsedSize=n,t.collapsible=r,t.defaultSize=o,t.maxSize=a,t.minSize=l,s.collapsedSize===t.collapsedSize&&s.collapsible===t.collapsible&&s.maxSize===t.maxSize&&s.minSize===t.minSize||S(_.current,s)})),dT((()=>{const e=_.current;return C(e),()=>{N(e)}}),[h,j,C,N]),nT(s,(()=>({collapse:()=>{y(_.current)},expand:e=>{b(_.current,e)},getId:()=>j,getSize:()=>x(_.current),isCollapsed:()=>k(_.current),isExpanded:()=>!k(_.current),resize:e=>{E(_.current,e)}})),[y,b,x,k,j,E]);const I=v(_.current,o);return XA(p,{...m,children:e,className:t,id:i,style:{...I,...f},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":w,"data-panel-id":j,"data-panel-size":parseFloat(""+I.flexGrow).toFixed(1)})}const mT=ZA(((e,t)=>XA(pT,{...e,forwardedRef:t})));pT.displayName="Panel",mT.displayName="forwardRef(Panel)";let gT=null,yT=null;function bT(e,t){const n=function(e,t){if(t){const e=!!(t&TT),n=!!(t&MT);if(t&IT)return e?"se-resize":n?"ne-resize":"e-resize";if(t&AT)return e?"sw-resize":n?"nw-resize":"w-resize";if(e)return"s-resize";if(n)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t);gT!==n&&(gT=n,null===yT&&(yT=document.createElement("style"),document.head.appendChild(yT)),yT.innerHTML=`*{cursor: ${n}!important;}`)}function xT(e){return"keydown"===e.type}function vT(e){return e.type.startsWith("pointer")}function wT(e){return e.type.startsWith("mouse")}function kT(e){if(vT(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(wT(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}const ST=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function CT(e){const t=getComputedStyle(e);return"fixed"===t.position||(!("auto"===t.zIndex||"static"===t.position&&!function(e){var t;const n=getComputedStyle(null!==(t=_T(e))&&void 0!==t?t:e).display;return"flex"===n||"inline-flex"===n}(e))||(+t.opacity<1||("transform"in t&&"none"!==t.transform||("webkitTransform"in t&&"none"!==t.webkitTransform||("mixBlendMode"in t&&"normal"!==t.mixBlendMode||("filter"in t&&"none"!==t.filter||("webkitFilter"in t&&"none"!==t.webkitFilter||("isolation"in t&&"isolate"===t.isolation||(!!ST.test(t.willChange)||"touch"===t.webkitOverflowScrolling)))))))))}function ET(e){let t=e.length;for(;t--;){const n=e[t];if(qT(n,"Missing node"),CT(n))return n}return null}function NT(e){return e&&Number(getComputedStyle(e).zIndex)||0}function jT(e){const t=[];for(;e;)t.push(e),e=_T(e);return t}function _T(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const IT=1,AT=2,TT=4,MT=8,DT="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let OT=[],RT=!1,PT=new Map,LT=new Map;const zT=new Set;function FT(e){const{target:t}=e,{x:n,y:r}=kT(e);RT=!0,$T({target:t,x:n,y:r}),WT(),OT.length>0&&(GT("down",e),e.preventDefault(),e.stopPropagation())}function BT(e){const{x:t,y:n}=kT(e);if(RT&&0===e.buttons&&(RT=!1,GT("up",e)),!RT){const{target:r}=e;$T({target:r,x:t,y:n})}GT("move",e),HT(),OT.length>0&&e.preventDefault()}function UT(e){const{target:t}=e,{x:n,y:r}=kT(e);LT.clear(),RT=!1,OT.length>0&&e.preventDefault(),GT("up",e),$T({target:t,x:n,y:r}),HT(),WT()}function $T({target:e,x:t,y:n}){OT.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),zT.forEach((e=>{const{element:o,hitAreaMargins:s}=e,i=o.getBoundingClientRect(),{bottom:a,left:l,right:c,top:d}=i,u=DT?s.coarse:s.fine;if(t>=l-u&&t<=c+u&&n>=d-u&&n<=a+u){if(null!==r&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&function(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:jT(e),b:jT(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;qT(r,"Stacking order can only be calculated for elements with a common ancestor");const o=NT(ET(n.a)),s=NT(ET(n.b));if(o===s){const e=r.childNodes,t={a:n.a.at(-1),b:n.b.at(-1)};let o=e.length;for(;o--;){const n=e[o];if(n===t.a)return 1;if(n===t.b)return-1}}return Math.sign(o-s)}(r,o)>0){let e=r,t=!1;for(;e&&!e.contains(o);){if(h=e.getBoundingClientRect(),f=i,h.x<f.x+f.width&&h.x+h.width>f.x&&h.y<f.y+f.height&&h.y+h.height>f.y){t=!0;break}e=e.parentElement}if(t)return}OT.push(e)}var h,f}))}function VT(e,t){LT.set(e,t)}function HT(){let e=!1,t=!1;OT.forEach((n=>{const{direction:r}=n;"horizontal"===r?e=!0:t=!0}));let n=0;LT.forEach((e=>{n|=e})),e&&t?bT("intersection",n):e?bT("horizontal",n):t?bT("vertical",n):null!==yT&&(document.head.removeChild(yT),gT=null,yT=null)}function WT(){PT.forEach(((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",UT),n.removeEventListener("pointerdown",FT),n.removeEventListener("pointerleave",BT),n.removeEventListener("pointermove",BT)})),window.removeEventListener("pointerup",UT),window.removeEventListener("pointercancel",UT),zT.size>0&&(RT?(OT.length>0&&PT.forEach(((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",UT),n.addEventListener("pointerleave",BT),n.addEventListener("pointermove",BT))})),window.addEventListener("pointerup",UT),window.addEventListener("pointercancel",UT)):PT.forEach(((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",FT,{capture:!0}),n.addEventListener("pointermove",BT))})))}function GT(e,t){zT.forEach((n=>{const{setResizeHandlerState:r}=n,o=OT.includes(n);r(e,o,t)}))}function qT(e,t){if(!e)throw console.error(t),Error(t)}function YT(e,t,n=10){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function JT(e,t,n=10){return 0===YT(e,t,n)}function XT(e,t,n){return 0===YT(e,t,n)}function KT({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];qT(null!=r,`Panel constraints not found for index ${t}`);let{collapsedSize:o=0,collapsible:s,maxSize:i=100,minSize:a=0}=r;if(YT(n,a)<0)if(s){n=YT(n,(o+a)/2)<0?o:a}else n=a;return n=Math.min(i,n),n=parseFloat(n.toFixed(10))}function ZT({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:o,trigger:s}){if(XT(e,0))return t;const i=[...t],[a,l]=r;qT(null!=a,"Invalid first pivot index"),qT(null!=l,"Invalid second pivot index");let c=0;if("keyboard"===s){{const r=e<0?l:a,o=n[r];qT(o,`Panel constraints not found for index ${r}`);const{collapsedSize:s=0,collapsible:i,minSize:c=0}=o;if(i){const n=t[r];if(qT(null!=n,`Previous layout not found for panel index ${r}`),XT(n,s)){const t=c-n;YT(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{const r=e<0?a:l,o=n[r];qT(o,`No panel constraints found for index ${r}`);const{collapsedSize:s=0,collapsible:i,minSize:c=0}=o;if(i){const n=t[r];if(qT(null!=n,`Previous layout not found for panel index ${r}`),XT(n,c)){const t=n-s;YT(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{const r=e<0?1:-1;let o=e<0?l:a,s=0;for(;;){const e=t[o];qT(null!=e,`Previous layout not found for panel index ${o}`);if(s+=KT({panelConstraints:n,panelIndex:o,size:100})-e,o+=r,o<0||o>=n.length)break}const i=Math.min(Math.abs(e),Math.abs(s));e=e<0?0-i:i}{let r=e<0?a:l;for(;r>=0&&r<n.length;){const o=Math.abs(e)-Math.abs(c),s=t[r];qT(null!=s,`Previous layout not found for panel index ${r}`);const a=KT({panelConstraints:n,panelIndex:r,size:s-o});if(!XT(s,a)&&(c+=s-a,i[r]=a,c.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!XT(e[r],t[r],n))return!1;return!0}(o,i))return o;{const r=e<0?l:a,o=t[r];qT(null!=o,`Previous layout not found for panel index ${r}`);const s=o+c,d=KT({panelConstraints:n,panelIndex:r,size:s});if(i[r]=d,!XT(d,s)){let t=s-d;let r=e<0?l:a;for(;r>=0&&r<n.length;){const o=i[r];qT(null!=o,`Previous layout not found for panel index ${r}`);const s=KT({panelConstraints:n,panelIndex:r,size:o+t});if(XT(o,s)||(t-=s-o,i[r]=s),XT(t,0))break;e>0?r--:r++}}}return XT(i.reduce(((e,t)=>t+e),0),100)?i:o}function QT({layout:e,panelsArray:t,pivotIndices:n}){let r=0,o=100,s=0,i=0;const a=n[0];qT(null!=a,"No pivot index found"),t.forEach(((e,t)=>{const{constraints:n}=e,{maxSize:l=100,minSize:c=0}=n;t===a?(r=c,o=l):(s+=c,i+=l)}));return{valueMax:Math.min(o,100-s),valueMin:Math.max(r,100-i),valueNow:e[a]}}function eM(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function tM(e,t,n=document){const r=eM(e,n).findIndex((e=>e.getAttribute("data-panel-resize-handle-id")===t));return null!=r?r:null}function nM(e,t,n){const r=tM(e,t,n);return null!=r?[r,r+1]:[-1,-1]}function rM(e,t=document){var n;if(t instanceof HTMLElement&&(null==t||null===(n=t.dataset)||void 0===n?void 0:n.panelGroupId)==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function oM(e,t=document){const n=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return n||null}function sM({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:o,panelGroupElement:s,setLayout:i}){sT({didWarnAboutMissingResizeHandle:!1}),dT((()=>{if(!s)return;const e=eM(n,s);for(let t=0;t<o.length-1;t++){const{valueMax:n,valueMin:s,valueNow:i}=QT({layout:r,panelsArray:o,pivotIndices:[t,t+1]}),a=e[t];if(null==a);else{const e=o[t];qT(e,`No panel data found for index "${t}"`),a.setAttribute("aria-controls",e.id),a.setAttribute("aria-valuemax",""+Math.round(n)),a.setAttribute("aria-valuemin",""+Math.round(s)),a.setAttribute("aria-valuenow",null!=i?""+Math.round(i):"")}}return()=>{e.forEach(((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")}))}}),[n,r,o,s]),tT((()=>{if(!s)return;const e=t.current;qT(e,"Eager values not found");const{panelDataArray:o}=e;qT(null!=rM(n,s),`No group found for id "${n}"`);const a=eM(n,s);qT(a,`No resize handles found for group id "${n}"`);const l=a.map((e=>{const t=e.getAttribute("data-panel-resize-handle-id");qT(t,"Resize handle element has no handle id attribute");const[a,l]=function(e,t,n,r=document){var o,s,i,a;const l=oM(t,r),c=eM(e,r),d=l?c.indexOf(l):-1;return[null!==(o=null===(s=n[d])||void 0===s?void 0:s.id)&&void 0!==o?o:null,null!==(i=null===(a=n[d+1])||void 0===a?void 0:a.id)&&void 0!==i?i:null]}(n,t,o,s);if(null==a||null==l)return()=>{};const c=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const l=o.findIndex((e=>e.id===a));if(l>=0){const e=o[l];qT(e,`No panel data found for index ${l}`);const a=r[l],{collapsedSize:c=0,collapsible:d,minSize:u=0}=e.constraints;if(null!=a&&d){const e=ZT({delta:XT(a,c)?u-c:c-a,initialLayout:r,panelConstraints:o.map((e=>e.constraints)),pivotIndices:nM(n,t,s),prevLayout:r,trigger:"keyboard"});r!==e&&i(e)}}break}}};return e.addEventListener("keydown",c),()=>{e.removeEventListener("keydown",c)}}));return()=>{l.forEach((e=>e()))}}),[s,e,t,n,r,o,i])}function iM(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function aM(e,t){const n="horizontal"===e,{x:r,y:o}=kT(t);return n?r:o}function lM(e,t,n,r,o,s){if(xT(e)){const t="horizontal"===n;let r=0;r=e.shiftKey?100:null!=o?o:10;let s=0;switch(e.key){case"ArrowDown":s=t?0:r;break;case"ArrowLeft":s=t?-r:0;break;case"ArrowRight":s=t?r:0;break;case"ArrowUp":s=t?0:-r;break;case"End":s=100;break;case"Home":s=-100}return s}return null==r?0:function(e,t,n,r,o){const s="horizontal"===n,i=oM(t,o);qT(i,`No resize handle element found for id "${t}"`);const a=i.getAttribute("data-panel-group-id");qT(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const c=aM(n,e),d=rM(a,o);qT(d,`No group element found for id "${a}"`);const u=d.getBoundingClientRect();return(c-l)/(s?u.width:u.height)*100}(e,t,n,r,s)}function cM(e,t,n){t.forEach(((t,r)=>{const o=e[r];qT(o,`Panel data not found for index ${r}`);const{callbacks:s,constraints:i,id:a}=o,{collapsedSize:l=0,collapsible:c}=i,d=n[a];if(null==d||t!==d){n[a]=t;const{onCollapse:e,onExpand:r,onResize:o}=s;o&&o(t,d),c&&(e||r)&&(!r||null!=d&&!JT(d,l)||JT(t,l)||r(),!e||null!=d&&JT(d,l)||!JT(t,l)||e())}}))}function dM(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function uM(e){try{if("undefined"==typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)}}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function hM(e){return`react-resizable-panels:${e}`}function fM(e){return e.map((e=>{const{constraints:t,id:n,idIsFromProps:r,order:o}=e;return r?n:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)})).sort(((e,t)=>e.localeCompare(t))).join(",")}function pM(e,t){try{const n=hM(e),r=t.getItem(n);if(r){const e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(n){}return null}function mM(e,t,n,r,o){var s;const i=hM(e),a=fM(t),l=null!==(s=pM(e,o))&&void 0!==s?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{o.setItem(i,JSON.stringify(l))}catch(c){console.error(c)}}function gM({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce(((e,t)=>e+t),0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map((e=>`${e}%`)).join(", ")}`);if(!XT(r,100)&&n.length>0)for(let s=0;s<t.length;s++){const e=n[s];qT(null!=e,`No layout data found for index ${s}`);const t=100/r*e;n[s]=t}let o=0;for(let s=0;s<t.length;s++){const e=n[s];qT(null!=e,`No layout data found for index ${s}`);const r=KT({panelConstraints:t,panelIndex:s,size:e});e!=r&&(o+=e-r,n[s]=r)}if(!XT(o,0))for(let s=0;s<t.length;s++){const e=n[s];qT(null!=e,`No layout data found for index ${s}`);const r=KT({panelConstraints:t,panelIndex:s,size:e+o});if(e!==r&&(o-=r-e,n[s]=r,XT(o,0)))break}return n}const yM={getItem:e=>(uM(yM),yM.getItem(e)),setItem:(e,t)=>{uM(yM),yM.setItem(e,t)}},bM={};function xM({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:o,id:s=null,onLayout:i=null,keyboardResizeBy:a=null,storage:l=yM,style:c,tagName:d="div",...u}){const h=fT(s),f=sT(null),[p,m]=iT(null),[g,y]=iT([]),b=function(){const[e,t]=iT(0);return QA((()=>t((e=>e+1))),[])}(),x=sT({}),v=sT(new Map),w=sT(0),k=sT({autoSaveId:e,direction:r,dragState:p,id:h,keyboardResizeBy:a,onLayout:i,storage:l}),S=sT({layout:g,panelDataArray:[],panelDataArrayChanged:!1});sT({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),nT(o,(()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:e}=S.current;return e},setLayout:e=>{const{onLayout:t}=k.current,{layout:n,panelDataArray:r}=S.current,o=gM({layout:e,panelConstraints:r.map((e=>e.constraints))});iM(n,o)||(y(o),S.current.layout=o,t&&t(o),cM(r,o,x.current))}})),[]),dT((()=>{k.current.autoSaveId=e,k.current.direction=r,k.current.dragState=p,k.current.id=h,k.current.onLayout=i,k.current.storage=l})),sM({committedValuesRef:k,eagerValuesRef:S,groupId:h,layout:g,panelDataArray:S.current.panelDataArray,setLayout:y,panelGroupElement:f.current}),tT((()=>{const{panelDataArray:t}=S.current;if(e){if(0===g.length||g.length!==t.length)return;let n=bM[e];null==n&&(n=function(e,t=10){let n=null;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>{e(...r)}),t)}}(mM,100),bM[e]=n);const r=[...t],o=new Map(v.current);n(e,r,o,g,l)}}),[e,g,l]),tT((()=>{}));const C=QA((e=>{const{onLayout:t}=k.current,{layout:n,panelDataArray:r}=S.current;if(e.constraints.collapsible){const o=r.map((e=>e.constraints)),{collapsedSize:s=0,panelSize:i,pivotIndices:a}=kM(r,e,n);if(qT(null!=i,`Panel size not found for panel "${e.id}"`),!JT(i,s)){v.current.set(e.id,i);const l=ZT({delta:wM(r,e)===r.length-1?i-s:s-i,initialLayout:n,panelConstraints:o,pivotIndices:a,prevLayout:n,trigger:"imperative-api"});dM(n,l)||(y(l),S.current.layout=l,t&&t(l),cM(r,l,x.current))}}}),[]),E=QA(((e,t)=>{const{onLayout:n}=k.current,{layout:r,panelDataArray:o}=S.current;if(e.constraints.collapsible){const s=o.map((e=>e.constraints)),{collapsedSize:i=0,panelSize:a=0,minSize:l=0,pivotIndices:c}=kM(o,e,r),d=null!=t?t:l;if(JT(a,i)){const t=v.current.get(e.id),i=null!=t&&t>=d?t:d,l=ZT({delta:wM(o,e)===o.length-1?a-i:i-a,initialLayout:r,panelConstraints:s,pivotIndices:c,prevLayout:r,trigger:"imperative-api"});dM(r,l)||(y(l),S.current.layout=l,n&&n(l),cM(o,l,x.current))}}}),[]),N=QA((e=>{const{layout:t,panelDataArray:n}=S.current,{panelSize:r}=kM(n,e,t);return qT(null!=r,`Panel size not found for panel "${e.id}"`),r}),[]),j=QA(((e,t)=>{const{panelDataArray:n}=S.current,r=wM(n,e);return function({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:o,precision:s=3}){const i=n[o];let a;return a=null==i?null!=e?e.toPrecision(s):"1":1===r.length?"1":i.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:p,layout:g,panelData:n,panelIndex:r})}),[p,g]),_=QA((e=>{const{layout:t,panelDataArray:n}=S.current,{collapsedSize:r=0,collapsible:o,panelSize:s}=kM(n,e,t);return qT(null!=s,`Panel size not found for panel "${e.id}"`),!0===o&&JT(s,r)}),[]),I=QA((e=>{const{layout:t,panelDataArray:n}=S.current,{collapsedSize:r=0,collapsible:o,panelSize:s}=kM(n,e,t);return qT(null!=s,`Panel size not found for panel "${e.id}"`),!o||YT(s,r)>0}),[]),A=QA((e=>{const{panelDataArray:t}=S.current;t.push(e),t.sort(((e,t)=>{const n=e.order,r=t.order;return null==n&&null==r?0:null==n?-1:null==r?1:n-r})),S.current.panelDataArrayChanged=!0,b()}),[b]);dT((()=>{if(S.current.panelDataArrayChanged){S.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:t,storage:n}=k.current,{layout:r,panelDataArray:o}=S.current;let s=null;if(e){const t=function(e,t,n){var r,o;return null!==(o=(null!==(r=pM(e,n))&&void 0!==r?r:{})[fM(t)])&&void 0!==o?o:null}(e,o,n);t&&(v.current=new Map(Object.entries(t.expandToSizes)),s=t.layout)}null==s&&(s=function({panelDataArray:e}){const t=Array(e.length),n=e.map((e=>e.constraints));let r=0,o=100;for(let s=0;s<e.length;s++){const e=n[s];qT(e,`Panel constraints not found for index ${s}`);const{defaultSize:i}=e;null!=i&&(r++,t[s]=i,o-=i)}for(let s=0;s<e.length;s++){const i=n[s];qT(i,`Panel constraints not found for index ${s}`);const{defaultSize:a}=i;if(null!=a)continue;const l=o/(e.length-r);r++,t[s]=l,o-=l}return t}({panelDataArray:o}));const i=gM({layout:s,panelConstraints:o.map((e=>e.constraints))});iM(r,i)||(y(i),S.current.layout=i,t&&t(i),cM(o,i,x.current))}})),dT((()=>{const e=S.current;return()=>{e.layout=[]}}),[]);const T=QA((e=>{let t=!1;const n=f.current;if(n){"rtl"===window.getComputedStyle(n,null).getPropertyValue("direction")&&(t=!0)}return function(n){n.preventDefault();const r=f.current;if(!r)return()=>null;const{direction:o,dragState:s,id:i,keyboardResizeBy:a,onLayout:l}=k.current,{layout:c,panelDataArray:d}=S.current,{initialLayout:u}=null!=s?s:{},h=nM(i,e,r);let p=lM(n,e,o,s,a,r);const m="horizontal"===o;m&&t&&(p=-p);const g=ZT({delta:p,initialLayout:null!=u?u:c,panelConstraints:d.map((e=>e.constraints)),pivotIndices:h,prevLayout:c,trigger:xT(n)?"keyboard":"mouse-or-touch"}),b=!dM(c,g);(vT(n)||wT(n))&&w.current!=p&&(w.current=p,VT(e,b||0===p?0:m?p<0?IT:AT:p<0?TT:MT)),b&&(y(g),S.current.layout=g,l&&l(g),cM(d,g,x.current))}}),[]),M=QA(((e,t)=>{const{onLayout:n}=k.current,{layout:r,panelDataArray:o}=S.current,s=o.map((e=>e.constraints)),{panelSize:i,pivotIndices:a}=kM(o,e,r);qT(null!=i,`Panel size not found for panel "${e.id}"`);const l=ZT({delta:wM(o,e)===o.length-1?i-t:t-i,initialLayout:r,panelConstraints:s,pivotIndices:a,prevLayout:r,trigger:"imperative-api"});dM(r,l)||(y(l),S.current.layout=l,n&&n(l),cM(o,l,x.current))}),[]),D=QA(((e,t)=>{const{layout:n,panelDataArray:r}=S.current,{collapsedSize:o=0,collapsible:s}=t,{collapsedSize:i=0,collapsible:a,maxSize:l=100,minSize:c=0}=e.constraints,{panelSize:d}=kM(r,e,n);null!=d&&(s&&a&&JT(d,o)?JT(o,i)||M(e,i):d<c?M(e,c):d>l&&M(e,l))}),[M]),O=QA(((e,t)=>{const{direction:n}=k.current,{layout:r}=S.current;if(!f.current)return;const o=oM(e,f.current);qT(o,`Drag handle element not found for id "${e}"`);const s=aM(n,t);m({dragHandleId:e,dragHandleRect:o.getBoundingClientRect(),initialCursorPosition:s,initialLayout:r})}),[]),R=QA((()=>{m(null)}),[]),P=QA((e=>{const{panelDataArray:t}=S.current,n=wM(t,e);n>=0&&(t.splice(n,1),delete x.current[e.id],S.current.panelDataArrayChanged=!0,b())}),[b]),L=oT((()=>({collapsePanel:C,direction:r,dragState:p,expandPanel:E,getPanelSize:N,getPanelStyle:j,groupId:h,isPanelCollapsed:_,isPanelExpanded:I,reevaluatePanelConstraints:D,registerPanel:A,registerResizeHandle:T,resizePanel:M,startDragging:O,stopDragging:R,unregisterPanel:P,panelGroupElement:f.current})),[C,p,r,E,N,j,h,_,I,D,A,T,M,O,R,P]),z={display:"flex",flexDirection:"horizontal"===r?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return XA(cT.Provider,{value:L},XA(d,{...u,children:t,className:n,id:s,ref:f,style:{...z,...c},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":h}))}const vM=ZA(((e,t)=>XA(xM,{...e,forwardedRef:t})));function wM(e,t){return e.findIndex((e=>e===t||e.id===t.id))}function kM(e,t,n){const r=wM(e,t),o=r===e.length-1?[r-1,r]:[r,r+1],s=n[r];return{...t.constraints,panelSize:s,pivotIndices:o}}function SM({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:o,onBlur:s,onDragging:i,onFocus:a,style:l={},tabIndex:c=0,tagName:d="div",...u}){var h,f;const p=sT(null),m=sT({onDragging:i});tT((()=>{m.current.onDragging=i}));const g=eT(cT);if(null===g)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:b,registerResizeHandle:x,startDragging:v,stopDragging:w,panelGroupElement:k}=g,S=fT(o),[C,E]=iT("inactive"),[N,j]=iT(!1),[_,I]=iT(null),A=sT({state:C});dT((()=>{A.current.state=C})),tT((()=>{if(n)I(null);else{const e=x(S);I((()=>e))}}),[n,S,x]);const T=null!==(h=null==r?void 0:r.coarse)&&void 0!==h?h:15,M=null!==(f=null==r?void 0:r.fine)&&void 0!==f?f:5;tT((()=>{if(n||null==_)return;const e=p.current;qT(e,"Element ref not attached");return function(e,t,n,r,o){var s;const{ownerDocument:i}=t,a={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:o},l=null!==(s=PT.get(i))&&void 0!==s?s:0;return PT.set(i,l+1),zT.add(a),WT(),function(){var t;LT.delete(e),zT.delete(a);const n=null!==(t=PT.get(i))&&void 0!==t?t:1;if(PT.set(i,n-1),WT(),1===n&&PT.delete(i),OT.includes(a)){const e=OT.indexOf(a);e>=0&&OT.splice(e,1),HT(),o("up",!0,null)}}}(S,e,y,{coarse:T,fine:M},((e,t,n)=>{if(t)switch(e){case"down":{E("drag"),qT(n,'Expected event to be defined for "down" action'),v(S,n);const{onDragging:e}=m.current;e&&e(!0);break}case"move":{const{state:e}=A.current;"drag"!==e&&E("hover"),qT(n,'Expected event to be defined for "move" action'),_(n);break}case"up":{E("hover"),w();const{onDragging:e}=m.current;e&&e(!1);break}}else E("inactive")}))}),[T,y,n,M,x,S,_,v,w]),function({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){tT((()=>{if(e||null==n||null==r)return;const o=oM(t,r);if(null==o)return;const s=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),n(e);break;case"F6":{e.preventDefault();const n=o.getAttribute("data-panel-group-id");qT(n,`No group element found for id "${n}"`);const s=eM(n,r),i=tM(n,t,r);qT(null!==i,`No resize element found for id "${t}"`),s[e.shiftKey?i>0?i-1:s.length-1:i+1<s.length?i+1:0].focus();break}}};return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}}),[r,e,t,n])}({disabled:n,handleId:S,resizeHandler:_,panelGroupElement:k});return XA(d,{...u,children:e,className:t,id:o,onBlur:()=>{j(!1),null==s||s()},onFocus:()=>{j(!0),null==a||a()},ref:p,role:"separator",style:{touchAction:"none",userSelect:"none",...l},tabIndex:c,"data-panel-group-direction":y,"data-panel-group-id":b,"data-resize-handle":"","data-resize-handle-active":"drag"===C?"pointer":N?"keyboard":void 0,"data-resize-handle-state":C,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":S})}xM.displayName="PanelGroup",vM.displayName="forwardRef(PanelGroup)",SM.displayName="PanelResizeHandle";const CM=e=>{const t=_.c(3);let n,r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=A.jsx("path",{d:"M205.28 31.36c14.096 14.88 20.016 35.2 22.512 63.68c6.626 0 12.805 1.47 16.976 7.152l7.792 10.56A17.55 17.55 0 0 1 256 123.2v28.688c-.008 3.704-1.843 7.315-4.832 9.504C215.885 187.222 172.35 208 128 208c-49.066 0-98.19-28.273-123.168-46.608c-2.989-2.189-4.825-5.8-4.832-9.504V123.2c0-3.776 1.2-7.424 3.424-10.464l7.792-10.544c4.173-5.657 10.38-7.152 16.992-7.152c2.496-28.48 8.4-48.8 22.512-63.68C77.331 3.165 112.567.06 127.552 0H128c14.72 0 50.4 2.88 77.28 31.36m-77.264 47.376c-3.04 0-6.544.176-10.272.544c-1.312 4.896-3.248 9.312-6.08 12.128c-11.2 11.2-24.704 12.928-31.936 12.928c-6.802 0-13.927-1.42-19.744-5.088c-5.502 1.808-10.786 4.415-11.136 10.912c-.586 12.28-.637 24.55-.688 36.824c-.026 6.16-.05 12.322-.144 18.488c.024 3.579 2.182 6.903 5.44 8.384C79.936 185.92 104.976 192 128.016 192c23.008 0 48.048-6.08 74.512-18.144c3.258-1.48 5.415-4.805 5.44-8.384c.317-18.418.062-36.912-.816-55.312h.016c-.342-6.534-5.648-9.098-11.168-10.912c-5.82 3.652-12.927 5.088-19.728 5.088c-7.232 0-20.72-1.728-31.936-12.928c-2.832-2.816-4.768-7.232-6.08-12.128a106 106 0 0 0-10.24-.544m-26.941 43.93c5.748 0 10.408 4.66 10.408 10.409v19.183c0 5.749-4.66 10.409-10.408 10.409s-10.408-4.66-10.408-10.409v-19.183c0-5.748 4.66-10.408 10.408-10.408m53.333 0c5.749 0 10.409 4.66 10.409 10.409v19.183c0 5.749-4.66 10.409-10.409 10.409c-5.748 0-10.408-4.66-10.408-10.409v-19.183c0-5.748 4.66-10.408 10.408-10.408M81.44 28.32c-11.2 1.12-20.64 4.8-25.44 9.92c-10.4 11.36-8.16 40.16-2.24 46.24c4.32 4.32 12.48 7.2 21.28 7.2c6.72 0 19.52-1.44 30.08-12.16c4.64-4.48 7.52-15.68 7.2-27.04c-.32-9.12-2.88-16.64-6.72-19.84c-4.16-3.68-13.6-5.28-24.16-4.32m68.96 4.32c-3.84 3.2-6.4 10.72-6.72 19.84c-.32 11.36 2.56 22.56 7.2 27.04c10.56 10.72 23.36 12.16 30.08 12.16c8.8 0 16.96-2.88 21.28-7.2c5.92-6.08 8.16-34.88-2.24-46.24c-4.8-5.12-14.24-8.8-25.44-9.92c-10.56-.96-20 .64-24.16 4.32M128 56c-2.56 0-5.6.16-8.96.48c.32 1.76.48 3.68.64 5.76c0 1.44 0 2.88-.16 4.48c3.2-.32 5.92-.32 8.48-.32s5.28 0 8.48.32c-.16-1.6-.16-3.04-.16-4.48c.16-2.08.32-4 .64-5.76c-3.36-.32-6.4-.48-8.96-.48"}),t[0]=n):n=t[0],t[1]!==e?(r=A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.24em",height:"1em",viewBox:"0 0 256 208",fill:"currentColor",...e,children:n}),t[1]=e,t[2]=r):r=t[2],r},EM=e=>{const t=_.c(17);let n,r,o,s,i;t[0]!==e?(({children:n,tooltip:i,selected:s,className:r,...o}=e),t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s,t[5]=i):(n=t[1],r=t[2],o=t[3],s=t[4],i=t[5]);const a=!s&&"hover:bg-[var(--sage-3)]",l=s&&"bg-[var(--sage-4)]";let c,d;t[6]!==r||t[7]!==a||t[8]!==l?(c=Ln("h-full flex items-center p-2 text-sm shadow-inset font-mono cursor-pointer rounded",a,l,r),t[6]=r,t[7]=a,t[8]=l,t[9]=c):c=t[9],t[10]!==n||t[11]!==o||t[12]!==c?(d=A.jsx("div",{className:c,...o,children:n}),t[10]=n,t[11]=o,t[12]=c,t[13]=d):d=t[13];const u=d;if(i){let e;return t[14]!==u||t[15]!==i?(e=A.jsx(ht,{content:i,side:"top",delayDuration:200,children:u}),t[14]=u,t[15]=i,t[16]=e):e=t[16],e}return u},NM=()=>{var e;const t=_.c(14),n=ue(Bi),r=ue(pe),o=(null==(e=null==n?void 0:n.open_ai)?void 0:e.model)||"gpt-4-turbo",{handleClick:s}=Kl();if(!r){let e,n,r;return t[0]!==s?(e=()=>s("ai"),t[0]=s,t[1]=e):e=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(n=A.jsx(be,{className:"h-4 w-4 opacity-60"}),t[2]=n):n=t[2],t[3]!==e?(r=A.jsx(EM,{tooltip:"Assist is disabled",selected:!1,onClick:e,children:n}),t[3]=e,t[4]=r):r=t[4],r}let i,a,l,c,d;return t[5]===Symbol.for("react.memo_cache_sentinel")?(i=A.jsx("b",{children:"Assist model:"}),t[5]=i):i=t[5],t[6]!==o?(a=A.jsxs(A.Fragment,{children:[i," ",o]}),t[6]=o,t[7]=a):a=t[7],t[8]!==s?(l=()=>s("ai"),t[8]=s,t[9]=l):l=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx(be,{className:"h-4 w-4"}),t[10]=c):c=t[10],t[11]!==a||t[12]!==l?(d=A.jsx(EM,{tooltip:a,onClick:l,selected:!1,children:c}),t[11]=a,t[12]=l,t[13]=d):d=t[13],d},jM=Q((e=>e(Fi).completion.copilot)),_M=()=>{const e=_.c(1);if("github"===ue(jM)){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(IM,{}),e[0]=t):t=e[0],t}return null},IM=()=>{const e=ue(Zl),t=null!==ue(Ql),{handleClick:n}=Kl(),r=()=>n("ai"),o=e?"Ready":"Not connected",s=fe(Zl),i=fe(ec);return Ui((()=>{const e=Wl();let t=!0;return(async()=>{try{if(await e.initializePromise.catch((t=>{throw E.error("Copilot#checkConnection: Failed to initialize",t),e.close(),t})),!t)return;const n=await e.signedIn();if(!t)return;s(n),i(n?"signedIn":"signedOut")}catch(n){if(!t)return;E.warn("Copilot#checkConnection: Connection failed",n),s(!1),i("connectionError"),ie({title:"GitHub Copilot Connection Error",description:"Failed to connect to GitHub Copilot. Check settings and try again.",variant:"danger",action:A.jsx(te,{variant:"link",onClick:r,children:"Settings"})})}})(),()=>{t=!1}})),A.jsx(EM,{tooltip:A.jsxs(A.Fragment,{children:[A.jsx("b",{children:"GitHub Copilot:"})," ",o]}),selected:!1,onClick:r,children:A.jsx("span",{children:t?A.jsx($i,{className:"h-4 w-4"}):A.jsx(CM,{className:Ln("h-4 w-4",!e&&"opacity-60")})})})},AM=e=>{const t=_.c(18),[n,r]=l.useState(0),o=ue(ft);let s,i,a,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>r(LM),i={delayMs:1e4,whenVisible:!0},t[0]=s,t[1]=i):(s=t[0],i=t[1]),Fl(s,i),t[2]!==o.state?(a=async()=>I()||o.state!==mt.OPEN?null:Vi(),t[2]=o.state,t[3]=a):a=t[3],t[4]!==o.state||t[5]!==n?(c=[n,o.state],t[4]=o.state,t[5]=n,t[6]=c):c=t[6];const{data:d}=On(a,c);let u,h,f,p,m;return t[7]!==d?(u=d&&A.jsx(MM,{memory:d.memory,kernel:d.kernel,server:d.server}),t[7]=d,t[8]=u):u=t[8],t[9]!==d?(h=d&&A.jsx(DM,{cpu:d.cpu}),t[9]=d,t[10]=h):h=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(f=A.jsxs("div",{className:"flex items-center",children:[A.jsx(NM,{}),A.jsx(_M,{})]}),t[11]=f):f=t[11],t[12]!==o.state?(p=A.jsx(TM,{connection:o.state}),t[12]=o.state,t[13]=p):p=t[13],t[14]!==u||t[15]!==h||t[16]!==p?(m=A.jsxs("div",{className:"flex gap-2 items-center",children:[u,h,f,p]}),t[14]=u,t[15]=h,t[16]=p,t[17]=m):m=t[17],m},TM=e=>{const t=_.c(18),{connection:n}=e;let r,o,s,i,a,l,c;return t[0]!==n?(r=R(n.toLowerCase()),t[0]=n,t[1]=r):r=t[1],t[2]!==n?(o=n===mt.OPEN&&A.jsx(nd,{className:"w-4 h-4"}),t[2]=n,t[3]=o):o=t[3],t[4]!==n?(s=n===mt.CLOSED&&A.jsx(tc,{className:"w-4 h-4"}),t[4]=n,t[5]=s):s=t[5],t[6]!==n?(i=n===mt.CONNECTING&&A.jsx($i,{size:"small"}),t[6]=n,t[7]=i):i=t[7],t[8]!==n?(a=n===mt.CLOSING&&A.jsx($i,{className:"text-destructive",size:"small"}),t[8]=n,t[9]=a):a=t[9],t[10]!==o||t[11]!==s||t[12]!==i||t[13]!==a?(l=A.jsxs("div",{children:[o,s,i,a]}),t[10]=o,t[11]=s,t[12]=i,t[13]=a,t[14]=l):l=t[14],t[15]!==r||t[16]!==l?(c=A.jsx(ht,{delayDuration:200,content:r,children:l}),t[15]=r,t[16]=l,t[17]=c):c=t[17],c},MM=e=>{const t=_.c(25),{memory:n,kernel:r,server:o}=e,{percent:s,total:i,available:a}=n;let l;t[0]!==s?(l=Math.round(s),t[0]=s,t[1]=l):l=t[1];const c=l;let d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx("b",{children:"computer memory:"}),t[2]=d):d=t[2];const u=i-a;let h,f,p,m,g,y,b,x,v;return t[3]!==u?(h=PM(u),t[3]=u,t[4]=h):h=t[4],t[5]!==i?(f=PM(i),t[5]=i,t[6]=f):f=t[6],t[7]!==c||t[8]!==h||t[9]!==f?(p=A.jsxs("span",{children:[d," ",h," / ",f," GB (",c,"%)"]}),t[7]=c,t[8]=h,t[9]=f,t[10]=p):p=t[10],t[11]!==o?(m=(null==o?void 0:o.memory)&&A.jsxs("span",{children:[A.jsx("b",{children:"marimo server:"})," ",RM(o.memory)]}),t[11]=o,t[12]=m):m=t[12],t[13]!==r?(g=(null==r?void 0:r.memory)&&A.jsxs("span",{children:[A.jsx("b",{children:"kernel:"})," ",RM(r.memory)]}),t[13]=r,t[14]=g):g=t[14],t[15]!==p||t[16]!==m||t[17]!==g?(y=A.jsxs("div",{className:"flex flex-col gap-1",children:[p,m,g]}),t[15]=p,t[16]=m,t[17]=g,t[18]=y):y=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(b=A.jsx(_d,{className:"w-4 h-4"}),t[19]=b):b=t[19],t[20]!==c?(x=A.jsxs("div",{className:"flex items-center gap-1",children:[b,A.jsx(OM,{percent:c})]}),t[20]=c,t[21]=x):x=t[21],t[22]!==x||t[23]!==y?(v=A.jsx(ht,{delayDuration:200,content:y,children:x}),t[22]=x,t[23]=y,t[24]=v):v=t[24],v},DM=e=>{const t=_.c(11),{cpu:n}=e,{percent:r}=n;let o;t[0]!==r?(o=Math.round(r),t[0]=r,t[1]=o):o=t[1];const s=o;let i,a,l,c,d;return t[2]===Symbol.for("react.memo_cache_sentinel")?(i=A.jsx("b",{children:"CPU:"}),t[2]=i):i=t[2],t[3]!==s?(a=A.jsxs("span",{children:[i," ",s,"%"]}),t[3]=s,t[4]=a):a=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx(nc,{className:"w-4 h-4"}),t[5]=l):l=t[5],t[6]!==s?(c=A.jsxs("div",{className:"flex items-center gap-1",children:[l,A.jsx(OM,{percent:s})]}),t[6]=s,t[7]=c):c=t[7],t[8]!==a||t[9]!==c?(d=A.jsx(ht,{delayDuration:200,content:a,children:c}),t[8]=a,t[9]=c,t[10]=d):d=t[10],d},OM=e=>{const t=_.c(2),{percent:n}=e,r=`${n}%`;let o;return t[0]!==r?(o=A.jsx("div",{className:"h-3 w-20 bg-[var(--slate-4)] rounded-lg overflow-hidden border",children:A.jsx("div",{className:"h-full bg-primary",style:{width:r}})}),t[0]=r,t[1]=o):o=t[1],o};function RM(e){return e>1073741824?`${PM(e)} GB`:`${function(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(e/1048576)}(e)} MB`}function PM(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e/1073741824)}function LM(e){return e+1}const zM=e=>ue(Ii)[e.capability]?e.children:null,FM=()=>{const e=_.c(56),{selectedPanel:t,isTerminalOpen:n}=dh(),{openApplication:r,toggleTerminal:o}=uh(),[s,i]=Ue(),a=ue(Hi),l=BM,c=hh.find(UM);let d;vn(c,"Error panel not found"),e[0]!==o?(d=()=>{o()},e[0]=o,e[1]=d):d=e[1],zl("global.toggleTerminal",d);const u=EM,h=c.tooltip,f=t===c.type,p=()=>r(c.type),m=l(c,a>0?"text-destructive":"");let g,y,b,x,v;e[2]!==a?(g=A.jsx("span",{className:"ml-1 font-mono mt-[0.125rem]",children:a}),e[2]=a,e[3]=g):g=e[3],e[4]!==u||e[5]!==c||e[6]!==f||e[7]!==p||e[8]!==m||e[9]!==g?(y=A.jsxs(u,{tooltip:h,selected:f,onClick:p,children:[m,g]}),e[4]=u,e[5]=c,e[6]=f,e[7]=p,e[8]=m,e[9]=g,e[10]=y):y=e[10],e[11]!==o?(b=()=>o(),e[11]=o,e[12]=b):b=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(x=A.jsx(tu,{className:"h-5 w-5"}),e[13]=x):x=e[13],e[14]!==n||e[15]!==b?(v=A.jsx(zM,{capability:"terminal",children:A.jsx(EM,{tooltip:"Open terminal",selected:n,onClick:b,children:x})}),e[14]=n,e[15]=b,e[16]=v):v=e[16];const w=s.runtime.auto_instantiate?"Disable autorun on startup":"Enable autorun on startup";let k,S,C;e[17]!==s||e[18]!==i?(k=async()=>{const e={...s,runtime:{...s.runtime,auto_instantiate:!s.runtime.auto_instantiate}};await j({config:e}).then((()=>i(e)))},e[17]=s,e[18]=i,e[19]=k):k=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(S=A.jsx("span",{children:"on startup: "}),e[20]=S):S=e[20],e[21]!==s.runtime.auto_instantiate?(C=s.runtime.auto_instantiate?A.jsx(du,{size:14}):A.jsx(cu,{size:14}),e[21]=s.runtime.auto_instantiate,e[22]=C):C=e[22];const E=s.runtime.auto_instantiate?"autorun":"lazy";let N,T,M,D;e[23]!==E?(N=A.jsx("span",{children:E}),e[23]=E,e[24]=N):N=e[24],e[25]!==C||e[26]!==N?(T=A.jsxs("div",{className:"font-prose text-sm flex items-center gap-1",children:[S,C,N]}),e[25]=C,e[26]=N,e[27]=T):T=e[27],e[28]!==w||e[29]!==k||e[30]!==T?(M=A.jsx(EM,{tooltip:w,selected:!1,onClick:k,children:T}),e[28]=w,e[29]=k,e[30]=T,e[31]=M):M=e[31],e[32]===Symbol.for("react.memo_cache_sentinel")?(D=A.jsx("div",{className:"border-r border-border h-6 mx-1"}),e[32]=D):D=e[32];const O="autorun"===s.runtime.on_cell_change?"Disable autorun":"Enable autorun";let R,P,L,z,F,B,U,$,V,H;return e[33]!==s||e[34]!==i?(R=async()=>{const e={...s,runtime:{...s.runtime,on_cell_change:"autorun"===s.runtime.on_cell_change?"lazy":"autorun"}};await j({config:e}).then((()=>i(e)))},e[33]=s,e[34]=i,e[35]=R):R=e[35],e[36]===Symbol.for("react.memo_cache_sentinel")?(P=A.jsx("span",{children:"on cell change: "}),e[36]=P):P=e[36],e[37]!==s.runtime.on_cell_change?(L=A.jsxs("div",{className:"font-prose text-sm flex items-center gap-1",children:[P,"autorun"===s.runtime.on_cell_change?A.jsx(du,{size:14}):A.jsx(cu,{size:14}),A.jsx("span",{children:s.runtime.on_cell_change})]}),e[37]=s.runtime.on_cell_change,e[38]=L):L=e[38],e[39]!==O||e[40]!==R||e[41]!==L?(z=A.jsx(EM,{tooltip:O,selected:!1,onClick:R,children:L}),e[39]=O,e[40]=R,e[41]=L,e[42]=z):z=e[42],e[43]===Symbol.for("react.memo_cache_sentinel")?(F=A.jsx("div",{className:"border-r border-border h-6 mx-1"}),e[43]=F):F=e[43],e[44]!==s||e[45]!==i?(B=!I()&&A.jsx(EM,{tooltip:null,selected:!1,children:A.jsxs(gn,{children:[A.jsxs(dn,{className:"font-prose text-sm flex items-center gap-1",children:[A.jsx("span",{children:"on module change: "}),"off"===s.runtime.auto_reload&&A.jsx(tc,{size:14}),"lazy"===s.runtime.auto_reload&&A.jsx(cu,{size:14}),"autorun"===s.runtime.auto_reload&&A.jsx(du,{size:14}),A.jsx("span",{children:s.runtime.auto_reload}),A.jsx(Ie,{size:14})]}),A.jsx(yn,{children:["off","lazy","autorun"].map((e=>A.jsxs(cn,{onClick:async()=>{const t={...s,runtime:{...s.runtime,auto_reload:e}};await j({config:t}).then((()=>i(t)))},children:["off"===e&&A.jsx(tc,{size:14,className:"mr-2 text-muted-foreground"}),"lazy"===e&&A.jsx(cu,{size:14,className:"mr-2 text-muted-foreground"}),"autorun"===e&&A.jsx(du,{size:14,className:"mr-2 text-muted-foreground"}),e]},e)))})]})}),e[44]=s,e[45]=i,e[46]=B):B=e[46],e[47]===Symbol.for("react.memo_cache_sentinel")?(U=A.jsx("div",{className:"mx-auto"}),e[47]=U):U=e[47],e[48]===Symbol.for("react.memo_cache_sentinel")?($=A.jsx(Pf,{children:A.jsx(ht,{content:A.jsx("div",{className:"w-[200px]",children:"Kiosk mode is enabled. This allows you to view the outputs of the cells without the ability to edit them."}),children:A.jsx("span",{className:"text-muted-foreground text-sm mr-4",children:"kiosk mode"})})}),V=A.jsx(AM,{}),e[48]=$,e[49]=V):($=e[48],V=e[49]),e[50]!==v||e[51]!==M||e[52]!==z||e[53]!==B||e[54]!==y?(H=A.jsxs("footer",{className:"h-10 py-2 bg-background flex items-center text-muted-foreground text-md pl-1 pr-4 border-t border-border select-none no-print text-sm shadow-[0_0_4px_1px_rgba(0,0,0,0.1)] z-50 print:hidden hide-on-fullscreen",children:[y,v,M,D,z,F,B,U,$,V]}),e[50]=v,e[51]=M,e[52]=z,e[53]=B,e[54]=y,e[55]=H):H=e[55],H};function BM(e,t){const{Icon:n}=e;return A.jsx(n,{className:Ln("h-5 w-5",t)})}function UM(e){return"errors"===e.type}const $M=e=>{const t=_.c(6),{children:n}=e,{openModal:r,closeModal:o}=he();let s,i;return t[0]!==o||t[1]!==r?(s=()=>r(A.jsx(VM,{onClose:o})),t[0]=o,t[1]=r,t[2]=s):s=t[2],t[3]!==n||t[4]!==s?(i=A.jsx(Wi,{onClick:s,children:n}),t[3]=n,t[4]=s,t[5]=i):i=t[5],i},VM=e=>{const t=_.c(9),{onClose:n}=e;let r,o,s,i,a,l,c;return t[0]!==n?(r=async e=>{e.preventDefault();const t=new FormData(e.target),r=t.get("rating"),o=t.get("message");fetch("https://marimo.io/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:r,message:o})}),n(),ie({title:"Feedback sent!",description:"Thank you for your feedback!"})},t[0]=n,t[1]=r):r=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(o=A.jsx(Le,{children:"Send Feedback"}),t[2]=o):o=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(s=A.jsx("p",{className:"my-2 prose dark:prose-invert",children:"We want to hear from you — from minor bug reports to wishlist features and everything in between. Here are some ways you can get in touch:"}),t[3]=s):s=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(i=A.jsxs("li",{className:"my-0",children:["Take our"," ",A.jsx("a",{href:st.feedbackForm,target:"_blank",rel:"noreferrer",className:"underline",children:"two-minute survey."})]}),t[4]=i):i=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(a=A.jsxs("li",{className:"my-0",children:["File a"," ",A.jsx("a",{href:st.issuesPage,target:"_blank",rel:"noreferrer",className:"underline",children:"GitHub issue."})]}),t[5]=a):a=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsxs(Pe,{children:[o,A.jsxs(it,{children:[s,A.jsxs("ul",{className:"list-disc ml-8 my-2 prose dark:prose-invert",children:[i,a,A.jsxs("li",{className:"my-0",children:["Chat with us on"," ",A.jsx("a",{href:st.discordLink,target:"_blank",rel:"noreferrer",className:"underline",children:"Discord."})]})]}),A.jsx("p",{className:"my-2 prose dark:prose-invert",children:"We're excited you're here as we build the future of Python data tooling. Thanks for being part of our community!"})]})]}),t[6]=l):l=t[6],t[7]!==r?(c=A.jsx(Re,{className:"w-fit",children:A.jsx("form",{onSubmit:r,children:l})}),t[7]=r,t[8]=c):c=t[8],c},HM=()=>{const e=_.c(10),{selectedPanel:t}=dh(),{openApplication:n}=uh(),r=qM;let o,s,i,a,l,c;if(e[0]!==n||e[1]!==t){o="h-full pt-4 pb-1 px-1 flex flex-col items-start text-muted-foreground text-md select-none no-print text-sm z-50 dark:bg-background print:hidden hide-on-fullscreen",s=hh.filter(YM).map((e=>A.jsx(GM,{tooltip:e.tooltip,selected:t===e.type,onClick:()=>n(e.type),children:r(e)},e.type))),e[0]=n,e[1]=t,e[2]=o,e[3]=s}else o=e[2],s=e[3];return e[4]===Symbol.for("react.memo_cache_sentinel")?(i=A.jsx($M,{children:A.jsx(GM,{tooltip:"Send feedback!",selected:!1,children:A.jsx(Id,{className:"h-5 w-5"})})}),a=A.jsx("div",{className:"flex-1"}),l=A.jsx(WM,{}),e[4]=i,e[5]=a,e[6]=l):(i=e[4],a=e[5],l=e[6]),e[7]!==o||e[8]!==s?(c=A.jsxs("div",{className:o,children:[s,i,a,l]}),e[7]=o,e[8]=s,e[9]=c):c=e[9],c},WM=()=>{const e=_.c(9),t=ue(Gi);let n,r,o,s;return e[0]!==t?(n=t>0?A.jsxs("span",{children:[t," cell",t>1?"s":""," queued or running"]}):"No cells queued or running",e[0]=t,e[1]=n):n=e[1],e[2]!==t?(r=Array.from({length:t}).map(JM),e[2]=t,e[3]=r):r=e[3],e[4]!==r?(o=A.jsx("div",{className:"flex flex-col-reverse gap-[1px] overflow-hidden",children:r}),e[4]=r,e[5]=o):o=e[5],e[6]!==n||e[7]!==o?(s=A.jsx(ht,{content:n,side:"right",delayDuration:200,children:o}),e[6]=n,e[7]=o,e[8]=s):s=e[8],s},GM=e=>{const t=_.c(17);let n,r,o,s,i;t[0]!==e?(({children:n,tooltip:i,selected:s,className:r,...o}=e),t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s,t[5]=i):(n=t[1],r=t[2],o=t[3],s=t[4],i=t[5]);const a=!s&&"hover:bg-[var(--sage-3)]",l=s&&"bg-[var(--sage-4)]";let c,d,u;return t[6]!==r||t[7]!==a||t[8]!==l?(c=Ln("flex items-center p-2 text-sm mx-[1px] shadow-inset font-mono cursor-pointer rounded",a,l,r),t[6]=r,t[7]=a,t[8]=l,t[9]=c):c=t[9],t[10]!==n||t[11]!==o||t[12]!==c?(d=A.jsx("div",{className:c,...o,children:n}),t[10]=n,t[11]=o,t[12]=c,t[13]=d):d=t[13],t[14]!==d||t[15]!==i?(u=A.jsx(ht,{content:i,side:"right",delayDuration:200,children:d}),t[14]=d,t[15]=i,t[16]=u):u=t[16],u};function qM(e,t){const{Icon:n}=e;return A.jsx(n,{className:Ln("h-5 w-5",t)})}function YM(e){return!e.hidden&&"sidebar"===e.position}function JM(e,t){return A.jsx("div",{className:"flex-shrink-0 h-1 w-2 bg-[var(--grass-6)] border border-[var(--grass-7)]"},t.toString())}vt.record(vt.tuple([vt.number(),vt.number()]));let XM=null;const KM=e=>{const t=_.c(15),{title:n,description:r,icon:o,action:s}=e;let i,a,l,c,d,u;return t[0]!==o?(i=o&&m.cloneElement(o,{className:"text-accent-foreground"}),t[0]=o,t[1]=i):i=t[1],t[2]!==n?(a=A.jsx("span",{className:"mt-1 text-accent-foreground",children:n}),t[2]=n,t[3]=a):a=t[3],t[4]!==i||t[5]!==a?(l=A.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[i,a]}),t[4]=i,t[5]=a,t[6]=l):l=t[6],t[7]!==r?(c=A.jsx("span",{className:"text-muted-foreground text-sm",children:r}),t[7]=r,t[8]=c):c=t[8],t[9]!==s?(d=s&&A.jsx("div",{className:"mt-2",children:s}),t[9]=s,t[10]=d):d=t[10],t[11]!==l||t[12]!==c||t[13]!==d?(u=A.jsxs("div",{className:"mx-6 my-6 flex flex-col gap-2",children:[l,c,d]}),t[11]=l,t[12]=c,t[13]=d,t[14]=u):u=t[14],u},ZM=()=>{const e=_.c(5),t=qi();if(0===t.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(KM,{title:"No errors!",icon:A.jsx(Ld,{})}),e[0]=t):t=e[0],t}let n,r;return e[1]!==t?(n=t.map(QM),e[1]=t,e[2]=n):n=e[2],e[3]!==n?(r=A.jsx("div",{className:"flex flex-col overflow-auto",children:n}),e[3]=n,e[4]=r):r=e[4],r};function QM(e){return A.jsxs("div",{children:[A.jsx("div",{className:"text-xs font-mono font-semibold bg-muted border-y px-2 py-1",children:A.jsx(Yi,{cellId:e.cellId})}),A.jsx("div",{className:"px-2",children:A.jsx(Ji,{errors:e.output.data,cellId:e.cellId},e.cellId)},e.cellId)]},e.cellId)}const eD=()=>{const e=_.c(6),{items:t}=ue(Xi);let n,r;e[0]!==t?(r=Dc(t),e[0]=t,e[1]=r):r=e[1],n=r;const o=n,{activeHeaderId:s}=Oc(o);if(0===t.length){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(KM,{title:"No outline",description:"Add markdown headings to your notebook to create an outline.",icon:A.jsx(Gd,{})}),e[2]=t):t=e[2],t}let i;return e[3]!==s||e[4]!==t?(i=A.jsx(Rc,{items:t,activeHeaderId:s}),e[3]=s,e[4]=t,e[5]=i):i=e[5],i};function tD(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=tD(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useDebugValue:nD}=m,{useSyncExternalStoreWithSelector:rD}=Ki,oD=e=>e;function sD(e,t=oD,n){const r=rD(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return nD(r),r}const iD=(e,t)=>{const n=Zi(e),r=(e,r=t)=>sD(n,e,r);return Object.assign(r,n),r};function aD(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}function lD(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const cD={passive:!1},dD={capture:!0,passive:!1};function uD(e){e.stopImmediatePropagation()}function hD(e){e.preventDefault(),e.stopImmediatePropagation()}function fD(e){var t=e.document.documentElement,n=Fc(e).on("dragstart.drag",hD,dD);"onselectstart"in t?n.on("selectstart.drag",hD,dD):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function pD(e,t){var n=e.document.documentElement,r=Fc(e).on("dragstart.drag",null);t&&(r.on("click.drag",hD,dD),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const mD=e=>()=>e;function gD(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function yD(e){return!e.ctrlKey&&!e.button}function bD(){return this.parentNode}function xD(e,t){return null==t?{x:e.x,y:e.y}:t}function vD(){return navigator.maxTouchPoints||"ontouchstart"in this}gD.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const wD=e=>()=>e;function kD(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function SD(e){e.stopImmediatePropagation()}function CD(e){e.preventDefault(),e.stopImmediatePropagation()}function ED(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function ND(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function jD(){return this.__zoom||Bc}function _D(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ID(){return navigator.maxTouchPoints||"ontouchstart"in this}function AD(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}const TD=l.createContext(null),MD=TD.Provider,DD=e=>`Node type "${e}" not found. Using fallback type "default".`,OD=()=>"The React Flow parent container needs a width and a height to render the graph.",RD=()=>"Only child nodes can use a parent extent.",PD=e=>`Marker type "${e}" doesn't exist.`,LD=(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,zD=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",FD=e=>`Edge type "${e}" not found. Using fallback type "default".`,BD=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,UD=(()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001")();function $D(e,t){const n=l.useContext(TD);if(null===n)throw new Error(UD);return sD(n,e,t)}const VD=()=>{const e=l.useContext(TD);if(null===e)throw new Error(UD);return l.useMemo((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy})),[e])},HD=e=>e.userSelectionActive?"none":"all";function WD({position:e,children:t,className:n,style:r,...o}){const s=$D(HD),i=`${e}`.split("-");return m.createElement("div",{className:tD(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function GD({proOptions:e,position:t="bottom-right"}){return(null==e?void 0:e.hideAttribution)?null:m.createElement(WD,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},m.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var qD=l.memo((({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:c,className:d,...u})=>{const h=l.useRef(null),[f,p]=l.useState({x:0,y:0,width:0,height:0}),g=tD(["react-flow__edge-textwrapper",d]);return l.useEffect((()=>{if(h.current){const e=h.current.getBBox();p({x:e.x,y:e.y,width:e.width,height:e.height})}}),[n]),void 0!==n&&n?m.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...u},o&&m.createElement("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),m.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:r},n),c):null}));const YD=e=>({width:e.offsetWidth,height:e.offsetHeight}),JD=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),XD=(e={x:0,y:0},t)=>({x:JD(e.x,t[0][0],t[1][0]),y:JD(e.y,t[0][1],t[1][1])}),KD=(e,t,n)=>e<t?JD(Math.abs(e-t),1,50)/50:e>n?-JD(Math.abs(e-n),1,50)/50:0,ZD=(e,t)=>[20*KD(e.x,35,t.width-35),20*KD(e.y,35,t.height-35)],QD=e=>{var t;return(null==(t=e.getRootNode)?void 0:t.call(e))||(null==window?void 0:window.document)},eO=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),tO=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),nO=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},rO=e=>!isNaN(e)&&isFinite(e),oO=Symbol.for("internals"),sO=["Enter"," ","Escape"];function iO(e){var t,n;const r=(e=>"nativeEvent"in e)(e)?e.nativeEvent:e,o=(null==(n=null==(t=r.composedPath)?void 0:t.call(r))?void 0:n[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null==o?void 0:o.nodeName)||(null==o?void 0:o.hasAttribute("contenteditable"))||!!(null==o?void 0:o.closest(".nokey"))}const aO=e=>"clientX"in e,lO=(e,t)=>{var n,r;const o=aO(e),s=o?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,i=o?e.clientY:null==(r=e.touches)?void 0:r[0].clientY;return{x:s-((null==t?void 0:t.left)??0),y:i-((null==t?void 0:t.top)??0)}},cO=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0},dO=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:h,interactionWidth:f=20})=>m.createElement(m.Fragment,null,m.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:h}),f&&m.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),o&&rO(n)&&rO(r)?m.createElement(qD,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c}):null);function uO(e,t,n){return void 0===n?n:r=>{const o=t().edges.find((t=>t.id===e));o&&n(r,{...o})}}function hO({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2;return[s,r<t?r+i:r-i,o,i]}function fO({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:a}){const l=.125*e+.375*o+.375*i+.125*n,c=.125*t+.375*s+.375*a+.125*r;return[l,c,Math.abs(l-e),Math.abs(c-t)]}var pO,mO,gO,yO,bO,xO,vO,wO,kO,SO,CO,EO;function NO({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===CO.Left||e===CO.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function jO({sourceX:e,sourceY:t,sourcePosition:n=CO.Bottom,targetX:r,targetY:o,targetPosition:s=CO.Top}){const[i,a]=NO({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=NO({pos:s,x1:r,y1:o,x2:e,y2:t}),[d,u,h,f]=fO({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${i},${a} ${l},${c} ${r},${o}`,d,u,h,f]}dO.displayName="BaseEdge",(mO=pO||(pO={})).Strict="strict",mO.Loose="loose",(yO=gO||(gO={})).Free="free",yO.Vertical="vertical",yO.Horizontal="horizontal",(xO=bO||(bO={})).Partial="partial",xO.Full="full",(wO=vO||(vO={})).Bezier="default",wO.Straight="straight",wO.Step="step",wO.SmoothStep="smoothstep",wO.SimpleBezier="simplebezier",(SO=kO||(kO={})).Arrow="arrow",SO.ArrowClosed="arrowclosed",(EO=CO||(CO={})).Left="left",EO.Top="top",EO.Right="right",EO.Bottom="bottom";const _O=l.memo((({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=CO.Bottom,targetPosition:s=CO.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:f,markerStart:p,interactionWidth:g})=>{const[y,b,x]=jO({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return m.createElement(dO,{path:y,labelX:b,labelY:x,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:f,markerStart:p,interactionWidth:g})}));_O.displayName="SimpleBezierEdge";const IO={[CO.Left]:{x:-1,y:0},[CO.Right]:{x:1,y:0},[CO.Top]:{x:0,y:-1},[CO.Bottom]:{x:0,y:1}},AO=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function TO({source:e,sourcePosition:t=CO.Bottom,target:n,targetPosition:r=CO.Top,center:o,offset:s}){const i=IO[t],a=IO[r],l={x:e.x+i.x*s,y:e.y+i.y*s},c={x:n.x+a.x*s,y:n.y+a.y*s},d=(({source:e,sourcePosition:t=CO.Bottom,target:n})=>t===CO.Left||t===CO.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:t,target:c}),u=0!==d.x?"x":"y",h=d[u];let f,p,m=[];const g={x:0,y:0},y={x:0,y:0},[b,x,v,w]=hO({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[u]*a[u]==-1){f=o.x??b,p=o.y??x;const e=[{x:f,y:l.y},{x:f,y:c.y}],t=[{x:l.x,y:p},{x:c.x,y:p}];m=i[u]===h?"x"===u?e:t:"x"===u?t:e}else{const o=[{x:l.x,y:c.y}],d=[{x:c.x,y:l.y}];if(m="x"===u?i.x===h?d:o:i.y===h?o:d,t===r){const t=Math.abs(e[u]-n[u]);if(t<=s){const r=Math.min(s-1,s-t);i[u]===h?g[u]=(l[u]>e[u]?-1:1)*r:y[u]=(c[u]>n[u]?-1:1)*r}}if(t!==r){const e="x"===u?"y":"x",t=i[u]===a[e],n=l[e]>c[e],r=l[e]<c[e];(1===i[u]&&(!t&&n||t&&r)||1!==i[u]&&(!t&&r||t&&n))&&(m="x"===u?o:d)}const b={x:l.x+g.x,y:l.y+g.y},x={x:c.x+y.x,y:c.y+y.y};Math.max(Math.abs(b.x-m[0].x),Math.abs(x.x-m[0].x))>=Math.max(Math.abs(b.y-m[0].y),Math.abs(x.y-m[0].y))?(f=(b.x+x.x)/2,p=m[0].y):(f=m[0].x,p=(b.y+x.y)/2)}return[[e,{x:l.x+g.x,y:l.y+g.y},...m,{x:c.x+y.x,y:c.y+y.y},n],f,p,v,w]}function MO({sourceX:e,sourceY:t,sourcePosition:n=CO.Bottom,targetX:r,targetY:o,targetPosition:s=CO.Top,borderRadius:i=5,centerX:a,centerY:l,offset:c=20}){const[d,u,h,f,p]=TO({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:a,y:l},offset:c});return[d.reduce(((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const o=Math.min(AO(e,t)/2,AO(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i)return`L ${s+o*(e.x<n.x?-1:1)},${i}Q ${s},${i} ${s},${i+o*(e.y<n.y?1:-1)}`;const a=e.x<n.x?1:-1;return`L ${s},${i+o*(e.y<n.y?-1:1)}Q ${s},${i} ${s+o*a},${i}`}(d[n-1],t,d[n+1],i):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=r}),""),u,h,f,p]}const DO=l.memo((({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,sourcePosition:u=CO.Bottom,targetPosition:h=CO.Top,markerEnd:f,markerStart:p,pathOptions:g,interactionWidth:y})=>{const[b,x,v]=MO({sourceX:e,sourceY:t,sourcePosition:u,targetX:n,targetY:r,targetPosition:h,borderRadius:null==g?void 0:g.borderRadius,offset:null==g?void 0:g.offset});return m.createElement(dO,{path:b,labelX:x,labelY:v,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:f,markerStart:p,interactionWidth:y})}));DO.displayName="SmoothStepEdge";const OO=l.memo((e=>{var t;return m.createElement(DO,{...e,pathOptions:l.useMemo((()=>{var t;return{borderRadius:0,offset:null==(t=e.pathOptions)?void 0:t.offset}}),[null==(t=e.pathOptions)?void 0:t.offset])})}));OO.displayName="StepEdge";const RO=l.memo((({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:h,interactionWidth:f})=>{const[p,g,y]=function({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,a]=hO({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,a]}({sourceX:e,sourceY:t,targetX:n,targetY:r});return m.createElement(dO,{path:p,labelX:g,labelY:y,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:h,interactionWidth:f})}));function PO(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function LO({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case CO.Left:return[t-PO(t-r,s),n];case CO.Right:return[t+PO(r-t,s),n];case CO.Top:return[t,n-PO(n-o,s)];case CO.Bottom:return[t,n+PO(o-n,s)]}}function zO({sourceX:e,sourceY:t,sourcePosition:n=CO.Bottom,targetX:r,targetY:o,targetPosition:s=CO.Top,curvature:i=.25}){const[a,l]=LO({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[c,d]=LO({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[u,h,f,p]=fO({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${l} ${c},${d} ${r},${o}`,u,h,f,p]}RO.displayName="StraightEdge";const FO=l.memo((({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=CO.Bottom,targetPosition:s=CO.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:f,markerStart:p,pathOptions:g,interactionWidth:y})=>{const[b,x,v]=zO({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:null==g?void 0:g.curvature});return m.createElement(dO,{path:b,labelX:x,labelY:v,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:f,markerStart:p,interactionWidth:y})}));FO.displayName="BezierEdge";const BO=l.createContext(null),UO=BO.Provider;BO.Consumer;const $O=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,VO=(e,t)=>{if(void 0===e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`},HO=({x:e,y:t},[n,r,o],s,[i,a])=>{const l={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},WO=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),GO=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},qO=(e,t=[0,0])=>{if(0===e.length)return{x:0,y:0,width:0,height:0};return(({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}))(e.reduce(((e,n)=>{const{x:r,y:o}=GO(n,t).positionAbsolute;return s=e,i=eO({x:r,y:o,width:n.width||0,height:n.height||0}),{x:Math.min(s.x,i.x),y:Math.min(s.y,i.y),x2:Math.max(s.x2,i.x2),y2:Math.max(s.y2,i.y2)};var s,i}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0}))},YO=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,a=[0,0])=>{const l={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},c=[];return e.forEach((e=>{const{width:t,height:n,selectable:r=!0,hidden:o=!1}=e;if(i&&!r||o)return!1;const{positionAbsolute:d}=GO(e,a),u={x:d.x,y:d.y,width:t||0,height:n||0},h=nO(l,u);(void 0===t||void 0===n||null===t||null===n||s&&h>0||h>=(t||0)*(n||0)||e.dragging)&&c.push(e)})),c},JO=(e,t)=>{const n=e.map((e=>e.id));return t.filter((e=>n.includes(e.source)||n.includes(e.target)))},XO=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),a=n/(e.height*(1+s)),l=Math.min(i,a),c=JD(l,r,o);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},KO=(e,t=0)=>e.transition().duration(t);function ZO(e,t,n,r){return(t[n]||[]).reduce(((t,o)=>{var s,i;return`${e.id}-${o.id}-${n}`!==r&&t.push({id:o.id||null,type:n,nodeId:e.id,x:((null==(s=e.positionAbsolute)?void 0:s.x)??0)+o.x+o.width/2,y:((null==(i=e.positionAbsolute)?void 0:i.y)??0)+o.y+o.height/2}),t}),[])}const QO={source:null,target:null,sourceHandle:null,targetHandle:null},eR=()=>({handleDomNode:null,isValid:!1,connection:QO,endHandle:null});function tR(e,t,n,r,o,s,i){const a="target"===o,l=i.querySelector(`.react-flow__handle[data-id="${null==e?void 0:e.nodeId}-${null==e?void 0:e.id}-${null==e?void 0:e.type}"]`),c={...eR(),handleDomNode:l};if(l){const e=nR(void 0,l),o=l.getAttribute("data-nodeid"),i=l.getAttribute("data-handleid"),d=l.classList.contains("connectable"),u=l.classList.contains("connectableend"),h={source:a?o:n,sourceHandle:a?i:r,target:a?n:o,targetHandle:a?r:i};c.connection=h;d&&u&&(t===pO.Strict?a&&"source"===e||!a&&"target"===e:o!==n||i!==r)&&(c.endHandle={nodeId:o,handleId:i,type:e},c.isValid=s(h))}return c}function nR(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}function rR(e){null==e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function oR(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function sR({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:c}){const d=QD(e.target),{connectionMode:u,domNode:h,autoPanOnConnect:f,connectionRadius:p,onConnectStart:m,panBy:g,getNodes:y,cancelConnection:b}=s();let x,v=0;const{x:w,y:k}=lO(e),S=null==d?void 0:d.elementFromPoint(w,k),C=nR(l,S),E=null==h?void 0:h.getBoundingClientRect();if(!E||!C)return;let N,j=lO(e,E),_=!1,I=null,A=!1,T=null;const M=function({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce(((e,o)=>{if(o[oO]){const{handleBounds:s}=o[oO];let i=[],a=[];s&&(i=ZO(o,s,"source",`${t}-${n}-${r}`),a=ZO(o,s,"target",`${t}-${n}-${r}`)),e.push(...i,...a)}return e}),[])}({nodes:y(),nodeId:n,handleId:t,handleType:C}),D=()=>{if(!f)return;const[e,t]=ZD(j,E);g({x:e,y:t}),v=requestAnimationFrame(D)};function O(e){const{transform:r}=s();j=lO(e,E);const{handle:l,validHandleResult:c}=function(e,t,n,r,o,s){const{x:i,y:a}=lO(e),l=t.elementsFromPoint(i,a).find((e=>e.classList.contains("react-flow__handle")));if(l){const e=l.getAttribute("data-nodeid");if(e){const t=nR(void 0,l),r=l.getAttribute("data-handleid"),i=s({nodeId:e,id:r,type:t});if(i){const s=o.find((n=>n.nodeId===e&&n.type===t&&n.id===r));return{handle:{id:r,type:t,nodeId:e,x:(null==s?void 0:s.x)||n.x,y:(null==s?void 0:s.y)||n.y},validHandleResult:i}}}}let c=[],d=1/0;if(o.forEach((e=>{const t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){const n=s(e);t<=d&&(t<d?c=[{handle:e,validHandleResult:n}]:t===d&&c.push({handle:e,validHandleResult:n}),d=t)}})),!c.length)return{handle:null,validHandleResult:eR()};if(1===c.length)return c[0];const u=c.some((({validHandleResult:e})=>e.isValid)),h=c.some((({handle:e})=>"target"===e.type));return c.find((({handle:e,validHandleResult:t})=>h?"target"===e.type:!u||t.isValid))||c[0]}(e,d,HO(j,r,!1,[1,1]),p,M,(e=>tR(e,u,n,t,o?"target":"source",a,d)));if(x=l,_||(D(),_=!0),T=c.handleDomNode,I=c.connection,A=c.isValid,i({connectionPosition:x&&A?WO({x:x.x,y:x.y},r):j,connectionStatus:oR(!!x,A),connectionEndHandle:c.endHandle}),!x&&!A&&!T)return rR(N);I.source!==I.target&&T&&(rR(N),N=T,T.classList.add("connecting","react-flow__handle-connecting"),T.classList.toggle("valid",A),T.classList.toggle("react-flow__handle-valid",A))}function R(e){var t,n;(x||T)&&I&&A&&(null==r||r(I)),null==(n=(t=s()).onConnectEnd)||n.call(t,e),l&&(null==c||c(e)),rR(N),b(),cancelAnimationFrame(v),_=!1,A=!1,I=null,T=null,d.removeEventListener("mousemove",O),d.removeEventListener("mouseup",R),d.removeEventListener("touchmove",O),d.removeEventListener("touchend",R)}i({connectionPosition:j,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:C,connectionStartHandle:{nodeId:n,handleId:t,type:C},connectionEndHandle:null}),null==m||m(e,{nodeId:n,handleId:t,handleType:C}),d.addEventListener("mousemove",O),d.addEventListener("mouseup",R),d.addEventListener("touchmove",O),d.addEventListener("touchend",R)}const iR=()=>!0,aR=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),lR=l.forwardRef((({type:e="source",position:t=CO.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:c,className:d,onMouseDown:u,onTouchStart:h,...f},p)=>{var g,y;const b=i||null,x="target"===e,v=VD(),w=l.useContext(BO),{connectOnClick:k,noPanClassName:S}=$D(aR,aD),{connecting:C,clickConnecting:E}=$D(((e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(null==o?void 0:o.nodeId)===e&&(null==o?void 0:o.handleId)===t&&(null==o?void 0:o.type)===n||(null==s?void 0:s.nodeId)===e&&(null==s?void 0:s.handleId)===t&&(null==s?void 0:s.type)===n,clickConnecting:(null==i?void 0:i.nodeId)===e&&(null==i?void 0:i.handleId)===t&&(null==i?void 0:i.type)===n}})(w,b,e),aD);w||null==(y=(g=v.getState()).onError)||y.call(g,"010",zD());const N=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=v.getState(),o={...t,...e};if(r){const{edges:e,setEdges:t}=v.getState();t(((e,t)=>{if(!e.source||!e.target)return t;let n;var r;return n="id"in(r=e)&&"source"in r&&"target"in r?{...e}:{...e,id:$O(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:t.concat(n)})(o,e))}null==n||n(o),null==a||a(o)},j=e=>{if(!w)return;const t=aO(e);o&&(t&&0===e.button||!t)&&sR({event:e,handleId:b,nodeId:w,onConnect:N,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||iR}),t?null==u||u(e):null==h||h(e)};return m.createElement("div",{"data-handleid":b,"data-nodeid":w,"data-handlepos":t,"data-id":`${w}-${b}-${e}`,className:tD(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,d,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:s,connecting:E,connectionindicator:r&&(o&&!C||s&&C)}]),onMouseDown:j,onTouchStart:j,onClick:k?t=>{const{onClickConnectStart:r,onClickConnectEnd:s,connectionClickStartHandle:i,connectionMode:a,isValidConnection:l}=v.getState();if(!w||!i&&!o)return;if(!i)return null==r||r(t,{nodeId:w,handleId:b,handleType:e}),void v.setState({connectionClickStartHandle:{nodeId:w,type:e,handleId:b}});const c=QD(t.target),d=n||l||iR,{connection:u,isValid:h}=tR({nodeId:w,id:b,type:e},a,i.nodeId,i.handleId||null,i.type,d,c);h&&N(u),null==s||s(t),v.setState({connectionClickStartHandle:null})}:void 0,ref:p,...f},c)}));lR.displayName="Handle";var cR=l.memo(lR);const dR=({data:e,isConnectable:t,targetPosition:n=CO.Top,sourcePosition:r=CO.Bottom})=>m.createElement(m.Fragment,null,m.createElement(cR,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label,m.createElement(cR,{type:"source",position:r,isConnectable:t}));dR.displayName="DefaultNode";var uR=l.memo(dR);const hR=({data:e,isConnectable:t,sourcePosition:n=CO.Bottom})=>m.createElement(m.Fragment,null,null==e?void 0:e.label,m.createElement(cR,{type:"source",position:n,isConnectable:t}));hR.displayName="InputNode";var fR=l.memo(hR);const pR=({data:e,isConnectable:t,targetPosition:n=CO.Top})=>m.createElement(m.Fragment,null,m.createElement(cR,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label);pR.displayName="OutputNode";var mR=l.memo(pR);const gR=()=>null;gR.displayName="GroupNode";const yR=e=>({selectedNodes:e.getNodes().filter((e=>e.selected)),selectedEdges:e.edges.filter((e=>e.selected)).map((e=>({...e})))}),bR=e=>e.id;function xR(e,t){return aD(e.selectedNodes.map(bR),t.selectedNodes.map(bR))&&aD(e.selectedEdges.map(bR),t.selectedEdges.map(bR))}const vR=l.memo((({onSelectionChange:e})=>{const t=VD(),{selectedNodes:n,selectedEdges:r}=$D(yR,xR);return l.useEffect((()=>{const o={nodes:n,edges:r};null==e||e(o),t.getState().onSelectionChange.forEach((e=>e(o)))}),[n,r,e]),null}));vR.displayName="SelectionListener";const wR=e=>!!e.onSelectionChange;function kR({onSelectionChange:e}){const t=$D(wR);return e||t?m.createElement(vR,{onSelectionChange:e}):null}const SR=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function CR(e,t){l.useEffect((()=>{void 0!==e&&t(e)}),[e])}function ER(e,t,n){l.useEffect((()=>{void 0!==t&&n({[e]:t})}),[t])}const NR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:d,nodesConnectable:u,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:p,elevateNodesOnSelect:m,minZoom:g,maxZoom:y,nodeExtent:b,onNodesChange:x,onEdgesChange:v,elementsSelectable:w,connectionMode:k,snapGrid:S,snapToGrid:C,translateExtent:E,connectOnClick:N,defaultEdgeOptions:j,fitView:_,fitViewOptions:I,onNodesDelete:A,onEdgesDelete:T,onNodeDrag:M,onNodeDragStart:D,onNodeDragStop:O,onSelectionDrag:R,onSelectionDragStart:P,onSelectionDragStop:L,noPanClassName:z,nodeOrigin:F,rfId:B,autoPanOnConnect:U,autoPanOnNodeDrag:$,onError:V,connectionRadius:H,isValidConnection:W,nodeDragThreshold:G})=>{const{setNodes:q,setEdges:Y,setDefaultNodesAndEdges:J,setMinZoom:X,setMaxZoom:K,setTranslateExtent:Z,setNodeExtent:Q,reset:ee}=$D(SR,aD),te=VD();return l.useEffect((()=>{const e=null==r?void 0:r.map((e=>({...e,...j})));return J(n,e),()=>{ee()}}),[]),ER("defaultEdgeOptions",j,te.setState),ER("connectionMode",k,te.setState),ER("onConnect",o,te.setState),ER("onConnectStart",s,te.setState),ER("onConnectEnd",i,te.setState),ER("onClickConnectStart",a,te.setState),ER("onClickConnectEnd",c,te.setState),ER("nodesDraggable",d,te.setState),ER("nodesConnectable",u,te.setState),ER("nodesFocusable",h,te.setState),ER("edgesFocusable",f,te.setState),ER("edgesUpdatable",p,te.setState),ER("elementsSelectable",w,te.setState),ER("elevateNodesOnSelect",m,te.setState),ER("snapToGrid",C,te.setState),ER("snapGrid",S,te.setState),ER("onNodesChange",x,te.setState),ER("onEdgesChange",v,te.setState),ER("connectOnClick",N,te.setState),ER("fitViewOnInit",_,te.setState),ER("fitViewOnInitOptions",I,te.setState),ER("onNodesDelete",A,te.setState),ER("onEdgesDelete",T,te.setState),ER("onNodeDrag",M,te.setState),ER("onNodeDragStart",D,te.setState),ER("onNodeDragStop",O,te.setState),ER("onSelectionDrag",R,te.setState),ER("onSelectionDragStart",P,te.setState),ER("onSelectionDragStop",L,te.setState),ER("noPanClassName",z,te.setState),ER("nodeOrigin",F,te.setState),ER("rfId",B,te.setState),ER("autoPanOnConnect",U,te.setState),ER("autoPanOnNodeDrag",$,te.setState),ER("onError",V,te.setState),ER("connectionRadius",H,te.setState),ER("isValidConnection",W,te.setState),ER("nodeDragThreshold",G,te.setState),CR(e,q),CR(t,Y),CR(g,X),CR(y,K),CR(E,Z),CR(b,Q),null},jR={display:"none"},_R={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},IR="react-flow__node-desc",AR="react-flow__edge-desc",TR=e=>e.ariaLiveMessage;function MR({rfId:e}){const t=$D(TR);return m.createElement("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:_R},t)}function DR({rfId:e,disableKeyboardA11y:t}){return m.createElement(m.Fragment,null,m.createElement("div",{id:`${IR}-${e}`,style:jR},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),m.createElement("div",{id:`${AR}-${e}`,style:jR},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&m.createElement(MR,{rfId:e}))}var OR=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=l.useState(!1),o=l.useRef(!1),s=l.useRef(new Set([])),[i,a]=l.useMemo((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.split("+"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return l.useEffect((()=>{const n="undefined"!=typeof document?document:null,l=(null==t?void 0:t.target)||n;if(null!==e){const e=e=>{o.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!o.current||o.current&&!t.actInsideInputWithModifier)&&iO(e))return!1;const n=PR(e.code,a);s.current.add(e[n]),RR(i,s.current,!1)&&(e.preventDefault(),r(!0))},n=e=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&iO(e))return!1;const n=PR(e.code,a);RR(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(e[n]),"Meta"===e.key&&s.current.clear(),o.current=!1},c=()=>{s.current.clear(),r(!1)};return null==l||l.addEventListener("keydown",e),null==l||l.addEventListener("keyup",n),window.addEventListener("blur",c),()=>{null==l||l.removeEventListener("keydown",e),null==l||l.removeEventListener("keyup",n),window.removeEventListener("blur",c)}}}),[e,r]),n};function RR(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function PR(e,t){return t.includes(e)?"code":"key"}function LR(e,t,n,r){var o,s;const i=e.parentNode||e.parentId;if(!i)return n;const a=t.get(i),l=GO(a,r);return LR(a,t,{x:(n.x??0)+l.x,y:(n.y??0)+l.y,z:((null==(o=a[oO])?void 0:o.z)??0)>(n.z??0)?(null==(s=a[oO])?void 0:s.z)??0:n.z??0},r)}function zR(e,t,n){e.forEach((r=>{var o;const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||(null==n?void 0:n[r.id])){const{x:s,y:i,z:a}=LR(r,e,{...r.position,z:(null==(o=r[oO])?void 0:o.z)??0},t);r.positionAbsolute={x:s,y:i},r[oO].z=a,(null==n?void 0:n[r.id])&&(r[oO].isParent=!0)}}))}function FR(e,t,n,r){const o=new Map,s={},i=r?1e3:0;return e.forEach((e=>{var n;const r=(rO(e.zIndex)?e.zIndex:0)+(e.selected?i:0),a=t.get(e.id),l={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},c=e.parentNode||e.parentId;c&&(s[c]=!0);const d=(null==a?void 0:a.type)&&(null==a?void 0:a.type)!==e.type;Object.defineProperty(l,oO,{enumerable:!1,value:{handleBounds:d||null==(n=null==a?void 0:a[oO])?void 0:n.handleBounds,z:r}}),o.set(e.id,l)})),zR(o,n,s),o}function BR(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:u}=e(),h=t.initial&&!c&&d;if(a&&l&&(h||!t.initial)){const e=n().filter((e=>{var n;const r=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return(null==(n=t.nodes)?void 0:n.length)?r&&t.nodes.some((t=>t.id===e.id)):r})),c=e.every((e=>e.width&&e.height));if(e.length>0&&c){const n=qO(e,u),{x:c,y:d,zoom:h}=XO(n,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),f=Bc.translate(c,d).scale(h);return"number"==typeof t.duration&&t.duration>0?a.transform(KO(l,t.duration),f):a.transform(l,f),!0}}return!1}function UR(e,t){return e.forEach((e=>{const n=t.get(e.id);n&&t.set(n.id,{...n,[oO]:n[oO],selected:e.selected})})),new Map(t)}function $R(e,t){return t.map((t=>{const n=e.find((e=>e.id===t.id));return n&&(t.selected=n.selected),t}))}function VR({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:c}=n();(null==e?void 0:e.length)&&(l&&r({nodeInternals:UR(e,o)}),null==i||i(e)),(null==t?void 0:t.length)&&(c&&r({edges:$R(t,s)}),null==a||a(t))}const HR=()=>{},WR={zoomIn:HR,zoomOut:HR,zoomTo:HR,getZoom:()=>1,setViewport:HR,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:HR,fitBounds:HR,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},GR=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function qR(){const e=(()=>{const e=VD(),{d3Zoom:t,d3Selection:n}=$D(GR,aD),r=l.useMemo((()=>n&&t?{zoomIn:e=>t.scaleBy(KO(n,null==e?void 0:e.duration),1.2),zoomOut:e=>t.scaleBy(KO(n,null==e?void 0:e.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(KO(n,null==r?void 0:r.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,o)=>{const[s,i,a]=e.getState().transform,l=Bc.translate(r.x??s,r.y??i).scale(r.zoom??a);t.transform(KO(n,null==o?void 0:o.duration),l)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>BR(e.getState,t),setCenter:(r,o,s)=>{const{width:i,height:a,maxZoom:l}=e.getState(),c=void 0!==(null==s?void 0:s.zoom)?s.zoom:l,d=i/2-r*c,u=a/2-o*c,h=Bc.translate(d,u).scale(c);t.transform(KO(n,null==s?void 0:s.duration),h)},fitBounds:(r,o)=>{const{width:s,height:i,minZoom:a,maxZoom:l}=e.getState(),{x:c,y:d,zoom:u}=XO(r,s,i,a,l,(null==o?void 0:o.padding)??.1),h=Bc.translate(c,d).scale(u);t.transform(KO(n,null==o?void 0:o.duration),h)},project:t=>{const{transform:n,snapToGrid:r,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),HO(t,n,r,o)},screenToFlowPosition:t=>{const{transform:n,snapToGrid:r,snapGrid:o,domNode:s}=e.getState();if(!s)return t;const{x:i,y:a}=s.getBoundingClientRect(),l={x:t.x-i,y:t.y-a};return HO(l,n,r,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:s}=r.getBoundingClientRect(),i=WO(t,n);return{x:i.x+o,y:i.y+s}},viewportInitialized:!0}:WR),[t,n]);return r})(),t=VD(),n=l.useCallback((()=>t.getState().getNodes().map((e=>({...e})))),[]),r=l.useCallback((e=>t.getState().nodeInternals.get(e)),[]),o=l.useCallback((()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))}),[]),s=l.useCallback((e=>{const{edges:n=[]}=t.getState();return n.find((t=>t.id===e))}),[]),i=l.useCallback((e=>{const{getNodes:n,setNodes:r,hasDefaultNodes:o,onNodesChange:s}=t.getState(),i=n(),a="function"==typeof e?e(i):e;if(o)r(a);else if(s){s(0===a.length?i.map((e=>({type:"remove",id:e.id}))):a.map((e=>({item:e,type:"reset"}))))}}),[]),a=l.useCallback((e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:s}=t.getState(),i="function"==typeof e?e(n):e;if(o)r(i);else if(s){s(0===i.length?n.map((e=>({type:"remove",id:e.id}))):i.map((e=>({item:e,type:"reset"}))))}}),[]),c=l.useCallback((e=>{const n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:o,hasDefaultNodes:s,onNodesChange:i}=t.getState();if(s){o([...r(),...n])}else if(i){i(n.map((e=>({item:e,type:"add"}))))}}),[]),d=l.useCallback((e=>{const n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:o,hasDefaultEdges:s,onEdgesChange:i}=t.getState();if(s)o([...r,...n]);else if(i){i(n.map((e=>({item:e,type:"add"}))))}}),[]),u=l.useCallback((()=>{const{getNodes:e,edges:n=[],transform:r}=t.getState(),[o,s,i]=r;return{nodes:e().map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:o,y:s,zoom:i}}}),[]),h=l.useCallback((({nodes:e,edges:n})=>{const{nodeInternals:r,getNodes:o,edges:s,hasDefaultNodes:i,hasDefaultEdges:a,onNodesDelete:l,onEdgesDelete:c,onNodesChange:d,onEdgesChange:u}=t.getState(),h=(e||[]).map((e=>e.id)),f=(n||[]).map((e=>e.id)),p=o().reduce(((e,t)=>{const n=t.parentNode||t.parentId,r=!h.includes(t.id)&&n&&e.find((e=>e.id===n));return("boolean"!=typeof t.deletable||t.deletable)&&(h.includes(t.id)||r)&&e.push(t),e}),[]),m=s.filter((e=>"boolean"!=typeof e.deletable||e.deletable)),g=m.filter((e=>f.includes(e.id)));if(p||g){const e=JO(p,m),n=[...g,...e],o=n.reduce(((e,t)=>(e.includes(t.id)||e.push(t.id),e)),[]);if((a||i)&&(a&&t.setState({edges:s.filter((e=>!o.includes(e.id)))}),i&&(p.forEach((e=>{r.delete(e.id)})),t.setState({nodeInternals:new Map(r)}))),o.length>0&&(null==c||c(n),u&&u(o.map((e=>({id:e,type:"remove"}))))),p.length>0&&(null==l||l(p),d)){d(p.map((e=>({id:e.id,type:"remove"}))))}}}),[]),f=l.useCallback((e=>{const n=rO((r=e).width)&&rO(r.height)&&rO(r.x)&&rO(r.y);var r;const o=n?null:t.getState().nodeInternals.get(e.id);if(!n&&!o)return[null,null,n];return[n?e:tO(o),o,n]}),[]),p=l.useCallback(((e,n=!0,r)=>{const[o,s,i]=f(e);return o?(r||t.getState().getNodes()).filter((e=>{if(!(i||e.id!==s.id&&e.positionAbsolute))return!1;const t=tO(e),r=nO(t,o);return n&&r>0||r>=o.width*o.height})):[]}),[]),m=l.useCallback(((e,t,n=!0)=>{const[r]=f(e);if(!r)return!1;const o=nO(r,t);return n&&o>0||o>=r.width*r.height}),[]);return l.useMemo((()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:a,addNodes:c,addEdges:d,toObject:u,deleteElements:h,getIntersectingNodes:p,isNodeIntersecting:m})),[e,n,r,o,s,i,a,c,d,u,h,p,m])}const YR={actInsideInputWithModifier:!1};const JR={position:"absolute",width:"100%",height:"100%",top:0,left:0},XR=e=>({x:e.x,y:e.y,zoom:e.k}),KR=(e,t)=>e.target.closest(`.${t}`),ZR=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),QR=e=>{const t=e.ctrlKey&&cO()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},eP=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),tP=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=gO.Free,zoomOnDoubleClick:d=!0,elementsSelectable:u,panOnDrag:h=!0,defaultViewport:f,translateExtent:p,minZoom:g,maxZoom:y,zoomActivationKeyCode:b,preventScrolling:x=!0,children:v,noWheelClassName:w,noPanClassName:k})=>{const S=l.useRef(),C=VD(),E=l.useRef(!1),N=l.useRef(!1),j=l.useRef(null),_=l.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:A,d3ZoomHandler:T,userSelectionActive:M}=$D(eP,aD),D=OR(b),O=l.useRef(0),R=l.useRef(!1),P=l.useRef();return function(e){const t=VD();l.useEffect((()=>{let n;const r=()=>{var n,r;if(!e.current)return;const o=YD(e.current);0!==o.height&&0!==o.width||null==(r=(n=t.getState()).onError)||r.call(n,"004",OD()),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver((()=>r())),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}}),[])}(j),l.useEffect((()=>{if(j.current){const e=j.current.getBoundingClientRect(),t=function(){var e,t,n,r=ED,o=ND,s=AD,i=_D,a=ID,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=Hc,h=Vc("start","zoom","end"),f=0,p=10;function m(e){e.property("__zoom",jD).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",C).filter(a).on("touchstart.zoom",E).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Uc(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Uc(e.k,r,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,r){e.on("start.zoom",(function(){v(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){v(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,s=arguments,i=v(e,s).event(r),a=o.apply(e,s),l=null==n?b(a):"function"==typeof n?n.apply(e,s):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),d=e.__zoom,h="function"==typeof t?t.apply(e,s):t,f=u(d.invert(l).concat(c/d.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=c/t[2];e=new Uc(n,l[0]-t[0]*n,l[1]-t[1]*n)}i.zoom(null,e)}}))}function v(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function k(e,...t){if(r.apply(this,arguments)){var n=v(this,t).event(e),o=this.__zoom,a=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,i.apply(this,arguments)))),d=lD(e);if(n.wheel)n.mouse[0][0]===d[0]&&n.mouse[0][1]===d[1]||(n.mouse[1]=o.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(o.k===a)return;n.mouse=[d,o.invert(d)],$c(this),n.start()}CD(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",s(y(g(o,a),n.mouse[0],n.mouse[1]),n.extent,c))}}function S(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=v(this,t,!0).event(e),a=Fc(e.view).on("mousemove.zoom",(function(e){if(CD(e),!i.moved){var t=e.clientX-d,n=e.clientY-u;i.moved=t*t+n*n>f}i.event(e).zoom("mouse",s(y(i.that.__zoom,i.mouse[0]=lD(e,o),i.mouse[1]),i.extent,c))}),!0).on("mouseup.zoom",(function(e){a.on("mousemove.zoom mouseup.zoom",null),pD(e.view,i.moved),CD(e),i.event(e).end()}),!0),l=lD(e,o),d=e.clientX,u=e.clientY;fD(e.view),SD(e),i.mouse=[l,this.__zoom.invert(l)],$c(this),i.start()}}function C(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=lD(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(i),l=n.k*(e.shiftKey?.5:2),u=s(y(g(n,l),i,a),o.apply(this,t),c);CD(e),d>0?Fc(this).transition().duration(d).call(x,u,i,e):Fc(this).call(m.transform,u,i,e)}}function E(n,...o){if(r.apply(this,arguments)){var s,i,a,l,c=n.touches,d=c.length,u=v(this,o,n.changedTouches.length===d).event(n);for(SD(n),i=0;i<d;++i)l=[l=lD(a=c[i],this),this.__zoom.invert(l),a.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,s=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(u.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),500)),$c(this),u.start())}}function N(e,...t){if(this.__zooming){var n,r,o,i,a=v(this,t).event(e),l=e.changedTouches,d=l.length;for(CD(e),n=0;n<d;++n)o=lD(r=l[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=o:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=o);if(r=a.that.__zoom,a.touch1){var u=a.touch0[0],h=a.touch0[1],f=a.touch1[0],p=a.touch1[1],m=(m=f[0]-u[0])*m+(m=f[1]-u[1])*m,b=(b=p[0]-h[0])*b+(b=p[1]-h[1])*b;r=g(r,Math.sqrt(m/b)),o=[(u[0]+f[0])/2,(u[1]+f[1])/2],i=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!a.touch0)return;o=a.touch0[0],i=a.touch0[1]}a.zoom("touch",s(y(r,o,i),a.extent,c))}}function j(e,...r){if(this.__zooming){var o,s,i=v(this,r).event(e),a=e.changedTouches,l=a.length;for(SD(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),o=0;o<l;++o)s=a[o],i.touch0&&i.touch0[2]===s.identifier?delete i.touch0:i.touch1&&i.touch1[2]===s.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(s=lD(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<p)){var c=Fc(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",jD),e!==o?x(e,t,n,r):o.interrupt().each((function(){v(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,r){m.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?b(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(i),l="function"==typeof t?t.apply(this,arguments):t;return s(y(g(r,l),i,a),e,c)}),n,r)},m.translateBy=function(e,t,n,r){m.transform(e,(function(){return s(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)}),null,r)},m.translateTo=function(e,t,n,r,i){m.transform(e,(function(){var e=o.apply(this,arguments),i=this.__zoom,a=null==r?b(e):"function"==typeof r?r.apply(this,arguments):r;return s(Bc.translate(a[0],a[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Fc(this.that).datum();h.call(e,this.that,new kD(e,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:wD(+e),m):i},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:wD(!!e),m):r},m.touchable=function(e){return arguments.length?(a="function"==typeof e?e:wD(!!e),m):a},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:wD([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(s=e,m):s},m.duration=function(e){return arguments.length?(d=+e,m):d},m.interpolate=function(e){return arguments.length?(u=e,m):u},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,m):Math.sqrt(f)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}().scaleExtent([g,y]).translateExtent(p),n=Fc(j.current).call(t),r=Bc.translate(f.x,f.y).scale(JD(f.zoom,g,y)),o=[[0,0],[e.width,e.height]],s=t.constrain()(r,o,p);t.transform(n,s),t.wheelDelta(QR),C.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[s.x,s.y,s.k],domNode:j.current.closest(".react-flow")})}}),[]),l.useEffect((()=>{A&&I&&(!i||D||M?void 0!==T&&A.on("wheel.zoom",(function(e,t){if(!x&&"wheel"===e.type&&!e.ctrlKey||KR(e,w))return null;e.preventDefault(),T.call(this,e,t)}),{passive:!1}):A.on("wheel.zoom",(r=>{if(KR(r,w))return!1;r.preventDefault(),r.stopImmediatePropagation();const o=A.property("__zoom").k||1;if(r.ctrlKey&&s){const e=lD(r),t=QR(r),n=o*Math.pow(2,t);return void I.scaleTo(A,n,e,r)}const i=1===r.deltaMode?20:1;let l=c===gO.Vertical?0:r.deltaX*i,d=c===gO.Horizontal?0:r.deltaY*i;!cO()&&r.shiftKey&&c!==gO.Vertical&&(l=r.deltaY*i,d=0),I.translateBy(A,-l/o*a,-d/o*a,{internal:!0});const u=XR(A.property("__zoom")),{onViewportChangeStart:h,onViewportChange:f,onViewportChangeEnd:p}=C.getState();clearTimeout(P.current),R.current||(R.current=!0,null==t||t(r,u),null==h||h(u)),R.current&&(null==e||e(r,u),null==f||f(u),P.current=setTimeout((()=>{null==n||n(r,u),null==p||p(u),R.current=!1}),150))}),{passive:!1}))}),[M,i,c,A,I,T,D,s,x,w,t,e,n]),l.useEffect((()=>{I&&I.on("start",(e=>{var n,r;if(!e.sourceEvent||e.sourceEvent.internal)return null;O.current=null==(n=e.sourceEvent)?void 0:n.button;const{onViewportChangeStart:o}=C.getState(),s=XR(e.transform);E.current=!0,_.current=s,"mousedown"===(null==(r=e.sourceEvent)?void 0:r.type)&&C.setState({paneDragging:!0}),null==o||o(s),null==t||t(e.sourceEvent,s)}))}),[I,t]),l.useEffect((()=>{I&&(M&&!E.current?I.on("zoom",null):M||I.on("zoom",(t=>{var n;const{onViewportChange:o}=C.getState();if(C.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),N.current=!(!r||!ZR(h,O.current??0)),(e||o)&&!(null==(n=t.sourceEvent)?void 0:n.internal)){const n=XR(t.transform);null==o||o(n),null==e||e(t.sourceEvent,n)}})))}),[M,I,e,h,r]),l.useEffect((()=>{I&&I.on("end",(e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const{onViewportChangeEnd:t}=C.getState();if(E.current=!1,C.setState({paneDragging:!1}),r&&ZR(h,O.current??0)&&!N.current&&r(e.sourceEvent),N.current=!1,(n||t)&&(o=_.current,s=e.transform,o.x!==s.x||o.y!==s.y||o.zoom!==s.k)){const r=XR(e.transform);_.current=r,clearTimeout(S.current),S.current=setTimeout((()=>{null==t||t(r),null==n||n(e.sourceEvent,r)}),i?150:0)}var o,s}))}),[I,i,h,n,r]),l.useEffect((()=>{I&&I.filter((e=>{const t=D||o,n=s&&e.ctrlKey;if((!0===h||Array.isArray(h)&&h.includes(1))&&1===e.button&&"mousedown"===e.type&&(KR(e,"react-flow__node")||KR(e,"react-flow__edge")))return!0;if(!(h||t||i||d||s))return!1;if(M)return!1;if(!d&&"dblclick"===e.type)return!1;if(KR(e,w)&&"wheel"===e.type)return!1;if(KR(e,k)&&("wheel"!==e.type||i&&"wheel"===e.type&&!D))return!1;if(!s&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!i&&!n&&"wheel"===e.type)return!1;if(!h&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(h)&&!h.includes(e.button)&&"mousedown"===e.type)return!1;const r=Array.isArray(h)&&h.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r}))}),[M,I,o,s,i,d,h,u,D]),m.createElement("div",{className:"react-flow__renderer",ref:j,style:JR},v)},nP=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rP(){const{userSelectionActive:e,userSelectionRect:t}=$D(nP,aD);return e&&t?m.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function oP(e,t){const n=t.parentNode||t.parentId,r=e.find((e=>e.id===n));if(r){const e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){const e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){const e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function sP(e,t){if(e.some((e=>"reset"===e.type)))return e.filter((e=>"reset"===e.type)).map((e=>e.item));const n=e.filter((e=>"add"===e.type)).map((e=>e.item));return t.reduce(((t,n)=>{const r=e.filter((e=>e.id===n.id));if(0===r.length)return t.push(n),t;const o={...n};for(const e of r)if(e)switch(e.type){case"select":o.selected=e.selected;break;case"position":void 0!==e.position&&(o.position=e.position),void 0!==e.positionAbsolute&&(o.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(o.dragging=e.dragging),o.expandParent&&oP(t,o);break;case"dimensions":void 0!==e.dimensions&&(o.width=e.dimensions.width,o.height=e.dimensions.height),void 0!==e.updateStyle&&(o.style={...o.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(o.resizing=e.resizing),o.expandParent&&oP(t,o);break;case"remove":return t}return t.push(o),t}),n)}function iP(e,t){return sP(e,t)}const aP=(e,t)=>({id:e,type:"select",selected:t});function lP(e,t){return e.reduce(((e,n)=>{const r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(aP(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(aP(n.id,!1))),e}),[])}const cP=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},dP=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),uP=l.memo((({isSelecting:e,selectionMode:t=bO.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:u,children:h})=>{const f=l.useRef(null),p=VD(),g=l.useRef(0),y=l.useRef(0),b=l.useRef(),{userSelectionActive:x,elementsSelectable:v,dragging:w}=$D(dP,aD),k=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,y.current=0},S=e=>{null==s||s(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},C=a?e=>a(e):void 0,E=v&&(e||x);return m.createElement("div",{className:tD(["react-flow__pane",{dragging:w,selection:e}]),onClick:E?void 0:cP(S,f),onContextMenu:cP((e=>{Array.isArray(n)&&(null==n?void 0:n.includes(2))?e.preventDefault():null==i||i(e)}),f),onWheel:cP(C,f),onMouseEnter:E?void 0:c,onMouseDown:E?t=>{const{resetSelectedElements:n,domNode:o}=p.getState();if(b.current=null==o?void 0:o.getBoundingClientRect(),!v||!e||0!==t.button||t.target!==f.current||!b.current)return;const{x:s,y:i}=lO(t,b.current);n(),p.setState({userSelectionRect:{width:0,height:0,startX:s,startY:i,x:s,y:i}}),null==r||r(t)}:void 0,onMouseMove:E?n=>{const{userSelectionRect:r,nodeInternals:o,edges:s,transform:i,onNodesChange:a,onEdgesChange:l,nodeOrigin:c,getNodes:d}=p.getState();if(!e||!b.current||!r)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const u=lO(n,b.current),h=r.startX??0,f=r.startY??0,m={...r,x:u.x<h?u.x:h,y:u.y<f?u.y:f,width:Math.abs(u.x-h),height:Math.abs(u.y-f)},x=d(),v=YO(o,m,i,t===bO.Partial,!0,c),w=JO(v,s).map((e=>e.id)),k=v.map((e=>e.id));if(g.current!==k.length){g.current=k.length;const e=lP(x,k);e.length&&(null==a||a(e))}if(y.current!==w.length){y.current=w.length;const e=lP(s,w);e.length&&(null==l||l(e))}p.setState({userSelectionRect:m})}:d,onMouseUp:E?e=>{if(0!==e.button)return;const{userSelectionRect:t}=p.getState();!x&&t&&e.target===f.current&&(null==S||S(e)),p.setState({nodesSelectionActive:g.current>0}),k(),null==o||o(e)}:void 0,onMouseLeave:E?e=>{x&&(p.setState({nodesSelectionActive:g.current>0}),null==o||o(e)),k()}:u,ref:f,style:JR},h,m.createElement(rP,null))}));function hP(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return!!r&&(!!r.selected||hP(r,t))}function fP(e,t,n){let r=e;do{if(null==r?void 0:r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function pP(e,t,n,r){return Array.from(e.values()).filter((n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!hP(n,e))&&(n.draggable||t&&void 0===n.draggable))).map((e=>{var t,r;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-((null==(t=e.positionAbsolute)?void 0:t.x)??0),y:n.y-((null==(r=e.positionAbsolute)?void 0:r.y)??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}}))}function mP(e,t,n,r,o=[0,0],s){const i=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||r);let a=i;const l=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&l&&"parent"!==e.extent){const t=n.get(l),{x:r,y:s}=GO(t,o).positionAbsolute;a=[[e.extent[0][0]+r,e.extent[0][1]+s],[e.extent[1][0]+r,e.extent[1][1]+s]]}}else if(l&&e.width&&e.height){const t=n.get(l),{x:r,y:s}=GO(t,o).positionAbsolute;a=t&&rO(r)&&rO(s)&&rO(t.width)&&rO(t.height)?[[r+e.width*o[0],s+e.height*o[1]],[r+t.width-e.width+e.width*o[0],s+t.height-e.height+e.height*o[1]]]:a}else null==s||s("005",RD()),a=i;let c={x:0,y:0};if(l){const e=n.get(l);c=GO(e,o).positionAbsolute}const d=a&&"parent"!==a?XD(t,a):t;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function gP({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map((e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute})));return[e?r.find((t=>t.id===e)):r[0],r]}uP.displayName="Pane";const yP=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),a=i.width*r[0],l=i.height*r[1];return s.map((e=>{const t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-i.left-a)/n,y:(t.top-i.top-l)/n,...YD(e)}}))};function bP(e,t,n){return void 0===n?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function xP({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:l}=t.getState(),c=a.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(s({nodes:[c],edges:[]}),requestAnimationFrame((()=>{var e;return null==(e=null==r?void 0:r.current)?void 0:e.blur()}))):o([e])):null==l||l("012",BD(e))}function vP(e){return(t,n,r)=>null==e?void 0:e(t,r)}function wP({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const a=VD(),[c,d]=l.useState(!1),u=l.useRef([]),h=l.useRef({x:null,y:null}),f=l.useRef(0),p=l.useRef(null),m=l.useRef({x:0,y:0}),g=l.useRef(null),y=l.useRef(!1),b=l.useRef(!1),x=l.useRef(!1),v=function(){const e=VD();return l.useCallback((({sourceEvent:t})=>{const{transform:n,snapGrid:r,snapToGrid:o}=e.getState(),s=t.touches?t.touches[0].clientX:t.clientX,i=t.touches?t.touches[0].clientY:t.clientY,a={x:(s-n[0])/n[2],y:(i-n[1])/n[2]};return{xSnapped:o?r[0]*Math.round(a.x/r[0]):a.x,ySnapped:o?r[1]*Math.round(a.y/r[1]):a.y,...a}}),[])}();return l.useEffect((()=>{if(null==e?void 0:e.current){const l=Fc(e.current),c=({x:e,y:t})=>{const{nodeInternals:n,onNodeDrag:r,onSelectionDrag:s,updateNodePositions:i,nodeExtent:l,snapGrid:c,snapToGrid:f,nodeOrigin:p,onError:m}=a.getState();h.current={x:e,y:t};let y=!1,b={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&l){const e=qO(u.current,p);b=eO(e)}if(u.current=u.current.map((r=>{const o={x:e-r.distance.x,y:t-r.distance.y};f&&(o.x=c[0]*Math.round(o.x/c[0]),o.y=c[1]*Math.round(o.y/c[1]));const s=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];u.current.length>1&&l&&!r.extent&&(s[0][0]=r.positionAbsolute.x-b.x+l[0][0],s[1][0]=r.positionAbsolute.x+(r.width??0)-b.x2+l[1][0],s[0][1]=r.positionAbsolute.y-b.y+l[0][1],s[1][1]=r.positionAbsolute.y+(r.height??0)-b.y2+l[1][1]);const i=mP(r,o,n,s,p,m);return y=y||r.position.x!==i.position.x||r.position.y!==i.position.y,r.position=i.position,r.positionAbsolute=i.positionAbsolute,r})),!y)return;i(u.current,!0,!0),d(!0);const x=o?r:vP(s);if(x&&g.current){const[e,t]=gP({nodeId:o,dragItems:u.current,nodeInternals:n});x(g.current,e,t)}},w=()=>{if(!p.current)return;const[e,t]=ZD(m.current,p.current);if(0!==e||0!==t){const{transform:n,panBy:r}=a.getState();h.current.x=(h.current.x??0)-e/n[2],h.current.y=(h.current.y??0)-t/n[2],r({x:e,y:t})&&c(h.current)}f.current=requestAnimationFrame(w)},k=t=>{var n;const{nodeInternals:r,multiSelectionActive:l,nodesDraggable:c,unselectNodesAndEdges:d,onNodeDragStart:f,onSelectionDragStart:p}=a.getState();b.current=!0;const m=o?f:vP(p);i&&s||l||!o||(null==(n=r.get(o))?void 0:n.selected)||d(),o&&s&&i&&xP({id:o,store:a,nodeRef:e});const g=v(t);if(h.current=g,u.current=pP(r,c,g,o),m&&u.current){const[e,n]=gP({nodeId:o,dragItems:u.current,nodeInternals:r});m(t.sourceEvent,e,n)}};if(!t){const t=function(){var e,t,n,r,o=yD,s=bD,i=xD,a=vD,l={},c=Vc("start","drag","end"),d=0,u=0;function h(e){e.on("mousedown.drag",f).filter(a).on("touchstart.drag",g).on("touchmove.drag",y,cD).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(i,a){if(!r&&o.call(this,i,a)){var l=x(this,s.call(this,i,a),i,a,"mouse");l&&(Fc(i.view).on("mousemove.drag",p,dD).on("mouseup.drag",m,dD),fD(i.view),uD(i),n=!1,e=i.clientX,t=i.clientY,l("start",i))}}function p(r){if(hD(r),!n){var o=r.clientX-e,s=r.clientY-t;n=o*o+s*s>u}l.mouse("drag",r)}function m(e){Fc(e.view).on("mousemove.drag mouseup.drag",null),pD(e.view,n),hD(e),l.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,i=e.changedTouches,a=s.call(this,e,t),l=i.length;for(n=0;n<l;++n)(r=x(this,a,e,t,i[n].identifier,i[n]))&&(uD(e),r("start",e,i[n]))}}function y(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(hD(e),n("drag",e,r[t]))}function b(e){var t,n,o=e.changedTouches,s=o.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<s;++t)(n=l[o[t].identifier])&&(uD(e),n("end",e,o[t]))}function x(e,t,n,r,o,s){var a,u,f,p=c.copy(),m=lD(s||n,t);if(null!=(f=i.call(e,new gD("beforestart",{sourceEvent:n,target:h,identifier:o,active:d,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-m[0]||0,u=f.y-m[1]||0,function n(s,i,c){var g,y=m;switch(s){case"start":l[o]=n,g=d++;break;case"end":delete l[o],--d;case"drag":m=lD(c||i,t),g=d}p.call(s,e,new gD(s,{sourceEvent:i,subject:f,target:h,identifier:o,active:g,x:m[0]+a,y:m[1]+u,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(o="function"==typeof e?e:mD(!!e),h):o},h.container=function(e){return arguments.length?(s="function"==typeof e?e:mD(e),h):s},h.subject=function(e){return arguments.length?(i="function"==typeof e?e:mD(e),h):i},h.touchable=function(e){return arguments.length?(a="function"==typeof e?e:mD(!!e),h):a},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,h):Math.sqrt(u)},h}().on("start",(e=>{const{domNode:t,nodeDragThreshold:n}=a.getState();0===n&&k(e),x.current=!1;const r=v(e);h.current=r,p.current=(null==t?void 0:t.getBoundingClientRect())||null,m.current=lO(e.sourceEvent,p.current)})).on("drag",(e=>{var t,n;const r=v(e),{autoPanOnNodeDrag:o,nodeDragThreshold:s}=a.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(x.current=!0),!x.current){if(!y.current&&b.current&&o&&(y.current=!0,w()),!b.current){const o=r.xSnapped-((null==(t=null==h?void 0:h.current)?void 0:t.x)??0),i=r.ySnapped-((null==(n=null==h?void 0:h.current)?void 0:n.y)??0);Math.sqrt(o*o+i*i)>s&&k(e)}(h.current.x!==r.xSnapped||h.current.y!==r.ySnapped)&&u.current&&b.current&&(g.current=e.sourceEvent,m.current=lO(e.sourceEvent,p.current),c(r))}})).on("end",(e=>{if(b.current&&!x.current&&(d(!1),y.current=!1,b.current=!1,cancelAnimationFrame(f.current),u.current)){const{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:s}=a.getState(),i=o?r:vP(s);if(t(u.current,!1,!1),i){const[t,r]=gP({nodeId:o,dragItems:u.current,nodeInternals:n});i(e.sourceEvent,t,r)}}})).filter((t=>{const o=t.target;return!t.button&&(!n||!fP(o,`.${n}`,e))&&(!r||fP(o,r,e))}));return l.call(t),()=>{l.on(".drag",null)}}l.on(".drag",null)}}),[e,t,n,r,s,a,o,i,v]),c}function kP(){const e=VD();return l.useCallback((t=>{const{nodeInternals:n,nodeExtent:r,updateNodePositions:o,getNodes:s,snapToGrid:i,snapGrid:a,onError:l,nodesDraggable:c}=e.getState(),d=s().filter((e=>e.selected&&(e.draggable||c&&void 0===e.draggable))),u=i?a[0]:5,h=i?a[1]:5,f=t.isShiftPressed?4:1,p=t.x*u*f,m=t.y*h*f;o(d.map((e=>{if(e.positionAbsolute){const t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+m};i&&(t.x=a[0]*Math.round(t.x/a[0]),t.y=a[1]*Math.round(t.y/a[1]));const{positionAbsolute:o,position:s}=mP(e,t,n,r,void 0,l);e.position=s,e.positionAbsolute=o}return e})),!0,!1)}),[])}const SP={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var CP=e=>{const t=({id:t,type:n,data:r,xPos:o,yPos:s,xPosOrigin:i,yPosOrigin:a,selected:c,onClick:d,onMouseEnter:u,onMouseMove:h,onMouseLeave:f,onContextMenu:p,onDoubleClick:g,style:y,className:b,isDraggable:x,isSelectable:v,isConnectable:w,isFocusable:k,selectNodesOnDrag:S,sourcePosition:C,targetPosition:E,hidden:N,resizeObserver:j,dragHandle:_,zIndex:I,isParent:A,noDragClassName:T,noPanClassName:M,initialized:D,disableKeyboardA11y:O,ariaLabel:R,rfId:P,hasHandleBounds:L})=>{const z=VD(),F=l.useRef(null),B=l.useRef(null),U=l.useRef(C),$=l.useRef(E),V=l.useRef(n),H=v||x||d||u||h||f,W=kP(),G=bP(t,z.getState,u),q=bP(t,z.getState,h),Y=bP(t,z.getState,f),J=bP(t,z.getState,p),X=bP(t,z.getState,g);l.useEffect((()=>()=>{B.current&&(null==j||j.unobserve(B.current),B.current=null)}),[]),l.useEffect((()=>{if(F.current&&!N){const e=F.current;D&&L&&B.current===e||(B.current&&(null==j||j.unobserve(B.current)),null==j||j.observe(e),B.current=e)}}),[N,D,L]),l.useEffect((()=>{const e=V.current!==n,r=U.current!==C,o=$.current!==E;F.current&&(e||r||o)&&(e&&(V.current=n),r&&(U.current=C),o&&($.current=E),z.getState().updateNodeDimensions([{id:t,nodeElement:F.current,forceUpdate:!0}]))}),[t,n,C,E]);const K=wP({nodeRef:F,disabled:N||!x,noDragClassName:T,handleSelector:_,nodeId:t,isSelectable:v,selectNodesOnDrag:S});return N?null:m.createElement("div",{className:tD(["react-flow__node",`react-flow__node-${n}`,{[M]:x},b,{selected:c,selectable:v,parent:A,dragging:K}]),ref:F,style:{zIndex:I,transform:`translate(${i}px,${a}px)`,pointerEvents:H?"all":"none",visibility:D?"visible":"hidden",...y},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:G,onMouseMove:q,onMouseLeave:Y,onContextMenu:J,onClick:e=>{const{nodeDragThreshold:n}=z.getState();if(v&&(!S||!x||n>0)&&xP({id:t,store:z,nodeRef:F}),d){const n=z.getState().nodeInternals.get(t);n&&d(e,{...n})}},onDoubleClick:X,onKeyDown:k?e=>{if(!iO(e)&&!O)if(sO.includes(e.key)&&v){const n="Escape"===e.key;xP({id:t,store:z,unselect:n,nodeRef:F})}else x&&c&&Object.prototype.hasOwnProperty.call(SP,e.key)&&(z.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),W({x:SP[e.key].x,y:SP[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":O?void 0:`${IR}-${P}`,"aria-label":R},m.createElement(UO,{value:t},m.createElement(e,{id:t,data:r,type:n,xPos:o,yPos:s,selected:c,isConnectable:w,sourcePosition:C,targetPosition:E,dragging:K,dragHandle:_,zIndex:I})))};return t.displayName="NodeWrapper",l.memo(t)};const EP=e=>{const t=e.getNodes().filter((e=>e.selected));return{...qO(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var NP=l.memo((function({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=VD(),{width:o,height:s,x:i,y:a,transformString:c,userSelectionActive:d}=$D(EP,aD),u=kP(),h=l.useRef(null);if(l.useEffect((()=>{var e;n||null==(e=h.current)||e.focus({preventScroll:!0})}),[n]),wP({nodeRef:h}),d||!o||!s)return null;const f=e?t=>{const n=r.getState().getNodes().filter((e=>e.selected));e(t,n)}:void 0;return m.createElement("div",{className:tD(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},m.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(SP,e.key)&&u({x:SP[e.key].x,y:SP[e.key].y,isShiftPressed:e.shiftKey})},style:{width:o,height:s,top:a,left:i}}))}));const jP=e=>e.nodesSelectionActive,_P=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:c,onMoveStart:d,onMoveEnd:u,selectionKeyCode:h,selectionOnDrag:f,selectionMode:p,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:b,panActivationKeyCode:x,zoomActivationKeyCode:v,elementsSelectable:w,zoomOnScroll:k,zoomOnPinch:S,panOnScroll:C,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:_,defaultViewport:I,translateExtent:A,minZoom:T,maxZoom:M,preventScrolling:D,onSelectionContextMenu:O,noWheelClassName:R,noPanClassName:P,disableKeyboardA11y:L})=>{const z=$D(jP),F=OR(h),B=OR(x),U=B||_,$=B||C,V=F||f&&!0!==U;return(({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=VD(),{deleteElements:r}=qR(),o=OR(e,YR),s=OR(t);l.useEffect((()=>{if(o){const{edges:e,getNodes:t}=n.getState(),o=t().filter((e=>e.selected)),s=e.filter((e=>e.selected));r({nodes:o,edges:s}),n.setState({nodesSelectionActive:!1})}}),[o]),l.useEffect((()=>{n.setState({multiSelectionActive:s})}),[s])})({deleteKeyCode:a,multiSelectionKeyCode:b}),m.createElement(tP,{onMove:c,onMoveStart:d,onMoveEnd:u,onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:k,zoomOnPinch:S,panOnScroll:$,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:!F&&U,defaultViewport:I,translateExtent:A,minZoom:T,maxZoom:M,zoomActivationKeyCode:v,preventScrolling:D,noWheelClassName:R,noPanClassName:P},m.createElement(uP,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:U,isSelecting:!!V,selectionMode:p},e,z&&m.createElement(NP,{onSelectionContextMenu:O,noPanClassName:P,disableKeyboardA11y:L})))};_P.displayName="FlowRenderer";var IP=l.memo(_P);function AP(e){return{...{input:CP(e.input||fR),default:CP(e.default||uR),output:CP(e.output||mR),group:CP(e.group||gR)},...Object.keys(e).filter((e=>!["input","default","output","group"].includes(e))).reduce(((t,n)=>(t[n]=CP(e[n]||uR),t)),{})}}const TP=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),MP=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=$D(TP,aD),a=(c=e.onlyRenderVisibleElements,$D(l.useCallback((e=>c?YO(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes()),[c])));var c;const d=l.useRef(),u=l.useMemo((()=>{if("undefined"==typeof ResizeObserver)return null;const e=new ResizeObserver((e=>{const t=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));s(t)}));return d.current=e,e}),[]);return l.useEffect((()=>()=>{var e;null==(e=null==d?void 0:d.current)||e.disconnect()}),[]),m.createElement("div",{className:"react-flow__nodes",style:JR},a.map((s=>{var a,l,c;let d=s.type||"default";e.nodeTypes[d]||(null==i||i("003",DD(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,f=!!(s.draggable||t&&void 0===s.draggable),p=!!(s.selectable||o&&void 0===s.selectable),g=!!(s.connectable||n&&void 0===s.connectable),y=!!(s.focusable||r&&void 0===s.focusable),b=e.nodeExtent?XD(s.positionAbsolute,e.nodeExtent):s.positionAbsolute,x=(null==b?void 0:b.x)??0,v=(null==b?void 0:b.y)??0,w=(({x:e,y:t,width:n,height:r,origin:o})=>n&&r?o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]}:{x:e,y:t})({x:x,y:v,width:s.width??0,height:s.height??0,origin:e.nodeOrigin});return m.createElement(h,{key:s.id,id:s.id,className:s.className,style:s.style,type:d,data:s.data,sourcePosition:s.sourcePosition||CO.Bottom,targetPosition:s.targetPosition||CO.Top,hidden:s.hidden,xPos:x,yPos:v,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!s.selected,isDraggable:f,isSelectable:p,isConnectable:g,isFocusable:y,resizeObserver:u,dragHandle:s.dragHandle,zIndex:(null==(a=s[oO])?void 0:a.z)??0,isParent:!!(null==(l=s[oO])?void 0:l.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!s.width&&!!s.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:s.ariaLabel,hasHandleBounds:!!(null==(c=s[oO])?void 0:c.handleBounds)})})))};MP.displayName="NodeRenderer";var DP=l.memo(MP);const OP=(e,t,n)=>n===CO.Left?e-t:n===CO.Right?e+t:e,RP=(e,t,n)=>n===CO.Top?e-t:n===CO.Bottom?e+t:e,PP="react-flow__edgeupdater",LP=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:a})=>m.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:tD([PP,`${PP}-${a}`]),cx:OP(t,r,e),cy:RP(n,r,e),r:r,stroke:"transparent",fill:"transparent"}),zP=()=>!0;var FP=e=>{const t=({id:t,className:n,type:r,data:o,onClick:s,onEdgeDoubleClick:i,selected:a,animated:c,label:d,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:y,source:b,target:x,sourceX:v,sourceY:w,targetX:k,targetY:S,sourcePosition:C,targetPosition:E,elementsSelectable:N,hidden:j,sourceHandleId:_,targetHandleId:I,onContextMenu:A,onMouseEnter:T,onMouseMove:M,onMouseLeave:D,reconnectRadius:O,onReconnect:R,onReconnectStart:P,onReconnectEnd:L,markerEnd:z,markerStart:F,rfId:B,ariaLabel:U,isFocusable:$,isReconnectable:V,pathOptions:H,interactionWidth:W,disableKeyboardA11y:G})=>{const q=l.useRef(null),[Y,J]=l.useState(!1),[X,K]=l.useState(!1),Z=VD(),Q=l.useMemo((()=>`url('#${VO(F,B)}')`),[F,B]),ee=l.useMemo((()=>`url('#${VO(z,B)}')`),[z,B]);if(j)return null;const te=uO(t,Z.getState,i),ne=uO(t,Z.getState,A),re=uO(t,Z.getState,T),oe=uO(t,Z.getState,M),se=uO(t,Z.getState,D),ie=(e,n)=>{if(0!==e.button)return;const{edges:r,isValidConnection:o}=Z.getState(),s=n?x:b,i=(n?I:_)||null,a=n?"target":"source",l=o||zP,c=n,d=r.find((e=>e.id===t));K(!0),null==P||P(e,d,a);sR({event:e,handleId:i,nodeId:s,onConnect:e=>null==R?void 0:R(d,e),isTarget:c,getState:Z.getState,setState:Z.setState,isValidConnection:l,edgeUpdaterType:a,onReconnectEnd:e=>{K(!1),null==L||L(e,d,a)}})},ae=()=>J(!0),le=()=>J(!1),ce=!N&&!s;return m.createElement("g",{className:tD(["react-flow__edge",`react-flow__edge-${r}`,n,{selected:a,animated:c,inactive:ce,updating:Y}]),onClick:e=>{var n;const{edges:r,addSelectedEdges:o,unselectNodesAndEdges:i,multiSelectionActive:a}=Z.getState(),l=r.find((e=>e.id===t));l&&(N&&(Z.setState({nodesSelectionActive:!1}),l.selected&&a?(i({nodes:[],edges:[l]}),null==(n=q.current)||n.blur()):o([t])),s&&s(e,l))},onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:se,onKeyDown:$?e=>{var n;if(!G&&sO.includes(e.key)&&N){const{unselectNodesAndEdges:r,addSelectedEdges:o,edges:s}=Z.getState();"Escape"===e.key?(null==(n=q.current)||n.blur(),r({edges:[s.find((e=>e.id===t))]})):o([t])}}:void 0,tabIndex:$?0:void 0,role:$?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":null===U?void 0:U||`Edge from ${b} to ${x}`,"aria-describedby":$?`${AR}-${B}`:void 0,ref:q},!X&&m.createElement(e,{id:t,source:b,target:x,selected:a,animated:c,label:d,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,data:o,style:y,sourceX:v,sourceY:w,targetX:k,targetY:S,sourcePosition:C,targetPosition:E,sourceHandleId:_,targetHandleId:I,markerStart:Q,markerEnd:ee,pathOptions:H,interactionWidth:W}),V&&m.createElement(m.Fragment,null,("source"===V||!0===V)&&m.createElement(LP,{position:C,centerX:v,centerY:w,radius:O,onMouseDown:e=>ie(e,!0),onMouseEnter:ae,onMouseOut:le,type:"source"}),("target"===V||!0===V)&&m.createElement(LP,{position:E,centerX:k,centerY:S,radius:O,onMouseDown:e=>ie(e,!1),onMouseEnter:ae,onMouseOut:le,type:"target"})))};return t.displayName="EdgeWrapper",l.memo(t)};function BP(e){return{...{default:FP(e.default||FO),straight:FP(e.bezier||RO),step:FP(e.step||OO),smoothstep:FP(e.step||DO),simplebezier:FP(e.simplebezier||_O)},...Object.keys(e).filter((e=>!["default","bezier"].includes(e))).reduce(((t,n)=>(t[n]=FP(e[n]||FO),t)),{})}}function UP(e,t,n=null){const r=((null==n?void 0:n.x)||0)+t.x,o=((null==n?void 0:n.y)||0)+t.y,s=(null==n?void 0:n.width)||t.width,i=(null==n?void 0:n.height)||t.height;switch(e){case CO.Top:return{x:r+s/2,y:o};case CO.Right:return{x:r+s,y:o+i/2};case CO.Bottom:return{x:r+s/2,y:o+i};case CO.Left:return{x:r,y:o+i/2}}}function $P(e,t){return e?1!==e.length&&t?t&&e.find((e=>e.id===t))||null:e[0]:null}function VP(e){var t,n,r,o,s;const i=(null==(t=null==e?void 0:e[oO])?void 0:t.handleBounds)||null,a=i&&(null==e?void 0:e.width)&&(null==e?void 0:e.height)&&void 0!==(null==(n=null==e?void 0:e.positionAbsolute)?void 0:n.x)&&void 0!==(null==(r=null==e?void 0:e.positionAbsolute)?void 0:r.y);return[{x:(null==(o=null==e?void 0:e.positionAbsolute)?void 0:o.x)||0,y:(null==(s=null==e?void 0:e.positionAbsolute)?void 0:s.y)||0,width:(null==e?void 0:e.width)||0,height:(null==e?void 0:e.height)||0},i,!!a]}const HP=[{level:0,isMaxLevel:!0,edges:[]}];function WP(e,t,n){return function(e,t,n=!1){let r=-1;const o=e.reduce(((e,o)=>{var s,i;const a=rO(o.zIndex);let l=a?o.zIndex:0;if(n){const e=t.get(o.target),n=t.get(o.source),r=o.selected||(null==e?void 0:e.selected)||(null==n?void 0:n.selected),c=Math.max((null==(s=null==n?void 0:n[oO])?void 0:s.z)||0,(null==(i=null==e?void 0:e[oO])?void 0:i.z)||0,1e3);l=(a?o.zIndex:0)+(r?c:0)}return e[l]?e[l].push(o):e[l]=[o],r=l>r?l:r,e}),{}),s=Object.entries(o).map((([e,t])=>{const n=+e;return{edges:t,level:n,isMaxLevel:n===r}}));return 0===s.length?HP:s}($D(l.useCallback((n=>e?n.edges.filter((e=>{const r=t.get(e.source),o=t.get(e.target);return(null==r?void 0:r.width)&&(null==r?void 0:r.height)&&(null==o?void 0:o.width)&&(null==o?void 0:o.height)&&function({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:a,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=eO({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:a/l[2]}),u=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),h=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(u*h)>0}({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:o.width,targetHeight:o.height,width:n.width,height:n.height,transform:n.transform})})):n.edges),[e,t])),t,n)}const GP={[kO.Arrow]:({color:e="none",strokeWidth:t=1})=>m.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[kO.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>m.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const qP=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const c=function(e){const t=VD();return l.useMemo((()=>{var n,r;return Object.prototype.hasOwnProperty.call(GP,e)?GP[e]:(null==(r=(n=t.getState()).onError)||r.call(n,"009",PD(e)),null)}),[e])}(t);return c?m.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},m.createElement(c,{color:n,strokeWidth:i})):null},YP=({defaultColor:e,rfId:t})=>{const n=$D(l.useCallback((({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce(((n,o)=>([o.markerStart,o.markerEnd].forEach((o=>{if(o&&"object"==typeof o){const s=VO(o,t);r.includes(s)||(n.push({id:s,color:o.color||e,...o}),r.push(s))}})),n)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))})({defaultColor:e,rfId:t}),[e,t]),((e,t)=>!(e.length!==t.length||e.some(((e,n)=>e.id!==t[n].id)))));return m.createElement("defs",null,n.map((e=>m.createElement(qP,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient}))))};YP.displayName="MarkerDefinitions";var JP=l.memo(YP);const XP=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),KP=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:u,onReconnect:h,onReconnectStart:f,onReconnectEnd:p,reconnectRadius:g,children:y,disableKeyboardA11y:b})=>{const{edgesFocusable:x,edgesUpdatable:v,elementsSelectable:w,width:k,height:S,connectionMode:C,nodeInternals:E,onError:N}=$D(XP,aD),j=WP(t,E,n);return k?m.createElement(m.Fragment,null,j.map((({level:t,edges:n,isMaxLevel:y})=>m.createElement("svg",{key:t,style:{zIndex:t},width:k,height:S,className:"react-flow__edges react-flow__container"},y&&m.createElement(JP,{defaultColor:e,rfId:r}),m.createElement("g",null,n.map((e=>{const[t,n,y]=VP(E.get(e.source)),[k,S,j]=VP(E.get(e.target));if(!y||!j)return null;let _=e.type||"default";o[_]||(null==N||N("011",FD(_)),_="default");const I=o[_]||o.default,A=C===pO.Strict?S.target:(S.target??[]).concat(S.source??[]),T=$P(n.source,e.sourceHandle),M=$P(A,e.targetHandle),D=(null==T?void 0:T.position)||CO.Bottom,O=(null==M?void 0:M.position)||CO.Top,R=!!(e.focusable||x&&void 0===e.focusable),P=e.reconnectable||e.updatable,L=void 0!==h&&(P||v&&void 0===P);if(!T||!M)return null==N||N("008",LD(T,e)),null;const{sourceX:z,sourceY:F,targetX:B,targetY:U}=((e,t,n,r,o,s)=>{const i=UP(n,e,t),a=UP(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}})(t,T,D,k,M,O);return m.createElement(I,{key:e.id,id:e.id,className:tD([e.className,s]),type:_,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:z,sourceY:F,targetX:B,targetY:U,sourcePosition:D,targetPosition:O,elementsSelectable:w,onContextMenu:i,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:d,onEdgeDoubleClick:u,onReconnect:h,onReconnectStart:f,onReconnectEnd:p,reconnectRadius:g,rfId:r,ariaLabel:e.ariaLabel,isFocusable:R,isReconnectable:L,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:b})})))))),y):null};KP.displayName="EdgeRenderer";var ZP=l.memo(KP);const QP=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function eL({children:e}){const t=$D(QP);return m.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}const tL={[CO.Left]:CO.Right,[CO.Right]:CO.Left,[CO.Top]:CO.Bottom,[CO.Bottom]:CO.Top},nL=({nodeId:e,handleType:t,style:n,type:r=vO.Bezier,CustomComponent:o,connectionStatus:s})=>{var i,a,c;const{fromNode:d,handleId:u,toX:h,toY:f,connectionMode:p}=$D(l.useCallback((t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode})),[e]),aD),g=null==(i=null==d?void 0:d[oO])?void 0:i.handleBounds;let y=null==g?void 0:g[t];if(p===pO.Loose&&(y=y||(null==g?void 0:g["source"===t?"target":"source"])),!d||!y)return null;const b=u?y.find((e=>e.id===u)):y[0],x=b?b.x+b.width/2:(d.width??0)/2,v=b?b.y+b.height/2:d.height??0,w=((null==(a=d.positionAbsolute)?void 0:a.x)??0)+x,k=((null==(c=d.positionAbsolute)?void 0:c.y)??0)+v,S=null==b?void 0:b.position,C=S?tL[S]:null;if(!S||!C)return null;if(o)return m.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:d,fromHandle:b,fromX:w,fromY:k,toX:h,toY:f,fromPosition:S,toPosition:C,connectionStatus:s});let E="";const N={sourceX:w,sourceY:k,sourcePosition:S,targetX:h,targetY:f,targetPosition:C};return r===vO.Bezier?[E]=zO(N):r===vO.Step?[E]=MO({...N,borderRadius:0}):r===vO.SmoothStep?[E]=MO(N):r===vO.SimpleBezier?[E]=jO(N):E=`M${w},${k} ${h},${f}`,m.createElement("path",{d:E,fill:"none",className:"react-flow__connection-path",style:n})};nL.displayName="ConnectionLine";const rL=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function oL({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:i,width:a,height:l,connectionStatus:c}=$D(rL,aD);return!!(o&&s&&a&&i)?m.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},m.createElement("g",{className:tD(["react-flow__connection",c])},m.createElement(nL,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:c}))):null}function sL(e,t){l.useRef(null),VD();return l.useMemo((()=>t(e)),[e])}const iL=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:y,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:v,connectionLineComponent:w,connectionLineContainerStyle:k,selectionKeyCode:S,selectionOnDrag:C,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:_,deleteKeyCode:I,onlyRenderVisibleElements:A,elementsSelectable:T,selectNodesOnDrag:M,defaultViewport:D,translateExtent:O,minZoom:R,maxZoom:P,preventScrolling:L,defaultMarkerColor:z,zoomOnScroll:F,zoomOnPinch:B,panOnScroll:U,panOnScrollSpeed:$,panOnScrollMode:V,zoomOnDoubleClick:H,panOnDrag:W,onPaneClick:G,onPaneMouseEnter:q,onPaneMouseMove:Y,onPaneMouseLeave:J,onPaneScroll:X,onPaneContextMenu:K,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,reconnectRadius:se,noDragClassName:ie,noWheelClassName:ae,noPanClassName:le,elevateEdgesOnSelect:ce,disableKeyboardA11y:de,nodeOrigin:ue,nodeExtent:he,rfId:fe})=>{const pe=sL(e,AP),me=sL(t,BP);return function(e){const t=qR(),n=l.useRef(!1);l.useEffect((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(s),m.createElement(IP,{onPaneClick:G,onPaneMouseEnter:q,onPaneMouseMove:Y,onPaneMouseLeave:J,onPaneContextMenu:K,onPaneScroll:X,deleteKeyCode:I,selectionKeyCode:S,selectionOnDrag:C,selectionMode:E,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:_,elementsSelectable:T,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:F,zoomOnPinch:B,zoomOnDoubleClick:H,panOnScroll:U,panOnScrollSpeed:$,panOnScrollMode:V,panOnDrag:W,defaultViewport:D,translateExtent:O,minZoom:R,maxZoom:P,onSelectionContextMenu:g,preventScrolling:L,noDragClassName:ie,noWheelClassName:ae,noPanClassName:le,disableKeyboardA11y:de},m.createElement(eL,null,m.createElement(ZP,{edgeTypes:me,onEdgeClick:a,onEdgeDoubleClick:d,onlyRenderVisibleElements:A,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,reconnectRadius:se,defaultMarkerColor:z,noPanClassName:le,elevateEdgesOnSelect:!!ce,disableKeyboardA11y:de,rfId:fe},m.createElement(oL,{style:v,type:x,component:w,containerStyle:k})),m.createElement("div",{className:"react-flow__edgelabel-renderer"}),m.createElement(DP,{nodeTypes:pe,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:p,selectNodesOnDrag:M,onlyRenderVisibleElements:A,noPanClassName:le,noDragClassName:ie,disableKeyboardA11y:de,nodeOrigin:ue,nodeExtent:he,rfId:fe})))};iL.displayName="GraphView";var aL=l.memo(iL);const lL=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],cL={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:lL,nodeExtent:lL,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:pO.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(e,t)=>{},isValidConnection:void 0},dL=()=>{return e=(e,t)=>({...cL,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:FR(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map((e=>({...r,...e})))})},setDefaultNodesAndEdges:(n,r)=>{const o=void 0!==n,s=void 0!==r,i=o?FR(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:c}=t(),d=null==l?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const u=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(u.transform),f=n.reduce(((e,t)=>{const n=o.get(t.id);if(null==n?void 0:n.hidden)o.set(n.id,{...n,[oO]:{...n[oO],handleBounds:void 0}});else if(n){const r=YD(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(o.set(n.id,{...n,[oO]:{...n[oO],handleBounds:{source:yP(".source",t.nodeElement,h,c),target:yP(".target",t.nodeElement,h,c)}},...r}),e.push({id:n.id,type:"dimensions",dimensions:r}))}return e}),[]);zR(o,c);const p=i||s&&!i&&BR(t,{initial:!0,...a});e({nodeInternals:new Map(o),fitViewOnInitDone:p}),(null==f?void 0:f.length)>0&&(null==r||r(f))},updateNodePositions:(e,n=!0,r=!1)=>{const{triggerNodeChanges:o}=t();o(e.map((e=>{const t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t})))},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:l}=t();if(null==n?void 0:n.length){if(s){const t=FR(iP(n,a()),o,i,l);e({nodeInternals:t})}null==r||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,a=null;r?i=n.map((e=>aP(e,!0))):(i=lP(s(),n),a=lP(o,[])),VR({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,a=null;r?i=n.map((e=>aP(e,!0))):(i=lP(o,n),a=lP(s(),[])),VR({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),i=r||o;VR({changedNodes:(n||s()).map((e=>(e.selected=!1,aP(e.id,!1)))),changedEdges:i.map((e=>aP(e.id,!1))),get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();null==r||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();null==r||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;null==(r=t().d3Zoom)||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t();VR({changedNodes:r().filter((e=>e.selected)).map((e=>aP(e.id,!1))),changedEdges:n.filter((e=>e.selected)).map((e=>aP(e.id,!1))),get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach((e=>{e.positionAbsolute=XD(e.position,n)})),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{const{transform:n,width:r,height:o,d3Zoom:s,d3Selection:i,translateExtent:a}=t();if(!s||!i||!e.x&&!e.y)return!1;const l=Bc.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),c=[[0,0],[r,o]],d=null==s?void 0:s.constrain()(l,c,a);return s.transform(i,d),n[0]!==d.x||n[1]!==d.y||n[2]!==d.k},cancelConnection:()=>e({connectionNodeId:cL.connectionNodeId,connectionHandleId:cL.connectionHandleId,connectionHandleType:cL.connectionHandleType,connectionStatus:cL.connectionStatus,connectionStartHandle:cL.connectionStartHandle,connectionEndHandle:cL.connectionEndHandle}),reset:()=>e({...cL})}),t=Object.is,e?iD(e,t):iD;var e,t},uL=({children:e})=>{const t=l.useRef(null);return t.current||(t.current=dL()),m.createElement(MD,{value:t.current},e)};uL.displayName="ReactFlowProvider";const hL=({children:e})=>l.useContext(TD)?m.createElement(m.Fragment,null,e):m.createElement(uL,null,e);hL.displayName="ReactFlowWrapper";const fL={input:fR,default:uR,output:mR,group:gR},pL={default:FO,straight:RO,step:OO,smoothstep:DO,simplebezier:_O},mL=[0,0],gL=[15,15],yL={x:0,y:0,zoom:1},bL={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},xL=l.forwardRef((({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=fL,edgeTypes:i=pL,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:u,onMoveEnd:h,onConnect:f,onConnectStart:p,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:v,onNodeMouseLeave:w,onNodeContextMenu:k,onNodeDoubleClick:S,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:N,onNodesDelete:j,onEdgesDelete:_,onSelectionChange:I,onSelectionDragStart:A,onSelectionDrag:T,onSelectionDragStop:M,onSelectionContextMenu:D,onSelectionStart:O,onSelectionEnd:R,connectionMode:P=pO.Strict,connectionLineType:L=vO.Bezier,connectionLineStyle:z,connectionLineComponent:F,connectionLineContainerStyle:B,deleteKeyCode:U="Backspace",selectionKeyCode:$="Shift",selectionOnDrag:V=!1,selectionMode:H=bO.Full,panActivationKeyCode:W="Space",multiSelectionKeyCode:G=(cO()?"Meta":"Control"),zoomActivationKeyCode:q=(cO()?"Meta":"Control"),snapToGrid:Y=!1,snapGrid:J=gL,onlyRenderVisibleElements:X=!1,selectNodesOnDrag:K=!0,nodesDraggable:Z,nodesConnectable:Q,nodesFocusable:ee,nodeOrigin:te=mL,edgesFocusable:ne,edgesUpdatable:re,elementsSelectable:oe,defaultViewport:se=yL,minZoom:ie=.5,maxZoom:ae=2,translateExtent:le=lL,preventScrolling:ce=!0,nodeExtent:de,defaultMarkerColor:ue="#b1b1b7",zoomOnScroll:he=!0,zoomOnPinch:fe=!0,panOnScroll:pe=!1,panOnScrollSpeed:me=.5,panOnScrollMode:ge=gO.Free,zoomOnDoubleClick:ye=!0,panOnDrag:be=!0,onPaneClick:xe,onPaneMouseEnter:ve,onPaneMouseMove:we,onPaneMouseLeave:ke,onPaneScroll:Se,onPaneContextMenu:Ce,children:Ee,onEdgeContextMenu:Ne,onEdgeDoubleClick:je,onEdgeMouseEnter:_e,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ae,onEdgeUpdate:Te,onEdgeUpdateStart:Me,onEdgeUpdateEnd:De,onReconnect:Oe,onReconnectStart:Re,onReconnectEnd:Pe,reconnectRadius:Le=10,edgeUpdaterRadius:ze=10,onNodesChange:Fe,onEdgesChange:Be,noDragClassName:Ue="nodrag",noWheelClassName:$e="nowheel",noPanClassName:Ve="nopan",fitView:He=!1,fitViewOptions:We,connectOnClick:Ge=!0,attributionPosition:qe,proOptions:Ye,defaultEdgeOptions:Je,elevateNodesOnSelect:Xe=!0,elevateEdgesOnSelect:Ke=!1,disableKeyboardA11y:Ze=!1,autoPanOnConnect:Qe=!0,autoPanOnNodeDrag:et=!0,connectionRadius:tt=20,isValidConnection:nt,onError:rt,style:ot,id:st,nodeDragThreshold:it,...at},lt)=>{const ct=st||"1";return m.createElement("div",{...at,style:{...ot,...bL},ref:lt,className:tD(["react-flow",o]),"data-testid":"rf__wrapper",id:st},m.createElement(hL,null,m.createElement(aL,{onInit:c,onMove:d,onMoveStart:u,onMoveEnd:h,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:x,onNodeMouseMove:v,onNodeMouseLeave:w,onNodeContextMenu:k,onNodeDoubleClick:S,nodeTypes:s,edgeTypes:i,connectionLineType:L,connectionLineStyle:z,connectionLineComponent:F,connectionLineContainerStyle:B,selectionKeyCode:$,selectionOnDrag:V,selectionMode:H,deleteKeyCode:U,multiSelectionKeyCode:G,panActivationKeyCode:W,zoomActivationKeyCode:q,onlyRenderVisibleElements:X,selectNodesOnDrag:K,defaultViewport:se,translateExtent:le,minZoom:ie,maxZoom:ae,preventScrolling:ce,zoomOnScroll:he,zoomOnPinch:fe,zoomOnDoubleClick:ye,panOnScroll:pe,panOnScrollSpeed:me,panOnScrollMode:ge,panOnDrag:be,onPaneClick:xe,onPaneMouseEnter:ve,onPaneMouseMove:we,onPaneMouseLeave:ke,onPaneScroll:Se,onPaneContextMenu:Ce,onSelectionContextMenu:D,onSelectionStart:O,onSelectionEnd:R,onEdgeContextMenu:Ne,onEdgeDoubleClick:je,onEdgeMouseEnter:_e,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ae,onReconnect:Oe??Te,onReconnectStart:Re??Me,onReconnectEnd:Pe??De,reconnectRadius:Le??ze,defaultMarkerColor:ue,noDragClassName:Ue,noWheelClassName:$e,noPanClassName:Ve,elevateEdgesOnSelect:Ke,rfId:ct,disableKeyboardA11y:Ze,nodeOrigin:te,nodeExtent:de}),m.createElement(NR,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:f,onConnectStart:p,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:b,nodesDraggable:Z,nodesConnectable:Q,nodesFocusable:ee,edgesFocusable:ne,edgesUpdatable:re,elementsSelectable:oe,elevateNodesOnSelect:Xe,minZoom:ie,maxZoom:ae,nodeExtent:de,onNodesChange:Fe,onEdgesChange:Be,snapToGrid:Y,snapGrid:J,connectionMode:P,translateExtent:le,connectOnClick:Ge,defaultEdgeOptions:Je,fitView:He,fitViewOptions:We,onNodesDelete:j,onEdgesDelete:_,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:N,onSelectionDrag:T,onSelectionDragStart:A,onSelectionDragStop:M,noPanClassName:Ve,nodeOrigin:te,rfId:ct,autoPanOnConnect:Qe,autoPanOnNodeDrag:et,onError:rt,connectionRadius:tt,isValidConnection:nt,nodeDragThreshold:it}),m.createElement(kR,{onSelectionChange:I}),Ee,m.createElement(GD,{proOptions:Ye,position:qe}),m.createElement(DR,{rfId:ct,disableKeyboardA11y:Ze})))}));function vL(e){return t=>{const[n,r]=l.useState(t),o=l.useCallback((t=>r((n=>e(t,n)))),[]);return[n,r,o]}}xL.displayName="ReactFlow";const wL=vL(iP),kL=vL((function(e,t){return sP(e,t)}));function SL(){return m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},m.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function CL(){return m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},m.createElement("path",{d:"M0 0h32v4.2H0z"}))}function EL(){return m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},m.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function NL(){return m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},m.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function jL(){return m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},m.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const _L=({children:e,className:t,...n})=>m.createElement("button",{type:"button",className:tD(["react-flow__controls-button",t]),...n},e);_L.displayName="ControlButton";const IL=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),AL=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:c,className:d,children:u,position:h="bottom-left"})=>{const f=VD(),[p,g]=l.useState(!1),{isInteractive:y,minZoomReached:b,maxZoomReached:x}=$D(IL,aD),{zoomIn:v,zoomOut:w,fitView:k}=qR();if(l.useEffect((()=>{g(!0)}),[]),!p)return null;return m.createElement(WD,{className:tD(["react-flow__controls",d]),position:h,style:e,"data-testid":"rf__controls"},t&&m.createElement(m.Fragment,null,m.createElement(_L,{onClick:()=>{v(),null==s||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},m.createElement(SL,null)),m.createElement(_L,{onClick:()=>{w(),null==i||i()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},m.createElement(CL,null))),n&&m.createElement(_L,{className:"react-flow__controls-fitview",onClick:()=>{k(o),null==a||a()},title:"fit view","aria-label":"fit view"},m.createElement(EL,null)),r&&m.createElement(_L,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),null==c||c(!y)},title:"toggle interactivity","aria-label":"toggle interactivity"},y?m.createElement(jL,null):m.createElement(NL,null)),u)};AL.displayName="Controls";var TL,ML,DL=l.memo(AL);function OL({color:e,dimensions:t,lineWidth:n}){return m.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function RL({color:e,radius:t}){return m.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(ML=TL||(TL={})).Lines="lines",ML.Dots="dots",ML.Cross="cross";const PL={[TL.Dots]:"#91919a",[TL.Lines]:"#eee",[TL.Cross]:"#e2e2e2"},LL={[TL.Dots]:1,[TL.Lines]:1,[TL.Cross]:6},zL=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function FL({id:e,variant:t=TL.Dots,gap:n=20,size:r,lineWidth:o=1,offset:s=2,color:i,style:a,className:c}){const d=l.useRef(null),{transform:u,patternId:h}=$D(zL,aD),f=i||PL[t],p=r||LL[t],g=t===TL.Dots,y=t===TL.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*u[2]||1,b[1]*u[2]||1],v=p*u[2],w=y?[v,v]:x,k=g?[v/s,v/s]:[w[0]/s,w[1]/s];return m.createElement("svg",{className:tD(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},m.createElement("pattern",{id:h+e,x:u[0]%x[0],y:u[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},g?m.createElement(RL,{color:f,radius:v/s}):m.createElement(OL,{dimensions:w,color:f,lineWidth:o})),m.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+e})`}))}FL.displayName="Background";var BL=l.memo(FL);function UL(e){return Math.min(11*e+35,200)}const $L=m.createContext("LR"),VL=l.memo((e=>{const t=_.c(51),{data:n,selected:r}=e,o=ue(n.atom),s=Qi().inOrderIds.indexOf(o.id),i=r?"var(--gray-9)":"var(--gray-3)",a=$D(WL),c=l.useContext($L);let d,u,h,f,p;if(t[0]!==o.code||t[1]!==i||t[2]!==c||t[3]!==r){const e=o.code.split("\n").length,n="LR"===c?CO.Left:CO.Top;let s;t[8]!==i?(s={background:i},t[8]=i,t[9]=s):s=t[9],t[10]!==n||t[11]!==s?(h=A.jsx(cR,{type:"target",id:"inputs",position:n,style:s}),t[10]=n,t[11]=s,t[12]=h):h=t[12];const a="LR"===c?CO.Left:CO.Top;let l;t[13]!==i?(l={background:i},t[13]=i,t[14]=l):l=t[14],t[15]!==a||t[16]!==l?(f=A.jsx(cR,{type:"source",id:"inputs",position:a,style:l}),t[15]=a,t[16]=l,t[17]=f):f=t[17];const p=r&&"border-primary";t[18]!==p?(u=Ln("flex flex-col bg-card border border-input/50 rounded-md mx-[2px] overflow-hidden",p),t[18]=p,t[19]=u):u=t[19],d=UL(e),t[0]=o.code,t[1]=i,t[2]=c,t[3]=r,t[4]=d,t[5]=u,t[6]=h,t[7]=f}else d=t[4],u=t[5],h=t[6],f=t[7];var m;let g;t[20]!==n.forceWidth||t[21]!==a?(p=n.forceWidth||(m=a,Math.min(Math.max(m-100,100),400)),t[20]=n.forceWidth,t[21]=a,t[22]=p):p=t[22],t[23]!==d||t[24]!==p?(g={height:d,width:p},t[23]=d,t[24]=p,t[25]=g):g=t[25];const y=ea(o.name,s);let b,x,v;t[26]!==y?(b=A.jsx("div",{className:"text-muted-foreground font-semibold text-xs py-1 px-2 bg-muted border-b",children:y}),t[26]=y,t[27]=b):b=t[27],t[28]!==o.code?(x=A.jsx(Pc,{code:o.code}),t[28]=o.code,t[29]=x):x=t[29],t[30]!==u||t[31]!==g||t[32]!==b||t[33]!==x?(v=A.jsxs("div",{className:u,style:g,children:[b,x]}),t[30]=u,t[31]=g,t[32]=b,t[33]=x,t[34]=v):v=t[34];const w="LR"===c?CO.Right:CO.Bottom;let k,S;t[35]!==i?(k={background:i},t[35]=i,t[36]=k):k=t[36],t[37]!==w||t[38]!==k?(S=A.jsx(cR,{type:"source",id:"outputs",position:w,style:k}),t[37]=w,t[38]=k,t[39]=S):S=t[39];const C="LR"===c?CO.Right:CO.Bottom;let E,N,j;return t[40]!==i?(E={background:i},t[40]=i,t[41]=E):E=t[41],t[42]!==C||t[43]!==E?(N=A.jsx(cR,{type:"target",id:"outputs",position:C,style:E}),t[42]=C,t[43]=E,t[44]=N):N=t[44],t[45]!==v||t[46]!==S||t[47]!==N||t[48]!==h||t[49]!==f?(j=A.jsxs("div",{children:[h,f,v,S,N]}),t[45]=v,t[46]=S,t[47]=N,t[48]=h,t[49]=f,t[50]=j):j=t[50],j}),((e,t)=>["data","selected","id"].every((n=>e[n]===t[n]))));VL.displayName="CustomNode";const HL={custom:VL};function WL(e){const{width:t}=e;return t}const GL=e=>{const t=_.c(18),{maxCount:n,cellIds:r,onClick:o,skipScroll:s}=e,i=Qi();let a,l,c,d;if(t[0]!==r||t[1]!==i.inOrderIds||t[2]!==n||t[3]!==o||t[4]!==s){c=Symbol.for("react.early_return_sentinel");e:{let e;t[8]!==i.inOrderIds?(e=(e,t)=>i.inOrderIds.indexOf(e)-i.inOrderIds.indexOf(t),t[8]=i.inOrderIds,t[9]=e):e=t[9];const d=[...r].sort(e);if(0===r.length){let e;t[10]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("div",{className:"text-muted-foreground",children:"--"}),t[10]=e):e=t[10],c=e;break e}let u;t[11]!==r.length||t[12]!==o||t[13]!==s?(u=(e,t)=>A.jsxs("span",{className:"truncate",children:[A.jsx(ta,{variant:"focus",cellId:e,skipScroll:s,className:"whitespace-nowrap",onClick:o?()=>o(e):void 0},e),t<r.length-1&&", "]},e),t[11]=r.length,t[12]=o,t[13]=s,t[14]=u):u=t[14],a=d.slice(0,n).map(u),l=r.length>n&&A.jsxs(Vn,{children:[A.jsx(bs,{asChild:!0,children:A.jsxs("span",{className:"whitespace-nowrap text-muted-foreground text-xs hover:underline cursor-pointer",children:["+",r.length-n," more"]})}),A.jsx(Bn,{className:"w-auto",children:A.jsx("div",{className:"flex flex-col gap-1 py-1",children:d.slice(n).map((e=>A.jsx(ta,{variant:"focus",cellId:e,className:"whitespace-nowrap",onClick:o?()=>o(e):void 0},e)))})})]})}t[0]=r,t[1]=i.inOrderIds,t[2]=n,t[3]=o,t[4]=s,t[5]=a,t[6]=l,t[7]=c}else a=t[5],l=t[6],c=t[7];return c!==Symbol.for("react.early_return_sentinel")?c:(t[15]!==a||t[16]!==l?(d=A.jsxs(A.Fragment,{children:[a,l]}),t[15]=a,t[16]=l,t[17]=d):d=t[17],d)},qL=e=>{const t=_.c(15);let n,r,o,s;t[0]!==e?(({name:r,declaredBy:n,onClick:o,...s}=e),t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s):(n=t[1],r=t[2],o=t[3],s=t[4]);const i=n.length>1?"destructive":"outline";let a,l,c;return t[5]!==r||t[6]!==o?(a=async e=>{o?o(e):(await lt(r),ie({title:"Copied to clipboard"}))},t[5]=r,t[6]=o,t[7]=a):a=t[7],t[8]!==r||t[9]!==i||t[10]!==a?(l=A.jsx(na,{title:r,variant:i,className:"rounded-sm text-ellipsis block overflow-hidden max-w-fit cursor-pointer font-medium",onClick:a,children:r}),t[8]=r,t[9]=i,t[10]=a,t[11]=l):l=t[11],t[12]!==s||t[13]!==l?(c=A.jsx("div",{className:"max-w-[130px]",...s,children:l}),t[12]=s,t[13]=l,t[14]=c):c=t[14],c},YL=l.memo((e=>{const t=_.c(38),{onChange:n,view:r,settings:o,onSettingsChange:s}=e;let i;t[0]!==s||t[1]!==o?(i=(e,t)=>{s({...o,[e]:t})},t[0]=s,t[1]=o,t[2]=i):i=t[2];const a=i;let l,c,d,u,h,f;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx(bs,{asChild:!0,children:A.jsx(te,{variant:"text",size:"xs",children:A.jsx(en,{className:"w-4 h-4"})})}),t[3]=l):l=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx("div",{className:"font-semibold pb-4",children:"Settings"}),t[4]=c):c=t[4],t[5]!==a?(d=e=>a("hidePureMarkdown",Boolean(e)),t[5]=a,t[6]=d):d=t[6],t[7]!==o.hidePureMarkdown||t[8]!==d?(u=A.jsx(Fs,{"data-testid":"hide-pure-markdown-checkbox",id:"hide-pure-markdown",checked:o.hidePureMarkdown,onCheckedChange:d}),t[7]=o.hidePureMarkdown,t[8]=d,t[9]=u):u=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(h=A.jsx(ze,{htmlFor:"hide-pure-markdown",children:"Hide pure markdown"}),t[10]=h):h=t[10],t[11]!==u?(f=A.jsxs(Vn,{children:[l,A.jsxs(Bn,{className:"w-auto p-2 text-muted-foreground",children:[c,A.jsxs("div",{className:"flex items-center gap-2",children:[u,h]})]})]}),t[11]=u,t[12]=f):f=t[12];const p=f,m="_minimap_"===r;let g,y,b;t[13]!==n?(g=()=>n("_minimap_"),t[13]=n,t[14]=g):g=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(y=A.jsx(Vd,{className:"w-4 h-4 mr-1"}),t[15]=y):y=t[15],t[16]!==m||t[17]!==g?(b=A.jsxs(te,{variant:"outline",className:"bg-background","aria-selected":m,size:"xs",onClick:g,children:[y,"Mini Map"]}),t[16]=m,t[17]=g,t[18]=b):b=t[18];const x="TB"===r;let v,w,k;t[19]!==n?(v=()=>n("TB"),t[19]=n,t[20]=v):v=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(w=A.jsx(Ad,{className:"w-4 h-4 mr-1"}),t[21]=w):w=t[21],t[22]!==x||t[23]!==v?(k=A.jsxs(te,{variant:"outline",className:"bg-background","aria-selected":x,size:"xs",onClick:v,children:[w,"Vertical Tree"]}),t[22]=x,t[23]=v,t[24]=k):k=t[24];const S="LR"===r;let C,E,N,j;t[25]!==n?(C=()=>n("LR"),t[25]=n,t[26]=C):C=t[26],t[27]===Symbol.for("react.memo_cache_sentinel")?(E=A.jsx(Ad,{className:"w-4 h-4 mr-1 transform -rotate-90"}),t[27]=E):E=t[27],t[28]!==S||t[29]!==C?(N=A.jsxs(te,{variant:"outline",className:"bg-background","aria-selected":S,size:"xs",onClick:C,children:[E," ","Horizontal Tree"]}),t[28]=S,t[29]=C,t[30]=N):N=t[30],t[31]!==b||t[32]!==k||t[33]!==N?(j=A.jsxs("div",{className:"flex gap-2",children:[b,k,N]}),t[31]=b,t[32]=k,t[33]=N,t[34]=j):j=t[34];const I="_minimap_"!==r&&p;let T;return t[35]!==j||t[36]!==I?(T=A.jsxs(WD,{position:"top-right",className:"flex flex-col items-end gap-2",children:[j,I]}),t[35]=j,t[36]=I,t[37]=T):T=t[37],T}));YL.displayName="GraphToolbar";const JL=l.memo((e=>{const t=_.c(11),{selection:n,variables:r,onClearSelection:o}=e;if(!n)return null;const s=XL;let i;t[0]!==o||t[1]!==n.id||t[2]!==n.source||t[3]!==n.target||t[4]!==n.type||t[5]!==r?(i=()=>{if("node"===n.type){const e=Object.values(r).filter((e=>e.usedBy.includes(n.id))),t=Object.values(r).filter((e=>e.declaredBy.includes(n.id))),i=(e,t)=>A.jsxs(A.Fragment,{children:[0===e.length&&A.jsx("div",{className:"text-muted-foreground text-sm text-center",children:"--"}),A.jsx("div",{className:"grid grid-cols-5 gap-3 items-center text-sm py-1 flex-1 empty:hidden",children:e.map((e=>A.jsxs(m.Fragment,{children:[A.jsx(qL,{declaredBy:e.declaredBy,name:e.name}),A.jsxs("div",{className:"truncate col-span-2",title:e.value??"",children:[e.value,A.jsxs("span",{className:"ml-1 truncate text-foreground/60 font-mono",children:["(",e.dataType,")"]})]}),A.jsx("div",{className:"truncate col-span-2 gap-1 items-center",children:A.jsx(GL,{skipScroll:!0,onClick:()=>s("in"===t?e.declaredBy[0]:e.usedBy[0],e.name),maxCount:3,cellIds:e.usedBy})})]},e.name)))})]});return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"font-bold py-2 flex items-center gap-2 border-b px-3",children:[A.jsx(wt,{className:"w-5 h-5"}),A.jsx(ta,{cellId:n.id}),A.jsx("div",{className:"flex-1"}),A.jsx(Nk,{cellId:n.id,children:A.jsx(te,{variant:"ghost",size:"icon",children:A.jsx(hd,{className:"w-4 h-4"})})}),A.jsx(te,{variant:"text",size:"icon",onClick:()=>{o()},children:A.jsx(Tn,{className:"w-4 h-4"})})]}),A.jsxs("div",{className:"text-sm flex flex-col py-3 pl-2 pr-4 flex-1 justify-center",children:[A.jsxs("div",{className:"flex flex-col gap-2",children:[A.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[A.jsx(Yc,{className:"w-4 h-4"}),"Outputs"]}),i(t,"out")]}),A.jsx("hr",{className:"border-divider my-3"}),A.jsxs("div",{className:"flex flex-col gap-2",children:[A.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[A.jsx(Xc,{className:"w-4 h-4"}),"Inputs"]}),i(e,"in")]})]})]})}if("edge"===n.type){const e=Object.values(r).filter((e=>e.declaredBy.includes(n.source)&&e.usedBy.includes(n.target)));return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"font-bold py-2 flex items-center gap-2 border-b px-3",children:[A.jsx(lu,{className:"w-4 h-4"}),A.jsx(ta,{cellId:n.source}),A.jsx(Jc,{className:"w-4 h-4"}),A.jsx(ta,{cellId:n.target})]}),A.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-[350px] items-center text-sm p-3 flex-1",children:e.map((e=>A.jsxs(m.Fragment,{children:[A.jsx(qL,{declaredBy:e.declaredBy,name:e.name,onClick:()=>{s(e.declaredBy[0],e.name)}}),A.jsx("div",{className:"truncate text-foreground/60 font-mono",children:e.dataType}),A.jsx("div",{className:"truncate col-span-2",title:e.value??"",children:e.value})]},e.name)))})]})}},t[0]=o,t[1]=n.id,t[2]=n.source,t[3]=n.target,t[4]=n.type,t[5]=r,t[6]=i):i=t[6];const a=i;let l,c;return t[7]!==a?(l=a(),t[7]=a,t[8]=l):l=t[8],t[9]!==l?(c=A.jsx(WD,{position:"bottom-left",className:"max-h-[90%] flex flex-col w-[calc(100%-5rem)]",children:A.jsx("div",{className:"min-h-[100px] shadow-md rounded-md border max-w-[550px] border-primary/40 my-4 min-w-[240px] bg-[var(--slate-1)] text-muted-foreground/80 flex flex-col overflow-y-auto",children:l})}),t[9]=l,t[10]=c):c=t[10],c}));function XL(e,t){const n=de(e);n&&ra(n,t)}function KL(){const e=_.c(7),t=qR(),n=$D(QL),r=$D(ZL);let o;e[0]!==t?(o=()=>{t.fitView({duration:100})},e[0]=t,e[1]=o):o=e[1];const s=oa(o,100);let i,a;e[2]!==s||e[3]!==r||e[4]!==n?(i=()=>{n&&r&&s()},a=[n,r,s],e[2]=s,e[3]=r,e[4]=n,e[5]=i,e[6]=a):(i=e[5],a=e[6]),l.useEffect(i,a)}function ZL(e){const{height:t}=e;return t}function QL(e){const{width:t}=e;return t}JL.displayName="GraphSelectionPanel";const ez=new class{createEdge(e,t,n){return{type:"smoothstep",pathOptions:{offset:20,borderRadius:100},data:{direction:n},markerEnd:{type:kO.Arrow},id:`${e}-${t}-${n}`,source:e,sourceHandle:n,targetHandle:n,target:t}}createNode(e,t,n){return{id:e,data:{atom:t},width:250,type:"custom",height:UL(re.get(t).code.trim().split("\n").length),position:{x:0,y:n+20}}}createElements(e,t,n,r){let o=0;const s=[],i=[];for(const[l,c]of Ni.zip(e,t)){const e=this.createNode(l,c,o);s.push(e),o=e.position.y+(e.height||0)}const a=new Set;for(const l of Object.values(n)){const{declaredBy:e,usedBy:t}=l;for(const n of e)for(const e of t){const t=`${n}-${e}`;a.has(t)||(a.add(t),i.push(this.createEdge(n,e,"inputs"),this.createEdge(n,e,"outputs")))}}return{nodes:s,edges:i}}},tz=e=>{const t=_.c(37),{cellIds:n,variables:r,cellAtoms:o,children:s}=e;let i;t[0]!==o||t[1]!==n||t[2]!==r?(i=ez.createElements(n,o,r,!1),t[0]=o,t[1]=n,t[2]=r,t[3]=i):i=t[3];const{nodes:a,edges:c}=i;let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[4]=d):d=t[4];const[u,h]=kL(d),[f,p]=wL(a),[m,g]=l.useState(),[y,b]=l.useState(),x=l.useRef(!1);KL();const v=$D(nz);let w;t[5]!==h||t[6]!==p?(w=e=>{p(e.nodes),h([])},t[5]=h,t[6]=p,t[7]=w):w=t[7];const k=H(w);let S,C,E,N;t[8]!==o||t[9]!==n||t[10]!==k||t[11]!==r?(S=()=>{x.current?k(ez.createElements(n,o,r,!1)):x.current=!0},C=[n,r,o,k],t[8]=o,t[9]=n,t[10]=k,t[11]=r,t[12]=S,t[13]=C):(S=t[12],C=t[13]),l.useEffect(S,C),t[14]!==c||t[15]!==m||t[16]!==h?(E=()=>{if(m){const e=c.filter((e=>{const{source:t,target:n,data:r}=e;return t===m&&"outputs"===r.direction||n===m&&"inputs"===r.direction}));h(e)}},N=[m,h,c],t[14]=c,t[15]=m,t[16]=h,t[17]=E,t[18]=N):(E=t[17],N=t[18]),l.useEffect(E,N);const j=function(e,t){const n=_.c(17);let r,o;if(n[0]!==t||n[1]!==e){let r;n[3]!==t?(r=(e,n)=>{const{position:r}=n;return Math.min(e,r.y-t/2-10)},n[3]=t,n[4]=r):r=n[4],o=e.reduce(r,Number.POSITIVE_INFINITY),n[0]=t,n[1]=e,n[2]=o}else o=n[2];const s=o;let i;if(n[5]!==t||n[6]!==e){let r;n[8]!==t?(r=(e,n)=>{const{position:r}=n;return Math.max(e,r.y+t/2+10)},n[8]=t,n[9]=r):r=n[9],i=e.reduce(r,Number.NEGATIVE_INFINITY),n[5]=t,n[6]=e,n[7]=i}else i=n[7];const a=i;let l,c,d;n[10]!==s?(l=[Number.NEGATIVE_INFINITY,s],n[10]=s,n[11]=l):l=n[11];n[12]!==a?(c=[Number.POSITIVE_INFINITY,a],n[12]=a,n[13]=c):c=n[13];n[14]!==l||n[15]!==c?(d=[l,c],n[14]=l,n[15]=c,n[16]=d):d=n[16];return r=d,r}(f,v);let I;t[19]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{g(void 0),b(void 0)},t[19]=I):I=t[19];const T=I;let M;t[20]!==u||t[21]!==y||t[22]!==m||t[23]!==r?(M=()=>y?A.jsx(JL,{selection:{type:"edge",source:y.source,target:y.target},onClearSelection:T,variables:r,edges:u}):m?A.jsx(JL,{selection:{type:"node",id:m},variables:r,edges:u,onClearSelection:T}):null,t[20]=u,t[21]=y,t[22]=m,t[23]=r,t[24]=M):M=t[24];const D=M;let O,R,P,L;return t[25]!==h?(O=(e,t)=>{const n=t.id;g(n),b(void 0),h([])},t[25]=h,t[26]=O):O=t[26],t[27]===Symbol.for("react.memo_cache_sentinel")?(R=(e,t)=>{b(t)},t[27]=R):R=t[27],t[28]!==D?(P=D(),t[28]=D,t[29]=P):P=t[29],t[30]!==s||t[31]!==u||t[32]!==f||t[33]!==O||t[34]!==P||t[35]!==j?(L=A.jsxs(xL,{nodes:f,edges:u,nodeTypes:HL,translateExtent:j,onNodeClick:O,onNodeDoubleClick:rz,onEdgeClick:R,snapToGrid:!0,fitView:!0,elementsSelectable:!0,minZoom:1,maxZoom:1,draggable:!1,panOnScrollMode:gO.Vertical,zoomOnDoubleClick:!1,nodesDraggable:!1,nodesConnectable:!1,nodesFocusable:!1,edgesFocusable:!1,selectNodesOnDrag:!1,panOnDrag:!1,preventScrolling:!1,zoomOnPinch:!1,panOnScroll:!0,autoPanOnNodeDrag:!1,autoPanOnConnect:!1,children:[P,s]}),t[30]=s,t[31]=u,t[32]=f,t[33]=O,t[34]=P,t[35]=j,t[36]=L):L=t[36],L};function nz(e){const{height:t}=e;return t}function rz(e,t){sa(t.id,"focus")}var oz,sz,iz,az,lz,cz,dz,uz,hz,fz,pz,mz,gz,yz,bz,xz,vz,wz,kz,Sz,Cz,Ez,Nz,jz,_z,Iz,Az,Tz,Mz,Dz,Oz,Rz,Pz,Lz,zz,Fz,Bz,Uz,$z,Vz,Hz,Wz,Gz,qz,Yz,Jz,Xz,Kz,Zz,Qz,eF,tF,nF,rF,oF,sF,iF,aF,lF,cF,dF,uF,hF,fF,pF,mF,gF,yF,bF,xF,vF,wF,kF,SF,CF,EF,NF,jF,_F,IF,AF,TF,MF,DF,OF,RF,PF,LF,zF,FF,BF,UF,$F,VF;function HF(){if(sz)return oz;sz=1;var e="\0";function t(e,t){e[t]?e[t]++:e[t]=1}function n(e,t){--e[t]||delete e[t]}function r(e,t,n,r){var o=""+t,s=""+n;if(!e&&o>s){var i=o;o=s,s=i}return o+""+s+""+(void 0===r?"\0":r)}function o(e,t){return r(e,t.v,t.w,t.name)}return oz=class{constructor(t){s(this,"_isDirected",!0),s(this,"_isMultigraph",!1),s(this,"_isCompound",!1),s(this,"_label"),s(this,"_defaultNodeLabelFn",(()=>{})),s(this,"_defaultEdgeLabelFn",(()=>{})),s(this,"_nodes",{}),s(this,"_in",{}),s(this,"_preds",{}),s(this,"_out",{}),s(this,"_sucs",{}),s(this,"_edgeObjs",{}),s(this,"_edgeLabels",{}),s(this,"_nodeCount",0),s(this,"_edgeCount",0),s(this,"_parent"),s(this,"_children"),t&&(this._isDirected=!Object.hasOwn(t,"directed")||t.directed,this._isMultigraph=!!Object.hasOwn(t,"multigraph")&&t.multigraph,this._isCompound=!!Object.hasOwn(t,"compound")&&t.compound),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter((t=>0===Object.keys(e._in[t]).length))}sinks(){var e=this;return this.nodes().filter((t=>0===Object.keys(e._out[t]).length))}setNodes(e,t){var n=arguments,r=this;return e.forEach((function(e){n.length>1?r.setNode(e,t):r.setNode(e)})),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=e,this._children[t]={},this._children[e][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){var t=this;if(Object.hasOwn(this._nodes,e)){var n=e=>t.removeEdge(t._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach((function(e){t.setParent(e)})),delete this._children[e]),Object.keys(this._in[e]).forEach(n),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(void 0===n)n=e;else{for(var r=n+="";void 0!==r;r=this.parent(r))if(r===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==e)return n}}children(t=e){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===e)return this.nodes();if(this.hasNode(t))return[]}}predecessors(e){var t=this._preds[e];if(t)return Object.keys(t)}successors(e){var t=this._sucs[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){const r=new Set(t);for(var n of this.successors(e))r.add(n);return Array.from(r.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;Object.entries(this._nodes).forEach((function([n,r]){e(n)&&t.setNode(n,r)})),Object.values(this._edgeObjs).forEach((function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var r={};function o(e){var s=n.parent(e);return void 0===s||t.hasNode(s)?(r[e]=s,s):s in r?r[s]:o(s)}return this._isCompound&&t.nodes().forEach((e=>t.setParent(e,o(e)))),t}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,t){var n=this,r=arguments;return e.reduce((function(e,o){return r.length>1?n.setEdge(e,o,t):n.setEdge(e,o),o})),this}setEdge(){var e,n,o,s,i=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(e=a.v,n=a.w,o=a.name,2===arguments.length&&(s=arguments[1],i=!0)):(e=a,n=arguments[1],o=arguments[3],arguments.length>2&&(s=arguments[2],i=!0)),e=""+e,n=""+n,void 0!==o&&(o=""+o);var l=r(this._isDirected,e,n,o);if(Object.hasOwn(this._edgeLabels,l))return i&&(this._edgeLabels[l]=s),this;if(void 0!==o&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),this._edgeLabels[l]=i?s:this._defaultEdgeLabelFn(e,n,o);var c=function(e,t,n,r){var o=""+t,s=""+n;if(!e&&o>s){var i=o;o=s,s=i}var a={v:o,w:s};r&&(a.name=r);return a}(this._isDirected,e,n,o);return e=c.v,n=c.w,Object.freeze(c),this._edgeObjs[l]=c,t(this._preds[n],e),t(this._sucs[e],n),this._in[n][l]=c,this._out[e][l]=c,this._edgeCount++,this}edge(e,t,n){var s=1===arguments.length?o(this._isDirected,arguments[0]):r(this._isDirected,e,t,n);return this._edgeLabels[s]}edgeAsObj(){const e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,n){var s=1===arguments.length?o(this._isDirected,arguments[0]):r(this._isDirected,e,t,n);return Object.hasOwn(this._edgeLabels,s)}removeEdge(e,t,s){var i=1===arguments.length?o(this._isDirected,arguments[0]):r(this._isDirected,e,t,s),a=this._edgeObjs[i];return a&&(e=a.v,t=a.w,delete this._edgeLabels[i],delete this._edgeObjs[i],n(this._preds[t],e),n(this._sucs[e],t),delete this._in[t][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,t){var n=this._in[e];if(n){var r=Object.values(n);return t?r.filter((e=>e.v===t)):r}}outEdges(e,t){var n=this._out[e];if(n){var r=Object.values(n);return t?r.filter((e=>e.w===t)):r}}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},oz}function WF(){if(uz)return dz;uz=1;var e=HF();function t(e){return e.nodes().map((function(t){var n=e.node(t),r=e.parent(t),o={v:t};return void 0!==n&&(o.value=n),void 0!==r&&(o.parent=r),o}))}function n(e){return e.edges().map((function(t){var n=e.edge(t),r={v:t.v,w:t.w};return void 0!==t.name&&(r.name=t.name),void 0!==n&&(r.value=n),r}))}return dz={write:function(e){var r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:t(e),edges:n(e)};void 0!==e.graph()&&(r.value=structuredClone(e.graph()));return r},read:function(t){var n=new e(t.options).setGraph(t.value);return t.nodes.forEach((function(e){n.setNode(e.v,e.value),e.parent&&n.setParent(e.v,e.parent)})),t.edges.forEach((function(e){n.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),n}}}function GF(){if(fz)return hz;return fz=1,hz=function(e){var t,n={},r=[];function o(r){Object.hasOwn(n,r)||(n[r]=!0,t.push(r),e.successors(r).forEach(o),e.predecessors(r).forEach(o))}return e.nodes().forEach((function(e){t=[],o(e),t.length&&r.push(t)})),r}}function qF(){if(mz)return pz;mz=1;return pz=class{constructor(){s(this,"_arr",[]),s(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map((function(e){return e.key}))}has(e){return Object.hasOwn(this._keyIndices,e)}priority(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority}min(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key}add(e,t){var n=this._keyIndices;if(e=String(e),!Object.hasOwn(n,e)){var r=this._arr,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)}_heapify(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))}_decrease(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t}_swap(e,t){var n=this._arr,r=this._keyIndices,o=n[e],s=n[t];n[e]=s,n[t]=o,r[s.key]=e,r[o.key]=t}}}function YF(){if(yz)return gz;yz=1;var e=qF();gz=function(n,r,o,s){return function(t,n,r,o){var s,i,a={},l=new e,c=function(e){var t=e.v!==s?e.v:e.w,n=a[t],o=r(e),c=i.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);c<n.distance&&(n.distance=c,n.predecessor=s,l.decrease(t,c))};t.nodes().forEach((function(e){var t=e===n?0:Number.POSITIVE_INFINITY;a[e]={distance:t},l.add(e,t)}));for(;l.size()>0&&(s=l.removeMin(),(i=a[s]).distance!==Number.POSITIVE_INFINITY);)o(s).forEach(c);return a}(n,String(r),o||t,s||function(e){return n.outEdges(e)})};var t=()=>1;return gz}function JF(){if(xz)return bz;xz=1;var e=YF();return bz=function(t,n,r){return t.nodes().reduce((function(o,s){return o[s]=e(t,s,n,r),o}),{})}}function XF(){if(wz)return vz;return wz=1,vz=function(e){var t=0,n=[],r={},o=[];function s(i){var a=r[i]={onStack:!0,lowlink:t,index:t++};if(n.push(i),e.successors(i).forEach((function(e){Object.hasOwn(r,e)?r[e].onStack&&(a.lowlink=Math.min(a.lowlink,r[e].index)):(s(e),a.lowlink=Math.min(a.lowlink,r[e].lowlink))})),a.lowlink===a.index){var l,c=[];do{l=n.pop(),r[l].onStack=!1,c.push(l)}while(i!==l);o.push(c)}}return e.nodes().forEach((function(e){Object.hasOwn(r,e)||s(e)})),o}}function KF(){if(Sz)return kz;Sz=1;var e=XF();return kz=function(t){return e(t).filter((function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}}function ZF(){if(Ez)return Cz;Ez=1,Cz=function(t,n,r){return function(e,t,n){var r={},o=e.nodes();return o.forEach((function(e){r[e]={},r[e][e]={distance:0},o.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var o=n.v===e?n.w:n.v,s=t(n);r[e][o]={distance:s,predecessor:e}}))})),o.forEach((function(e){var t=r[e];o.forEach((function(n){var s=r[n];o.forEach((function(n){var r=s[e],o=t[n],i=s[n],a=r.distance+o.distance;a<i.distance&&(i.distance=a,i.predecessor=o.predecessor)}))}))})),r}(t,n||e,r||function(e){return t.outEdges(e)})};var e=()=>1;return Cz}function QF(){if(jz)return Nz;function e(e){var n={},r={},o=[];if(e.sinks().forEach((function s(i){if(Object.hasOwn(r,i))throw new t;Object.hasOwn(n,i)||(r[i]=!0,n[i]=!0,e.predecessors(i).forEach(s),delete r[i],o.push(i))})),Object.keys(n).length!==e.nodeCount())throw new t;return o}jz=1;class t extends Error{constructor(){super(...arguments)}}return Nz=e,e.CycleException=t,Nz}function eB(){if(Iz)return _z;Iz=1;var e=QF();return _z=function(t){try{e(t)}catch(jJ){if(jJ instanceof e.CycleException)return!1;throw jJ}return!0}}function tB(){if(Tz)return Az;function e(e,t,r,o){for(var s=[[e,!1]];s.length>0;){var i=s.pop();i[1]?o.push(i[0]):Object.hasOwn(r,i[0])||(r[i[0]]=!0,s.push([i[0],!0]),n(t(i[0]),(e=>s.push([e,!1]))))}}function t(e,t,r,o){for(var s=[e];s.length>0;){var i=s.pop();Object.hasOwn(r,i)||(r[i]=!0,o.push(i),n(t(i),(e=>s.push(e))))}}function n(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}return Tz=1,Az=function(n,r,o){Array.isArray(r)||(r=[r]);var s=n.isDirected()?e=>n.successors(e):e=>n.neighbors(e),i="post"===o?e:t,a=[],l={};return r.forEach((e=>{if(!n.hasNode(e))throw new Error("Graph does not have node: "+e);i(e,s,l,a)})),a}}function nB(){if(Dz)return Mz;Dz=1;var e=tB();return Mz=function(t,n){return e(t,n,"post")}}function rB(){if(Rz)return Oz;Rz=1;var e=tB();return Oz=function(t,n){return e(t,n,"pre")}}function oB(){if(Lz)return Pz;Lz=1;var e=HF(),t=qF();return Pz=function(n,r){var o,s=new e,i={},a=new t;function l(e){var t=e.v===o?e.w:e.v,n=a.priority(t);if(void 0!==n){var s=r(e);s<n&&(i[t]=o,a.decrease(t,s))}}if(0===n.nodeCount())return s;n.nodes().forEach((function(e){a.add(e,Number.POSITIVE_INFINITY),s.setNode(e)})),a.decrease(n.nodes()[0],0);var c=!1;for(;a.size()>0;){if(o=a.removeMin(),Object.hasOwn(i,o))s.setEdge(o,i[o]);else{if(c)throw new Error("Input graph is not connected: "+n);c=!0}n.nodeEdges(o).forEach(l)}return s}}function sB(){if(Uz)return Bz;Uz=1;var e=cz?lz:(cz=1,lz={Graph:HF(),version:az?iz:(az=1,iz="2.2.4")});return Bz={Graph:e.Graph,json:WF(),alg:Fz?zz:(Fz=1,zz={components:GF(),dijkstra:YF(),dijkstraAll:JF(),findCycles:KF(),floydWarshall:ZF(),isAcyclic:eB(),postorder:nB(),preorder:rB(),prim:oB(),tarjan:XF(),topsort:QF()}),version:e.version}}function iB(){if(Wz)return Hz;Wz=1;let e=sB().Graph,t=function(){if(Vz)return $z;function e(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function t(e,t){if("_next"!==e&&"_prev"!==e)return t}return Vz=1,$z=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return e(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&e(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let e=[],n=this._sentinel,r=n._prev;for(;r!==n;)e.push(JSON.stringify(r,t)),r=r._prev;return"["+e.join(", ")+"]"}}}();Hz=function(s,i){if(s.nodeCount()<=1)return[];let a=function(n,r){let s=new e,i=0,a=0;n.nodes().forEach((e=>{s.setNode(e,{v:e,in:0,out:0})})),n.edges().forEach((e=>{let t=s.edge(e.v,e.w)||0,n=r(e),o=t+n;s.setEdge(e.v,e.w,o),a=Math.max(a,s.node(e.v).out+=n),i=Math.max(i,s.node(e.w).in+=n)}));let l=function(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}(a+i+3).map((()=>new t)),c=i+1;return s.nodes().forEach((e=>{o(l,c,s.node(e))})),{graph:s,buckets:l,zeroIdx:c}}(s,i||n);return function(e,t,n){let o,s=[],i=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;o=a.dequeue();)r(e,t,n,o);for(;o=i.dequeue();)r(e,t,n,o);if(e.nodeCount())for(let i=t.length-2;i>0;--i)if(o=t[i].dequeue(),o){s=s.concat(r(e,t,n,o,!0));break}}return s}(a.graph,a.buckets,a.zeroIdx).flatMap((e=>s.outEdges(e.v,e.w)))};let n=()=>1;function r(e,t,n,r,s){let i=s?[]:void 0;return e.inEdges(r.v).forEach((r=>{let a=e.edge(r),l=e.node(r.v);s&&i.push({v:r.v,w:r.w}),l.out-=a,o(t,n,l)})),e.outEdges(r.v).forEach((r=>{let s=e.edge(r),i=r.w,a=e.node(i);a.in-=s,o(t,n,a)})),e.removeNode(r.v),i}function o(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}return Hz}function aB(){if(qz)return Gz;qz=1;let e=sB().Graph;function t(e,t,n,r){let o;do{o=i(r)}while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}Gz={addBorderNode:function(e,n,r,o){let s={width:0,height:0};arguments.length>=4&&(s.rank=r,s.order=o);return t(e,"border",s,n)},addDummyNode:t,applyWithChunking:r,asNonCompoundGraph:function(t){let n=new e({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach((e=>{t.children(e).length||n.setNode(e,t.node(e))})),t.edges().forEach((e=>{n.setEdge(e,t.edge(e))})),n},buildLayerMatrix:function(e){let t=a(o(e)+1).map((()=>[]));return e.nodes().forEach((n=>{let r=e.node(n),o=r.rank;void 0!==o&&(t[o][r.order]=n)})),t},intersectRect:function(e,t){let n,r,o=e.x,s=e.y,i=t.x-o,a=t.y-s,l=e.width/2,c=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(a)*l>Math.abs(i)*c?(a<0&&(c=-c),n=c*i/a,r=c):(i<0&&(l=-l),n=l,r=l*a/i);return{x:o+n,y:s+r}},mapValues:function(e,t){let n=t;"string"==typeof t&&(n=e=>e[t]);return Object.entries(e).reduce(((e,[t,r])=>(e[t]=n(r,t),e)),{})},maxRank:o,normalizeRanks:function(e){let t=e.nodes().map((t=>{let n=e.node(t).rank;return void 0===n?Number.MAX_VALUE:n})),n=r(Math.min,t);e.nodes().forEach((t=>{let r=e.node(t);Object.hasOwn(r,"rank")&&(r.rank-=n)}))},notime:function(e,t){return t()},partition:function(e,t){let n={lhs:[],rhs:[]};return e.forEach((e=>{t(e)?n.lhs.push(e):n.rhs.push(e)})),n},pick:function(e,t){const n={};for(const r of t)void 0!==e[r]&&(n[r]=e[r]);return n},predecessorWeights:function(e){let t=e.nodes().map((t=>{let n={};return e.inEdges(t).forEach((t=>{n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return l(e.nodes(),t)},range:a,removeEmptyRanks:function(e){let t=e.nodes().map((t=>e.node(t).rank)),n=r(Math.min,t),o=[];e.nodes().forEach((t=>{let r=e.node(t).rank-n;o[r]||(o[r]=[]),o[r].push(t)}));let s=0,i=e.graph().nodeRankFactor;Array.from(o).forEach(((t,n)=>{void 0===t&&n%i!=0?--s:void 0!==t&&s&&t.forEach((t=>e.node(t).rank+=s))}))},simplify:function(t){let n=(new e).setGraph(t.graph());return t.nodes().forEach((e=>n.setNode(e,t.node(e)))),t.edges().forEach((e=>{let r=n.edge(e.v,e.w)||{weight:0,minlen:1},o=t.edge(e);n.setEdge(e.v,e.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),n},successorWeights:function(e){let t=e.nodes().map((t=>{let n={};return e.outEdges(t).forEach((t=>{n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return l(e.nodes(),t)},time:function(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}},uniqueId:i,zipObject:l};const n=65535;function r(e,t){if(t.length>n){const r=function(e,t=n){const r=[];for(let n=0;n<e.length;n+=t){const o=e.slice(n,n+t);r.push(o)}return r}(t);return e.apply(null,r.map((t=>e.apply(null,t))))}return e.apply(null,t)}function o(e){const t=e.nodes().map((t=>{let n=e.node(t).rank;return void 0===n?Number.MIN_VALUE:n}));return r(Math.max,t)}let s=0;function i(e){var t=++s;return toString(e)+t}function a(e,t,n=1){null==t&&(t=e,e=0);let r=e=>e<t;n<0&&(r=e=>t<e);const o=[];for(let s=e;r(s);s+=n)o.push(s);return o}function l(e,t){return e.reduce(((e,n,r)=>(e[n]=t[r],e)),{})}return Gz}function lB(){if(Jz)return Yz;Jz=1;let e=iB(),t=aB().uniqueId;return Yz={run:function(n){("greedy"===n.graph().acyclicer?e(n,(r=n,e=>r.edge(e).weight)):function(e){let t=[],n={},r={};function o(s){Object.hasOwn(r,s)||(r[s]=!0,n[s]=!0,e.outEdges(s).forEach((e=>{Object.hasOwn(n,e.w)?t.push(e):o(e.w)})),delete n[s])}return e.nodes().forEach(o),t}(n)).forEach((e=>{let r=n.edge(e);n.removeEdge(e),r.forwardName=e.name,r.reversed=!0,n.setEdge(e.w,e.v,r,t("rev"))}));var r},undo:function(e){e.edges().forEach((t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}}function cB(){if(Kz)return Xz;Kz=1;let e=aB();return Xz={run:function(t){t.graph().dummyChains=[],t.edges().forEach((n=>function(t,n){let r,o,s,i=n.v,a=t.node(i).rank,l=n.w,c=t.node(l).rank,d=n.name,u=t.edge(n),h=u.labelRank;if(c===a+1)return;for(t.removeEdge(n),s=0,++a;a<c;++s,++a)u.points=[],o={width:0,height:0,edgeLabel:u,edgeObj:n,rank:a},r=e.addDummyNode(t,"edge",o,"_d"),a===h&&(o.width=u.width,o.height=u.height,o.dummy="edge-label",o.labelpos=u.labelpos),t.setEdge(i,r,{weight:u.weight},d),0===s&&t.graph().dummyChains.push(r),i=r;t.setEdge(i,l,{weight:u.weight},d)}(t,n)))},undo:function(e){e.graph().dummyChains.forEach((t=>{let n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)}))}}}function dB(){if(Qz)return Zz;Qz=1;const{applyWithChunking:e}=aB();return Zz={longestPath:function(t){var n={};t.sources().forEach((function r(o){var s=t.node(o);if(Object.hasOwn(n,o))return s.rank;n[o]=!0;let i=t.outEdges(o).map((e=>null==e?Number.POSITIVE_INFINITY:r(e.w)-t.edge(e).minlen));var a=e(Math.min,i);return a===Number.POSITIVE_INFINITY&&(a=0),s.rank=a}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}}function uB(){if(tF)return eF;tF=1;var e=sB().Graph,t=dB().slack;function n(e,n){return e.nodes().forEach((function r(o){n.nodeEdges(o).forEach((s=>{var i=s.v,a=o===i?s.w:i;e.hasNode(a)||t(n,s)||(e.setNode(a,{}),e.setEdge(o,a,{}),r(a))}))})),e.nodeCount()}function r(e,n){return n.edges().reduce(((r,o)=>{let s=Number.POSITIVE_INFINITY;return e.hasNode(o.v)!==e.hasNode(o.w)&&(s=t(n,o)),s<r[0]?[s,o]:r}),[Number.POSITIVE_INFINITY,null])[1]}function o(e,t,n){e.nodes().forEach((e=>t.node(e).rank+=n))}return eF=function(s){var i,a,l=new e({directed:!1}),c=s.nodes()[0],d=s.nodeCount();l.setNode(c,{});for(;n(l,s)<d;)i=r(l,s),a=l.hasNode(i.v)?t(s,i):-t(s,i),o(l,s,a);return l}}function hB(){if(rF)return nF;rF=1;var e=uB(),t=dB().slack,n=dB().longestPath,r=sB().alg.preorder,o=sB().alg.postorder,s=aB().simplify;function i(t){t=s(t),n(t);var r,o=e(t);for(c(o),a(o,t);r=u(o);)f(o,t,r,h(o,t,r))}function a(e,t){var n=o(e,e.nodes());(n=n.slice(0,n.length-1)).forEach((n=>function(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=l(e,t,n)}(e,t,n)))}function l(e,t,n){var r=e.node(n).parent,o=!0,s=t.edge(n,r),i=0;return s||(o=!1,s=t.edge(r,n)),i=s.weight,t.nodeEdges(n).forEach((s=>{var a,l,c=s.v===n,d=c?s.w:s.v;if(d!==r){var u=c===o,h=t.edge(s).weight;if(i+=u?h:-h,a=n,l=d,e.hasEdge(a,l)){var f=e.edge(n,d).cutvalue;i+=u?-f:f}}})),i}function c(e,t){arguments.length<2&&(t=e.nodes()[0]),d(e,{},1,t)}function d(e,t,n,r,o){var s=n,i=e.node(r);return t[r]=!0,e.neighbors(r).forEach((o=>{Object.hasOwn(t,o)||(n=d(e,t,n,o,r))})),i.low=s,i.lim=n++,o?i.parent=o:delete i.parent,n}function u(e){return e.edges().find((t=>e.edge(t).cutvalue<0))}function h(e,n,r){var o=r.v,s=r.w;n.hasEdge(o,s)||(o=r.w,s=r.v);var i=e.node(o),a=e.node(s),l=i,c=!1;return i.lim>a.lim&&(l=a,c=!0),n.edges().filter((t=>c===p(e,e.node(t.v),l)&&c!==p(e,e.node(t.w),l))).reduce(((e,r)=>t(n,r)<t(n,e)?r:e))}function f(e,t,n,o){var s=n.v,i=n.w;e.removeEdge(s,i),e.setEdge(o.v,o.w,{}),c(e),a(e,t),function(e,t){var n=e.nodes().find((e=>!t.node(e).parent)),o=r(e,n);(o=o.slice(1)).forEach((n=>{var r=e.node(n).parent,o=t.edge(n,r),s=!1;o||(o=t.edge(r,n),s=!0),t.node(n).rank=t.node(r).rank+(s?o.minlen:-o.minlen)}))}(e,t)}function p(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}return nF=i,i.initLowLimValues=c,i.initCutValues=a,i.calcCutValue=l,i.leaveEdge=u,i.enterEdge=h,i.exchangeEdges=f,nF}function fB(){if(sF)return oF;sF=1;var e=dB().longestPath,t=uB(),n=hB();oF=function(n){switch(n.graph().ranker){case"network-simplex":default:o(n);break;case"tight-tree":!function(n){e(n),t(n)}(n);break;case"longest-path":r(n)}};var r=e;function o(e){n(e)}return oF}function pB(){if(aF)return iF;return aF=1,iF=function(e){let t=function(e){let t={},n=0;function r(o){let s=n;e.children(o).forEach(r),t[o]={low:s,lim:n++}}return e.children().forEach(r),t}(e);e.graph().dummyChains.forEach((n=>{let r=e.node(n),o=r.edgeObj,s=function(e,t,n,r){let o,s,i=[],a=[],l=Math.min(t[n].low,t[r].low),c=Math.max(t[n].lim,t[r].lim);o=n;do{o=e.parent(o),i.push(o)}while(o&&(t[o].low>l||c>t[o].lim));s=o,o=r;for(;(o=e.parent(o))!==s;)a.push(o);return{path:i.concat(a.reverse()),lca:s}}(e,t,o.v,o.w),i=s.path,a=s.lca,l=0,c=i[l],d=!0;for(;n!==o.w;){if(r=e.node(n),d){for(;(c=i[l])!==a&&e.node(c).maxRank<r.rank;)l++;c===a&&(d=!1)}if(!d){for(;l<i.length-1&&e.node(c=i[l+1]).minRank<=r.rank;)l++;c=i[l]}e.setParent(n,c),n=e.successors(n)[0]}}))}}function mB(){if(cF)return lF;cF=1;let e=aB();function t(n,r,o,s,i,a,l){let c=n.children(l);if(!c.length)return void(l!==r&&n.setEdge(r,l,{weight:0,minlen:o}));let d=e.addBorderNode(n,"_bt"),u=e.addBorderNode(n,"_bb"),h=n.node(l);n.setParent(d,l),h.borderTop=d,n.setParent(u,l),h.borderBottom=u,c.forEach((e=>{t(n,r,o,s,i,a,e);let c=n.node(e),h=c.borderTop?c.borderTop:e,f=c.borderBottom?c.borderBottom:e,p=c.borderTop?s:2*s,m=h!==f?1:i-a[l]+1;n.setEdge(d,h,{weight:p,minlen:m,nestingEdge:!0}),n.setEdge(f,u,{weight:p,minlen:m,nestingEdge:!0})})),n.parent(l)||n.setEdge(r,d,{weight:0,minlen:i+a[l]})}return lF={run:function(n){let r=e.addDummyNode(n,"root",{},"_root"),o=function(e){var t={};function n(r,o){var s=e.children(r);s&&s.length&&s.forEach((e=>n(e,o+1))),t[r]=o}return e.children().forEach((e=>n(e,1))),t}(n),s=Object.values(o),i=e.applyWithChunking(Math.max,s)-1,a=2*i+1;n.graph().nestingRoot=r,n.edges().forEach((e=>n.edge(e).minlen*=a));let l=function(e){return e.edges().reduce(((t,n)=>t+e.edge(n).weight),0)}(n)+1;n.children().forEach((e=>t(n,r,a,l,i,o,e))),n.graph().nodeRankFactor=a},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach((t=>{e.edge(t).nestingEdge&&e.removeEdge(t)}))}}}function gB(){if(fF)return hF;function e(e){e.nodes().forEach((n=>t(e.node(n)))),e.edges().forEach((n=>t(e.edge(n))))}function t(e){let t=e.width;e.width=e.height,e.height=t}function n(e){e.y=-e.y}function r(e){let t=e.x;e.x=e.y,e.y=t}return fF=1,hF={adjust:function(t){let n=t.graph().rankdir.toLowerCase();"lr"!==n&&"rl"!==n||e(t)},undo:function(t){let o=t.graph().rankdir.toLowerCase();"bt"!==o&&"rl"!==o||function(e){e.nodes().forEach((t=>n(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.points.forEach(n),Object.hasOwn(r,"y")&&n(r)}))}(t);"lr"!==o&&"rl"!==o||(!function(e){e.nodes().forEach((t=>r(e.node(t)))),e.edges().forEach((t=>{let n=e.edge(t);n.points.forEach(r),Object.hasOwn(n,"x")&&r(n)}))}(t),e(t))}}}function yB(){if(wF)return vF;wF=1;let e=aB();return vF=function(t,n){let r={};return t.forEach(((e,t)=>{let n=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(n.barycenter=e.barycenter,n.weight=e.weight)})),n.edges().forEach((e=>{let t=r[e.v],n=r[e.w];void 0!==t&&void 0!==n&&(n.indegree++,t.out.push(r[e.w]))})),function(t){let n=[];function r(e){return t=>{t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function o(e){return n=>{n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){let e=t.pop();n.push(e),e.in.reverse().forEach(r(e)),e.out.forEach(o(e))}return n.filter((e=>!e.merged)).map((t=>e.pick(t,["vs","i","barycenter","weight"])))}(Object.values(r).filter((e=>!e.indegree)))}}function bB(){if(EF)return CF;EF=1;let e=xF?bF:(xF=1,bF=function(e,t=[]){return t.map((t=>{let n=e.inEdges(t);if(n.length){let r=n.reduce(((t,n)=>{let r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}return{v:t}}))}),t=yB(),n=function(){if(SF)return kF;SF=1;let e=aB();function t(e,t,n){let r;for(;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}return kF=function(n,r){let o=e.partition(n,(e=>Object.hasOwn(e,"barycenter"))),s=o.lhs,i=o.rhs.sort(((e,t)=>t.i-e.i)),a=[],l=0,c=0,d=0;var u;s.sort((u=!!r,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:u?t.i-e.i:e.i-t.i)),d=t(a,i,d),s.forEach((e=>{d+=e.vs.length,a.push(e.vs),l+=e.barycenter*e.weight,c+=e.weight,d=t(a,i,d)}));let h={vs:a.flat(!0)};return c&&(h.barycenter=l/c,h.weight=c),h}}();return CF=function r(o,s,i,a){let l=o.children(s),c=o.node(s),d=c?c.borderLeft:void 0,u=c?c.borderRight:void 0,h={};d&&(l=l.filter((e=>e!==d&&e!==u)));let f=e(o,l);f.forEach((e=>{if(o.children(e.v).length){let s=r(o,e.v,i,a);h[e.v]=s,Object.hasOwn(s,"barycenter")&&(n=s,void 0!==(t=e).barycenter?(t.barycenter=(t.barycenter*t.weight+n.barycenter*n.weight)/(t.weight+n.weight),t.weight+=n.weight):(t.barycenter=n.barycenter,t.weight=n.weight))}var t,n}));let p=t(f,i);!function(e,t){e.forEach((e=>{e.vs=e.vs.flatMap((e=>t[e]?t[e].vs:e))}))}(p,h);let m=n(p,a);if(d&&(m.vs=[d,m.vs,u].flat(!0),o.predecessors(d).length)){let e=o.node(o.predecessors(d)[0]),t=o.node(o.predecessors(u)[0]);Object.hasOwn(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+e.order+t.order)/(m.weight+2),m.weight+=2}return m},CF}function xB(){if(jF)return NF;jF=1;let e=sB().Graph,t=aB();return NF=function(n,r,o){let s=function(e){var n;for(;e.hasNode(n=t.uniqueId("_root")););return n}(n),i=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel((e=>n.node(e)));return n.nodes().forEach((e=>{let t=n.node(e),a=n.parent(e);(t.rank===r||t.minRank<=r&&r<=t.maxRank)&&(i.setNode(e),i.setParent(e,a||s),n[o](e).forEach((t=>{let r=t.v===e?t.w:t.v,o=i.edge(r,e),s=void 0!==o?o.weight:0;i.setEdge(r,e,{weight:n.edge(t).weight+s})})),Object.hasOwn(t,"minRank")&&i.setNode(e,{borderLeft:t.borderLeft[r],borderRight:t.borderRight[r]}))})),i}}function vB(){if(TF)return AF;TF=1;let e=function(){if(mF)return pF;mF=1;let e=aB();return pF=function(t){let n={},r=t.nodes().filter((e=>!t.children(e).length)),o=r.map((e=>t.node(e).rank)),s=e.applyWithChunking(Math.max,o),i=e.range(s+1).map((()=>[]));return r.sort(((e,n)=>t.node(e).rank-t.node(n).rank)).forEach((function e(r){if(n[r])return;n[r]=!0;let o=t.node(r);i[o.rank].push(r),t.successors(r).forEach(e)})),i}}(),t=function(){if(yF)return gF;yF=1;let e=aB().zipObject;function t(t,n,r){let o=e(r,r.map(((e,t)=>t))),s=n.flatMap((e=>t.outEdges(e).map((e=>({pos:o[e.w],weight:t.edge(e).weight}))).sort(((e,t)=>e.pos-t.pos)))),i=1;for(;i<r.length;)i<<=1;let a=2*i-1;i-=1;let l=new Array(a).fill(0),c=0;return s.forEach((e=>{let t=e.pos+i;l[t]+=e.weight;let n=0;for(;t>0;)t%2&&(n+=l[t+1]),t=t-1>>1,l[t]+=e.weight;c+=e.weight*n})),c}return gF=function(e,n){let r=0;for(let o=1;o<n.length;++o)r+=t(e,n[o-1],n[o]);return r}}(),n=bB(),r=xB(),o=IF?_F:(IF=1,_F=function(e,t,n){let r,o={};n.forEach((n=>{let s,i,a=e.parent(n);for(;a;){if(s=e.parent(a),s?(i=o[s],o[s]=a):(i=r,r=a),i&&i!==a)return void t.setEdge(i,a);a=s}}))}),s=sB().Graph,i=aB();function a(e,t,n){return t.map((function(t){return r(e,t,n)}))}function l(e,t){let r=new s;e.forEach((function(e){let s=e.graph().root,i=n(e,s,r,t);i.vs.forEach(((t,n)=>e.node(t).order=n)),o(e,r,i.vs)}))}function c(e,t){Object.values(t).forEach((t=>t.forEach(((t,n)=>e.node(t).order=n))))}return AF=function n(r,o){if(o&&"function"==typeof o.customOrder)return void o.customOrder(r,n);let s=i.maxRank(r),d=a(r,i.range(1,s+1),"inEdges"),u=a(r,i.range(s-1,-1,-1),"outEdges"),h=e(r);if(c(r,h),o&&o.disableOptimalOrderHeuristic)return;let f,p=Number.POSITIVE_INFINITY;for(let e=0,a=0;a<4;++e,++a){l(e%2?d:u,e%4>=2),h=i.buildLayerMatrix(r);let n=t(r,h);n<p&&(a=0,f=Object.assign({},h),p=n)}c(r,f)},AF}function wB(){if(DF)return MF;DF=1;let e=sB().Graph,t=aB();function n(e,t){let n={};return t.length&&t.reduce((function(t,r){let s=0,i=0,a=t.length,l=r[r.length-1];return r.forEach(((t,c)=>{let d=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find((t=>e.node(t).dummy))}(e,t),u=d?e.node(d).order:a;(d||t===l)&&(r.slice(i,c+1).forEach((t=>{e.predecessors(t).forEach((r=>{let i=e.node(r),a=i.order;!(a<s||u<a)||i.dummy&&e.node(t).dummy||o(n,r,t)}))})),i=c+1,s=u)})),r})),n}function r(e,n){let r={};function s(n,s,i,a,l){let c;t.range(s,i).forEach((t=>{c=n[t],e.node(c).dummy&&e.predecessors(c).forEach((t=>{let n=e.node(t);n.dummy&&(n.order<a||n.order>l)&&o(r,t,c)}))}))}return n.length&&n.reduce((function(t,n){let r,o=-1,i=0;return n.forEach(((a,l)=>{if("border"===e.node(a).dummy){let t=e.predecessors(a);t.length&&(r=e.node(t[0]).order,s(n,i,l,o,r),i=l,o=r)}s(n,i,n.length,r,t.length)})),n})),r}function o(e,t,n){if(t>n){let e=t;t=n,n=e}let r=e[t];r||(e[t]=r={}),r[n]=!0}function s(e,t,n){if(t>n){let e=t;t=n,n=e}return!!e[t]&&Object.hasOwn(e[t],n)}function i(e,t,n,r){let o={},i={},a={};return t.forEach((e=>{e.forEach(((e,t)=>{o[e]=e,i[e]=e,a[e]=t}))})),t.forEach((e=>{let t=-1;e.forEach((e=>{let l=r(e);if(l.length){l=l.sort(((e,t)=>a[e]-a[t]));let r=(l.length-1)/2;for(let c=Math.floor(r),d=Math.ceil(r);c<=d;++c){let r=l[c];i[e]===e&&t<a[r]&&!s(n,e,r)&&(i[r]=e,i[e]=o[e]=o[r],t=a[r])}}}))})),{root:o,align:i}}function a(t,n,r,o,s){let i={},a=function(t,n,r,o){let s=new e,i=t.graph(),a=function(e,t,n){return(r,o,s)=>{let i,a=r.node(o),l=r.node(s),c=0;if(c+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":i=-a.width/2;break;case"r":i=a.width/2}if(i&&(c+=n?i:-i),i=0,c+=(a.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":i=l.width/2;break;case"r":i=-l.width/2}return i&&(c+=n?i:-i),i=0,c}}(i.nodesep,i.edgesep,o);return n.forEach((e=>{let n;e.forEach((e=>{let o=r[e];if(s.setNode(o),n){var i=r[n],l=s.edge(i,o);s.setEdge(i,o,Math.max(a(t,e,n),l||0))}n=e}))})),s}(t,n,r,s),l=s?"borderLeft":"borderRight";function c(e,t){let n=a.nodes(),r=n.pop(),o={};for(;r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return c((function(e){i[e]=a.inEdges(e).reduce(((e,t)=>Math.max(e,i[t.v]+a.edge(t))),0)}),a.predecessors.bind(a)),c((function(e){let n=a.outEdges(e).reduce(((e,t)=>Math.min(e,i[t.w]-a.edge(t))),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==l&&(i[e]=Math.max(i[e],n))}),a.successors.bind(a)),Object.keys(o).forEach((e=>i[e]=i[r[e]])),i}function l(e,t){return Object.values(t).reduce(((t,n)=>{let r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(n).forEach((([t,n])=>{let s=function(e,t){return e.node(t).width}(e,t)/2;r=Math.max(n+s,r),o=Math.min(n-s,o)}));const s=r-o;return s<t[0]&&(t=[s,n]),t}),[Number.POSITIVE_INFINITY,null])[1]}function c(e,n){let r=Object.values(n),o=t.applyWithChunking(Math.min,r),s=t.applyWithChunking(Math.max,r);["u","d"].forEach((r=>{["l","r"].forEach((i=>{let a=r+i,l=e[a];if(l===n)return;let c=Object.values(l),d=o-t.applyWithChunking(Math.min,c);"l"!==i&&(d=s-t.applyWithChunking(Math.max,c)),d&&(e[a]=t.mapValues(l,(e=>e+d)))}))}))}function d(e,n){return t.mapValues(e.ul,((t,r)=>{if(n)return e[n.toLowerCase()][r];{let t=Object.values(e).map((e=>e[r])).sort(((e,t)=>e-t));return(t[1]+t[2])/2}}))}return MF={positionX:function(e){let o,s=t.buildLayerMatrix(e),u=Object.assign(n(e,s),r(e,s)),h={};["u","d"].forEach((n=>{o="u"===n?s:Object.values(s).reverse(),["l","r"].forEach((r=>{"r"===r&&(o=o.map((e=>Object.values(e).reverse())));let s=("u"===n?e.predecessors:e.successors).bind(e),l=i(e,o,u,s),c=a(e,o,l.root,l.align,"r"===r);"r"===r&&(c=t.mapValues(c,(e=>-e))),h[n+r]=c}))}));let f=l(e,h);return c(h,f),d(h,e.graph().align)},findType1Conflicts:n,findType2Conflicts:r,addConflict:o,hasConflict:s,verticalAlignment:i,horizontalCompaction:a,alignCoordinates:c,findSmallestWidthAlignment:l,balance:d}}function kB(){if(RF)return OF;RF=1;let e=aB(),t=wB().positionX;return OF=function(n){(function(t){let n=e.buildLayerMatrix(t),r=t.graph().ranksep,o=0;n.forEach((e=>{const n=e.reduce(((e,n)=>{const r=t.node(n).height;return e>r?e:r}),0);e.forEach((e=>t.node(e).y=o+n/2)),o+=n+r}))})(n=e.asNonCompoundGraph(n)),Object.entries(t(n)).forEach((([e,t])=>n.node(e).x=t))}}function SB(){if(LF)return PF;LF=1;let e=lB(),t=cB(),n=fB(),r=aB().normalizeRanks,o=pB(),s=aB().removeEmptyRanks,i=mB(),a=function(){if(uF)return dF;uF=1;let e=aB();function t(t,n,r,o,s,i){let a={width:0,height:0,rank:i,borderType:n},l=s[n][i-1],c=e.addDummyNode(t,"border",a,r);s[n][i]=c,t.setParent(c,o),l&&t.setEdge(l,c,{weight:1})}return dF=function(e){e.children().forEach((function n(r){let o=e.children(r),s=e.node(r);if(o.length&&o.forEach(n),Object.hasOwn(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(let n=s.minRank,o=s.maxRank+1;n<o;++n)t(e,"borderLeft","_bl",r,s,n),t(e,"borderRight","_br",r,s,n)}}))}}(),l=gB(),c=vB(),d=kB(),u=aB(),h=sB().Graph;PF=function(S,C){let E=C&&C.debugTiming?u.time:u.notime;E("layout",(()=>{let N=E("  buildLayoutGraph",(()=>function(e){let t=new h({multigraph:!0,compound:!0}),n=k(e.graph());return t.setGraph(Object.assign({},p,w(n,f),u.pick(n,m))),e.nodes().forEach((n=>{const r=w(k(e.node(n)),g);Object.keys(y).forEach((e=>{void 0===r[e]&&(r[e]=y[e])})),t.setNode(n,r),t.setParent(n,e.parent(n))})),e.edges().forEach((n=>{let r=k(e.edge(n));t.setEdge(n,Object.assign({},x,w(r,b),u.pick(r,v)))})),t}(S)));E("  runLayout",(()=>function(h,f,p){f("    makeSpaceForEdgeLabels",(()=>function(e){let t=e.graph();t.ranksep/=2,e.edges().forEach((n=>{let r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(h))),f("    removeSelfEdges",(()=>function(e){e.edges().forEach((t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(h))),f("    acyclic",(()=>e.run(h))),f("    nestingGraph.run",(()=>i.run(h))),f("    rank",(()=>n(u.asNonCompoundGraph(h)))),f("    injectEdgeLabelProxies",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);if(n.width&&n.height){let n=e.node(t.v),r={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};u.addDummyNode(e,"edge-proxy",r,"_ep")}}))}(h))),f("    removeEmptyRanks",(()=>s(h))),f("    nestingGraph.cleanup",(()=>i.cleanup(h))),f("    normalizeRanks",(()=>r(h))),f("    assignRankMinMax",(()=>function(e){let t=0;e.nodes().forEach((n=>{let r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Math.max(t,r.maxRank))})),e.graph().maxRank=t}(h))),f("    removeEdgeLabelProxies",(()=>function(e){e.nodes().forEach((t=>{let n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(h))),f("    normalize.run",(()=>t.run(h))),f("    parentDummyChains",(()=>o(h))),f("    addBorderSegments",(()=>a(h))),f("    order",(()=>c(h,p))),f("    insertSelfEdges",(()=>function(e){var t=u.buildLayerMatrix(e);t.forEach((t=>{var n=0;t.forEach(((t,r)=>{var o=e.node(t);o.order=r+n,(o.selfEdges||[]).forEach((t=>{u.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:r+ ++n,e:t.e,label:t.label},"_se")})),delete o.selfEdges}))}))}(h))),f("    adjustCoordinateSystem",(()=>l.adjust(h))),f("    position",(()=>d(h))),f("    positionSelfEdges",(()=>function(e){e.nodes().forEach((t=>{var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),o=r.x+r.width/2,s=r.y,i=n.x-o,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:s-a},{x:o+5*i/6,y:s-a},{x:o+i,y:s},{x:o+5*i/6,y:s+a},{x:o+2*i/3,y:s+a}],n.label.x=n.x,n.label.y=n.y}}))}(h))),f("    removeBorderNodes",(()=>function(e){e.nodes().forEach((t=>{if(e.children(t).length){let n=e.node(t),r=e.node(n.borderTop),o=e.node(n.borderBottom),s=e.node(n.borderLeft[n.borderLeft.length-1]),i=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(i.x-s.x),n.height=Math.abs(o.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}})),e.nodes().forEach((t=>{"border"===e.node(t).dummy&&e.removeNode(t)}))}(h))),f("    normalize.undo",(()=>t.undo(h))),f("    fixupEdgeLabelCoords",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(h))),f("    undoCoordinateSystem",(()=>l.undo(h))),f("    translateGraph",(()=>function(e){let t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,s=e.graph(),i=s.marginx||0,a=s.marginy||0;function l(e){let s=e.x,i=e.y,a=e.width,l=e.height;t=Math.min(t,s-a/2),n=Math.max(n,s+a/2),r=Math.min(r,i-l/2),o=Math.max(o,i+l/2)}e.nodes().forEach((t=>l(e.node(t)))),e.edges().forEach((t=>{let n=e.edge(t);Object.hasOwn(n,"x")&&l(n)})),t-=i,r-=a,e.nodes().forEach((n=>{let o=e.node(n);o.x-=t,o.y-=r})),e.edges().forEach((n=>{let o=e.edge(n);o.points.forEach((e=>{e.x-=t,e.y-=r})),Object.hasOwn(o,"x")&&(o.x-=t),Object.hasOwn(o,"y")&&(o.y-=r)})),s.width=n-t+i,s.height=o-r+a}(h))),f("    assignNodeIntersects",(()=>function(e){e.edges().forEach((t=>{let n,r,o=e.edge(t),s=e.node(t.v),i=e.node(t.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=i,r=s),o.points.unshift(u.intersectRect(s,n)),o.points.push(u.intersectRect(i,r))}))}(h))),f("    reversePoints",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);n.reversed&&n.points.reverse()}))}(h))),f("    acyclic.undo",(()=>e.undo(h)))}(N,E,C))),E("  updateInputGraph",(()=>function(e,t){e.nodes().forEach((n=>{let r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,r.rank=o.rank,t.children(n).length&&(r.width=o.width,r.height=o.height))})),e.edges().forEach((n=>{let r=e.edge(n),o=t.edge(n);r.points=o.points,Object.hasOwn(o,"x")&&(r.x=o.x,r.y=o.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(S,N)))}))};let f=["nodesep","edgesep","ranksep","marginx","marginy"],p={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],g=["width","height"],y={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],x={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},v=["labelpos"];function w(e,t){return u.mapValues(u.pick(e,t),Number)}function k(e){var t={};return e&&Object.entries(e).forEach((([e,n])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=n})),t}return PF}function CB(){if(FF)return zF;FF=1;let e=aB(),t=sB().Graph;return zF={debugOrdering:function(n){let r=e.buildLayerMatrix(n),o=new t({compound:!0,multigraph:!0}).setGraph({});return n.nodes().forEach((e=>{o.setNode(e,{label:e}),o.setParent(e,"layer"+n.node(e).rank)})),n.edges().forEach((e=>o.setEdge(e.v,e.w,{},e.name))),r.forEach(((e,t)=>{let n="layer"+t;o.setNode(n,{rank:"same"}),e.reduce(((e,t)=>(o.setEdge(e,t,{style:"invis"}),t)))})),o}}}var EB=VF?$F:(VF=1,$F={graphlib:sB(),layout:SB(),debug:CB(),util:{time:aB().time,notime:aB().notime},version:UF?BF:(UF=1,BF="1.1.4")});const NB=(new EB.graphlib.Graph).setDefaultEdgeLabel((()=>({}))),jB=(e,t,n)=>(NB.setGraph({rankdir:n.direction,nodesep:150,ranksep:200,ranker:"longest-path"}),t.forEach((e=>NB.setEdge(e.source,e.target))),e.forEach((e=>NB.setNode(e.id,{...e,width:e.width??0,height:e.height??0}))),EB.layout(NB),{nodes:e.map((e=>{const{x:t,y:n}=NB.node(e.id);return{...e,position:{x:t,y:n}}})),edges:t}),_B=new class{createEdge(e,t){return{animated:!0,markerEnd:{type:kO.ArrowClosed},id:`${e}-${t}`,style:{strokeWidth:2},source:e,sourceHandle:"outputs",targetHandle:"inputs",target:t}}createNode(e,t){return{id:e,data:{atom:t,forceWidth:300},width:300,type:"custom",height:UL(re.get(t).code.trim().split("\n").length),position:{x:0,y:0}}}createElements(e,t,n,r){const o=[],s=[],i=new Set,a=new Set;for(const l of Object.values(n)){if("marimo"===l.value&&"mo"===l.name)continue;const{declaredBy:e,usedBy:t}=l;for(const n of e)for(const e of t){const t=`${n}-${e}`;a.has(t)||(a.add(t),i.add(n),i.add(e),s.push(this.createEdge(n,e)))}}for(const[l,c]of Ni.zip(e,t)){r||o.push(this.createNode(l,c));const e=i.has(l),t=re.get(c).code.trim().startsWith("mo.md");!e&&t||o.push(this.createNode(l,c))}return{nodes:o,edges:s}}},IB=e=>{const t=_.c(43),{cellIds:n,variables:r,cellAtoms:o,children:s,layoutDirection:i,settings:a}=e;let c;t[0]!==o||t[1]!==n||t[2]!==i||t[3]!==a.hidePureMarkdown||t[4]!==r?(c=()=>{let e=_B.createElements(n,o,r,a.hidePureMarkdown);return e=jB(e.nodes,e.edges,{direction:i}),e},t[0]=o,t[1]=n,t[2]=i,t[3]=a.hidePureMarkdown,t[4]=r,t[5]=c):c=t[5];const[d]=l.useState(c),[u,h,f]=wL(d.nodes),[p,m,g]=kL(d.edges),y=qR();let b;t[6]!==i||t[7]!==m||t[8]!==h?(b=e=>{const t=jB(e.nodes,e.edges,{direction:i});h(t.nodes),m(t.edges)},t[6]=i,t[7]=m,t[8]=h,t[9]=b):b=t[9];const x=H(b);let v,w;t[10]!==o||t[11]!==n||t[12]!==a.hidePureMarkdown||t[13]!==x||t[14]!==r?(v=()=>{x(_B.createElements(n,o,r,a.hidePureMarkdown))},w=[n,r,o,x,a.hidePureMarkdown],t[10]=o,t[11]=n,t[12]=a.hidePureMarkdown,t[13]=x,t[14]=r,t[15]=v,t[16]=w):(v=t[15],w=t[16]),l.useEffect(v,w);const[k,S]=l.useState();let C;KL(),t[17]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{S(void 0)},t[17]=C):C=t[17];const E=C;let N,j,I,T,M,D,O,R,P,L;return t[18]===Symbol.for("react.memo_cache_sentinel")?(N={minZoom:.5,maxZoom:1.5},j=(e,t)=>{S({type:"node",id:t.id})},I=(e,t)=>{const{source:n,target:r}=t;S({type:"edge",source:n,target:r})},t[18]=N,t[19]=j,t[20]=I):(N=t[18],j=t[19],I=t[20]),t[21]===Symbol.for("react.memo_cache_sentinel")?(T=A.jsx(BL,{color:"#ccc",variant:TL.Dots}),t[21]=T):T=t[21],t[22]!==y||t[23]!==u?(M=()=>{const e=re.get(qu);if(e){const t=u.find((t=>t.id===e));t&&(y.fitView({padding:1,duration:600,nodes:[t]}),S({type:"node",id:e}))}},t[22]=y,t[23]=u,t[24]=M):M=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(D=A.jsx(jd,{className:"size-4"}),t[25]=D):D=t[25],t[26]!==M?(O=A.jsx(DL,{position:"bottom-right",showInteractive:!1,children:A.jsx(ht,{content:"Jump to focused cell",delayDuration:200,side:"left",asChild:!1,children:A.jsx(_L,{onMouseDown:dt.preventFocus,onClick:M,children:D})})}),t[26]=M,t[27]=O):O=t[27],t[28]!==p||t[29]!==k||t[30]!==r?(R=A.jsx(JL,{selection:k,variables:r,edges:p,onClearSelection:E}),t[28]=p,t[29]=k,t[30]=r,t[31]=R):R=t[31],t[32]!==s||t[33]!==p||t[34]!==u||t[35]!==g||t[36]!==f||t[37]!==O||t[38]!==R?(P=A.jsxs(xL,{nodes:u,edges:p,nodeTypes:HL,minZoom:.2,fitViewOptions:N,onNodeClick:j,onEdgeClick:I,onNodeDoubleClick:AB,fitView:!0,onNodesChange:f,onEdgesChange:g,zoomOnDoubleClick:!1,nodesConnectable:!1,children:[T,O,R,s]}),t[32]=s,t[33]=p,t[34]=u,t[35]=g,t[36]=f,t[37]=O,t[38]=R,t[39]=P):P=t[39],t[40]!==i||t[41]!==P?(L=A.jsx($L.Provider,{value:i,children:P}),t[40]=i,t[41]=P,t[42]=L):L=t[42],L};function AB(e,t){sa(t.id,"focus")}const TB=Q("_minimap_"),MB=Q({hidePureMarkdown:!0}),DB=e=>{const t=_.c(11),[n,r]=He(TB),[o,s]=He(MB);let i;t[0]!==n||t[1]!==e||t[2]!==r||t[3]!==s||t[4]!==o?(i=()=>"_minimap_"===n?A.jsx(tz,{...e,children:A.jsx(YL,{settings:o,onSettingsChange:s,view:n,onChange:r})}):A.jsx(IB,{...e,settings:o,layoutDirection:n,children:A.jsx(YL,{settings:o,onSettingsChange:s,view:n,onChange:r})}),t[0]=n,t[1]=e,t[2]=r,t[3]=s,t[4]=o,t[5]=i):i=t[5];const a=i;let l,c;return t[6]!==a?(l=a(),t[6]=a,t[7]=l):l=t[7],t[8]!==n||t[9]!==l?(c=A.jsx(uL,{children:l},n),t[8]=n,t[9]=l,t[10]=c):c=t[10],c},OB=()=>{const e=_.c(5),t=ia(),n=Qi(),[r]=aa();let o,s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=Ln("w-full h-full flex-1 mx-auto -mb-4 relative"),e[0]=o):o=e[0],e[1]!==n.inOrderIds||e[2]!==r||e[3]!==t?(s=A.jsx("div",{className:o,children:A.jsx(DB,{cellAtoms:r,variables:t,cellIds:n.inOrderIds})}),e[1]=n.inOrderIds,e[2]=r,e[3]=t,e[4]=s):s=e[4],s};const RB="name",PB="type-value",LB="defs-refs",zB=[{id:RB,accessorFn:e=>[e.name,e.declaredBy],enableSorting:!0,sortingFn:"alphanumeric",header:({column:e})=>A.jsx(ka,{header:"Name",column:e}),cell:({getValue:e})=>{const[t,n]=e();return A.jsx(qL,{name:t,declaredBy:n})}},{id:PB,accessorFn:e=>[e.dataType,e.value],enableSorting:!0,sortingFn:"alphanumeric",header:({column:e})=>A.jsx(ka,{header:A.jsxs("div",{className:"flex flex-col gap-1",children:[A.jsx("span",{children:"Type"}),A.jsx("span",{children:"Value"})]}),column:e}),cell:({getValue:e})=>{const[t,n]=e();return A.jsxs("div",{className:"max-w-[150px]",children:[A.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap text-muted-foreground font-mono text-xs",children:t}),A.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap",title:n??"",children:n})]})}},{id:LB,accessorFn:e=>[e.declaredBy,e.usedBy,e.name,e.declaredByNames,e.usedByNames],enableSorting:!0,sortingFn:"basic",header:({column:e})=>A.jsx(ka,{header:A.jsxs("div",{className:"flex flex-col gap-1",children:[A.jsx("span",{children:"Declared By"}),A.jsx("span",{children:"Used By"})]}),column:e}),cell:({getValue:e})=>{const[t,n,r]=e(),o=e=>{const t=de(e);t&&ra(t,r)};return A.jsxs("div",{className:"flex flex-col gap-1 py-1",children:[A.jsxs("div",{className:"flex flex-row overflow-auto gap-2 items-center",children:[A.jsx("span",{title:"Declared by",children:A.jsx(Xd,{className:"w-3.5 h-3.5 text-muted-foreground"})}),1===t.length?A.jsx(ta,{variant:"focus",cellId:t[0],skipScroll:!0,onClick:()=>o(t[0])}):A.jsx("div",{className:"text-destructive flex flex-row gap-2",children:t.slice(0,3).map(((e,n)=>A.jsxs("span",{className:"flex",children:[A.jsx(ta,{variant:"focus",cellId:e,skipScroll:!0,className:"whitespace-nowrap text-destructive",onClick:()=>o(e)},e),n<t.length-1&&", "]},e)))})]}),A.jsxs("div",{className:"flex flex-row overflow-auto gap-2 items-baseline",children:[A.jsx("span",{title:"Used by",children:A.jsx(lu,{className:"w-3.5 h-3.5 text-muted-foreground"})}),A.jsx(GL,{maxCount:3,cellIds:n,skipScroll:!0,onClick:o})]})]})}}];const FB=l.memo((({className:e,cellIds:t,variables:n})=>{const[r,o]=m.useState([]),[s,i]=m.useState(""),a=la(),c=l.useMemo((()=>{const e=e=>{const n=a[e];return wa(n)?`cell-${t.indexOf(e)}`:n??`cell-${t.indexOf(e)}`};return Object.values(n).map((t=>({...t,declaredByNames:t.declaredBy.map(e),usedByNames:t.usedBy.map(e)})))}),[n,a,t]),d=l.useMemo((()=>{const e=new Map;return t.forEach(((t,n)=>e.set(t,n))),function(e,t,n){t||(t={id:LB,desc:!1});let r=[];switch(t.id){case RB:r=Gc(e,(e=>e.name));break;case PB:r=Gc(e,(e=>e.dataType));break;case LB:r=Gc(e,(e=>n.get(e.declaredBy[0])))}return t.desc?r.reverse():r}(c,r[0],e)}),[c,r,t]),u=ca({data:d,columns:zB,getCoreRowModel:ha(),onGlobalFilterChange:i,getFilteredRowModel:ua(),enableFilters:!0,enableGlobalFilter:!0,getColumnCanGlobalFilter:e=>e.columnDef.enableGlobalFilter??!0,globalFilterFn:"auto",manualSorting:!0,onSortingChange:o,getSortedRowModel:da(),state:{sorting:r,globalFilter:s}});return A.jsxs(A.Fragment,{children:[A.jsx(fa,{className:"w-full",placeholder:"Search",value:s,onChange:e=>i(e.target.value)}),A.jsxs(pa,{className:Ln("w-full text-sm flex-1 border-separate border-spacing-0",e),children:[A.jsx(ma,{children:A.jsx(ga,{className:"whitespace-nowrap text-xs",children:u.getFlatHeaders().map((e=>A.jsx(ya,{className:"sticky top-0 bg-background border-b",children:ba(e.column.columnDef.header,e.getContext())},e.id)))})}),A.jsx(xa,{children:u.getRowModel().rows.map((e=>A.jsx(ga,{className:"hover:bg-accent",children:e.getVisibleCells().map((e=>A.jsx(va,{className:"border-b",children:ba(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]})]})}));FB.displayName="VariableTable";const BB=()=>{const e=_.c(4),t=ia(),n=Qi();if(0===Object.keys(t).length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(KM,{title:"No variables",description:"Global variables will appear here.",icon:A.jsx(wt,{})}),e[0]=t):t=e[0],t}let r;return e[1]!==n.inOrderIds||e[2]!==t?(r=A.jsx(FB,{className:"flex-1",cellIds:n.inOrderIds,variables:t}),e[1]=n.inOrderIds,e[2]=t,e[3]=r):r=e[3],r},UB=e=>A.jsx("button",{type:"button","data-testid":e.dataTestId,className:Ln("text-xs font-semibold text-accent-foreground",e.className),onClick:e.onClick,children:"Clear"}),$B=()=>{const e=_.c(9),t=Sa(),{clearLogs:n}=W();if(0===t.length){let t,n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx("code",{className:"border rounded px-1",children:"stdout"}),e[0]=t):t=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(n=A.jsx(KM,{title:"No logs",description:A.jsxs("span",{children:[t," and"," ",A.jsx("code",{className:"border rounded px-1",children:"stderr"})," logs will appear here."]}),icon:A.jsx(St,{})}),e[1]=n):n=e[1],n}let r,o,s;return e[2]!==n?(r=A.jsx("div",{className:"flex flex-row justify-end px-2 py-1",children:A.jsx(UB,{dataTestId:"clear-logs-button",onClick:n})}),e[2]=n,e[3]=r):r=e[3],e[4]!==t?(o=A.jsx("div",{className:"overflow-auto flex-1",children:A.jsx(VB,{logs:t,className:"min-w-[300px]"})}),e[4]=t,e[5]=o):o=e[5],e[6]!==r||e[7]!==o?(s=A.jsxs(A.Fragment,{children:[r,o]}),e[6]=r,e[7]=o,e[8]=s):s=e[8],s},VB=e=>{const t=_.c(11),{logs:n,className:r}=e;let o,s,i,a,l;if(t[0]!==r?(o=Ln("flex flex-col",r),t[0]=r,t[1]=o):o=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(s={whiteSpace:"pre-wrap"},t[2]=s):s=t[2],t[3]!==n){let e;t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(e,t)=>A.jsxs("div",{className:"contents group",children:[A.jsx("span",{className:Ln("opacity-70 group-hover:bg-[var(--gray-3)] group-hover:opacity-100","text-right col-span-1 py-1 pr-1"),children:t+1}),A.jsx("span",{className:Ln("opacity-70 group-hover:bg-[var(--gray-3)] group-hover:opacity-100","px-2 flex gap-x-1.5 py-1 flex-wrap"),children:HB(e)})]},t),t[5]=e):e=t[5],i=n.map(e),t[3]=n,t[4]=i}else i=t[4];return t[6]!==i?(a=A.jsx("pre",{className:"grid text-xs font-mono gap-1 whitespace-break-spaces font-semibold align-left",children:A.jsx("div",{className:"grid grid-cols-[30px,1fr]",style:s,children:i})}),t[6]=i,t[7]=a):a=t[7],t[8]!==o||t[9]!==a?(l=A.jsx("div",{className:o,children:a}),t[8]=o,t[9]=a,t[10]=l):l=t[10],l};function HB(e){const t=Ca(e.timestamp),n=WB[e.level],r=e.level.toUpperCase();return A.jsxs(A.Fragment,{children:[A.jsxs("span",{className:"flex-shrink-0 text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:["[",t,"]"]}),A.jsx("span",{className:Ln("flex-shrink-0",n),children:r}),A.jsxs("span",{className:"flex-shrink-0 text-[var(--gray-10)]",children:["(",A.jsx(ta,{cellId:e.cellId}),")"]}),e.message]})}const WB={stdout:"text-[var(--grass-9)]",stderr:"text-[var(--red-9)]"},GB=()=>{const e=_.c(5),{documentation:t}=ue(Ea);if(!t){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(KM,{title:"View docs as you type",description:"Move your text cursor over a symbol to see its documentation.",icon:A.jsx(ou,{})}),e[0]=t):t=e[0],t}let n,r;return e[1]!==t?(n=gi({html:t}),e[1]=t,e[2]=n):n=e[2],e[3]!==n?(r=A.jsx("div",{className:"p-3 overflow-y-auto overflow-x-hidden h-full docs-documentation flex flex-col gap-4",children:n}),e[3]=n,e[4]=r):r=e[4],r};function qB(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}function YB(e){void 0===e&&(e={});var t=e.onResize,n=l.useRef(void 0);n.current=t;var r=e.round||Math.round,o=l.useRef(),s=l.useState({width:void 0,height:void 0}),i=s[0],a=s[1],c=l.useRef(!1);l.useEffect((function(){return c.current=!1,function(){c.current=!0}}),[]);var d=l.useRef({width:void 0,height:void 0}),u=function(e,t){var n=l.useRef(null),r=l.useRef(null);r.current=t;var o=l.useRef(null);l.useEffect((function(){s()}));var s=l.useCallback((function(){var t=o.current,s=r.current,i=t||(s?s instanceof Element?s:s.current:null);n.current&&n.current.element===i&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:i,subscriber:e,cleanup:i?e(i):void 0})}),[e]);return l.useEffect((function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}}),[]),l.useCallback((function(e){o.current=e,s()}),[s])}(l.useCallback((function(t){return o.current&&o.current.box===e.box&&o.current.round===r||(o.current={box:e.box,round:r,instance:new ResizeObserver((function(t){var o=t[0],s="border-box"===e.box?"borderBoxSize":"device-pixel-content-box"===e.box?"devicePixelContentBoxSize":"contentBoxSize",i=qB(o,s,"inlineSize"),l=qB(o,s,"blockSize"),u=i?r(i):void 0,h=l?r(l):void 0;if(d.current.width!==u||d.current.height!==h){var f={width:u,height:h};d.current.width=u,d.current.height=h,n.current?n.current(f):c.current||a(f)}}))}),o.current.instance.observe(t,{box:e.box}),function(){o.current&&o.current.instance.unobserve(t)}}),[e.box,r]),e.ref);return l.useMemo((function(){return{ref:u,width:i.width,height:i.height}}),[u,i.width,i.height])}const JB=new Map,XB=({file:e,onOpenNotebook:t})=>{const{theme:n}=Be(),r=ue(We),[o,s]=l.useState(""),{data:i,loading:a,error:c,setData:d}=On((async()=>{const t=await Na({path:e.path}),n=t.contents||"";return s(JB.get(e.path)||n),t}),[e.path]),u=async()=>{o!==(null==i?void 0:i.contents)&&await Ra({path:e.path,contents:o}).then((e=>{e.success&&(d((e=>e?{...e,contents:o}:void 0)),s(o))}))},h=l.useRef(o);if(h.current=o,l.useEffect((()=>()=>{if(!(null==i?void 0:i.contents))return;const t=h.current;t===i.contents?JB.delete(e.path):JB.set(e.path,t)}),[e.path,null==i?void 0:i.contents]),c)return A.jsx(ja,{error:c});if(a||!i)return null;const f=i.mimeType||"text/plain",p=f in ZB;if(!i.contents&&!p)return A.jsxs("div",{className:"grid grid-cols-2 gap-2 p-6",children:[A.jsx("div",{className:"font-bold text-muted-foreground",children:"Name"}),A.jsx("div",{children:i.file.name}),A.jsx("div",{className:"font-bold text-muted-foreground",children:"Type"}),A.jsx("div",{children:f})]});const m=A.jsxs("div",{className:"text-xs text-muted-foreground p-1 flex justify-end gap-2 border-b",children:[e.isMarimoFile&&!I()&&A.jsx(ht,{content:"Open notebook",children:A.jsx(Ll,{size:"small",onClick:e=>t(e),children:A.jsx(tn,{})})}),A.jsx(ht,{content:"Download",children:A.jsx(Ll,{size:"small",onClick:()=>{if(KB(f)){const e=Da(i.contents,f);Oa(e,i.file.name)}else rn(new Blob([i.contents||o],{type:f}),i.file.name)},children:A.jsx(Kt,{})})}),!KB(f)&&A.jsxs(A.Fragment,{children:[A.jsx(ht,{content:"Copy contents to clipboard",children:A.jsx(Ll,{size:"small",onClick:async()=>{await lt(o)},children:A.jsx(ut,{})})}),A.jsx(ht,{content:Gt("global.save"),children:A.jsx(Ll,{size:"small",color:o===i.contents?void 0:"green",onClick:u,disabled:o===i.contents,children:A.jsx(Hd,{})})})]})]});return f.startsWith("image/")?A.jsxs(A.Fragment,{children:[m,A.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:A.jsx(_a,{base64:i.contents,mime:f})})]}):"text/csv"===f&&i.contents?A.jsxs(A.Fragment,{children:[m,A.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:A.jsx(Ia,{contents:i.contents})})]}):f.startsWith("audio/")?A.jsxs(A.Fragment,{children:[m,A.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:A.jsx(Aa,{base64:i.contents,mime:f})})]}):f.startsWith("video/")?A.jsxs(A.Fragment,{children:[m,A.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:A.jsx(Ta,{base64:i.contents,mime:f})})]}):A.jsxs(A.Fragment,{children:[m,A.jsx("div",{className:"flex-1 overflow-auto",children:A.jsx(Ma,{theme:"dark"===n?"dark":"light",language:ZB[f]||ZB.default,className:"border-b",extensions:[Cn.lineWrapping,ar.of([{key:r.getHotkey("global.save").key,stopPropagation:!0,run:()=>o!==i.contents&&(u(),!0)}])],value:o,onChange:s})})]})},KB=e=>e.startsWith("image/")||e.startsWith("audio/")||e.startsWith("video/"),ZB={"application/javascript":"javascript","text/markdown":"markdown","text/html":"html","text/css":"css","text/x-python":"python","application/json":"json","application/xml":"xml","text/x-yaml":"yaml","text/csv":"markdown","text/plain":"markdown",default:"markdown"};const QB=Q(new class{constructor(e){this.callbacks=e,this.delegate=new rc([]),this.rootPath="",this.onChange=or.NOOP,this.path=new jt("/"),this.initialize=async e=>{if(this.onChange=e,0===this.delegate.data.length)try{const e=await this.callbacks.listFiles({path:this.rootPath});this.delegate=new rc(e.files),this.rootPath=e.root,this.path=jt.guessDeliminator(e.root)}catch(t){ie({title:"Failed",description:Bs(t)})}this.onChange(this.delegate.data)},this.refreshAll=async e=>{const t=[this.rootPath,...e.map((e=>{var t;return null==(t=this.delegate.find(e))?void 0:t.data.path}))].filter(Boolean),n=await Promise.all(t.map((e=>this.callbacks.listFiles({path:e}).catch((()=>({files:[]}))))));for(const[r,o]of t.entries()){const e=n[r];o===this.rootPath?this.delegate=new rc(e.files):this.delegate.update({id:o,changes:{children:e.files}})}this.onChange(this.delegate.data)},this.relativeFromRoot=e=>{const t=function(e){return e.endsWith("/")?e:`${e}/`}(this.rootPath);return e.startsWith(t)?e.slice(t.length):e},this.handleResponse=e=>e.success?e:(ie({title:"Failed",description:e.message}),null)}async expand(e){const t=this.delegate.find(e);if(!t)return!1;if(!t.data.isDirectory)return!1;if(t.children&&t.children.length>0)return!0;const n=await this.callbacks.listFiles({path:t.data.path});return this.delegate.update({id:e,changes:{children:n.files}}),this.onChange(this.delegate.data),!0}async rename(e,t){const n=this.delegate.find(e);if(!n)return;const r=n.data.path,o=this.path.join(this.path.dirname(r),t);await this.callbacks.renameFileOrFolder({path:r,newPath:o}).then(this.handleResponse),this.delegate.update({id:e,changes:{name:t,path:o}}),this.onChange(this.delegate.data),await this.refreshAll([o])}async move(e,t){var n;const r=t?(null==(n=this.delegate.find(t))?void 0:n.data.path)??t:this.rootPath;await Promise.all(e.map((e=>{this.delegate.move({id:e,parentId:t,index:0});const n=this.delegate.find(e);if(!n)return Promise.resolve();const o=this.path.join(r,this.path.basename(n.data.path));return this.delegate.update({id:e,changes:{path:o}}),this.callbacks.renameFileOrFolder({path:n.data.path,newPath:o}).then(this.handleResponse)}))),this.onChange(this.delegate.data),await this.refreshAll([r])}async createFile(e,t){var n;const r=t?(null==(n=this.delegate.find(t))?void 0:n.data.path)??t:this.rootPath,o=await this.callbacks.createFileOrFolder({path:r,type:"file",name:e}).then(this.handleResponse);(null==o?void 0:o.info)&&(this.delegate.create({parentId:t,index:0,data:o.info}),this.onChange(this.delegate.data),await this.refreshAll([r]))}async createFolder(e,t){var n;const r=t?(null==(n=this.delegate.find(t))?void 0:n.data.path)??t:this.rootPath,o=await this.callbacks.createFileOrFolder({path:r,type:"directory",name:e}).then(this.handleResponse);(null==o?void 0:o.info)&&(this.delegate.create({parentId:t,index:0,data:o.info}),this.onChange(this.delegate.data),await this.refreshAll([r]))}async delete(e){const t=this.delegate.find(e);t&&(await this.callbacks.deleteFileOrFolder({path:t.data.path}).then(this.handleResponse),this.delegate.drop({id:e}),this.onChange(this.delegate.data))}}({listFiles:zn,createFileOrFolder:za,deleteFileOrFolder:La,renameFileOrFolder:Pa})),eU=Q({});function tU(e){return new Promise(((t,n)=>{const r=new FileReader;r.onload=e=>{var n;t(null==(n=e.target)?void 0:n.result)},r.onerror=e=>{n(new Error(`Failed to read blob: ${e.type}`))},r.readAsDataURL(e)}))}function nU(e){const t=_.c(4);let n;t[0]!==e?(n=void 0===e?{}:e,t[0]=e,t[1]=n):n=t[1];const r=n;let o;return t[2]!==r?(o={multiple:!0,maxSize:104857600,onError:aU,onDropRejected:oU,onDrop:rU,...r},t[2]=r,t[3]=o):o=t[3],Fa(o)}async function rU(e){for(const t of e){const e=(await tU(t)).split(",")[1];await za({path:"",type:"file",name:t.name,contents:e})}await async function(){await re.get(QB).refreshAll([])}()}function oU(e){ie({title:"File upload failed",description:A.jsx("div",{className:"flex flex-col gap-1",children:e.map(sU)}),variant:"danger"})}function sU(e){return A.jsxs("div",{children:[e.file.name," (",e.errors.map(iU).join(", "),")"]},e.file.name)}function iU(e){return e.message}function aU(e){E.error(e),ie({title:"File upload failed",description:e.message,variant:"danger"})}const lU=m.createContext(null),cU=e=>{const t=_.c(60),{height:n}=e,r=l.useRef(null),[o]=He(QB);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],t[0]=s):s=t[0];const[i,a]=l.useState(s),[c,d]=l.useState(null),{openPrompt:u}=he(),[h,f]=He(eU);let p,m;t[1]!==o?(p=()=>o.initialize(a),t[1]=o,t[2]=p):p=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(m=[],t[3]=m):m=t[3];const{loading:g,error:y}=On(p,m);let b;t[4]!==h||t[5]!==o?(b=()=>{o.refreshAll(Object.keys(h).filter((e=>h[e])))},t[4]=h,t[5]=o,t[6]=b):b=t[6];const x=H(b);let v;t[7]!==u||t[8]!==o?(v=async()=>{u({title:"Folder name",onConfirm:async e=>{o.createFolder(e,null)}})},t[7]=u,t[8]=o,t[9]=v):v=t[9];const w=H(v);let k;t[10]!==u||t[11]!==o?(k=async()=>{u({title:"File name",onConfirm:async e=>{o.createFile(e,null)}})},t[10]=u,t[11]=o,t[12]=k):k=t[12];const S=H(k);let C;t[13]!==f?(C=()=>{var e;null==(e=r.current)||e.closeAll(),f({})},t[13]=f,t[14]=C):C=t[14];const E=H(C);if(g){let e;return t[15]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx($i,{size:"medium",centered:!0}),t[15]=e):e=t[15],e}if(y){let e;return t[16]!==y?(e=A.jsx(ja,{error:y}),t[16]=y,t[17]=e):e=t[17],e}if(c){let e,n,r,s,i,a;return t[18]===Symbol.for("react.memo_cache_sentinel")?(e=()=>d(null),t[18]=e):e=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(n=A.jsx(te,{onClick:e,"data-testid":"file-explorer-back-button",variant:"text",size:"xs",className:"mb-0",children:A.jsx(qc,{size:16})}),t[19]=n):n=t[19],t[20]!==c.name?(r=A.jsxs("div",{className:"flex items-center pl-1 pr-3 flex-shrink-0 border-b justify-between",children:[n,A.jsx("span",{className:"font-bold",children:c.name})]}),t[20]=c.name,t[21]=r):r=t[21],t[22]!==c.path||t[23]!==o?(s=e=>gU(e,o.relativeFromRoot(c.path)),t[22]=c.path,t[23]=o,t[24]=s):s=t[24],t[25]!==c||t[26]!==s?(i=A.jsx(l.Suspense,{children:A.jsx(XB,{onOpenNotebook:s,file:c})}),t[25]=c,t[26]=s,t[27]=i):i=t[27],t[28]!==r||t[29]!==i?(a=A.jsxs(A.Fragment,{children:[r,i]}),t[28]=r,t[29]=i,t[30]=a):a=t[30],a}let N;t[31]!==E||t[32]!==S||t[33]!==w||t[34]!==x||t[35]!==o?(N=A.jsx(uU,{onRefresh:x,onCreateFile:S,onCreateFolder:w,onCollapseAll:E,tree:o}),t[31]=E,t[32]=S,t[33]=w,t[34]=x,t[35]=o,t[36]=N):N=t[36];const j=n-33;let I,T,M,D,O,R,P,L;return t[37]!==o?(I=async e=>{const{ids:t}=e;for(const n of t)await o.delete(n)},T=async e=>{const{id:t,name:n}=e;await o.rename(t,n)},M=async e=>{const{dragIds:t,parentId:n}=e;await o.move(t,n)},t[37]=o,t[38]=I,t[39]=T,t[40]=M):(I=t[38],T=t[39],M=t[40]),t[41]===Symbol.for("react.memo_cache_sentinel")?(D=e=>{const t=e[0];t&&(t.data.isDirectory||d(t.data))},t[41]=D):D=t[41],t[42]!==h||t[43]!==f||t[44]!==o?(O=async e=>{if(await o.expand(e)){const t=h[e]??!1;f({...h,[e]:!t})}},t[42]=h,t[43]=f,t[44]=o,t[45]=O):O=t[45],t[46]!==i||t[47]!==h||t[48]!==I||t[49]!==T||t[50]!==M||t[51]!==O||t[52]!==j?(R=A.jsx(oc,{width:"100%",ref:r,height:j,className:"h-full",data:i,initialOpenState:h,openByDefault:!1,renderCursor:yU,disableDrop:bU,onDelete:I,onRename:T,onMove:M,onSelect:D,onToggle:O,padding:15,rowHeight:30,indent:dU,overscanCount:1e3,disableMultiSelection:!0,children:pU}),t[46]=i,t[47]=h,t[48]=I,t[49]=T,t[50]=M,t[51]=O,t[52]=j,t[53]=R):R=t[53],t[54]!==R||t[55]!==o?(P=A.jsx(lU.Provider,{value:o,children:R}),t[54]=R,t[55]=o,t[56]=P):P=t[56],t[57]!==P||t[58]!==N?(L=A.jsxs(A.Fragment,{children:[N,P]}),t[57]=P,t[58]=N,t[59]=L):L=t[59],L},dU=15,uU=e=>{const t=_.c(30),{onRefresh:n,onCreateFile:r,onCreateFolder:o,onCollapseAll:s}=e;let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={noDrag:!0,noDragEventsBubbling:!0},t[0]=i):i=t[0];const{getRootProps:a,getInputProps:l}=nU(i);let c,d,u,h,f,p,m,g,y,b,x,v,w,k,S;return t[1]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsx(gd,{size:16}),t[1]=c):c=t[1],t[2]!==r?(d=A.jsx(ht,{content:"Add file",children:A.jsx(te,{"data-testid":"file-explorer-add-file-button",onClick:r,variant:"text",size:"xs",children:c})}),t[2]=r,t[3]=d):d=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsx(bd,{size:16}),t[4]=u):u=t[4],t[5]!==o?(h=A.jsx(ht,{content:"Add folder",children:A.jsx(te,{"data-testid":"file-explorer-add-folder-button",onClick:o,variant:"text",size:"xs",children:u})}),t[5]=o,t[6]=h):h=t[6],t[7]!==a?(f=a({}),t[7]=a,t[8]=f):f=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(p=Ba({variant:"text",size:"xs"}),m=A.jsx(Ua,{size:16}),t[9]=p,t[10]=m):(p=t[9],m=t[10]),t[11]!==f?(g=A.jsx(ht,{content:"Upload file",children:A.jsx("button",{"data-testid":"file-explorer-upload-button",...f,className:p,children:m})}),t[11]=f,t[12]=g):g=t[12],t[13]!==l?(y=l({}),t[13]=l,t[14]=y):y=t[14],t[15]!==y?(b=A.jsx("input",{...y,type:"file"}),t[15]=y,t[16]=b):b=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(x=A.jsx(Qs,{size:16}),t[17]=x):x=t[17],t[18]!==n?(v=A.jsx(ht,{content:"Refresh",children:A.jsx(te,{"data-testid":"file-explorer-refresh-button",onClick:n,variant:"text",size:"xs",children:x})}),t[18]=n,t[19]=v):v=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(w=A.jsx(dd,{size:16}),t[20]=w):w=t[20],t[21]!==s?(k=A.jsx(ht,{content:"Collapse all folders",children:A.jsx(te,{"data-testid":"file-explorer-collapse-button",onClick:s,variant:"text",size:"xs",children:w})}),t[21]=s,t[22]=k):k=t[22],t[23]!==b||t[24]!==v||t[25]!==k||t[26]!==d||t[27]!==h||t[28]!==g?(S=A.jsxs("div",{className:"flex items-center justify-end px-2 flex-shrink-0 border-b",children:[d,h,g,b,v,k]}),t[23]=b,t[24]=v,t[25]=k,t[26]=d,t[27]=h,t[28]=g,t[29]=S):S=t[29],S},hU=e=>{const t=_.c(9),{node:n,onOpenMarimoFile:r}=e;let o,s,i;return t[0]!==n?(o=e=>{n.data.isDirectory||(e.stopPropagation(),n.select())},t[0]=n,t[1]=o):o=t[1],t[2]!==n.data.isMarimoFile||t[3]!==r?(s=n.data.isMarimoFile&&!I()&&A.jsxs("span",{className:"flex-shrink-0 ml-2 text-sm hidden group-hover:inline hover:underline",onClick:r,children:["open ",A.jsx(tn,{className:"inline ml-1",size:12})]}),t[2]=n.data.isMarimoFile,t[3]=r,t[4]=s):s=t[4],t[5]!==n.data.name||t[6]!==o||t[7]!==s?(i=A.jsxs("span",{className:"flex-1 overflow-hidden text-ellipsis",onClick:o,children:[n.data.name,s]}),t[5]=n.data.name,t[6]=o,t[7]=s,t[8]=i):i=t[8],i},fU=e=>{const t=_.c(10),{node:n}=e,r=l.useRef(null);let o,s,i,a,c;return t[0]!==n.data.name?(o=()=>{var e,t;null==(e=r.current)||e.focus(),null==(t=r.current)||t.setSelectionRange(0,n.data.name.lastIndexOf("."))},s=[n.data.name],t[0]=n.data.name,t[1]=o,t[2]=s):(o=t[1],s=t[2]),l.useEffect(o,s),t[3]!==n?(i=()=>n.reset(),a=e=>{"Escape"===e.key&&n.reset(),"Enter"===e.key&&n.submit(e.currentTarget.value)},t[3]=n,t[4]=i,t[5]=a):(i=t[4],a=t[5]),t[6]!==n.data.name||t[7]!==i||t[8]!==a?(c=A.jsx("input",{ref:r,className:"flex-1 bg-transparent border border-border text-muted-foreground",defaultValue:n.data.name,onClick:xU,onBlur:i,onKeyDown:a}),t[6]=n.data.name,t[7]=i,t[8]=a,t[9]=c):c=t[9],c},pU=e=>{const t=_.c(53),{node:n,style:r,dragHandle:o}=e;let s;t[0]!==n.data.isDirectory||t[1]!==n.data.name?(s=n.data.isDirectory?"directory":Rn(n.data.name),t[0]=n.data.isDirectory,t[1]=n.data.name,t[2]=s):s=t[2];const i=s,a=Pn[i],{openConfirm:c,openPrompt:d}=he(),u=l.useContext(lU);let h;t[3]!==n.data.path||t[4]!==u?(h=async e=>{gU(e,u?u.relativeFromRoot(n.data.path):n.data.path)},t[3]=n.data.path,t[4]=u,t[5]=h):h=t[5];const f=h;let p;t[6]!==n.data.name||t[7]!==n.id||t[8]!==n.tree||t[9]!==c?(p=async e=>{e.stopPropagation(),e.preventDefault(),c({title:"Delete file",description:`Are you sure you want to delete ${n.data.name}?`,confirmAction:A.jsx(pt,{onClick:async()=>{await n.tree.delete(n.id)},"aria-label":"Confirm",children:"Delete"})})},t[6]=n.data.name,t[7]=n.id,t[8]=n.tree,t[9]=c,t[10]=p):p=t[10];const m=p;let g;t[11]!==n||t[12]!==d||t[13]!==u?(g=async()=>{n.open(),d({title:"Folder name",onConfirm:async e=>{null==u||u.createFolder(e,n.id)}})},t[11]=n,t[12]=d,t[13]=u,t[14]=g):g=t[14];const y=H(g);let b;t[15]!==n||t[16]!==d||t[17]!==u?(b=async()=>{n.open(),d({title:"File name",onConfirm:async e=>{null==u||u.createFile(e,n.id)}})},t[15]=n,t[16]=d,t[17]=u,t[18]=b):b=t[18];const x=H(b);let v;t[19]!==i||t[20]!==x||t[21]!==y||t[22]!==m||t[23]!==f||t[24]!==n||t[25]!==u?(v=()=>{const e={size:14,strokeWidth:1.5,className:"mr-2"};return A.jsxs(yn,{align:"end",className:"no-print w-[220px]",onClick:vU,onCloseAutoFocus:wU,children:[!n.data.isDirectory&&A.jsxs(cn,{onSelect:()=>n.select(),children:[A.jsx(iu,{...e}),"Open file"]}),!n.data.isDirectory&&!I()&&A.jsxs(cn,{onSelect:()=>{$a({path:n.data.path})},children:[A.jsx(tn,{...e}),"Open file in external editor"]}),n.data.isDirectory&&A.jsxs(A.Fragment,{children:[A.jsxs(cn,{onSelect:()=>x(),children:[A.jsx(gd,{...e}),"Create file"]}),A.jsxs(cn,{onSelect:()=>y(),children:[A.jsx(bd,{...e}),"Create folder"]}),A.jsx(mn,{})]}),A.jsxs(cn,{onSelect:()=>n.edit(),children:[A.jsx(zd,{...e}),"Rename"]}),A.jsxs(cn,{onSelect:async()=>{await lt(n.data.path),ie({title:"Copied to clipboard"})},children:[A.jsx(ut,{...e}),"Copy path"]}),u&&A.jsxs(cn,{onSelect:async()=>{await lt(u.relativeFromRoot(n.data.path)),ie({title:"Copied to clipboard"})},children:[A.jsx(ut,{...e}),"Copy relative path"]}),A.jsxs(cn,{onSelect:async()=>{ie({title:"Copied to clipboard",description:"Code to open the file has been copied to your clipboard. You can also drag and drop this file into the editor"});const{path:e}=n.data,t=Ha[i](e);await lt(t)},children:[A.jsx(Va,{...e}),"Copy snippet for reading file"]}),n.data.isMarimoFile&&!I()&&A.jsxs(A.Fragment,{children:[A.jsx(mn,{}),A.jsxs(cn,{onSelect:f,children:[A.jsx(Zd,{...e}),"Open notebook"]})]}),A.jsx(mn,{}),!n.data.isDirectory&&A.jsxs(A.Fragment,{children:[A.jsxs(cn,{onSelect:async()=>{const e=(await Na({path:n.data.path})).contents||"";rn(new Blob([e]),n.data.name)},children:[A.jsx(Kt,{...e}),"Download"]}),A.jsx(mn,{})]}),A.jsxs(cn,{onSelect:m,variant:"danger",children:[A.jsx(De,{...e}),"Delete"]})]})},t[19]=i,t[20]=x,t[21]=y,t[22]=m,t[23]=f,t[24]=n,t[25]=u,t[26]=v):v=t[26];const w=v;let k,S,C;t[27]===Symbol.for("react.memo_cache_sentinel")?(k=Ln("flex items-center cursor-pointer ml-1 text-muted-foreground whitespace-nowrap group"),t[27]=k):k=t[27],t[28]!==n?(S=e=>{e.stopPropagation(),n.data.isDirectory&&n.toggle()},C=A.jsx(mU,{node:n}),t[28]=n,t[29]=S,t[30]=C):(S=t[29],C=t[30]);const E=n.willReceiveDrop&&n.data.isDirectory&&"bg-accent/80 hover:bg-accent/80 text-accent-foreground";let N,j,T,M,D,O,R;return t[31]!==E?(N=Ln("flex items-center pl-1 py-1 cursor-pointer hover:bg-accent/50 hover:text-accent-foreground rounded-l flex-1 overflow-hidden group",E),t[31]=E,t[32]=N):N=t[32],t[33]!==a||t[34]!==n.data.isMarimoFile?(j=n.data.isMarimoFile?A.jsx("img",{src:"./favicon.ico",className:"w-5 h-5 flex-shrink-0 mr-2 filter grayscale",alt:"Marimo"}):A.jsx(a,{className:"w-5 h-5 flex-shrink-0 mr-2",strokeWidth:1.5}),t[33]=a,t[34]=n.data.isMarimoFile,t[35]=j):j=t[35],t[36]!==f||t[37]!==n?(T=n.isEditing?A.jsx(fU,{node:n}):A.jsx(hU,{node:n,onOpenMarimoFile:f}),t[36]=f,t[37]=n,t[38]=T):T=t[38],t[39]===Symbol.for("react.memo_cache_sentinel")?(M=A.jsx(dn,{asChild:!0,tabIndex:-1,onClick:kU,children:A.jsx(te,{"data-testid":"file-explorer-more-button",variant:"text",tabIndex:-1,size:"xs",className:"mb-0","aria-label":"More options",children:A.jsx(hd,{strokeWidth:2,className:"w-5 h-5 hidden group-hover:block"})})}),t[39]=M):M=t[39],t[40]!==w?(D=A.jsxs(gn,{modal:!1,children:[M,w()]}),t[40]=w,t[41]=D):D=t[41],t[42]!==N||t[43]!==j||t[44]!==T||t[45]!==D?(O=A.jsxs("span",{className:N,children:[j,T,D]}),t[42]=N,t[43]=j,t[44]=T,t[45]=D,t[46]=O):O=t[46],t[47]!==o||t[48]!==r||t[49]!==O||t[50]!==S||t[51]!==C?(R=A.jsxs("div",{style:r,ref:o,className:k,draggable:!0,onClick:S,children:[C,O]}),t[47]=o,t[48]=r,t[49]=O,t[50]=S,t[51]=C,t[52]=R):R=t[52],R},mU=e=>{const t=_.c(3),{node:n}=e;if(!n.data.isDirectory){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{className:"w-5 h-5 flex-shrink-0"}),t[0]=e):e=t[0],e}let r;return t[1]!==n.isOpen?(r=n.isOpen?A.jsx(Ie,{className:"w-5 h-5 flex-shrink-0"}):A.jsx(Te,{className:"w-5 h-5 flex-shrink-0"}),t[1]=n.isOpen,t[2]=r):r=t[2],r};function gU(e,t){e.stopPropagation(),e.preventDefault(),window.open(`/?file=${t}`,"_blank")}function yU(){return null}function bU(e){const{parentNode:t}=e;return!t.data.isDirectory}function xU(e){return e.stopPropagation()}function vU(e){return e.stopPropagation()}function wU(e){return e.preventDefault()}function kU(e){return e.stopPropagation()}const SU=()=>{const e=_.c(20),{ref:t,height:n}=YB(),r=void 0===n?1:n;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={noClick:!0,noKeyboard:!0},e[0]=o):o=e[0];const{getRootProps:s,getInputProps:i,isDragActive:a}=nU(o);let l,c,d,u,h,f,p,m;return e[1]!==s?(l=s(),e[1]=s,e[2]=l):l=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(c=Ln("flex flex-col flex-1 overflow-hidden relative"),e[3]=c):c=e[3],e[4]!==i?(d=i(),e[4]=i,e[5]=d):d=e[5],e[6]!==d?(u=A.jsx("input",{...d}),e[6]=d,e[7]=u):u=e[7],e[8]!==a?(h=a&&A.jsx("div",{className:"absolute inset-0 flex items-center uppercase justify-center text-xl font-bold text-primary/90 bg-accent/85 z-10 border-2 border-dashed border-primary/90 rounded-lg pointer-events-none",children:"Drop files here"}),e[8]=a,e[9]=h):h=e[9],e[10]!==r?(f=A.jsx(cU,{height:r}),e[10]=r,e[11]=f):f=e[11],e[12]!==t||e[13]!==f?(p=A.jsx("div",{ref:t,className:"flex flex-col flex-1 overflow-hidden",children:f}),e[12]=t,e[13]=f,e[14]=p):p=e[14],e[15]!==l||e[16]!==u||e[17]!==h||e[18]!==p?(m=A.jsxs("div",{...l,className:c,children:[u,h,p]}),e[15]=l,e[16]=u,e[17]=h,e[18]=p,e[19]=m):m=e[19],m},CU=e=>{const t=_.c(6),{children:n}=e,{openModal:r,closeModal:o}=he();let s,i;return t[0]!==o||t[1]!==r?(s=()=>r(A.jsx(NU,{onClose:o})),t[0]=o,t[1]=r,t[2]=s):s=t[2],t[3]!==n||t[4]!==s?(i=A.jsx(Wi,{onClick:s,children:n}),t[3]=n,t[4]=s,t[5]=i):i=t[5],i},EU=[Cn.lineWrapping],NU=e=>{const t=_.c(23),{onClose:n}=e,[r,o]=l.useState(""),{theme:s}=Be();let i,a,c,d,u,h;t[0]!==n?(i=async e=>{e.preventDefault();const t=new FormData(e.target),r=t.get("title"),o=t.get("description"),s=t.get("code");fetch("https://marimo.io/api/suggest-snippet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,description:o,code:s})}),n(),ie({title:"Snippet Submitted",description:"Thank you for contributing! We will review your snippet shortly."})},t[0]=n,t[1]=i):i=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(a=A.jsx(Le,{children:"Contribute a Snippet"}),t[2]=a):a=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(c=A.jsxs(Pe,{children:[a,A.jsxs(it,{children:["Have a useful snippet you want to share with the community? Submit it here or make a pull request"," ",A.jsx("a",{href:st.githubPage,target:"_blank",rel:"noreferrer",className:"underline",children:"on GitHub"}),"."]})]}),t[3]=c):c=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx(at,{id:"title",name:"title",autoFocus:!0,placeholder:"Title",required:!0,autoComplete:"off"}),u=A.jsx(Wa,{id:"description",name:"description",autoFocus:!0,placeholder:"Description",rows:5,required:!0,autoComplete:"off"}),t[4]=d,t[5]=u):(d=t[4],u=t[5]),t[6]!==r?(h=A.jsx("input",{type:"hidden",name:"code",value:r}),t[6]=r,t[7]=h):h=t[7];const f="dark"===s?"dark":"light";let p,m,g,y,b,x;return t[8]!==r||t[9]!==f?(p=A.jsx(Ma,{theme:f,language:"python",className:"cm border rounded overflow-hidden",extensions:EU,value:r,onChange:o}),t[8]=r,t[9]=f,t[10]=p):p=t[10],t[11]!==h||t[12]!==p?(m=A.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[d,u,h,p]}),t[11]=h,t[12]=p,t[13]=m):m=t[13],t[14]!==n?(g=A.jsx(te,{"data-testid":"snippet-cancel-button",variant:"secondary",onClick:n,children:"Cancel"}),t[14]=n,t[15]=g):g=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(y=A.jsx(te,{"data-testid":"snippet-send-button","aria-label":"Save",variant:"default",type:"submit",children:"Send"}),t[16]=y):y=t[16],t[17]!==g?(b=A.jsxs(ct,{children:[g,y]}),t[17]=g,t[18]=b):b=t[18],t[19]!==i||t[20]!==b||t[21]!==m?(x=A.jsx(Re,{className:"w-fit",children:A.jsxs("form",{onSubmit:i,children:[c,m,b]})}),t[19]=i,t[20]=b,t[21]=m,t[22]=x):x=t[22],x},jU=[Cn.lineWrapping],_U=()=>{const e=_.c(20),[t,n]=m.useState();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const{data:o,error:s,loading:i}=On(TU,r);if(s){let t;return e[1]!==s?(t=A.jsx(ja,{error:s}),e[1]=s,e[2]=t):t=e[2],t}if(i||!o){let t;return e[3]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx($i,{size:"medium",centered:!0}),e[3]=t):t=e[3],t}const a=t?"h-1/3":"h-full";let c,d,u,h,f,p,g,y,b;return e[4]!==a?(c=Ln("border-b rounded-none",a),e[4]=a,e[5]=c):c=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx(nt,{placeholder:"Search snippets...",className:"h-6 m-1",rootClassName:"flex-1 border-r"}),e[6]=d):d=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsxs("div",{className:"flex items-center w-full",children:[d,A.jsx(CU,{children:A.jsx("button",{className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:A.jsx(Bo,{className:"h-4 w-4"})})})]}),h=A.jsx(rt,{children:"No results"}),e[7]=u,e[8]=h):(u=e[7],h=e[8]),e[9]===Symbol.for("react.memo_cache_sentinel")?(f=e=>n(e),e[9]=f):f=e[9],e[10]!==o.snippets?(p=A.jsx(AU,{onSelect:f,snippets:o.snippets}),e[10]=o.snippets,e[11]=p):p=e[11],e[12]!==c||e[13]!==p?(g=A.jsxs(Un,{className:c,children:[u,h,p]}),e[12]=c,e[13]=p,e[14]=g):g=e[14],e[15]!==t?(y=A.jsx(l.Suspense,{children:A.jsx("div",{className:"h-2/3 snippet-viewer flex flex-col",children:t?A.jsx(IU,{snippet:t},t.title):A.jsx(KM,{title:"",description:"Click on a snippet to view its content."})})}),e[15]=t,e[16]=y):y=e[16],e[17]!==g||e[18]!==y?(b=A.jsxs("div",{className:"flex-1 overflow-hidden",children:[g,y]}),e[17]=g,e[18]=y,e[19]=b):b=e[19],b},IU=e=>{const t=_.c(27),{snippet:n}=e,{theme:r}=Be(),{createNewCell:o}=W(),s=Yu();let i;t[0]!==o||t[1]!==s||t[2]!==n.sections?(i=()=>{for(const e of[...n.sections].reverse())e.code&&o({code:e.code,before:!1,cellId:s??"__end__",skipIfCodeExists:!0})},t[0]=o,t[1]=s,t[2]=n.sections,t[3]=i):i=t[3];const a=i;let l;t[4]!==o||t[5]!==s?(l=e=>{o({code:e,before:!1,cellId:s??"__end__"})},t[4]=o,t[5]=s,t[6]=l):l=t[6];const c=l;let d,u,h,f,p,m;if(t[7]!==n.title?(d=A.jsx("div",{className:"text-sm font-semibold bg-muted border-y px-2 py-1",children:n.title}),t[7]=n.title,t[8]=d):d=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsx(Zc,{className:"ml-2 h-4 w-4"}),t[9]=u):u=t[9],t[10]!==a?(h=A.jsx("div",{className:"flex justify-end",children:A.jsx(Rf,{children:A.jsxs(te,{className:"float-right",size:"xs",variant:"outline",onClick:a,children:["Insert snippet",u]})})}),t[10]=a,t[11]=h):h=t[11],t[12]!==c||t[13]!==n.sections||t[14]!==n.title||t[15]!==r){let e;t[17]!==c||t[18]!==n.title||t[19]!==r?(e=e=>{const{code:t,html:o,id:s}=e;return o?A.jsx("div",{children:gi({html:o})},`${n.title}-${s}`):t?A.jsxs("div",{className:"relative hover-actions-parent pr-2",children:[A.jsx(Rf,{children:A.jsx(ht,{content:"Insert snippet",children:A.jsx(te,{className:"absolute -top-2 -right-1 z-10 hover-action px-2 bg-background",size:"sm",variant:"outline",onClick:()=>{c(t)},children:A.jsx(Zc,{className:"h-5 w-5"})})})}),A.jsx(Ma,{theme:"dark"===r?"dark":"light",language:"python",className:"cm border rounded overflow-hidden",extensions:jU,value:t,readOnly:!0},`${n.title}-${s}`)]},`${n.title}-${s}`):null},t[17]=c,t[18]=n.title,t[19]=r,t[20]=e):e=t[20],f=n.sections.map(e),t[12]=c,t[13]=n.sections,t[14]=n.title,t[15]=r,t[16]=f}else f=t[16];return t[21]!==h||t[22]!==f?(p=A.jsxs("div",{className:"px-2 py-2 space-y-4 overflow-auto flex-1",children:[h,f]}),t[21]=h,t[22]=f,t[23]=p):p=t[23],t[24]!==d||t[25]!==p?(m=A.jsxs(A.Fragment,{children:[d,p]}),t[24]=d,t[25]=p,t[26]=m):m=t[26],m},AU=e=>{const t=_.c(7),{snippets:n,onSelect:r}=e;let o,s;if(t[0]!==r||t[1]!==n){let e;t[3]!==r?(e=e=>A.jsx(Qe,{className:"rounded-none",onSelect:()=>r(e),children:A.jsx("div",{className:"flex flex-row gap-2 items-center",children:A.jsx("span",{className:"mt-1 text-accent-foreground",children:e.title})})},e.title),t[3]=r,t[4]=e):e=t[4],o=n.map(e),t[0]=r,t[1]=n,t[2]=o}else o=t[2];return t[5]!==o?(s=A.jsx(ys,{className:"flex flex-col overflow-auto",children:o}),t[5]=o,t[6]=s):s=t[6],s};function TU(){return Ga()}const MU=e=>{const t=_.c(8),{variableName:n,className:r}=e;let o;t[0]!==n?(o=()=>{const e=function(e){const t=re.get(ae)[e];if(!t)return;return t.declaredBy[0]}(n);if(!e)return;const t=de(e);t&&ra(t,n)},t[0]=n,t[1]=o):o=t[1];const s=o;let i,a;return t[2]!==r?(i=Ln("text-link opacity-80 hover:opacity-100 hover:underline",r),t[2]=r,t[3]=i):i=t[3],t[4]!==s||t[5]!==i||t[6]!==n?(a=A.jsx("button",{type:"button",onClick:s,className:i,children:n}),t[4]=s,t[5]=i,t[6]=n,t[7]=a):a=t[7],a};const DU=({isExpanded:e})=>A.jsx(Te,{className:Ln("h-3 w-3 transition-transform",e&&"rotate-90")}),OU=e=>{const t=_.c(2),{children:n}=e;let r;return t[0]!==n?(r=A.jsx("div",{className:"flex gap-1 items-center font-bold px-2 py-1.5 text-muted-foreground bg-[var(--slate-2)] text-sm",children:n}),t[0]=n,t[1]=r):r=t[1],r},RU=e=>{const t=_.c(5),{content:n,className:r}=e;let o,s;return t[0]!==r?(o=Ln("text-sm text-muted-foreground py-1",r),t[0]=r,t[1]=o):o=t[1],t[2]!==n||t[3]!==o?(s=A.jsx("div",{className:o,children:n}),t[2]=n,t[3]=o,t[4]=s):s=t[4],s},PU=e=>{const t=_.c(3),{error:n}=e;let r,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx(Tn,{className:"h-4 w-4"}),t[0]=r):r=t[0],t[1]!==n.message?(o=A.jsxs("div",{className:"pl-12 text-sm bg-red-50 dark:bg-red-900 text-red-600 dark:text-red-50 flex items-center gap-2 p-2 h-8",children:[r,n.message]}),t[1]=n.message,t[2]=o):o=t[2],o},LU=e=>{const t=_.c(3),{message:n}=e;let r,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx(zs,{className:"h-4 w-4 animate-spin"}),t[0]=r):r=t[0],t[1]!==n?(o=A.jsxs("div",{className:"pl-12 text-sm bg-blue-50 dark:bg-[var(--accent)] text-blue-500 dark:text-blue-50 flex items-center gap-2 p-2 h-8",children:[r,n]}),t[1]=n,t[2]=o):o=t[2],o},zU=Q(null),FU=e=>{const t=_.c(9),{packages:n}=e,r=uh(),o=fe(zU);if(!n||0===n.length)return null;let s;t[0]!==r||t[1]!==n||t[2]!==o?(s=()=>{const e=n.join(", ");o(e),r.openApplication("packages")},t[0]=r,t[1]=n,t[2]=o,t[3]=s):s=t[3];const i=s;let a,l;return t[4]!==n?(a=n.join(", "),t[4]=n,t[5]=a):a=t[5],t[6]!==i||t[7]!==a?(l=A.jsxs(te,{variant:"outline",size:"xs",onClick:i,className:"ml-2",children:["Install ",a]}),t[6]=i,t[7]=a,t[8]=l):l=t[8],l};function BU(e,t,n){if(n){const{engine:r,schema:o,defaultSchema:s,defaultDatabase:i,database:a}=n;let l=e.name;return o!==s&&(l=`${o}.${l}`),a!==i&&(l=`${a}.${l}`),r===qa?`_df = mo.sql(f"SELECT ${t} FROM ${l} LIMIT 100")`:`_df = mo.sql(f"SELECT ${t} FROM ${l} LIMIT 100", engine=${r})`}return`_df = mo.sql(f'SELECT "${t}" FROM ${e.name} LIMIT 100')`}const UU=Q((e=>{const t=e(Ya),n=e(ae),r=e(Li);return Gc(t,(e=>{if(!e.variable_name)return-1;const t=Object.values(n).find((t=>t.name===e.variable_name));if(!t)return 0;const o=r.inOrderIds.indexOf(t.declaredBy[0]);return-1===o?0:o}))})),$U=Q((e=>{const t=new Map(e(Ja)),n=t.get(qa);return n&&0===n.databases.length&&t.delete(qa),Gc([...t.values()],(e=>e.name===qa?"":e.name))})),VU=()=>{const e=_.c(32),[t,n]=m.useState(""),r=fe(Ka),o=ue(UU),s=ue($U);if(0===o.length&&0===s.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(KM,{title:"No tables found",description:"Any datasets/dataframes in the global scope will be shown here.",action:A.jsx(Mh,{children:A.jsxs(te,{variant:"outline",size:"sm",children:["Add database",A.jsx(Bo,{className:"h-4 w-4 ml-2"})]})}),icon:A.jsx(Ne,{})}),e[0]=t):t=e[0],t}const i=!!t.trim();let a,l,c,d,u,h,f,p,g,y;if(e[1]!==r?(a=e=>{r(e.length>0),n(e)},e[1]=r,e[2]=a):a=e[2],e[3]!==t||e[4]!==a?(l=A.jsx(nt,{placeholder:"Search tables...",className:"h-6 m-1",value:t,onValueChange:a,rootClassName:"flex-1 border-r"}),e[3]=t,e[4]=a,e[5]=l):l=e[5],e[6]!==i?(c=i&&A.jsx("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",onClick:()=>n(""),children:A.jsx(Tn,{className:"h-4 w-4"})}),e[6]=i,e[7]=c):c=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx(Mh,{children:A.jsx("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:A.jsx(Bo,{className:"h-4 w-4"})})}),e[8]=d):d=e[8],e[9]!==l||e[10]!==c?(u=A.jsxs("div",{className:"flex items-center w-full",children:[l,c,d]}),e[9]=l,e[10]=c,e[11]=u):u=e[11],e[12]!==s||e[13]!==i||e[14]!==t){let n;e[16]!==i||e[17]!==t?(n=e=>A.jsx(HU,{connection:e,hasChildren:e.databases.length>0,children:e.databases.map((n=>A.jsx(WU,{engineName:e.name,database:n,hasSearch:i,children:A.jsx(GU,{schemas:n.schemas,defaultSchema:e.default_schema,defaultDatabase:e.default_database,engineName:e.name,databaseName:n.name,hasSearch:i,searchValue:t})},n.name)))},e.name),e[16]=i,e[17]=t,e[18]=n):n=e[18],h=s.map(n),e[12]=s,e[13]=i,e[14]=t,e[15]=h}else h=e[15];return e[19]!==s.length||e[20]!==o.length?(f=s.length>0&&o.length>0&&A.jsxs(OU,{children:[A.jsx(Nl,{className:"h-4 w-4 text-muted-foreground"}),A.jsx("span",{children:"Python"})]}),e[19]=s.length,e[20]=o.length,e[21]=f):f=e[21],e[22]!==t||e[23]!==o?(p=o.length>0&&A.jsx(YU,{tables:o,searchValue:t}),e[22]=t,e[23]=o,e[24]=p):p=e[24],e[25]!==h||e[26]!==f||e[27]!==p?(g=A.jsxs(ys,{className:"flex flex-col",children:[h,f,p]}),e[25]=h,e[26]=f,e[27]=p,e[28]=g):g=e[28],e[29]!==u||e[30]!==g?(y=A.jsxs(Un,{className:"border-b bg-background rounded-none h-full pb-10 overflow-auto outline-none",shouldFilter:!1,children:[u,g]}),e[29]=u,e[30]=g,e[31]=y):y=e[31],y},HU=e=>{var t;const n=_.c(17),{connection:r,children:o,hasChildren:s}=e,i=r.databases.length>0?(null==(t=r.databases[0])?void 0:t.engine)||"In-Memory":r.name;let a,l,c;n[0]!==r.dialect?(a=A.jsx(Dt,{className:"h-4 w-4 text-muted-foreground",name:r.dialect}),l=Qa(r.dialect),n[0]=r.dialect,n[1]=a,n[2]=l):(a=n[1],l=n[2]),n[3]!==l?(c=A.jsx("span",{children:l}),n[3]=l,n[4]=c):c=n[4];const d=i;let u,h,f,p;return n[5]!==d?(u=A.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",A.jsx(MU,{variableName:d}),")"]}),n[5]=d,n[6]=u):u=n[6],n[7]!==a||n[8]!==c||n[9]!==u?(h=A.jsxs(OU,{children:[a,c,u]}),n[7]=a,n[8]=c,n[9]=u,n[10]=h):h=n[10],n[11]!==o||n[12]!==s?(f=s?o:A.jsx(RU,{content:"No databases available",className:"pl-2"}),n[11]=o,n[12]=s,n[13]=f):f=n[13],n[14]!==h||n[15]!==f?(p=A.jsxs(A.Fragment,{children:[h,f]}),n[14]=h,n[15]=f,n[16]=p):p=n[16],p},WU=e=>{const t=_.c(28),{hasSearch:n,engineName:r,database:o,children:s}=e,[i,a]=m.useState(!1),[l,c]=m.useState(!1);let d,u,h;t[0]!==n?(d=()=>{a(n)},u=[n],t[0]=n,t[1]=d,t[2]=u):(d=t[1],u=t[2]),m.useEffect(d,u),t[3]!==i||t[4]!==l?(h=()=>{a(!i),c(!l)},t[3]=i,t[4]=l,t[5]=h):h=t[5];const f=`${r}:${o.name}`;let p;t[6]!==i?(p=A.jsx(DU,{isExpanded:i}),t[6]=i,t[7]=p):p=t[7];const g=l&&i?"text-foreground":"text-muted-foreground";let y,b;t[8]!==g?(y=Ln("h-4 w-4",g),t[8]=g,t[9]=y):y=t[9],t[10]!==y?(b=A.jsx(Ne,{className:y}),t[10]=y,t[11]=b):b=t[11];const x=l&&i&&"font-semibold";let v,w,k,S;t[12]!==x?(v=Ln(x),t[12]=x,t[13]=v):v=t[13],t[14]!==o.name?(w=""===o.name?A.jsx("i",{children:"Not connected"}):o.name,t[14]=o.name,t[15]=w):w=t[15],t[16]!==v||t[17]!==w?(k=A.jsx("span",{className:v,children:w}),t[16]=v,t[17]=w,t[18]=k):k=t[18],t[19]!==k||t[20]!==h||t[21]!==f||t[22]!==p||t[23]!==b?(S=A.jsxs(Qe,{className:"text-sm flex flex-row gap-1 items-center cursor-pointer rounded-none",onSelect:h,value:f,children:[p,b,k]}),t[19]=k,t[20]=h,t[21]=f,t[22]=p,t[23]=b,t[24]=S):S=t[24];const C=i&&s;let E;return t[25]!==S||t[26]!==C?(E=A.jsxs(A.Fragment,{children:[S,C]}),t[25]=S,t[26]=C,t[27]=E):E=t[27],E},GU=e=>{const t=_.c(20),{schemas:n,defaultSchema:r,defaultDatabase:o,engineName:s,databaseName:i,hasSearch:a,searchValue:l}=e;if(0===n.length){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(RU,{content:"No schemas available",className:"pl-6"}),t[0]=e):e=t[0],e}let c,d;if(t[1]!==i||t[2]!==o||t[3]!==r||t[4]!==s||t[5]!==a||t[6]!==n||t[7]!==l){let e;t[9]!==l?(e=e=>!l||e.tables.some((e=>e.name.toLowerCase().includes(l.toLowerCase()))),t[9]=l,t[10]=e):e=t[10];const d=n.filter(e);let u;t[11]!==i||t[12]!==o||t[13]!==r||t[14]!==s||t[15]!==a||t[16]!==l?(u=e=>A.jsx(qU,{databaseName:i,schema:e,hasSearch:a,children:A.jsx(YU,{tables:e.tables,searchValue:l,sqlTableContext:{engine:s,database:i,schema:e.name,defaultSchema:r,defaultDatabase:o}})},e.name),t[11]=i,t[12]=o,t[13]=r,t[14]=s,t[15]=a,t[16]=l,t[17]=u):u=t[17],c=d.map(u),t[1]=i,t[2]=o,t[3]=r,t[4]=s,t[5]=a,t[6]=n,t[7]=l,t[8]=c}else c=t[8];return t[18]!==c?(d=A.jsx(A.Fragment,{children:c}),t[18]=c,t[19]=d):d=t[19],d},qU=e=>{const t=_.c(26),{databaseName:n,schema:r,children:o,hasSearch:s}=e,[i,a]=m.useState(!1),[l,c]=m.useState(!1),d=`${n}:${r.name}`;let u,h,f,p;t[0]!==s?(u=()=>{a(s)},h=[s],t[0]=s,t[1]=u,t[2]=h):(u=t[1],h=t[2]),m.useEffect(u,h),t[3]!==i||t[4]!==l?(f=()=>{a(!i),c(!l)},t[3]=i,t[4]=l,t[5]=f):f=t[5],t[6]!==i?(p=A.jsx(DU,{isExpanded:i}),t[6]=i,t[7]=p):p=t[7];const g=l&&i&&"text-foreground";let y,b;t[8]!==g?(y=Ln("h-4 w-4 text-muted-foreground",g),t[8]=g,t[9]=y):y=t[9],t[10]!==y?(b=A.jsx(Rd,{className:y}),t[10]=y,t[11]=b):b=t[11];const x=l&&i&&"font-semibold";let v,w,k;t[12]!==x?(v=Ln(x),t[12]=x,t[13]=v):v=t[13],t[14]!==r.name||t[15]!==v?(w=A.jsx("span",{className:v,children:r.name}),t[14]=r.name,t[15]=v,t[16]=w):w=t[16],t[17]!==w||t[18]!==f||t[19]!==p||t[20]!==b||t[21]!==d?(k=A.jsxs(Qe,{className:"text-sm flex flex-row gap-1 items-center pl-5 cursor-pointer rounded-none",onSelect:f,value:d,children:[p,b,w]}),t[17]=w,t[18]=f,t[19]=p,t[20]=b,t[21]=d,t[22]=k):k=t[22];const S=i&&o;let C;return t[23]!==k||t[24]!==S?(C=A.jsxs(A.Fragment,{children:[k,S]}),t[23]=k,t[24]=S,t[25]=C):C=t[25],C},YU=e=>{const t=_.c(24),{tables:n,sqlTableContext:r,searchValue:o}=e,{addTableList:s}=Za(),[i,a]=m.useState(!1),[l,c]=m.useState(!1);let d,u;t[0]!==s||t[1]!==r||t[2]!==n.length||t[3]!==i?(d=async()=>{if(0===n.length&&r&&!i){a(!0),c(!0);const{engine:e,database:t,schema:n}=r,o=await el.request({engine:e,database:t,schema:n});if(!(null==o?void 0:o.tables))throw c(!1),new Error("No tables available");s({tables:o.tables,sqlTableContext:r}),c(!1)}},t[0]=s,t[1]=r,t[2]=n.length,t[3]=i,t[4]=d):d=t[4],t[5]!==r||t[6]!==n.length||t[7]!==i?(u=[n.length,r,i],t[5]=r,t[6]=n.length,t[7]=i,t[8]=u):u=t[8];const{loading:h,error:f}=On(d,u);if(h||l){let e;return t[9]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(LU,{message:"Loading tables..."}),t[9]=e):e=t[9],e}if(f){let e;return t[10]!==f?(e=A.jsx(PU,{error:f}),t[10]=f,t[11]=e):e=t[11],e}if(0===n.length){let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(RU,{content:"No tables found",className:"pl-9"}),t[12]=e):e=t[12],e}let p,g;if(t[13]!==o||t[14]!==r||t[15]!==n){let e;t[17]!==o?(e=e=>!o||e.name.toLowerCase().includes(o.toLowerCase()),t[17]=o,t[18]=e):e=t[18];const s=n.filter(e);let i;t[19]!==o||t[20]!==r?(i=e=>A.jsx(JU,{table:e,sqlTableContext:r,isSearching:!!o},e.name),t[19]=o,t[20]=r,t[21]=i):i=t[21],p=s.map(i),t[13]=o,t[14]=r,t[15]=n,t[16]=p}else p=t[16];return t[22]!==p?(g=A.jsx(A.Fragment,{children:p}),t[22]=p,t[23]=g):g=t[23],g},JU=e=>{const t=_.c(62),{table:n,sqlTableContext:r,isSearching:o}=e,{addTable:s}=Za(),[i,a]=m.useState(!1),[l,c]=m.useState(!1),d=n.columns.length>0;let u,h;t[0]!==s||t[1]!==i||t[2]!==r||t[3]!==n.name||t[4]!==d||t[5]!==l?(u=async()=>{if(i&&!d&&r&&!l){c(!0);const{engine:e,database:t,schema:o}=r,i=await tl.request({engine:e,database:t,schema:o,tableName:n.name});if(!(null==i?void 0:i.table))throw new Error("No table details available");s({table:i.table,sqlTableContext:r})}},t[0]=s,t[1]=i,t[2]=r,t[3]=n.name,t[4]=d,t[5]=l,t[6]=u):u=t[6],t[7]!==i||t[8]!==d?(h=[i,d],t[7]=i,t[8]=d,t[9]=h):h=t[9];const{loading:f,error:p}=On(u,h),g=ue(me),y=Yu(),{createNewCell:b}=W();let x;t[10]!==g||t[11]!==b||t[12]!==y||t[13]!==r||t[14]!==n?(x=()=>{Bu(g,b,y);let e="";if(r)e=BU(n,"*",r);else e:switch(n.source_type){case"local":e=`mo.ui.table(${n.name})`;break e;case"duckdb":case"connection":e=BU(n,"*",r);break e;default:P(n.source_type)}b({code:e,before:!1,cellId:y??"__end__"})},t[10]=g,t[11]=b,t[12]=y,t[13]=r,t[14]=n,t[15]=x):x=t[15];const v=x;let w;t[16]!==n.num_columns||t[17]!==n.num_rows?(w=()=>{const e=[];return null!=n.num_rows&&e.push(`${n.num_rows} rows`),null!=n.num_columns&&e.push(`${n.num_columns} columns`),0===e.length?null:A.jsx("div",{className:"flex flex-row gap-2 items-center pl-6 group-hover:hidden",children:A.jsx("span",{className:"text-xs text-muted-foreground",children:e.join(", ")})})},t[16]=n.num_columns,t[17]=n.num_rows,t[18]=w):w=t[18];const k=w;let S;t[19]!==p||t[20]!==f||t[21]!==r||t[22]!==n?(S=()=>{if(f)return A.jsx(LU,{message:"Loading columns..."});if(p)return A.jsx(PU,{error:p});return n.columns.map((e=>A.jsx(XU,{table:n,column:e,sqlTableContext:r},e.name)))},t[19]=p,t[20]=f,t[21]=r,t[22]=n,t[23]=S):S=t[23];const C=S;let E;t[24]!==i||t[25]!==o||t[26]!==n.source_type||t[27]!==n.type?(E=()=>{if("local"===n.source_type)return;const e="table"===n.type?nu:we;return A.jsx(e,{className:"h-3 w-3",strokeWidth:i||o?2.5:void 0})},t[24]=i,t[25]=o,t[26]=n.source_type,t[27]=n.type,t[28]=E):E=t[28];const N=E,j=r?`${r.database}.${r.schema}.${n.name}`:n.name,I=r&&"pl-12",T=(i||o)&&"font-semibold";let M,D,O,R,L,z,F,B,U,$,V,H;return t[29]!==I||t[30]!==T?(M=Ln("rounded-none group h-8 cursor-pointer",I,T),t[29]=I,t[30]=T,t[31]=M):M=t[31],t[32]!==i?(D=()=>a(!i),t[32]=i,t[33]=D):D=t[33],t[34]!==N?(O=N(),t[34]=N,t[35]=O):O=t[35],t[36]!==n.name?(R=A.jsx("span",{className:"text-sm",children:n.name}),t[36]=n.name,t[37]=R):R=t[37],t[38]!==O||t[39]!==R?(L=A.jsxs("div",{className:"flex gap-2 items-center flex-1",children:[O,R]}),t[38]=O,t[39]=R,t[40]=L):L=t[40],t[41]!==k?(z=k(),t[41]=k,t[42]=z):z=t[42],t[43]!==v?(F=dt.stopPropagation((()=>v())),t[43]=v,t[44]=F):F=t[44],t[45]===Symbol.for("react.memo_cache_sentinel")?(B=A.jsx(Qd,{className:"h-3 w-3"}),t[45]=B):B=t[45],t[46]!==F?(U=A.jsx(ht,{content:"Add table to notebook",delayDuration:400,children:A.jsx(te,{className:"group-hover:inline-flex hidden",variant:"text",size:"icon",onClick:F,children:B})}),t[46]=F,t[47]=U):U=t[47],t[48]!==i||t[49]!==D||t[50]!==L||t[51]!==z||t[52]!==U||t[53]!==M||t[54]!==j?($=A.jsxs(Qe,{className:M,value:j,"aria-selected":i,forceMount:!0,onSelect:D,children:[L,z,U]}),t[48]=i,t[49]=D,t[50]=L,t[51]=z,t[52]=U,t[53]=M,t[54]=j,t[55]=$):$=t[55],t[56]!==i||t[57]!==C?(V=i&&C(),t[56]=i,t[57]=C,t[58]=V):V=t[58],t[59]!==$||t[60]!==V?(H=A.jsxs(A.Fragment,{children:[$,V]}),t[59]=$,t[60]=V,t[61]=H):H=t[61],H},XU=e=>{var t,n;const r=_.c(52),{table:o,column:s,sqlTableContext:i}=e,[a,l]=m.useState(!1),c=ue(Ka),d=fe(nl);let u,h;r[0]!==c?(u=()=>{c&&l(!1)},h=[c],r[0]=c,r[1]=u,r[2]=h):(u=r[1],h=r[2]),m.useEffect(u,h),d(a?e=>new Set([...e,`${o.name}:${s.name}`]):e=>(e.delete(`${o.name}:${s.name}`),new Set(e)));const f=rl[s.type],p=ue(me),g=Yu(),{createNewCell:y}=W(),{columnsPreviews:b}=ol();let x;r[3]!==s.name||r[4]!==o.primary_keys?(x=(null==(t=o.primary_keys)?void 0:t.includes(s.name))||!1,r[3]=s.name,r[4]=o.primary_keys,r[5]=x):x=r[5];const v=x;let w;r[6]!==s.name||r[7]!==o.indexes?(w=(null==(n=o.indexes)?void 0:n.includes(s.name))||!1,r[6]=s.name,r[7]=o.indexes,r[8]=w):w=r[8];const k=w;let S;r[9]!==p||r[10]!==y||r[11]!==g?(S=e=>{e.includes("alt")&&function(e,t,n){Fu("altair","alt",(r=>{const o=ce.create();t({cellId:n??"__end__",before:!1,code:r,lastCodeRun:e?r:void 0,newCellId:o,autoFocus:!1}),e&&Z({cellIds:[o],codes:[r]})}))}(p,y,g),y({code:e,before:!1,cellId:g??"__end__"})},r[9]=p,r[10]=y,r[11]=g,r[12]=S):S=r[12];const C=S,E=QU,N=`${o.name}.${s.name}`,j=`${o.name}.${s.name}`;let I;r[13]!==a?(I=()=>l(!a),r[13]=a,r[14]=I):I=r[14];const T=i?"pl-14":"pl-7";let M,D,O,R,P,L,z,F,B,U,$;return r[15]!==T?(M=Ln("flex flex-row gap-2 items-center flex-1",T),r[15]=T,r[16]=M):M=r[16],r[17]!==f?(D=A.jsx(f,{className:"flex-shrink-0 h-3 w-3",strokeWidth:1.5}),r[17]=f,r[18]=D):D=r[18],r[19]!==s.name?(O=A.jsx("span",{children:s.name}),r[19]=s.name,r[20]=O):O=r[20],r[21]!==v?(R=v&&E({tooltipContent:"Primary key",content:"PK"}),r[21]=v,r[22]=R):R=r[22],r[23]!==k?(P=k&&E({tooltipContent:"Indexed",content:"IDX"}),r[23]=k,r[24]=P):P=r[24],r[25]!==M||r[26]!==D||r[27]!==O||r[28]!==R||r[29]!==P?(L=A.jsxs("div",{className:M,children:[D,O,R,P]}),r[25]=M,r[26]=D,r[27]=O,r[28]=R,r[29]=P,r[30]=L):L=r[30],r[31]!==s.name?(z=A.jsx(ht,{content:"Copy column name",delayDuration:400,children:A.jsx(te,{variant:"text",size:"icon",className:"group-hover:opacity-100 opacity-0 hover:bg-muted text-muted-foreground hover:text-foreground",children:A.jsx(sl,{tooltip:!1,value:s.name,className:"h-3 w-3"})})}),r[31]=s.name,r[32]=z):z=r[32],r[33]!==s.external_type?(F=A.jsx("span",{className:"text-xs text-muted-foreground",children:s.external_type}),r[33]=s.external_type,r[34]=F):F=r[34],r[35]!==L||r[36]!==z||r[37]!==F||r[38]!==N||r[39]!==j||r[40]!==I?(B=A.jsxs(Qe,{className:"rounded-none py-1 group cursor-pointer",value:j,onSelect:I,children:[L,z,F]},N),r[35]=L,r[36]=z,r[37]=F,r[38]=N,r[39]=j,r[40]=I,r[41]=B):B=r[41],r[42]!==s||r[43]!==b||r[44]!==C||r[45]!==a||r[46]!==i||r[47]!==o?(U=a&&A.jsx("div",{className:"pl-10 pr-2 py-2 bg-[var(--slate-1)] shadow-inner border-b",children:A.jsx($n,{children:A.jsx(ZU,{table:o,column:s,onAddColumnChart:C,preview:b.get(i?`${i.database}.${i.schema}.${o.name}:${s.name}`:`${o.name}:${s.name}`),sqlTableContext:i})})}),r[42]=s,r[43]=b,r[44]=C,r[45]=a,r[46]=i,r[47]=o,r[48]=U):U=r[48],r[49]!==B||r[50]!==U?($=A.jsxs(A.Fragment,{children:[B,U]}),r[49]=B,r[50]=U,r[51]=$):$=r[51],$},KU=m.lazy((()=>Xa((()=>import("./index-D0UmwqSE.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then((e=>({default:e.VegaLite}))))),ZU=e=>{const t=_.c(47),{table:n,column:r,preview:o,onAddColumnChart:s,sqlTableContext:i}=e,{theme:a}=Be();let l,c;if(t[0]!==r||t[1]!==o||t[2]!==i||t[3]!==n.name||t[4]!==n.source||t[5]!==n.source_type?(l=()=>{o||al({source:n.source,tableName:n.name,columnName:r.name,sourceType:n.source_type,fullyQualifiedTableName:i?`${i.database}.${i.schema}.${n.name}`:n.name})},t[0]=r,t[1]=o,t[2]=i,t[3]=n.name,t[4]=n.source,t[5]=n.source_type,t[6]=l):l=t[6],Ui(l),"connection"===n.source_type){const e=r.name,o=r.external_type;let a,l,c,d;return t[7]!==r.name||t[8]!==s||t[9]!==i||t[10]!==n?(a=dt.stopPropagation((()=>{s(BU(n,r.name,i))})),t[7]=r.name,t[8]=s,t[9]=i,t[10]=n,t[11]=a):a=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx(Qd,{className:"h-3 w-3 mr-1"}),t[12]=l):l=t[12],t[13]!==a?(c=A.jsxs(te,{variant:"outline",size:"xs",onClick:a,children:[l," Add SQL cell"]}),t[13]=a,t[14]=c):c=t[14],t[15]!==r.external_type||t[16]!==r.name||t[17]!==c?(d=A.jsxs("span",{className:"text-xs text-muted-foreground gap-2 flex items-center justify-between pl-7",children:[e," (",o,")",c]}),t[15]=r.external_type,t[16]=r.name,t[17]=c,t[18]=d):d=t[18],d}if(!o){let e;return t[19]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading..."}),t[19]=e):e=t[19],e}t[20]!==o.error||t[21]!==o.missing_packages?(c=o.error&&A.jsxs("div",{className:"text-xs text-muted-foreground p-2 block border border-muted rounded flex items-center",children:[A.jsx("span",{children:o.error}),o.missing_packages&&A.jsx(FU,{packages:o.missing_packages})]}),t[20]=o.error,t[21]=o.missing_packages,t[22]=c):c=t[22];const d=c;let u;t[23]!==o.summary?(u=o.summary&&A.jsx("div",{className:"gap-x-16 gap-y-1 grid grid-cols-2-fit border rounded p-2 empty:hidden",children:Object.entries(o.summary).map(e$)}),t[23]=o.summary,t[24]=u):u=t[24];const h=u,f=t$;let p;t[25]!==o.chart_spec||t[26]!==a?(p=o.chart_spec&&A.jsx(KU,{spec:f(JSON.parse(o.chart_spec)),width:"container",height:100,actions:!1,theme:"dark"===a?"dark":"vox"}),t[25]=o.chart_spec,t[26]=a,t[27]=p):p=t[27];const m=p;let g;t[28]!==s||t[29]!==o.chart_code||t[30]!==n.source_type?(g=o.chart_code&&"local"===n.source_type&&A.jsx(ht,{content:"Add chart to notebook",delayDuration:400,children:A.jsx(te,{variant:"outline",size:"icon",className:"z-10 bg-background absolute right-1 -top-1",onClick:dt.stopPropagation((()=>s(o.chart_code||""))),children:A.jsx(Qd,{className:"h-3 w-3"})})}),t[28]=s,t[29]=o.chart_code,t[30]=n.source_type,t[31]=g):g=t[31];const y=g;let b;t[32]!==r||t[33]!==s||t[34]!==i||t[35]!==n?(b="duckdb"===n.source_type&&A.jsx(ht,{content:"Add SQL cell",delayDuration:400,children:A.jsx(te,{variant:"outline",size:"icon",className:"z-10 bg-background absolute right-1 -top-1",onClick:dt.stopPropagation((()=>{s(BU(n,r.name,i))})),children:A.jsx(Qd,{className:"h-3 w-3"})})}),t[32]=r,t[33]=s,t[34]=i,t[35]=n,t[36]=b):b=t[36];const x=b;let v;t[37]!==o.chart_max_rows_errors?(v=o.chart_max_rows_errors&&A.jsx("span",{className:"text-xs text-muted-foreground",children:"Too many rows to render the chart."}),t[37]=o.chart_max_rows_errors,t[38]=v):v=t[38];const w=v;if(!(d||h||m||w)){let e;return t[39]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx("span",{className:"text-xs text-muted-foreground",children:"No data"}),t[39]=e):e=t[39],e}let k;return t[40]!==y||t[41]!==x||t[42]!==m||t[43]!==w||t[44]!==d||t[45]!==h?(k=A.jsxs("div",{className:"flex flex-col gap-2 relative",children:[d,y,x,w,m,h]}),t[40]=y,t[41]=x,t[42]=m,t[43]=w,t[44]=d,t[45]=h,t[46]=k):k=t[46],k};function QU(e){const{tooltipContent:t,content:n}=e;return A.jsx(ht,{content:t,delayDuration:100,children:A.jsx("span",{className:"text-xs text-black bg-gray-100 dark:invert rounded px-1",children:n})})}function e$(e){const[t,n]=e;return null==n?null:A.jsxs("div",{className:"flex items-center gap-1 group",children:[A.jsx(sl,{className:"h-3 w-3 invisible group-hover:visible",value:String(n)}),A.jsx("span",{className:"text-xs min-w-[60px] uppercase",children:t}),A.jsx("span",{className:"text-xs font-bold text-muted-foreground tracking-wide",children:il(n)})]},t)}function t$(e){return{...e,config:{...e.config,background:"transparent"}}}const n$=()=>{const e=_.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(VU,{}),e[0]=t):t=e[0],t},r$=e=>{const t=_.c(4),{isOpen:n,children:r}=e,[o,s]=m.useState(!1);let i,a;return t[0]!==o||t[1]!==n?(i=()=>{n&&!o&&s(!0)},a=[n,o],t[0]=o,t[1]=n,t[2]=i,t[3]=a):(i=t[2],a=t[3]),m.useEffect(i,a),o?r:null},o$=Mt("marimo:scratchpadHistory:v1",[]),s$=Q(!1),i$=Q(null,((e,t,n)=>{if(!(n=n.trim()))return;const r=e(o$),o=[n,...r.filter((e=>e!==n))].slice(0,15);t(o$,o)})),a$={hide_code:!1,disabled:!1},l$=()=>{const e=_.c(79),t=Zn(),[n]=Ue(),{theme:r}=Be(),o=l.useRef(null),s=Yu(),{createNewCell:i,updateCellCode:a}=W(),c=t.cellRuntime[Fe],d=null==c?void 0:c.output,u=null==c?void 0:c.status,h=null==c?void 0:c.consoleOutputs,f=t.cellData[Fe],p=(null==f?void 0:f.code)??"",m=fe(i$),[g,y]=He(s$),b=ue(o$);let x;e[0]!==m||e[1]!==p?(x=()=>{ll({code:p}),m(p)},e[0]=m,e[1]=p,e[2]=x):x=e[2];const v=H(x);let w;e[3]!==p||e[4]!==i||e[5]!==s?(w=()=>{p.trim()&&i({code:p,before:!1,cellId:s??"__end__"})},e[3]=p,e[4]=i,e[5]=s,e[6]=w):w=e[6];const k=H(w);let S;e[7]!==a?(S=()=>{a({cellId:Fe,code:"",formattingChange:!1}),ll({code:""});const e=o.current;e&&e.dispatch({changes:{from:0,to:e.state.doc.length,insert:""}})},e[7]=a,e[8]=S):S=e[8];const C=H(S);let E;e[9]!==y||e[10]!==a?(E=e=>{y(!1),a({cellId:Fe,code:e,formattingChange:!1});const t=o.current;t&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},e[9]=y,e[10]=a,e[11]=E):E=e[11];const N=H(E),[j,I]=l.useState();let T,M,D,O,R,P,L,z;if(e[12]!==p||e[13]!==h||e[14]!==C||e[15]!==k||e[16]!==v||e[17]!==N||e[18]!==b||e[19]!==g||e[20]!==j||e[21]!==d||e[22]!==y||e[23]!==u||e[24]!==r||e[25]!==n){const t=()=>A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"overflow-auto flex-shrink-0 max-h-[40%]",children:A.jsx(ZI,{theme:r,allowFocus:!1,showPlaceholder:!1,id:Fe,code:p,config:a$,status:"idle",serializedEditorState:null,runCell:v,userConfig:n,editorViewRef:o,setEditorView:e=>{o.current=e},hidden:!1,temporarilyShowCode:or.NOOP,languageAdapter:j,setLanguageAdapter:I})}),A.jsx("div",{className:"flex-1 overflow-auto flex-shrink-0",children:A.jsx(di,{allowExpand:!1,output:d,className:"output-area",cellId:Fe,stale:!1})}),A.jsx("div",{className:"overflow-auto flex-shrink-0 max-h-[35%]",children:A.jsx(bc,{consoleOutputs:h,className:"overflow-auto",stale:!1,cellName:cl,onSubmitDebugger:or.NOOP,cellId:Fe,debuggerActive:!1})})]});let s;e[32]!==N||e[33]!==b||e[34]!==g||e[35]!==r?(s=()=>g?A.jsx("div",{className:"absolute inset-0 z-100 bg-background p-3 border-none overflow-auto",children:A.jsx("div",{className:"overflow-auto flex flex-col gap-3",children:b.map(((e,t)=>A.jsx("div",{className:"border rounded-md hover:shadow-sm cursor-pointer hover:border-input overflow-hidden",onClick:()=>N(e),children:A.jsx(Ma,{language:"python",theme:r,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1},value:e.trim(),editable:!1,readOnly:!0})},t)))})}):null,e[32]=N,e[33]=b,e[34]=g,e[35]=r,e[36]=s):s=e[36];const i=s;let a,l,c,f,m,x,w,S,E;D="flex flex-col h-full overflow-hidden divide-y",e[37]===Symbol.for("react.memo_cache_sentinel")?(O=Et.create(Fe),e[37]=O):O=e[37],e[38]===Symbol.for("react.memo_cache_sentinel")?(a=Gt("cell.run"),e[38]=a):a=e[38],e[39]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx(Fd,{color:"var(--grass-11)",size:16}),e[39]=l):l=e[39],e[40]!==v||e[41]!==g?(c=A.jsx(ht,{content:a,children:A.jsx(te,{"data-testid":"scratchpad-run-button",onClick:v,disabled:g,variant:"text",size:"xs",children:l})}),e[40]=v,e[41]=g,e[42]=c):c=e[42],e[43]===Symbol.for("react.memo_cache_sentinel")?(f=A.jsx(fd,{size:16}),e[43]=f):f=e[43],e[44]!==C||e[45]!==g?(m=A.jsx(ht,{content:"Clear code and outputs",children:A.jsx(te,{disabled:g,size:"xs",variant:"text",onClick:C,children:f})}),e[44]=C,e[45]=g,e[46]=m):m=e[46],e[47]===Symbol.for("react.memo_cache_sentinel")?(x=A.jsx(Zc,{size:16}),e[47]=x):x=e[47],e[48]!==k||e[49]!==g?(w=A.jsx(Rf,{children:A.jsx(ht,{content:"Insert code",children:A.jsx(te,{disabled:g,size:"xs",variant:"text",onClick:k,children:x})})}),e[48]=k,e[49]=g,e[50]=w):w=e[50],e[51]!==u?(S=("running"===u||"queued"===u)&&A.jsx($i,{className:"inline",size:"small"}),e[51]=u,e[52]=S):S=e[52],e[53]===Symbol.for("react.memo_cache_sentinel")?(E=A.jsx("div",{className:"flex-1"}),e[53]=E):E=e[53];const _=g&&"bg-[var(--sky-3)] rounded-none";let L,z;e[54]!==_?(L=Ln(_),e[54]=_,e[55]=L):L=e[55],e[56]!==g||e[57]!==y?(z=()=>y(!g),e[56]=g,e[57]=y,e[58]=z):z=e[58];const F=0===b.length;let B,U;e[59]===Symbol.for("react.memo_cache_sentinel")?(B=A.jsx(kd,{size:16}),e[59]=B):B=e[59],e[60]!==L||e[61]!==z||e[62]!==F?(U=A.jsx(ht,{content:"Toggle history",children:A.jsx(te,{size:"xs",variant:"text",className:L,onClick:z,disabled:F,children:B})}),e[60]=L,e[61]=z,e[62]=F,e[63]=U):U=e[63],e[64]!==c||e[65]!==m||e[66]!==w||e[67]!==S||e[68]!==U?(R=A.jsxs("div",{className:"flex items-center flex-shrink-0",children:[c,m,w,S,E,U]}),e[64]=c,e[65]=m,e[66]=w,e[67]=S,e[68]=U,e[69]=R):R=e[69],T="flex-1 divide-y relative overflow-hidden flex flex-col",M=t(),P=i(),e[12]=p,e[13]=h,e[14]=C,e[15]=k,e[16]=v,e[17]=N,e[18]=b,e[19]=g,e[20]=j,e[21]=d,e[22]=y,e[23]=u,e[24]=r,e[25]=n,e[26]=T,e[27]=M,e[28]=D,e[29]=O,e[30]=R,e[31]=P}else T=e[26],M=e[27],D=e[28],O=e[29],R=e[30],P=e[31];return e[70]!==T||e[71]!==M||e[72]!==P?(L=A.jsxs("div",{className:T,children:[M,P]}),e[70]=T,e[71]=M,e[72]=P,e[73]=L):L=e[73],e[74]!==L||e[75]!==D||e[76]!==O||e[77]!==R?(z=A.jsxs("div",{className:D,id:O,children:[R,L]}),e[74]=L,e[75]=D,e[76]=O,e[77]=R,e[78]=z):z=e[78],z},c$=()=>{const e=_.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(l$,{}),e[0]=t):t=e[0],t},d$=()=>{const e=_.c(16),[t]=Ue(),n=t.package_management.manager;let r;e[0]!==n?(r=[n],e[0]=n,e[1]=r):r=e[1];const{data:o,loading:s,error:i,reload:a}=On(p$,r);if(s&&!o){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx($i,{size:"medium",centered:!0}),e[2]=t):t=e[2],t}if(i){let t;return e[3]!==i?(t=A.jsx(ja,{error:i}),e[3]=i,e[4]=t):t=e[4],t}let l;e[5]!==(null==o?void 0:o.packages)?(l=(null==o?void 0:o.packages)||[],e[5]=null==o?void 0:o.packages,e[6]=l):l=e[6];const c=l;let d,u,h;return e[7]!==n||e[8]!==a?(d=A.jsx(u$,{packageManager:n,onSuccess:a}),e[7]=n,e[8]=a,e[9]=d):d=e[9],e[10]!==c||e[11]!==a?(u=A.jsx(h$,{packages:c,onSuccess:a}),e[10]=c,e[11]=a,e[12]=u):u=e[12],e[13]!==d||e[14]!==u?(h=A.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[d,u]}),e[13]=d,e[14]=u,e[15]=h):h=e[15],h},u$=({onSuccess:e,packageManager:t})=>{const[n,r]=m.useState(""),[o,s]=m.useState(!1),{handleClick:i}=Kl(),a=ue(zU),l=fe(zU);m.useEffect((()=>{a&&(r(a),l(null))}),[a,l]);const c=async()=>{try{s(!0);const t=await ul({package:n});t.success?(e(),ie({title:"Package added",description:A.jsxs("span",{children:["The package ",A.jsx(jr,{className:"inline",children:n})," and its dependencies has been added to your environment."]})})):ie({title:"Failed to add package",description:t.error,variant:"danger"})}finally{r(""),s(!1)}};return A.jsxs("div",{className:"flex items-center w-full border-b",children:[A.jsx(fa,{placeholder:`Install packages with ${t}...`,id:wb,icon:o?A.jsx($i,{size:"small",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}):A.jsx(ht,{content:"Change package manager",children:A.jsx(Qc,{onClick:()=>i("packageManagement"),className:"mr-2 h-4 w-4 shrink-0 opacity-50 hover:opacity-80 cursor-pointer"})}),rootClassName:"flex-1 border-none",value:n,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),c())},onChange:e=>r(e.target.value)}),A.jsx(ht,{delayDuration:300,side:"left",align:"start",content:A.jsxs("div",{className:"text-sm flex flex-col w-full max-w-[360px]",children:["Packages are installed using the package manager specified in your user configuration. Depending on your package manager, you can install packages with various formats:",A.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-bold tracking-wide",children:"Package name:"})," A package name; this will install the latest version.",A.jsx("div",{className:"text-muted-foreground",children:"Example: httpx"})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold tracking-wide",children:"Package and version:"})," ","A package with a specific version or version range.",A.jsx("div",{className:"text-muted-foreground",children:"Examples: httpx==0.27.0, httpx>=0.27.0"})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold tracking-wide",children:"Git:"})," A Git repository",A.jsx("div",{className:"text-muted-foreground",children:"Example: git+https://github.com/encode/httpx"})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold tracking-wide",children:"URL:"})," A remote wheel or source distribution.",A.jsx("div",{className:"text-muted-foreground",children:"Example: https://example.com/httpx-0.27.0.tar.gz"})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold tracking-wide",children:"Path:"})," A local wheel, source distribution, or project directory.",A.jsx("div",{className:"text-muted-foreground",children:"Example: /example/foo-0.1.0-py3-none-any.whl"})]})]})]}),children:A.jsx(ci,{className:"h-4 w-4 cursor-help text-muted-foreground hover:text-foreground bg-transparent"})}),A.jsx("button",{type:"button",className:Ln("float-right px-2 m-0 h-full text-sm text-secondary-foreground ml-2",n&&"bg-accent text-accent-foreground","disabled:cursor-not-allowed disabled:opacity-50"),onClick:c,disabled:!n,children:"Add"})]})},h$=e=>{const t=_.c(9),{onSuccess:n,packages:r}=e;if(0===r.length){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=A.jsx(KM,{title:"No packages",description:"No packages are installed in this environment.",icon:A.jsx(Qc,{})}),t[0]=e):e=t[0],e}let o,s,i;if(t[1]===Symbol.for("react.memo_cache_sentinel")?(o=A.jsx(ma,{children:A.jsxs(ga,{children:[A.jsx(ya,{children:"Name"}),A.jsx(ya,{children:"Version"}),A.jsx(ya,{})]})}),t[1]=o):o=t[1],t[2]!==n||t[3]!==r){let e;t[5]!==n?(e=e=>A.jsxs(ga,{className:"group",onClick:async()=>{await lt(`${e.name}==${e.version}`),ie({title:"Copied to clipboard"})},children:[A.jsx(va,{children:e.name}),A.jsx(va,{children:e.version}),A.jsx(va,{children:A.jsx(f$,{packageName:e.name,onSuccess:n})})]},e.name),t[5]=n,t[6]=e):e=t[6],s=r.map(e),t[2]=n,t[3]=r,t[4]=s}else s=t[4];return t[7]!==s?(i=A.jsxs(pa,{className:"overflow-auto flex-1",children:[o,A.jsx(xa,{children:s})]}),t[7]=s,t[8]=i):i=t[8],i},f$=({packageName:e,onSuccess:t})=>{const[n,r]=m.useState(!1);return n?A.jsx($i,{size:"small",className:"float-right mr-2 h-4 w-4 shrink-0 opacity-50"}):A.jsx("button",{type:"button",className:Ln("float-right px-2 h-full text-xs text-muted-foreground hover:text-foreground","invisible group-hover:visible"),onClick:dt.stopPropagation((async()=>{try{r(!0);const n=await hl({package:e});n.success?(t(),ie({title:"Package removed",description:A.jsxs("span",{children:["The package ",A.jsx(jr,{className:"inline",children:e})," has been removed from your environment."]})})):ie({title:"Failed to add package",description:n.error,variant:"danger"})}finally{r(!1)}})),children:"Remove"})};function p$(){return dl()}var m$="ScrollArea",[g$,y$]=ho(m$),[b$,x$]=g$(m$),v$=l.forwardRef(((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=e,[a,c]=l.useState(null),[d,u]=l.useState(null),[h,f]=l.useState(null),[p,m]=l.useState(null),[g,y]=l.useState(null),[b,x]=l.useState(0),[v,w]=l.useState(0),[k,S]=l.useState(!1),[C,E]=l.useState(!1),N=fl(t,(e=>c(e))),j=pl(o);return A.jsx(b$,{scope:n,type:r,dir:j,scrollHideDelay:s,scrollArea:a,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:k,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:C,onScrollbarYEnabledChange:E,onCornerWidthChange:x,onCornerHeightChange:w,children:A.jsx(po.div,{dir:j,...i,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})}));v$.displayName=m$;var w$="ScrollAreaViewport",k$=l.forwardRef(((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,i=x$(w$,n),a=l.useRef(null),c=fl(t,a,i.onViewportChange);return A.jsxs(A.Fragment,{children:[A.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),A.jsx(po.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:A.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})}));k$.displayName=w$;var S$="ScrollAreaScrollbar",C$=l.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,o=x$(S$,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,a="horizontal"===e.orientation;return l.useEffect((()=>(a?s(!0):i(!0),()=>{a?s(!1):i(!1)})),[a,s,i]),"hover"===o.type?A.jsx(E$,{...r,ref:t,forceMount:n}):"scroll"===o.type?A.jsx(N$,{...r,ref:t,forceMount:n}):"auto"===o.type?A.jsx(j$,{...r,ref:t,forceMount:n}):"always"===o.type?A.jsx(_$,{...r,ref:t}):null}));C$.displayName=S$;var E$=l.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,o=x$(S$,e.__scopeScrollArea),[s,i]=l.useState(!1);return l.useEffect((()=>{const e=o.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),i(!0)},r=()=>{t=window.setTimeout((()=>i(!1)),o.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}}),[o.scrollArea,o.scrollHideDelay]),A.jsx(ml,{present:n||s,children:A.jsx(j$,{"data-state":s?"visible":"hidden",...r,ref:t})})})),N$=l.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,o=x$(S$,e.__scopeScrollArea),s="horizontal"===e.orientation,i=q$((()=>c("SCROLL_END")),100),[a,c]=(d="hidden",u={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},l.useReducer(((e,t)=>u[e][t]??e),d));var d,u;return l.useEffect((()=>{if("idle"===a){const e=window.setTimeout((()=>c("HIDE")),o.scrollHideDelay);return()=>window.clearTimeout(e)}}),[a,o.scrollHideDelay,c]),l.useEffect((()=>{const e=o.viewport,t=s?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(c("SCROLL"),i()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}}),[o.viewport,s,c,i]),A.jsx(ml,{present:n||"hidden"!==a,children:A.jsx(_$,{"data-state":"hidden"===a?"hidden":"visible",...r,ref:t,onPointerEnter:mo(e.onPointerEnter,(()=>c("POINTER_ENTER"))),onPointerLeave:mo(e.onPointerLeave,(()=>c("POINTER_LEAVE")))})})})),j$=l.forwardRef(((e,t)=>{const n=x$(S$,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,i]=l.useState(!1),a="horizontal"===e.orientation,c=q$((()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?e:t)}}),10);return Y$(n.viewport,c),Y$(n.content,c),A.jsx(ml,{present:r||s,children:A.jsx(_$,{"data-state":s?"visible":"hidden",...o,ref:t})})})),_$=l.forwardRef(((e,t)=>{const{orientation:n="vertical",...r}=e,o=x$(S$,e.__scopeScrollArea),s=l.useRef(null),i=l.useRef(0),[a,c]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=U$(a.viewport,a.content),u={...r,sizes:a,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>s.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function h(e,t){return function(e,t,n,r="ltr"){const o=$$(n),s=o/2,i=t||s,a=o-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,u="ltr"===r?[0,d]:[-1*d,0];return H$([l,c],u)(e)}(e,i.current,a,t)}return"horizontal"===n?A.jsx(I$,{...u,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const e=V$(o.viewport.scrollLeft,a,o.dir);s.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollLeft=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollLeft=h(e,o.dir))}}):"vertical"===n?A.jsx(A$,{...u,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const e=V$(o.viewport.scrollTop,a);s.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollTop=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollTop=h(e))}}):null})),I$=l.forwardRef(((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=x$(S$,e.__scopeScrollArea),[i,a]=l.useState(),c=l.useRef(null),d=fl(t,c,s.onScrollbarXChange);return l.useEffect((()=>{c.current&&a(getComputedStyle(c.current))}),[c]),A.jsx(D$,{"data-orientation":"horizontal",...o,ref:d,sizes:n,style:{bottom:0,left:"rtl"===s.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===s.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$$(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(s.viewport){const r=s.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),W$(r,n)&&t.preventDefault()}},onResize:()=>{c.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:B$(i.paddingLeft),paddingEnd:B$(i.paddingRight)}})}})})),A$=l.forwardRef(((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=x$(S$,e.__scopeScrollArea),[i,a]=l.useState(),c=l.useRef(null),d=fl(t,c,s.onScrollbarYChange);return l.useEffect((()=>{c.current&&a(getComputedStyle(c.current))}),[c]),A.jsx(D$,{"data-orientation":"vertical",...o,ref:d,sizes:n,style:{top:0,right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$$(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(s.viewport){const r=s.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),W$(r,n)&&t.preventDefault()}},onResize:()=>{c.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:B$(i.paddingTop),paddingEnd:B$(i.paddingBottom)}})}})})),[T$,M$]=g$(S$),D$=l.forwardRef(((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=e,p=x$(S$,n),[m,g]=l.useState(null),y=fl(t,(e=>g(e))),b=l.useRef(null),x=l.useRef(""),v=p.viewport,w=r.content-r.viewport,k=No(u),S=No(c),C=q$(h,10);function E(e){if(b.current){const t=e.clientX-b.current.left,n=e.clientY-b.current.top;d({x:t,y:n})}}return l.useEffect((()=>{const e=e=>{const t=e.target;(null==m?void 0:m.contains(t))&&k(e,w)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})}),[v,m,w,k]),l.useEffect(S,[r,S]),Y$(m,C),Y$(p.content,C),A.jsx(T$,{scope:n,scrollbar:m,hasThumb:o,onThumbChange:No(s),onThumbPointerUp:No(i),onThumbPositionChange:S,onThumbPointerDown:No(a),children:A.jsx(po.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:mo(e.onPointerDown,(e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),b.current=m.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(e)}})),onPointerMove:mo(e.onPointerMove,E),onPointerUp:mo(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null}))})})})),O$="ScrollAreaThumb",R$=l.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,o=M$(O$,e.__scopeScrollArea);return A.jsx(ml,{present:n||o.hasThumb,children:A.jsx(P$,{ref:t,...r})})})),P$=l.forwardRef(((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=x$(O$,n),i=M$(O$,n),{onThumbPositionChange:a}=i,c=fl(t,(e=>i.onThumbChange(e))),d=l.useRef(void 0),u=q$((()=>{d.current&&(d.current(),d.current=void 0)}),100);return l.useEffect((()=>{const e=s.viewport;if(e){const t=()=>{if(u(),!d.current){const t=G$(e,a);d.current=t,a()}};return a(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[s.viewport,u,a]),A.jsx(po.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:mo(e.onPointerDownCapture,(e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;i.onThumbPointerDown({x:n,y:r})})),onPointerUp:mo(e.onPointerUp,i.onThumbPointerUp)})}));R$.displayName=O$;var L$="ScrollAreaCorner",z$=l.forwardRef(((e,t)=>{const n=x$(L$,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?A.jsx(F$,{...e,ref:t}):null}));z$.displayName=L$;var F$=l.forwardRef(((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=x$(L$,n),[s,i]=l.useState(0),[a,c]=l.useState(0),d=Boolean(s&&a);return Y$(o.scrollbarX,(()=>{var e;const t=(null==(e=o.scrollbarX)?void 0:e.offsetHeight)||0;o.onCornerHeightChange(t),c(t)})),Y$(o.scrollbarY,(()=>{var e;const t=(null==(e=o.scrollbarY)?void 0:e.offsetWidth)||0;o.onCornerWidthChange(t),i(t)})),d?A.jsx(po.div,{...r,ref:t,style:{width:s,height:a,position:"absolute",right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:0,...e.style}}):null}));function B$(e){return e?parseInt(e,10):0}function U$(e,t){const n=e/t;return isNaN(n)?0:n}function $$(e){const t=U$(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function V$(e,t,n="ltr"){const r=$$(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,i=t.content-t.viewport,a=s-r,l=yl(e,"ltr"===n?[0,i]:[-1*i,0]);return H$([0,i],[0,a])(l)}function H$(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function W$(e,t){return e>0&&e<t}var G$=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,a=n.top!==s.top;(i||a)&&t(),n=s,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function q$(e,t){const n=No(e),r=l.useRef(0);return l.useEffect((()=>()=>window.clearTimeout(r.current)),[]),l.useCallback((()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)}),[n,t])}function Y$(e,t){const n=No(t);gl((()=>{let t=0;if(e){const r=new ResizeObserver((()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)}));return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}}),[e,n])}var J$=v$,X$=k$,K$=z$;const Z$=l.forwardRef(((e,t)=>{const n=_.c(15);let r,o,s,i,a,l,c,d;return n[0]!==e?(({className:o,children:r,...s}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s):(r=n[1],o=n[2],s=n[3]),n[4]!==o?(i=Ln("relative overflow-hidden",o),n[4]=o,n[5]=i):i=n[5],n[6]!==r?(a=A.jsx(X$,{className:"h-full w-full rounded-[inherit]",children:r}),n[6]=r,n[7]=a):a=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(l=A.jsx(Q$,{}),c=A.jsx(K$,{}),n[8]=l,n[9]=c):(l=n[8],c=n[9]),n[10]!==s||n[11]!==t||n[12]!==i||n[13]!==a?(d=A.jsxs(J$,{ref:t,className:i,...s,children:[a,l,c]}),n[10]=s,n[11]=t,n[12]=i,n[13]=a,n[14]=d):d=n[14],d}));Z$.displayName=J$.displayName;const Q$=l.forwardRef(((e,t)=>{const n=_.c(14);let r,o,s;n[0]!==e?(({className:r,orientation:s,...o}=e),n[0]=e,n[1]=r,n[2]=o,n[3]=s):(r=n[1],o=n[2],s=n[3]);const i=void 0===s?"vertical":s,a="vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]",l="horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]";let c,d,u;return n[4]!==r||n[5]!==a||n[6]!==l?(c=Ln("flex touch-none select-none transition-colors",a,l,r),n[4]=r,n[5]=a,n[6]=l,n[7]=c):c=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(d=A.jsx(R$,{className:"relative flex-1 rounded-full bg-border"}),n[8]=d):d=n[8],n[9]!==i||n[10]!==o||n[11]!==t||n[12]!==c?(u=A.jsx(C$,{ref:t,orientation:i,className:c,...o,children:d}),n[9]=i,n[10]=o,n[11]=t,n[12]=c,n[13]=u):u=n[13],u}));Q$.displayName=C$.displayName;const eV=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,tV=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nV={};function rV(e,t){return(nV.jsx?tV:eV).test(e)}const oV=/[ \t\n\f\r]/g;function sV(e){return""===e.replace(oV,"")}class iV{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function aV(e,t){const n={},r={};let o=-1;for(;++o<e.length;)Object.assign(n,e[o].property),Object.assign(r,e[o].normal);return new iV(n,r,t)}function lV(e){return e.toLowerCase()}iV.prototype.property={},iV.prototype.normal={},iV.prototype.space=null;class cV{constructor(e,t){this.property=e,this.attribute=t}}cV.prototype.space=null,cV.prototype.boolean=!1,cV.prototype.booleanish=!1,cV.prototype.overloadedBoolean=!1,cV.prototype.number=!1,cV.prototype.commaSeparated=!1,cV.prototype.spaceSeparated=!1,cV.prototype.commaOrSpaceSeparated=!1,cV.prototype.mustUseProperty=!1,cV.prototype.defined=!1;let dV=0;const uV=bV(),hV=bV(),fV=bV(),pV=bV(),mV=bV(),gV=bV(),yV=bV();function bV(){return 2**++dV}const xV=Object.freeze(Object.defineProperty({__proto__:null,boolean:uV,booleanish:hV,commaOrSpaceSeparated:yV,commaSeparated:gV,number:pV,overloadedBoolean:fV,spaceSeparated:mV},Symbol.toStringTag,{value:"Module"})),vV=Object.keys(xV);class wV extends cV{constructor(e,t,n,r){let o=-1;if(super(e,t),kV(this,"space",r),"number"==typeof n)for(;++o<vV.length;){const e=vV[o];kV(this,vV[o],(n&xV[e])===xV[e])}}}function kV(e,t,n){n&&(e[t]=n)}wV.prototype.defined=!0;const SV={}.hasOwnProperty;function CV(e){const t={},n={};let r;for(r in e.properties)if(SV.call(e.properties,r)){const o=e.properties[r],s=new wV(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[lV(r)]=r,n[lV(s.attribute)]=r}return new iV(t,n,e.space)}const EV=CV({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),NV=CV({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function jV(e,t){return t in e?e[t]:t}function _V(e,t){return jV(e,t.toLowerCase())}const IV=CV({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:_V,properties:{xmlns:null,xmlnsXLink:null}}),AV=CV({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:hV,ariaAutoComplete:null,ariaBusy:hV,ariaChecked:hV,ariaColCount:pV,ariaColIndex:pV,ariaColSpan:pV,ariaControls:mV,ariaCurrent:null,ariaDescribedBy:mV,ariaDetails:null,ariaDisabled:hV,ariaDropEffect:mV,ariaErrorMessage:null,ariaExpanded:hV,ariaFlowTo:mV,ariaGrabbed:hV,ariaHasPopup:null,ariaHidden:hV,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:mV,ariaLevel:pV,ariaLive:null,ariaModal:hV,ariaMultiLine:hV,ariaMultiSelectable:hV,ariaOrientation:null,ariaOwns:mV,ariaPlaceholder:null,ariaPosInSet:pV,ariaPressed:hV,ariaReadOnly:hV,ariaRelevant:null,ariaRequired:hV,ariaRoleDescription:mV,ariaRowCount:pV,ariaRowIndex:pV,ariaRowSpan:pV,ariaSelected:hV,ariaSetSize:pV,ariaSort:null,ariaValueMax:pV,ariaValueMin:pV,ariaValueNow:pV,ariaValueText:null,role:null}}),TV=CV({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:_V,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gV,acceptCharset:mV,accessKey:mV,action:null,allow:null,allowFullScreen:uV,allowPaymentRequest:uV,allowUserMedia:uV,alt:null,as:null,async:uV,autoCapitalize:null,autoComplete:mV,autoFocus:uV,autoPlay:uV,blocking:mV,capture:null,charSet:null,checked:uV,cite:null,className:mV,cols:pV,colSpan:null,content:null,contentEditable:hV,controls:uV,controlsList:mV,coords:pV|gV,crossOrigin:null,data:null,dateTime:null,decoding:null,default:uV,defer:uV,dir:null,dirName:null,disabled:uV,download:fV,draggable:hV,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:uV,formTarget:null,headers:mV,height:pV,hidden:uV,high:pV,href:null,hrefLang:null,htmlFor:mV,httpEquiv:mV,id:null,imageSizes:null,imageSrcSet:null,inert:uV,inputMode:null,integrity:null,is:null,isMap:uV,itemId:null,itemProp:mV,itemRef:mV,itemScope:uV,itemType:mV,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:uV,low:pV,manifest:null,max:null,maxLength:pV,media:null,method:null,min:null,minLength:pV,multiple:uV,muted:uV,name:null,nonce:null,noModule:uV,noValidate:uV,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:uV,optimum:pV,pattern:null,ping:mV,placeholder:null,playsInline:uV,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:uV,referrerPolicy:null,rel:mV,required:uV,reversed:uV,rows:pV,rowSpan:pV,sandbox:mV,scope:null,scoped:uV,seamless:uV,selected:uV,shadowRootClonable:uV,shadowRootDelegatesFocus:uV,shadowRootMode:null,shape:null,size:pV,sizes:null,slot:null,span:pV,spellCheck:hV,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pV,step:null,style:null,tabIndex:pV,target:null,title:null,translate:null,type:null,typeMustMatch:uV,useMap:null,value:hV,width:pV,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:mV,axis:null,background:null,bgColor:null,border:pV,borderColor:null,bottomMargin:pV,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:uV,declare:uV,event:null,face:null,frame:null,frameBorder:null,hSpace:pV,leftMargin:pV,link:null,longDesc:null,lowSrc:null,marginHeight:pV,marginWidth:pV,noResize:uV,noHref:uV,noShade:uV,noWrap:uV,object:null,profile:null,prompt:null,rev:null,rightMargin:pV,rules:null,scheme:null,scrolling:hV,standby:null,summary:null,text:null,topMargin:pV,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pV,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:uV,disableRemotePlayback:uV,prefix:null,property:null,results:pV,security:null,unselectable:null}}),MV=CV({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:jV,properties:{about:yV,accentHeight:pV,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pV,amplitude:pV,arabicForm:null,ascent:pV,attributeName:null,attributeType:null,azimuth:pV,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pV,by:null,calcMode:null,capHeight:pV,className:mV,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pV,diffuseConstant:pV,direction:null,display:null,dur:null,divisor:pV,dominantBaseline:null,download:uV,dx:null,dy:null,edgeMode:null,editable:null,elevation:pV,enableBackground:null,end:null,event:null,exponent:pV,externalResourcesRequired:null,fill:null,fillOpacity:pV,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gV,g2:gV,glyphName:gV,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pV,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pV,horizOriginX:pV,horizOriginY:pV,id:null,ideographic:pV,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pV,k:pV,k1:pV,k2:pV,k3:pV,k4:pV,kernelMatrix:yV,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pV,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pV,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pV,overlineThickness:pV,paintOrder:null,panose1:null,path:null,pathLength:pV,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:mV,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pV,pointsAtY:pV,pointsAtZ:pV,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:yV,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:yV,rev:yV,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:yV,requiredFeatures:yV,requiredFonts:yV,requiredFormats:yV,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pV,specularExponent:pV,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pV,strikethroughThickness:pV,string:null,stroke:null,strokeDashArray:yV,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pV,strokeOpacity:pV,strokeWidth:null,style:null,surfaceScale:pV,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:yV,tabIndex:pV,tableValues:null,target:null,targetX:pV,targetY:pV,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:yV,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pV,underlineThickness:pV,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pV,values:null,vAlphabetic:pV,vMathematical:pV,vectorEffect:null,vHanging:pV,vIdeographic:pV,version:null,vertAdvY:pV,vertOriginX:pV,vertOriginY:pV,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pV,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),DV=/^data[-\w.:]+$/i,OV=/-[a-z]/g,RV=/[A-Z]/g;function PV(e){return"-"+e.toLowerCase()}function LV(e){return e.charAt(1).toUpperCase()}const zV={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},FV=aV([NV,EV,IV,AV,TV],"html"),BV=aV([NV,EV,IV,AV,MV],"svg");const UV=bl(xl()),$V=UV.default||UV,VV=WV("end"),HV=WV("start");function WV(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function GV(e){return e&&"object"==typeof e?"position"in e||"type"in e?YV(e.position):"start"in e||"end"in e?YV(e):"line"in e||"column"in e?qV(e):"":""}function qV(e){return JV(e&&e.line)+":"+JV(e&&e.column)}function YV(e){return qV(e&&e.start)+"-"+qV(e&&e.end)}function JV(e){return e&&"number"==typeof e?e:1}class XV extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",o={},s=!1;if(t&&(o="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?o.ruleId=n:(o.source=n.slice(0,e),o.ruleId=n.slice(e+1))}if(!o.place&&o.ancestors&&o.ancestors){const e=o.ancestors[o.ancestors.length-1];e&&(o.place=e.position)}const i=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=i?i.line:void 0,this.name=GV(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&"string"==typeof o.cause.stack?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}XV.prototype.file="",XV.prototype.name="",XV.prototype.reason="",XV.prototype.message="",XV.prototype.stack="",XV.prototype.column=void 0,XV.prototype.line=void 0,XV.prototype.ancestors=void 0,XV.prototype.cause=void 0,XV.prototype.fatal=void 0,XV.prototype.place=void 0,XV.prototype.ruleId=void 0,XV.prototype.source=void 0;const KV={}.hasOwnProperty,ZV=new Map,QV=/[A-Z]/g,eH=/-([a-z])/g,tH=new Set(["table","tbody","thead","tfoot","tr"]),nH=new Set(["td","th"]),rH="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function oH(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,o,s){const i=Array.isArray(o.children),a=HV(n);return t(r,o,s,i,{columnNumber:a?a.column-1:void 0,fileName:e,lineNumber:a?a.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,o,s){const i=Array.isArray(o.children)?n:t;return s?i(r,o,s):i(r,o)}}(0,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?BV:FV,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},s=sH(o,e,void 0);return s&&"string"!=typeof s?s:o.create(e,o.Fragment,{children:s||void 0},void 0)}function sH(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let o=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(o=BV,e.schema=o);e.ancestors.push(t);const s=dH(e,t.tagName,!1),i=function(e,t){const n={};let r,o;for(o in t.properties)if("children"!==o&&KV.call(t.properties,o)){const s=cH(e,o,t.properties[o]);if(s){const[o,i]=s;e.tableCellAlignToStyle&&"align"===o&&"string"==typeof i&&nH.has(t.tagName)?r=i:n[o]=i}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let a=lH(e,t);tH.has(t.tagName)&&(a=a.filter((function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&sV(t.value):sV(t));var t})));return iH(e,i,s,t),aH(i,a),e.ancestors.pop(),e.schema=r,e.create(t,s,i,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}uH(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let o=r;"svg"===t.name&&"html"===r.space&&(o=BV,e.schema=o);e.ancestors.push(t);const s=null===t.name?e.Fragment:dH(e,t.name,!0),i=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];t.type;const o=t.expression;o.type;const s=o.properties[0];s.type,Object.assign(n,e.evaluater.evaluateExpression(s.argument))}else uH(e,t.position);else{const o=r.name;let s;if(r.value&&"object"==typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];t.type,s=e.evaluater.evaluateExpression(t.expression)}else uH(e,t.position);else s=null===r.value||r.value;n[o]=s}return n}(e,t),a=lH(e,t);return iH(e,i,s,t),aH(i,a),e.ancestors.pop(),e.schema=r,e.create(t,s,i,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);uH(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return aH(r,lH(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function iH(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function aH(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function lH(e,t){const n=[];let r=-1;const o=e.passKeys?new Map:ZV;for(;++r<t.children.length;){const s=t.children[r];let i;if(e.passKeys){const e="element"===s.type?s.tagName:"mdxJsxFlowElement"===s.type||"mdxJsxTextElement"===s.type?s.name:void 0;if(e){const t=o.get(e)||0;i=e+"-"+t,o.set(e,t+1)}}const a=sH(e,s,i);void 0!==a&&n.push(a)}return n}function cH(e,t,n){const r=function(e,t){const n=lV(t);let r=t,o=cV;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&DV.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(OV,LV);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!OV.test(e)){let n=e.replace(RV,PV);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}o=wV}return new o(r,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"==typeof n?n:function(e,t){const n={};try{$V(t,r)}catch(o){if(!e.ignoreInvalidStyle){const t=o,n=new XV("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=rH+"#cannot-parse-style-attribute",n}}return n;function r(e,t){let r=e;"--"!==r.slice(0,2)&&("-ms-"===r.slice(0,4)&&(r="ms-"+r.slice(4)),r=r.replace(eH,fH)),n[r]=t}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)KV.call(e,n)&&(t[hH(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?zV[r.property]||r.property:r.attribute,n]}}function dH(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,o=-1;for(;++o<e.length;){const t=rV(e[o])?{type:"Identifier",name:e[o]}:{type:"Literal",value:e[o]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(o&&"Literal"===t.type),optional:!1}:t}r=n}else r=rV(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return KV.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);uH(e)}function uH(e,t){const n=new XV("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=rH+"#cannot-handle-mdx-estrees-without-createevaluater",n}function hH(e){let t=e.replace(QV,pH);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function fH(e,t){return t.toUpperCase()}function pH(e){return"-"+e.toLowerCase()}const mH={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},gH={};function yH(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return bH(e.children,t,n)}return Array.isArray(e)?bH(e,t,n):""}function bH(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=yH(e[o],t,n);return r.join("")}const xH=document.createElement("i");function vH(e){const t="&"+e+";";xH.innerHTML=t;const n=xH.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function wH(e,t,n,r){const o=e.length;let s,i=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);i<r.length;)s=r.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function kH(e,t){return e.length>0?(wH(e,e.length,0,t),e):t}const SH={}.hasOwnProperty;function CH(e,t){let n;for(n in t){const r=(SH.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;if(o)for(s in o){SH.call(r,s)||(r[s]=[]);const e=o[s];EH(r[s],Array.isArray(e)?e:e?[e]:[])}}}function EH(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);wH(e,0,0,r)}function NH(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function jH(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _H=BH(/[A-Za-z]/),IH=BH(/[\dA-Za-z]/),AH=BH(/[#-'*+\--9=?A-Z^-~]/);function TH(e){return null!==e&&(e<32||127===e)}const MH=BH(/\d/),DH=BH(/[\dA-Fa-f]/),OH=BH(/[!-/:-@[-`{-~]/);function RH(e){return null!==e&&e<-2}function PH(e){return null!==e&&(e<0||32===e)}function LH(e){return-2===e||-1===e||32===e}const zH=BH(new RegExp("\\p{P}|\\p{S}","u")),FH=BH(/\s/);function BH(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function UH(e){const t=[];let n=-1,r=0,o=0;for(;++n<e.length;){const s=e.charCodeAt(n);let i="";if(37===s&&IH(e.charCodeAt(n+1))&&IH(e.charCodeAt(n+2)))o=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(i=String.fromCharCode(s));else if(s>55295&&s<57344){const t=e.charCodeAt(n+1);s<56320&&t>56319&&t<57344?(i=String.fromCharCode(s,t),o=1):i="�"}else i=String.fromCharCode(s);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+o+1,i=""),o&&(n+=o,o=0)}return t.join("")+e.slice(r)}function $H(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let s=0;return function(r){if(LH(r))return e.enter(n),i(r);return t(r)};function i(r){return LH(r)&&s++<o?(e.consume(r),i):(e.exit(n),t(r))}}const VH={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),$H(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,o(t)}function o(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):RH(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),o)}}};const HH={tokenize:function(e){const t=this,n=[];let r,o,s,i=0;return a;function a(r){if(i<n.length){const o=n[i];return t.containerState=o[1],e.attempt(o[0].continuation,l,c)(r)}return c(r)}function l(e){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&b();const n=t.events.length;let o,s=n;for(;s--;)if("exit"===t.events[s][0]&&"chunkFlow"===t.events[s][1].type){o=t.events[s][1].end;break}y(i);let a=n;for(;a<t.events.length;)t.events[a][1].end={...o},a++;return wH(t.events,s+1,0,t.events.slice(n)),t.events.length=a,c(e)}return a(e)}function c(o){if(i===n.length){if(!r)return h(o);if(r.currentConstruct&&r.currentConstruct.concrete)return p(o);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(WH,d,u)(o)}function d(e){return r&&b(),y(i),h(e)}function u(e){return t.parser.lazy[t.now().line]=i!==n.length,s=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt(WH,f,p)(n)}function f(e){return i++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(r&&b(),y(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):RH(n)?(e.consume(n),g(e.exit("chunkFlow")),i=0,t.interrupt=void 0,a):(e.consume(n),m)}function g(e,n){const a=t.sliceStream(e);if(n&&a.push(null),e.previous=o,o&&(o.next=e),o=e,r.defineSkip(e.start),r.write(a),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<s&&(!r.events[e][1].end||r.events[e][1].end.offset>s))return;const n=t.events.length;let o,a,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(o){a=t.events[l][1].end;break}o=!0}for(y(i),e=n;e<t.events.length;)t.events[e][1].end={...a},e++;wH(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(r){let o=n.length;for(;o-- >r;){const r=n[o];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function b(){r.write([null]),o=void 0,r=void 0,t.containerState._closeFlow=void 0}}},WH={tokenize:function(e,t,n){return $H(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function GH(e){return null===e||PH(e)||FH(e)?1:zH(e)?2:void 0}function qH(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const s=e[o].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const YH={name:"attention",resolveAll:function(e,t){let n,r,o,s,i,a,l,c,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;a=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const u={...e[n][1].end},h={...e[d][1].start};JH(u,-a),JH(h,a),s={type:a>1?"strongSequence":"emphasisSequence",start:u,end:{...e[n][1].end}},i={type:a>1?"strongSequence":"emphasisSequence",start:{...e[d][1].start},end:h},o={type:a>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[d][1].start}},r={type:a>1?"strong":"emphasis",start:{...s.start},end:{...i.end}},e[n][1].end={...s.start},e[d][1].start={...i.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=kH(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=kH(l,[["enter",r,t],["enter",s,t],["exit",s,t],["enter",o,t]]),l=kH(l,qH(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),l=kH(l,[["exit",o,t],["enter",i,t],["exit",i,t],["exit",r,t]]),e[d][1].end.offset-e[d][1].start.offset?(c=2,l=kH(l,[["enter",e[d][1],t],["exit",e[d][1],t]])):c=0,wH(e,n-1,d-n+3,l),d=n+l.length-c-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=GH(r);let s;return function(t){return s=t,e.enter("attentionSequence"),i(t)};function i(a){if(a===s)return e.consume(a),i;const l=e.exit("attentionSequence"),c=GH(a),d=!c||2===c&&o||n.includes(a),u=!o||2===o&&c||n.includes(r);return l._open=Boolean(42===s?d:d&&(o||!u)),l._close=Boolean(42===s?u:u&&(c||!d)),t(a)}}};function JH(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const XH={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o};function o(t){return _H(t)?(e.consume(t),s):64===t?n(t):l(t)}function s(e){return 43===e||45===e||46===e||IH(e)?(r=1,i(e)):l(e)}function i(t){return 58===t?(e.consume(t),r=0,a):(43===t||45===t||46===t||IH(t))&&r++<32?(e.consume(t),i):(r=0,l(t))}function a(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||TH(r)?n(r):(e.consume(r),a)}function l(t){return 64===t?(e.consume(t),c):AH(t)?(e.consume(t),l):n(t)}function c(e){return IH(e)?d(e):n(e)}function d(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):u(n)}function u(t){if((45===t||IH(t))&&r++<63){const n=45===t?u:d;return e.consume(t),n}return n(t)}}};const KH={partial:!0,tokenize:function(e,t,n){return function(t){return LH(t)?$H(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||RH(e)?t(e):n(e)}}};const ZH={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(LH(t))return $H(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return o(t)};function o(r){return e.attempt(ZH,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o}return n(t)};function o(n){return LH(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const QH={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return OH(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const eW={name:"characterReference",tokenize:function(e,t,n){const r=this;let o,s,i=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),a};function a(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,s=IH,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=DH,c):(e.enter("characterReferenceValue"),o=7,s=MH,c(t))}function c(a){if(59===a&&i){const o=e.exit("characterReferenceValue");return s!==IH||vH(r.sliceSerialize(o))?(e.enter("characterReferenceMarker"),e.consume(a),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(a)}return s(a)&&i++<o?(e.consume(a),c):n(a)}}};const tW={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},nW={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,o={partial:!0,tokenize:function(e,t,n){let o=0;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),LH(t)?$H(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===s?(e.enter("codeFencedFenceSequence"),d(t)):n(t)}function d(t){return t===s?(o++,e.consume(t),d):o>=a?(e.exit("codeFencedFenceSequence"),LH(t)?$H(e,u,"whitespace")(t):u(t)):n(t)}function u(r){return null===r||RH(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let s,i=0,a=0;return function(t){return function(t){const n=r.events[r.events.length-1];return i=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,s=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===s?(a++,e.consume(t),l):a<3?n(t):(e.exit("codeFencedFenceSequence"),LH(t)?$H(e,c,"whitespace")(t):c(t))}function c(n){return null===n||RH(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(tW,f,b)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return null===t||RH(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):LH(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),$H(e,u,"whitespace")(t)):96===t&&t===s?n(t):(e.consume(t),d)}function u(t){return null===t||RH(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||RH(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===s?n(t):(e.consume(t),h)}function f(t){return e.attempt(o,b,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return i>0&&LH(t)?$H(e,g,"linePrefix",i+1)(t):g(t)}function g(t){return null===t||RH(t)?e.check(tW,f,b)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||RH(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function b(n){return e.exit("codeFenced"),t(n)}}};const rW={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),$H(e,o,"linePrefix",5)(t)};function o(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?s(e):n(e)}function s(t){return null===t?a(t):RH(t)?e.attempt(oW,s,a)(t):(e.enter("codeFlowValue"),i(t))}function i(t){return null===t||RH(t)?(e.exit("codeFlowValue"),s(t)):(e.consume(t),i)}function a(n){return e.exit("codeIndented"),t(n)}}},oW={partial:!0,tokenize:function(e,t,n){const r=this;return o;function o(t){return r.parser.lazy[r.now().line]?n(t):RH(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):$H(e,s,"linePrefix",5)(t)}function s(e){const s=r.events[r.events.length-1];return s&&"linePrefix"===s[1].type&&s[2].sliceSerialize(s[1],!0).length>=4?t(e):RH(e)?o(e):n(e)}}};const sW={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,o=3;if(!("lineEnding"!==e[o][1].type&&"space"!==e[o][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=o;++t<r;)if("codeTextData"===e[t][1].type){e[o][1].type="codeTextPadding",e[r][1].type="codeTextPadding",o+=2,r-=2;break}t=o-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,o,s=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),i(t)};function i(t){return 96===t?(e.consume(t),s++,i):(e.exit("codeTextSequence"),a(t))}function a(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),a):96===t?(o=e.enter("codeTextSequence"),r=0,c(t)):RH(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||RH(t)?(e.exit("codeTextData"),a(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",l(n))}}};class iW{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&aW(this.left,n),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),aW(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),aW(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);aW(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);aW(this.left,t.reverse())}}}function aW(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function lW(e){const t={};let n,r,o,s,i,a,l,c=-1;const d=new iW(e);for(;++c<d.length;){for(;c in t;)c=t[c];if(n=d.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(c-1)[1].type&&(a=n[1]._tokenizer.events,o=0,o<a.length&&"lineEndingBlank"===a[o][1].type&&(o+=2),o<a.length&&"content"===a[o][1].type))for(;++o<a.length&&"content"!==a[o][1].type;)"chunkText"===a[o][1].type&&(a[o][1]._isInFirstContentOfListItem=!0,o++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,cW(d,c)),c=t[c],l=!0);else if(n[1]._container){for(o=c,r=void 0;o--&&(s=d.get(o),"lineEnding"===s[1].type||"lineEndingBlank"===s[1].type);)"enter"===s[0]&&(r&&(d.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);r&&(n[1].end={...d.get(r)[1].start},i=d.slice(r,c),i.unshift(n),d.splice(r,c-r+1,i))}}return wH(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!l}function cW(e,t){const n=e.get(t)[1],r=e.get(t)[2];let o=t-1;const s=[],i=n._tokenizer||r.parser[n.contentType](n.start),a=i.events,l=[],c={};let d,u,h=-1,f=n,p=0,m=0;const g=[m];for(;f;){for(;e.get(++o)[1]!==f;);s.push(o),f._tokenizer||(d=r.sliceStream(f),f.next||d.push(null),u&&i.defineSkip(f.start),f._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(d),f._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),u=f,f=f.next}for(f=n;++h<a.length;)"exit"===a[h][0]&&"enter"===a[h-1][0]&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(m=h+1,g.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(i.events=[],f?(f._tokenizer=void 0,f.previous=void 0):g.pop(),h=g.length;h--;){const t=a.slice(g[h],g[h+1]),n=s.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const dW={resolve:function(e){return lW(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?o(t):RH(t)?e.check(uW,s,o)(t):(e.consume(t),r)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},uW={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),$H(e,o,"linePrefix")};function o(o){if(null===o||RH(o))return n(o);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&"linePrefix"===s[1].type&&s[2].sliceSerialize(s[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}};function hW(e,t,n,r,o,s,i,a,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return function(t){if(60===t)return e.enter(r),e.enter(o),e.enter(s),e.consume(t),e.exit(s),u;if(null===t||32===t||41===t||TH(t))return n(t);return e.enter(r),e.enter(i),e.enter(a),e.enter("chunkString",{contentType:"string"}),p(t)};function u(n){return 62===n?(e.enter(s),e.consume(n),e.exit(s),e.exit(o),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(a),u(t)):null===t||60===t||RH(t)?n(t):(e.consume(t),92===t?f:h)}function f(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(o){return d||null!==o&&41!==o&&!PH(o)?d<c&&40===o?(e.consume(o),d++,p):41===o?(e.consume(o),d--,p):null===o||32===o||40===o||TH(o)?n(o):(e.consume(o),92===o?m:p):(e.exit("chunkString"),e.exit(a),e.exit(i),e.exit(r),t(o))}function m(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function fW(e,t,n,r,o,s){const i=this;let a,l=0;return function(t){return e.enter(r),e.enter(o),e.consume(t),e.exit(o),e.enter(s),c};function c(u){return l>999||null===u||91===u||93===u&&!a||94===u&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):93===u?(e.exit(s),e.enter(o),e.consume(u),e.exit(o),e.exit(r),t):RH(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(u))}function d(t){return null===t||91===t||93===t||RH(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),a||(a=!LH(t)),92===t?u:d)}function u(t){return 91===t||92===t||93===t?(e.consume(t),l++,d):d(t)}}function pW(e,t,n,r,o,s){let i;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(o),e.consume(t),e.exit(o),i=40===t?41:t,a;return n(t)};function a(n){return n===i?(e.enter(o),e.consume(n),e.exit(o),e.exit(r),t):(e.enter(s),l(n))}function l(t){return t===i?(e.exit(s),a(i)):null===t?n(t):RH(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),$H(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===i||null===t||RH(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?d:c)}function d(t){return t===i||92===t?(e.consume(t),c):c(t)}}function mW(e,t){let n;return function r(o){if(RH(o))return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r;if(LH(o))return $H(e,r,n?"linePrefix":"lineSuffix")(o);return t(o)}}const gW={name:"definition",tokenize:function(e,t,n){const r=this;let o;return function(t){return e.enter("definition"),function(t){return fW.call(r,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function s(t){return o=jH(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i):n(t)}function i(t){return PH(t)?mW(e,a)(t):a(t)}function a(t){return hW(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(yW,c,c)(t)}function c(t){return LH(t)?$H(e,d,"whitespace")(t):d(t)}function d(s){return null===s||RH(s)?(e.exit("definition"),r.parser.defined.push(o),t(s)):n(s)}}},yW={partial:!0,tokenize:function(e,t,n){return function(t){return PH(t)?mW(e,r)(t):n(t)};function r(t){return pW(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function o(t){return LH(t)?$H(e,s,"whitespace")(t):s(t)}function s(e){return null===e||RH(e)?t(e):n(e)}}};const bW={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return RH(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const xW={name:"headingAtx",resolve:function(e,t){let n,r,o=e.length-2,s=3;"whitespace"===e[s][1].type&&(s+=2);o-2>s&&"whitespace"===e[o][1].type&&(o-=2);"atxHeadingSequence"===e[o][1].type&&(s===o-1||o-4>s&&"whitespace"===e[o-2][1].type)&&(o-=s+1===o?2:4);o>s&&(n={type:"atxHeadingText",start:e[s][1].start,end:e[o][1].end},r={type:"chunkText",start:e[s][1].start,end:e[o][1].end,contentType:"text"},wH(e,s,o-s+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),o(t)}(t)};function o(t){return 35===t&&r++<6?(e.consume(t),o):null===t||PH(t)?(e.exit("atxHeadingSequence"),s(t)):n(t)}function s(n){return 35===n?(e.enter("atxHeadingSequence"),i(n)):null===n||RH(n)?(e.exit("atxHeading"),t(n)):LH(n)?$H(e,s,"whitespace")(n):(e.enter("atxHeadingText"),a(n))}function i(t){return 35===t?(e.consume(t),i):(e.exit("atxHeadingSequence"),s(t))}function a(t){return null===t||35===t||PH(t)?(e.exit("atxHeadingText"),s(t)):(e.consume(t),a)}}};const vW=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wW=["pre","script","style","textarea"],kW={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let o,s,i,a,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(a){return 33===a?(e.consume(a),d):47===a?(e.consume(a),s=!0,f):63===a?(e.consume(a),o=3,r.interrupt?t:O):_H(a)?(e.consume(a),i=String.fromCharCode(a),p):n(a)}function d(s){return 45===s?(e.consume(s),o=2,u):91===s?(e.consume(s),o=5,a=0,h):_H(s)?(e.consume(s),o=4,r.interrupt?t:O):n(s)}function u(o){return 45===o?(e.consume(o),r.interrupt?t:O):n(o)}function h(o){const s="CDATA[";return o===s.charCodeAt(a++)?(e.consume(o),6===a?r.interrupt?t:N:h):n(o)}function f(t){return _H(t)?(e.consume(t),i=String.fromCharCode(t),p):n(t)}function p(a){if(null===a||47===a||62===a||PH(a)){const l=47===a,c=i.toLowerCase();return l||s||!wW.includes(c)?vW.includes(i.toLowerCase())?(o=6,l?(e.consume(a),m):r.interrupt?t(a):N(a)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(a):s?g(a):y(a)):(o=1,r.interrupt?t(a):N(a))}return 45===a||IH(a)?(e.consume(a),i+=String.fromCharCode(a),p):n(a)}function m(o){return 62===o?(e.consume(o),r.interrupt?t:N):n(o)}function g(t){return LH(t)?(e.consume(t),g):C(t)}function y(t){return 47===t?(e.consume(t),C):58===t||95===t||_H(t)?(e.consume(t),b):LH(t)?(e.consume(t),y):C(t)}function b(t){return 45===t||46===t||58===t||95===t||IH(t)?(e.consume(t),b):x(t)}function x(t){return 61===t?(e.consume(t),v):LH(t)?(e.consume(t),x):y(t)}function v(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,w):LH(t)?(e.consume(t),v):k(t)}function w(t){return t===l?(e.consume(t),l=null,S):null===t||RH(t)?n(t):(e.consume(t),w)}function k(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||PH(t)?x(t):(e.consume(t),k)}function S(e){return 47===e||62===e||LH(e)?y(e):n(e)}function C(t){return 62===t?(e.consume(t),E):n(t)}function E(t){return null===t||RH(t)?N(t):LH(t)?(e.consume(t),E):n(t)}function N(t){return 45===t&&2===o?(e.consume(t),A):60===t&&1===o?(e.consume(t),T):62===t&&4===o?(e.consume(t),R):63===t&&3===o?(e.consume(t),O):93===t&&5===o?(e.consume(t),D):!RH(t)||6!==o&&7!==o?null===t||RH(t)?(e.exit("htmlFlowData"),j(t)):(e.consume(t),N):(e.exit("htmlFlowData"),e.check(SW,P,j)(t))}function j(t){return e.check(CW,_,P)(t)}function _(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return null===t||RH(t)?j(t):(e.enter("htmlFlowData"),N(t))}function A(t){return 45===t?(e.consume(t),O):N(t)}function T(t){return 47===t?(e.consume(t),i="",M):N(t)}function M(t){if(62===t){const n=i.toLowerCase();return wW.includes(n)?(e.consume(t),R):N(t)}return _H(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),M):N(t)}function D(t){return 93===t?(e.consume(t),O):N(t)}function O(t){return 62===t?(e.consume(t),R):45===t&&2===o?(e.consume(t),O):N(t)}function R(t){return null===t||RH(t)?(e.exit("htmlFlowData"),P(t)):(e.consume(t),R)}function P(n){return e.exit("htmlFlow"),t(n)}}},SW={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(KH,t,n)}}},CW={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(RH(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o;return n(t)};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const EW={name:"htmlText",tokenize:function(e,t,n){const r=this;let o,s,i;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),a};function a(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),v):63===t?(e.consume(t),b):_H(t)?(e.consume(t),S):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),s=0,f):_H(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function d(t){return null===t?n(t):45===t?(e.consume(t),u):RH(t)?(i=d,M(t)):(e.consume(t),d)}function u(t){return 45===t?(e.consume(t),h):d(t)}function h(e){return 62===e?T(e):45===e?u(e):d(e)}function f(t){const r="CDATA[";return t===r.charCodeAt(s++)?(e.consume(t),6===s?p:f):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),m):RH(t)?(i=p,M(t)):(e.consume(t),p)}function m(t){return 93===t?(e.consume(t),g):p(t)}function g(t){return 62===t?T(t):93===t?(e.consume(t),g):p(t)}function y(t){return null===t||62===t?T(t):RH(t)?(i=y,M(t)):(e.consume(t),y)}function b(t){return null===t?n(t):63===t?(e.consume(t),x):RH(t)?(i=b,M(t)):(e.consume(t),b)}function x(e){return 62===e?T(e):b(e)}function v(t){return _H(t)?(e.consume(t),w):n(t)}function w(t){return 45===t||IH(t)?(e.consume(t),w):k(t)}function k(t){return RH(t)?(i=k,M(t)):LH(t)?(e.consume(t),k):T(t)}function S(t){return 45===t||IH(t)?(e.consume(t),S):47===t||62===t||PH(t)?C(t):n(t)}function C(t){return 47===t?(e.consume(t),T):58===t||95===t||_H(t)?(e.consume(t),E):RH(t)?(i=C,M(t)):LH(t)?(e.consume(t),C):T(t)}function E(t){return 45===t||46===t||58===t||95===t||IH(t)?(e.consume(t),E):N(t)}function N(t){return 61===t?(e.consume(t),j):RH(t)?(i=N,M(t)):LH(t)?(e.consume(t),N):C(t)}function j(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),o=t,_):RH(t)?(i=j,M(t)):LH(t)?(e.consume(t),j):(e.consume(t),I)}function _(t){return t===o?(e.consume(t),o=void 0,A):null===t?n(t):RH(t)?(i=_,M(t)):(e.consume(t),_)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||PH(t)?C(t):(e.consume(t),I)}function A(e){return 47===e||62===e||PH(e)?C(e):n(e)}function T(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function M(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),D}function D(t){return LH(t)?$H(e,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):O(t)}function O(t){return e.enter("htmlTextData"),i(t)}}};const NW={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&wH(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,o,s,i=e.length,a=0;for(;i--;)if(n=e[i][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[i][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(o){if("enter"===e[i][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=i,"labelLink"!==n.type)){a=2;break}}else"labelEnd"===n.type&&(o=i);const l={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[r][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[r+a+2][1].end},end:{...e[o-2][1].start}};return s=[["enter",l,t],["enter",c,t]],s=kH(s,e.slice(r+1,r+a+3)),s=kH(s,[["enter",d,t]]),s=kH(s,qH(t.parser.constructs.insideSpan.null,e.slice(r+a+4,o-3),t)),s=kH(s,[["exit",d,t],e[o-2],e[o-1],["exit",c,t]]),s=kH(s,e.slice(o+1)),s=kH(s,[["exit",l,t]]),wH(e,r,e.length,s),e},tokenize:function(e,t,n){const r=this;let o,s,i=r.events.length;for(;i--;)if(("labelImage"===r.events[i][1].type||"labelLink"===r.events[i][1].type)&&!r.events[i][1]._balanced){o=r.events[i][1];break}return function(t){if(!o)return n(t);if(o._inactive)return d(t);return s=r.parser.defined.includes(jH(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),a};function a(t){return 40===t?e.attempt(jW,c,s?c:d)(t):91===t?e.attempt(_W,c,s?l:d)(t):s?c(t):d(t)}function l(t){return e.attempt(IW,c,d)(t)}function c(e){return t(e)}function d(e){return o._balanced=!0,n(e)}}},jW={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return PH(t)?mW(e,o)(t):o(t)}function o(t){return 41===t?c(t):hW(e,s,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function s(t){return PH(t)?mW(e,a)(t):c(t)}function i(e){return n(e)}function a(t){return 34===t||39===t||40===t?pW(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return PH(t)?mW(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},_W={tokenize:function(e,t,n){const r=this;return function(t){return fW.call(r,e,o,s,"reference","referenceMarker","referenceString")(t)};function o(e){return r.parser.defined.includes(jH(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function s(e){return n(e)}}},IW={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const AW={name:"labelStartImage",resolveAll:NW.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),o};function o(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),s):n(t)}function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const TW={name:"labelStartLink",resolveAll:NW.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),o};function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const MW={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),$H(e,t,"linePrefix")}}};const DW={name:"thematicBreak",tokenize:function(e,t,n){let r,o=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,s(e)}(t)};function s(s){return s===r?(e.enter("thematicBreakSequence"),i(s)):o>=3&&(null===s||RH(s))?(e.exit("thematicBreak"),t(s)):n(s)}function i(t){return t===r?(e.consume(t),o++,i):(e.exit("thematicBreakSequence"),LH(t)?$H(e,s,"whitespace")(t):s(t))}}};const OW={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(KH,(function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,$H(e,t,"listItemIndent",r.containerState.size+1)(n)}),(function(n){if(r.containerState.furtherBlankLines||!LH(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(PW,t,o)(n)}));function o(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,$H(e,e.attempt(OW,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,o=r.events[r.events.length-1];let s=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0,i=0;return function(t){const o=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===o?!r.containerState.marker||t===r.containerState.marker:MH(t)){if(r.containerState.type||(r.containerState.type=o,e.enter(o,{_container:!0})),"listUnordered"===o)return e.enter("listItemPrefix"),42===t||45===t?e.check(DW,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),a(t)}return n(t)};function a(t){return MH(t)&&++i<10?(e.consume(t),a):(!r.interrupt||i<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(KH,r.interrupt?n:c,e.attempt(RW,u,d))}function c(e){return r.containerState.initialBlankLine=!0,s++,u(e)}function d(t){return LH(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),u):n(t)}function u(n){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},RW={partial:!0,tokenize:function(e,t,n){const r=this;return $H(e,(function(e){const o=r.events[r.events.length-1];return!LH(e)&&o&&"listItemPrefixWhitespace"===o[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},PW={partial:!0,tokenize:function(e,t,n){const r=this;return $H(e,(function(e){const o=r.events[r.events.length-1];return o&&"listItemIndent"===o[1].type&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)}};const LW={name:"setextUnderline",resolveTo:function(e,t){let n,r,o,s=e.length;for(;s--;)if("enter"===e[s][0]){if("content"===e[s][1].type){n=s;break}"paragraph"===e[s][1].type&&(r=s)}else"content"===e[s][1].type&&e.splice(s,1),o||"definition"!==e[s][1].type||(o=s);const i={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",i,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end={...e[o][1].end}):e[n][1]=i;return e.push(["exit",i,t]),e},tokenize:function(e,t,n){const r=this;let o;return function(t){let i,a=r.events.length;for(;a--;)if("lineEnding"!==r.events[a][1].type&&"linePrefix"!==r.events[a][1].type&&"content"!==r.events[a][1].type){i="paragraph"===r.events[a][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||i))return e.enter("setextHeadingLine"),o=t,function(t){return e.enter("setextHeadingLineSequence"),s(t)}(t);return n(t)};function s(t){return t===o?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),LH(t)?$H(e,i,"lineSuffix")(t):i(t))}function i(r){return null===r||RH(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const zW={tokenize:function(e){const t=this,n=e.attempt(KH,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,$H(e,e.attempt(this.parser.constructs.flow,r,e.attempt(dW,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const FW={resolveAll:VW()},BW=$W("string"),UW=$W("text");function $W(e){return{resolveAll:VW("text"===e?HW:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],o=t.attempt(r,s,i);return s;function s(e){return l(e)?o(e):i(e)}function i(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return l(e)?(t.exit("data"),o(e)):(t.consume(e),a)}function l(e){if(null===e)return!0;const t=r[e];let o=-1;if(t)for(;++o<t.length;){const e=t[o];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function VW(e){return function(t,n){let r,o=-1;for(;++o<=t.length;)void 0===r?t[o]&&"data"===t[o][1].type&&(r=o,o++):t[o]&&"data"===t[o][1].type||(o!==r+2&&(t[r][1].end=t[o-1][1].end,t.splice(r+2,o-r-2),o=r+2),r=void 0);return e?e(t,n):t}}function HW(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],o=t.sliceStream(r);let s,i=o.length,a=-1,l=0;for(;i--;){const e=o[i];if("string"==typeof e){for(a=e.length;32===e.charCodeAt(a-1);)l++,a--;if(a)break;a=-1}else if(-2===e)s=!0,l++;else if(-1!==e){i++;break}}if(l){const o={type:n===e.length||s||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...o.start},r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}const WW={42:OW,43:OW,45:OW,48:OW,49:OW,50:OW,51:OW,52:OW,53:OW,54:OW,55:OW,56:OW,57:OW,62:ZH},GW={91:gW},qW={[-2]:rW,[-1]:rW,32:rW},YW={35:xW,42:DW,45:[LW,DW],60:kW,61:LW,95:DW,96:nW,126:nW},JW={38:eW,92:QH},XW={[-5]:MW,[-4]:MW,[-3]:MW,33:AW,38:eW,42:YH,60:[XH,EW],91:TW,92:[bW,QH],93:NW,95:YH,96:sW},KW={null:[YH,FW]},ZW=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:GW,disable:{null:[]},document:WW,flow:YW,flowInitial:qW,insideSpan:KW,string:JW,text:XW},Symbol.toStringTag,{value:"Module"}));function QW(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},s=[];let i=[],a=[];const l={attempt:g((function(e,t){y(e,t.from)})),check:g(m),consume:function(e){RH(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,b()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),a.push(n),n},exit:function(e){const t=a.pop();return t.end=h(),c.events.push(["exit",t,c]),t},interrupt:g(m,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){o[e.line]=e.column,b()},events:[],now:h,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let o;for(;++n<e.length;){const s=e[n];let i;if("string"==typeof s)i=s;else switch(s){case-5:i="\r";break;case-4:i="\n";break;case-3:i="\r\n";break;case-2:i=t?" ":"\t";break;case-1:if(!t&&o)continue;i=" ";break;default:i=String.fromCharCode(s)}o=-2===s,r.push(i)}return r.join("")}(u(e),t)},sliceStream:u,write:function(e){if(i=kH(i,e),f(),null!==i[i.length-1])return[];return y(t,0),c.events=qH(s,c.events,c),c.events}};let d=t.tokenize.call(c,l);return t.resolveAll&&s.push(t),c;function u(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,s=t.end._bufferIndex;let i;if(n===o)i=[e[n].slice(r,s)];else{if(i=e.slice(n,o),r>-1){const e=i[0];"string"==typeof e?i[0]=e.slice(r):i.shift()}s>0&&i.push(e[o].slice(0,s))}return i}(i,e)}function h(){const{_bufferIndex:e,_index:t,line:n,column:o,offset:s}=r;return{_bufferIndex:e,_index:t,line:n,column:o,offset:s}}function f(){let e;for(;r._index<i.length;){const t=i[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)p(t.charCodeAt(r._bufferIndex));else p(t)}}function p(e){d=d(e)}function m(e,t){t.restore()}function g(e,t){return function(n,o,s){let i,d,u,f;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function p(e){return i=e,d=0,0===e.length?s:m(e[d])}function m(e){return function(n){f=function(){const e=h(),t=c.previous,n=c.currentConstruct,o=c.events.length,s=Array.from(a);return{from:o,restore:i};function i(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=o,a=s,b()}}(),u=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return y();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,y)(n)}}function g(t){return e(u,f),o}function y(e){return f.restore(),++d<i.length?m(i[d]):s}}}function y(e,t){e.resolveAll&&!s.includes(e)&&s.push(e),e.resolve&&wH(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function b(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function eG(e){const t={constructs:function(e){const t={};let n=-1;for(;++n<e.length;)CH(t,e[n]);return t}([ZW,...(e||{}).extensions||[]]),content:n(VH),defined:[],document:n(HH),flow:n(zW),lazy:{},string:n(BW),text:n(UW)};return t;function n(e){return function(n){return QW(t,e,n)}}}const tG=/[\0\t\n\r]/g;const nG=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rG(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return NH(n.slice(t?2:1),t?16:10)}return vH(n)||e}const oG={}.hasOwnProperty;function sG(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(te),autolinkProtocol:E,autolinkEmail:E,atxHeading:s(K),blockQuote:s(G),characterEscape:E,characterReference:E,codeFenced:s(q),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:s(q,i),codeText:s(Y,i),codeTextData:E,data:E,codeFlowValue:E,definition:s(J),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:s(X),hardBreakEscape:s(Z),hardBreakTrailing:s(Z),htmlFlow:s(Q,i),htmlFlowData:E,htmlText:s(Q,i),htmlTextData:E,image:s(ee),label:i,link:s(te),listItem:s(re),listItemValue:h,listOrdered:s(ne,u),listUnordered:s(ne),paragraph:s(oe),reference:F,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:s(K),strong:s(se),thematicBreak:s(ae)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:W,autolinkProtocol:H,blockQuote:l(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:$,characterReference:V,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:N,codeIndented:l(y),codeText:l(T),codeTextData:N,data:N,definition:l(),definitionDestinationString:v,definitionLabelString:b,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(_),hardBreakTrailing:l(_),htmlFlow:l(I),htmlFlowData:N,htmlText:l(A),htmlTextData:N,image:l(D),label:R,labelText:O,lineEnding:j,link:l(M),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:B,resourceDestinationString:P,resourceTitleString:L,resource:z,setextHeading:l(C),setextHeadingLineSequence:S,setextHeadingText:k,strong:l(),thematicBreak:l()}};aG(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const s={stack:[r],tokenStack:[],config:t,enter:a,exit:c,buffer:i,resume:d,data:n},l=[];let u=-1;for(;++u<e.length;)if("listOrdered"===e[u][1].type||"listUnordered"===e[u][1].type)if("enter"===e[u][0])l.push(u);else{u=o(e,l.pop(),u)}for(u=-1;++u<e.length;){const n=t[e[u][0]];oG.call(n,e[u][1].type)&&n[e[u][1].type].call(Object.assign({sliceSerialize:e[u][2].sliceSerialize},s),e[u][1])}if(s.tokenStack.length>0){const e=s.tokenStack[s.tokenStack.length-1];(e[1]||cG).call(s,void 0,e[0])}for(r.position={start:iG(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:iG(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},u=-1;++u<t.transforms.length;)r=t.transforms[u](r)||r;return r}function o(e,t,n){let r,o,s,i,a=t-1,l=-1,c=!1;for(;++a<=n;){const t=e[a];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,i=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||i||l||s||(s=a),i=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:i=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let i=a;for(o=void 0;i--;){const t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;o&&(e[o][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",o=i}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}s&&(!o||s<o)&&(r._spread=!0),r.end=Object.assign({},o?e[o][1].start:t[1].end),e.splice(o||a,0,["exit",r,t[2]]),a++,n++}if("listItemPrefix"===t[1].type){const o={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=o,e.splice(a,0,["enter",o,t[2]]),a++,n++,s=void 0,i=!0}}}return e[t][1]._spread=c,n}function s(e,t){return n;function n(n){a.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function a(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:iG(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+GV({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||cG).call(this,e,r[0])}n.position.end=iG(e.end)}function d(){return function(e){return yH(e,"boolean"!=typeof gH.includeImageAlt||gH.includeImageAlt,"boolean"!=typeof gH.includeHtml||gH.includeHtml)}(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function f(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function p(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function b(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=jH(this.sliceSerialize(e)).toLowerCase()}function x(){const e=this.resume();this.stack[this.stack.length-1].title=e}function v(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function S(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function E(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ie(),n.position={start:iG(e.start),end:void 0},t.push(n)),this.stack.push(n)}function N(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=iG(e.end)}function j(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=iG(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(E.call(this,e),N.call(this,e))}function _(){this.data.atHardBreak=!0}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function A(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function M(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function D(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function O(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(nG,rG)}(t),n.identifier=jH(t).toLowerCase()}function R(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function P(){const e=this.resume();this.stack[this.stack.length-1].url=e}function L(){const e=this.resume();this.stack[this.stack.length-1].title=e}function z(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function B(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=jH(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function U(e){this.data.characterReferenceType=e.type}function $(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=NH(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=vH(t)}this.stack[this.stack.length-1].value+=r}function V(e){this.stack.pop().position.end=iG(e.end)}function H(e){N.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){N.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function G(){return{type:"blockquote",children:[]}}function q(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function J(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function K(){return{type:"heading",depth:0,children:[]}}function Z(){return{type:"break"}}function Q(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function ae(){return{type:"thematicBreak"}}}(n)(function(e){for(;!lW(e););return e}(eG(n).document().write(function(){let e,t=1,n="",r=!0;return function(o,s,i){const a=[];let l,c,d,u,h;for(o=n+("string"==typeof o?o.toString():new TextDecoder(s||void 0).decode(o)),d=0,n="",r&&(65279===o.charCodeAt(0)&&d++,r=void 0);d<o.length;){if(tG.lastIndex=d,l=tG.exec(o),u=l&&void 0!==l.index?l.index:o.length,h=o.charCodeAt(u),!l){n=o.slice(d);break}if(10===h&&d===u&&e)a.push(-3),e=void 0;else switch(e&&(a.push(-5),e=void 0),d<u&&(a.push(o.slice(d,u)),t+=u-d),h){case 0:a.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),a.push(-2);t++<c;)a.push(-1);break;case 10:a.push(-4),t=1;break;default:e=!0,t=1}d=u+1}return i&&(e&&a.push(-5),n&&a.push(n),a.push(null)),a}}()(e,t,!0))))}function iG(e){return{line:e.line,column:e.column,offset:e.offset}}function aG(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?aG(e,r):lG(e,r)}}function lG(e,t){let n;for(n in t)if(oG.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function cG(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+GV({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+GV({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+GV({start:t.start,end:t.end})+") is still open")}function dG(e){const t=this;t.parser=function(n){return sG(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function uG(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const o=e.all(t),s=o[0];s&&"text"===s.type?s.value="["+s.value:o.unshift({type:"text",value:"["});const i=o[o.length-1];return i&&"text"===i.type?i.value+=r:o.push({type:"text",value:r}),o}function hG(e){const t=e.spread;return null==t?e.children.length>1:t}function fG(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const s=[];for(;r;)s.push(pG(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return s.push(pG(t.slice(o),o>0,!1)),s.join("")}function pG(e,t,n){let r=0,o=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(o-1);for(;9===t||32===t;)o--,t=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}const mG={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),o=UH(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let i,a=e.footnoteCounts.get(r);void 0===a?(a=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uG(e,t);const o={src:UH(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(o.title=r.title);const s={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,s),e.applyData(t,s)},image:function(e,t){const n={src:UH(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uG(e,t);const o={href:UH(r.url||"")};null!==r.title&&void 0!==r.title&&(o.title=r.title);const s={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)},link:function(e,t){const n={href:UH(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),o=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=hG(n[r])}return t}(n):hG(t),s={},i=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const e=r[a];(o||0!==a||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||o?i.push(e):i.push(...e.children)}const l=r[r.length-1];l&&(o||"element"!==l.type||"p"!==l.tagName)&&i.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:s,children:i};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let o=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++o<r.length;){const e=r[o];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),o.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},s=HV(t.children[1]),i=VV(t.children[t.children.length-1]);s&&i&&(r.position={start:s,end:i}),o.push(r)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,s),e.applyData(t,s)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,o=0===(r?r.indexOf(t):1)?"th":"td",s=n&&"table"===n.type?n.align:void 0,i=s?s.length:t.children.length;let a=-1;const l=[];for(;++a<i;){const n=t.children[a],r={},i=s?s[a]:void 0;i&&(r.align=i);let c={type:"element",tagName:o,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:fG(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:gG,yaml:gG,definition:gG,footnoteDefinition:gG};function gG(){}const yG="object"==typeof self?self:globalThis,bG=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=o=>{if(e.has(o))return e.get(o);const[s,i]=t[o];switch(s){case 0:case-1:return n(i,o);case 1:{const e=n([],o);for(const t of i)e.push(r(t));return e}case 2:{const e=n({},o);for(const[t,n]of i)e[r(t)]=r(n);return e}case 3:return n(new Date(i),o);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,n]of i)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,o);for(const t of i)e.add(r(t));return e}case 7:{const{name:e,message:t}=i;return n(new yG[e](t),o)}case 8:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new yG[s](i),o)};return r})(new Map,e)(0),xG="",{toString:vG}={},{keys:wG}=Object,kG=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=vG.call(e).slice(8,-1);switch(n){case"Array":return[1,xG];case"Object":return[2,xG];case"Date":return[3,xG];case"RegExp":return[4,xG];case"Map":return[5,xG];case"Set":return[6,xG]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},SG=([e,t])=>0===e&&("function"===t||"symbol"===t),CG=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const o=(e,t)=>{const o=r.push(e)-1;return n.set(t,o),o},s=r=>{if(n.has(r))return n.get(r);let[i,a]=kG(r);switch(i){case 0:{let t=r;switch(a){case"bigint":i=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+a);t=null;break;case"undefined":return o([-1],r)}return o([i,t],r)}case 1:{if(a)return o([a,[...r]],r);const e=[],t=o([i,e],r);for(const n of r)e.push(s(n));return t}case 2:{if(a)switch(a){case"BigInt":return o([a,r.toString()],r);case"Boolean":case"Number":case"String":return o([a,r.valueOf()],r)}if(t&&"toJSON"in r)return s(r.toJSON());const n=[],l=o([i,n],r);for(const t of wG(r))!e&&SG(kG(r[t]))||n.push([s(t),s(r[t])]);return l}case 3:return o([i,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return o([i,{source:e,flags:t}],r)}case 5:{const t=[],n=o([i,t],r);for(const[o,i]of r)(e||!SG(kG(o))&&!SG(kG(i)))&&t.push([s(o),s(i)]);return n}case 6:{const t=[],n=o([i,t],r);for(const o of r)!e&&SG(kG(o))||t.push(s(o));return n}}const{message:l}=r;return o([i,{name:a,message:l}],r)};return s})(!(t||n),!!t,new Map,r)(e),r},EG="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?bG(CG(e,t)):structuredClone(e):(e,t)=>bG(CG(e,t));function NG(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function jG(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const _G=function(e){if(null==e)return AG;if("function"==typeof e)return IG(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=_G(e[n]);return IG(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return IG(n);function n(n){const r=n;let o;for(o in e)if(r[o]!==t[o])return!1;return!0}}(e);if("string"==typeof e)return function(e){return IG(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function IG(e){return function(t,n,r){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function AG(){return!0}const TG=[],MG=!0,DG=!1;function OG(e,t,n,r){let o;"function"==typeof t&&"function"!=typeof n?(r=n,n=t):o=t;const s=_G(o),i=r?-1:1;!function e(o,a,l){const c=o&&"object"==typeof o?o:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(d,"name",{value:"node ("+o.type+(e?"<"+e+">":"")+")"})}return d;function d(){let c,d,u,h=TG;if((!t||s(o,a,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[MG,e];return null==e?TG:[e]}(n(o,l)),h[0]===DG))return h;if("children"in o&&o.children){const t=o;if(t.children&&"skip"!==h[0])for(d=(r?t.children.length:-1)+i,u=l.concat(t);d>-1&&d<t.children.length;){const n=t.children[d];if(c=e(n,d,u)(),c[0]===DG)return c;d="number"==typeof c[1]?c[1]:d+i}}return h}}(e,void 0,[])()}function RG(e,t,n,r){let o,s,i;"function"==typeof t?(s=void 0,i=t,o=n):(s=t,i=n,o=r),OG(e,s,(function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return i(e,r,n)}),o)}const PG={}.hasOwnProperty,LG={};function zG(e,t){e.position&&(t.position=function(e){const t=HV(e),n=VV(e);if(t&&n)return{start:t,end:n}}(e))}function FG(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,o=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&o&&Object.assign(n.properties,EG(o)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function BG(e,t){const n=t.data||{},r=!("value"in t)||PG.call(n,"hProperties")||PG.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function UG(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function $G(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function VG(e,t){const n=function(e,t){const n=t||LG,r=new Map,o=new Map,s=new Map,i={...mG,...n.handlers},a={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const o=a.one(n[r],e);if(o){if(r&&"break"===n[r-1].type&&(Array.isArray(o)||"text"!==o.type||(o.value=$G(o.value)),!Array.isArray(o)&&"element"===o.type)){const e=o.children[0];e&&"text"===e.type&&(e.value=$G(e.value))}Array.isArray(o)?t.push(...o):t.push(o)}}}return t},applyData:FG,definitionById:r,footnoteById:o,footnoteCounts:s,footnoteOrder:[],handlers:i,one:function(e,t){const n=e.type,r=a.handlers[n];if(PG.call(a.handlers,n)&&r)return r(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=EG(n);return r.children=a.all(e),r}return EG(e)}return(a.options.unknownHandler||BG)(a,e,t)},options:n,patch:zG,wrap:UG};return RG(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:o,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),a}(e,t),r=n.one(e,void 0),o=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||NG,r=e.options.footnoteBackLabel||jG,o=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const o=e.footnoteById.get(e.footnoteOrder[l]);if(!o)continue;const s=e.all(o),i=String(o.identifier).toUpperCase(),c=UH(i.toLowerCase());let d=0;const u=[],h=e.footnoteCounts.get(i);for(;void 0!==h&&++d<=h;){u.length>0&&u.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,d);"string"==typeof e&&(e={type:"text",value:e}),u.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,d),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const f=s[s.length-1];if(f&&"element"===f.type&&"p"===f.tagName){const e=f.children[f.children.length-1];e&&"text"===e.type?e.value+=" ":f.children.push({type:"text",value:" "}),f.children.push(...u)}else s.push(...u);const p={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(s,!0)};e.patch(o,p),a.push(p)}if(0!==a.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...EG(i),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:"\n"}]}}(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&s.children.push({type:"text",value:"\n"},o),s}function HG(e,t){return e&&"run"in e?async function(n,r){const o=VG(n,{file:r,...t});await e.run(o,r)}:function(n,r){return VG(n,{file:r,...e||t})}}function WG(e){if(e)throw e}var GG,qG;var YG=function(){if(qG)return GG;qG=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===t.call(e)},s=function(n){if(!n||"[object Object]"!==t.call(n))return!1;var r,o=e.call(n,"constructor"),s=n.constructor&&n.constructor.prototype&&e.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!o&&!s)return!1;for(r in n);return void 0===r||e.call(n,r)},i=function(e,t){n&&"__proto__"===t.name?n(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},a=function(t,n){if("__proto__"===n){if(!e.call(t,n))return;if(r)return r(t,n).value}return t[n]};return GG=function e(){var t,n,r,l,c,d,u=arguments[0],h=1,f=arguments.length,p=!1;for("boolean"==typeof u&&(p=u,u=arguments[1]||{},h=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});h<f;++h)if(null!=(t=arguments[h]))for(n in t)r=a(u,n),u!==(l=a(t,n))&&(p&&l&&(s(l)||(c=o(l)))?(c?(c=!1,d=r&&o(r)?r:[]):d=r&&s(r)?r:{},i(u,{name:n,newValue:e(p,d,l)})):void 0!==l&&i(u,{name:n,newValue:l}));return u},GG}();const JG=bl(YG);function XG(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function KG(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function o(s,...i){const a=e[++n];let l=-1;if(s)r(s);else{for(;++l<t.length;)null!==i[l]&&void 0!==i[l]||(i[l]=t[l]);t=i,a?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let a;r&&t.push(o);try{a=e.apply(this,t)}catch(s){if(r&&n)throw s;return o(s)}r||(a&&a.then&&"function"==typeof a.then?a.then(i,o):a instanceof Error?o(a):i(a))}function o(e,...r){n||(n=!0,t(e,...r))}function i(e){o(null,e)}}(a,o)(...i):r(null,...i)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const ZG={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');QG(e);let n,r=0,o=-1,s=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;s--;)if(47===e.codePointAt(s)){if(n){r=s+1;break}}else o<0&&(n=!0,o=s+1);return o<0?"":e.slice(r,o)}if(t===e)return"";let i=-1,a=t.length-1;for(;s--;)if(47===e.codePointAt(s)){if(n){r=s+1;break}}else i<0&&(n=!0,i=s+1),a>-1&&(e.codePointAt(s)===t.codePointAt(a--)?a<0&&(o=s):(a=-1,o=i));r===o?o=i:o<0&&(o=e.length);return e.slice(r,o)},dirname:function(e){if(QG(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){QG(e);let t,n=e.length,r=-1,o=0,s=-1,i=0;for(;n--;){const a=e.codePointAt(n);if(47!==a)r<0&&(t=!0,r=n+1),46===a?s<0?s=n:1!==i&&(i=1):s>-1&&(i=-1);else if(t){o=n+1;break}}if(s<0||r<0||0===i||1===i&&s===r-1&&s===o+1)return"";return e.slice(s,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)QG(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){QG(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,o="",s=0,i=-1,a=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(i===l-1||1===a);else if(i!==l-1&&2===a){if(o.length<2||2!==s||46!==o.codePointAt(o.length-1)||46!==o.codePointAt(o.length-2))if(o.length>2){if(r=o.lastIndexOf("/"),r!==o.length-1){r<0?(o="",s=0):(o=o.slice(0,r),s=o.length-1-o.lastIndexOf("/")),i=l,a=0;continue}}else if(o.length>0){o="",s=0,i=l,a=0;continue}t&&(o=o.length>0?o+"/..":"..",s=2)}else o.length>0?o+="/"+e.slice(i+1,l):o=e.slice(i+1,l),s=l-i-1;i=l,a=0}else 46===n&&a>-1?a++:a=-1}return o}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function QG(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const eq={cwd:function(){return"/"}};function tq(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function nq(e){if("string"==typeof e)e=new URL(e);else if(!tq(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const rq=["history","path","basename","stem","extname","dirname"];class oq{constructor(e){let t;t=e?tq(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":eq.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<rq.length;){const e=rq[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)rq.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?ZG.basename(this.path):void 0}set basename(e){iq(e,"basename"),sq(e,"basename"),this.path=ZG.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?ZG.dirname(this.path):void 0}set dirname(e){aq(this.basename,"dirname"),this.path=ZG.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?ZG.extname(this.path):void 0}set extname(e){if(sq(e,"extname"),aq(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ZG.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){tq(e)&&(e=nq(e)),iq(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?ZG.basename(this.path,this.extname):void 0}set stem(e){iq(e,"stem"),sq(e,"stem"),this.path=ZG.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new XV(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function sq(e,t){if(e&&e.includes(ZG.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ZG.sep+"`")}function iq(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function aq(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const lq=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},cq={}.hasOwnProperty;class dq extends lq{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=KG()}copy(){const e=new dq;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(JG(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(pq("data",this.frozen),this.namespace[e]=t,this):cq.call(this.namespace,e)&&this.namespace[e]||void 0:e?(pq("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=yq(e),n=this.parser||this.Parser;return hq("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),hq("process",this.parser||this.Parser),fq("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,o){const s=yq(e),i=n.parse(s);function a(e,n){e||!n?o(e):r?r(n):t(void 0,n)}n.run(i,s,(function(e,t,r){if(e||!t||!r)return a(e);const o=t,s=n.stringify(o,r);!function(e){return"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)}(s)?r.result=s:r.value=s,a(e,r)}))}}processSync(e){let t,n=!1;return this.freeze(),hq("processSync",this.parser||this.Parser),fq("processSync",this.compiler||this.Compiler),this.process(e,(function(e,r){n=!0,WG(e),t=r})),gq("processSync","process",n),t}run(e,t,n){mq(e),this.freeze();const r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?o(void 0,n):new Promise(o);function o(o,s){const i=yq(t);r.run(e,i,(function(t,r,i){const a=r||e;t?s(t):o?o(a):n(void 0,a,i)}))}}runSync(e,t){let n,r=!1;return this.run(e,t,(function(e,t){WG(e),n=t,r=!0})),gq("runSync","run",r),n}stringify(e,t){this.freeze();const n=yq(t),r=this.compiler||this.Compiler;return fq("stringify",r),mq(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if(pq("use",this.frozen),null==e);else if("function"==typeof e)a(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?i(e):s(e)}return this;function o(e){if("function"==typeof e)a(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;a(t,n)}else s(e)}}function s(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(e.plugins),e.settings&&(r.settings=JG(!0,r.settings,e.settings))}function i(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){o(e[t])}}}function a(e,t){let r=-1,o=-1;for(;++r<n.length;)if(n[r][0]===e){o=r;break}if(-1===o)n.push([e,...t]);else if(t.length>0){let[r,...s]=t;const i=n[o][1];XG(i)&&XG(r)&&(r=JG(!0,i,r)),n[o]=[e,r,...s]}}}}const uq=(new dq).freeze();function hq(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function fq(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function pq(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function mq(e){if(!XG(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function gq(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function yq(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new oq(e)}const bq=[],xq={allowDangerousHtml:!0},vq=/^(https?|ircs?|mailto|xmpp)$/i,wq=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function kq(e){const t=function(e){const t=e.rehypePlugins||bq,n=e.remarkPlugins||bq,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...xq}:xq,o=uq().use(dG).use(n).use(HG,r).use(t);return o}(e),n=function(e){const t=e.children||"",n=new oq;"string"==typeof t&&(n.value=t);return n}(e);return function(e,t){const n=t.allowedElements,r=t.allowElement,o=t.components,s=t.disallowedElements,i=t.skipHtml,a=t.unwrapDisallowed,l=t.urlTransform||Sq;for(const d of wq)Object.hasOwn(t,d.from)&&(d.from,d.to&&d.to,d.id);t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:"root"===e.type?e.children:[e]});return RG(e,c),oH(e,{Fragment:A.Fragment,components:o,ignoreInvalidStyle:!0,jsx:A.jsx,jsxs:A.jsxs,passKeys:!0,passNode:!0});function c(e,t,o){if("raw"===e.type&&o&&"number"==typeof t)return i?o.children.splice(t,1):o.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in mH)if(Object.hasOwn(mH,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=mH[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let i=n?!n.includes(e.tagName):!!s&&s.includes(e.tagName);if(!i&&r&&"number"==typeof t&&(i=!r(e,t,o)),i&&o&&"number"==typeof t)return a&&e.children?o.children.splice(t,1,...e.children):o.children.splice(t,1),t}}}(t.runSync(t.parse(n),n),e)}function Sq(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),o=e.indexOf("/");return-1===t||-1!==o&&t>o||-1!==n&&t>n||-1!==r&&t>r||vq.test(e.slice(0,t))?e:""}function Cq(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Eq={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Nq(e){Eq=e}const jq={exec:()=>null};function _q(e,t=""){let n="string"==typeof e?e:e.source;const r={replace:(e,t)=>{let o="string"==typeof t?t:t.source;return o=o.replace(Iq.caret,"$1"),n=n.replace(e,o),r},getRegex:()=>new RegExp(n,t)};return r}const Iq={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Aq=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Tq=/(?:[*+-]|\d{1,9}[.)])/,Mq=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Dq=_q(Mq).replace(/bull/g,Tq).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Oq=_q(Mq).replace(/bull/g,Tq).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Rq=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pq=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Lq=_q(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Pq).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),zq=_q(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Tq).getRegex(),Fq="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Bq=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Uq=_q("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",Bq).replace("tag",Fq).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$q=_q(Rq).replace("hr",Aq).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Fq).getRegex(),Vq={blockquote:_q(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$q).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:Lq,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Aq,html:Uq,lheading:Dq,list:zq,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:$q,table:jq,text:/^[^\n]+/},Hq=_q("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Aq).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Fq).getRegex(),Wq={...Vq,lheading:Oq,table:Hq,paragraph:_q(Rq).replace("hr",Aq).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Hq).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Fq).getRegex()},Gq={...Vq,html:_q("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Bq).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:jq,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:_q(Rq).replace("hr",Aq).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Dq).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},qq=/^( {2,}|\\)\n(?!\s*$)/,Yq=/[\p{P}\p{S}]/u,Jq=/[\s\p{P}\p{S}]/u,Xq=/[^\s\p{P}\p{S}]/u,Kq=_q(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Jq).getRegex(),Zq=/(?!~)[\p{P}\p{S}]/u,Qq=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,eY=_q(Qq,"u").replace(/punct/g,Yq).getRegex(),tY=_q(Qq,"u").replace(/punct/g,Zq).getRegex(),nY="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",rY=_q(nY,"gu").replace(/notPunctSpace/g,Xq).replace(/punctSpace/g,Jq).replace(/punct/g,Yq).getRegex(),oY=_q(nY,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,Zq).getRegex(),sY=_q("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Xq).replace(/punctSpace/g,Jq).replace(/punct/g,Yq).getRegex(),iY=_q(/\\(punct)/,"gu").replace(/punct/g,Yq).getRegex(),aY=_q(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),lY=_q(Bq).replace("(?:--\x3e|$)","--\x3e").getRegex(),cY=_q("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",lY).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),dY=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,uY=_q(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",dY).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),hY=_q(/^!?\[(label)\]\[(ref)\]/).replace("label",dY).replace("ref",Pq).getRegex(),fY=_q(/^!?\[(ref)\](?:\[\])?/).replace("ref",Pq).getRegex(),pY={_backpedal:jq,anyPunctuation:iY,autolink:aY,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:qq,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:jq,emStrongLDelim:eY,emStrongRDelimAst:rY,emStrongRDelimUnd:sY,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:uY,nolink:fY,punctuation:Kq,reflink:hY,reflinkSearch:_q("reflink|nolink(?!\\()","g").replace("reflink",hY).replace("nolink",fY).getRegex(),tag:cY,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:jq},mY={...pY,link:_q(/^!?\[(label)\]\((.*?)\)/).replace("label",dY).getRegex(),reflink:_q(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dY).getRegex()},gY={...pY,emStrongRDelimAst:oY,emStrongLDelim:tY,url:_q(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},yY={...gY,br:_q(qq).replace("{2,}","*").getRegex(),text:_q(gY.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},bY={normal:Vq,gfm:Wq,pedantic:Gq},xY={normal:pY,gfm:gY,breaks:yY,pedantic:mY},vY={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wY=e=>vY[e];function kY(e,t){if(t){if(Iq.escapeTest.test(e))return e.replace(Iq.escapeReplace,wY)}else if(Iq.escapeTestNoEncode.test(e))return e.replace(Iq.escapeReplaceNoEncode,wY);return e}function SY(e){try{e=encodeURI(e).replace(Iq.percentDecode,"%")}catch{return null}return e}function CY(e,t){var n;const r=e.replace(Iq.findPipe,((e,t,n)=>{let r=!1,o=t;for(;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"})).split(Iq.splitPipe);let o=0;if(r[0].trim()||r.shift(),r.length>0&&!(null==(n=r.at(-1))?void 0:n.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(Iq.slashPipe,"|");return r}function EY(e,t,n){const r=e.length;if(0===r)return"";let o=0;for(;o<r;){if(e.charAt(r-o-1)!==t)break;o++}return e.slice(0,r-o)}function NY(e,t,n,r,o){const s=t.href,i=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:s,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:s,title:i,text:a}}class jY{constructor(e){s(this,"options"),s(this,"rules"),s(this,"lexer"),this.options=e||Eq}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:EY(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t,n){const r=e.match(n.other.indentCodeCompensation);if(null===r)return t;const o=r[1];return t.split("\n").map((e=>{const t=e.match(n.other.beginningSpace);if(null===t)return e;const[r]=t;return r.length>=o.length?e.slice(o.length):e})).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){const t=EY(e,"#");this.options.pedantic?e=t.trim():t&&!this.rules.other.endingSpaceChar.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:EY(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=EY(t[0],"\n").split("\n"),n="",r="";const o=[];for(;e.length>0;){let t=!1;const s=[];let i;for(i=0;i<e.length;i++)if(this.rules.other.blockquoteStart.test(e[i]))s.push(e[i]),t=!0;else{if(t)break;s.push(e[i])}e=e.slice(i);const a=s.join("\n"),l=a.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${a}`:a,r=r?`${r}\n${l}`:l;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,o,!0),this.lexer.state.top=c,0===e.length)break;const d=o.at(-1);if("code"===(null==d?void 0:d.type))break;if("blockquote"===(null==d?void 0:d.type)){const t=d,s=t.raw+"\n"+e.join("\n"),i=this.blockquote(s);o[o.length-1]=i,n=n.substring(0,n.length-t.raw.length)+i.raw,r=r.substring(0,r.length-t.text.length)+i.text;break}if("list"!==(null==d?void 0:d.type));else{const t=d,s=t.raw+"\n"+e.join("\n"),i=this.list(s);o[o.length-1]=i,n=n.substring(0,n.length-d.raw.length)+i.raw,r=r.substring(0,r.length-t.raw.length)+i.raw,e=s.substring(o.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:o,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,o={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let i=!1;for(;e;){let n=!1,r="",a="";if(!(t=s.exec(e)))break;if(this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],d=!l.trim(),u=0;if(this.options.pedantic?(u=2,a=l.trimStart()):d?u=t[1].length+1:(u=t[2].search(this.rules.other.nonSpaceChar),u=u>4?1:u,a=l.slice(u),u+=t[1].length),d&&this.rules.other.blankLine.test(c)&&(r+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=this.rules.other.nextBulletRegex(u),n=this.rules.other.hrRegex(u),o=this.rules.other.fencesBeginRegex(u),s=this.rules.other.headingBeginRegex(u),i=this.rules.other.htmlBeginRegex(u);for(;e;){const h=e.split("\n",1)[0];let f;if(c=h,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),f=c):f=c.replace(this.rules.other.tabCharGlobal,"    "),o.test(c))break;if(s.test(c))break;if(i.test(c))break;if(t.test(c))break;if(n.test(c))break;if(f.search(this.rules.other.nonSpaceChar)>=u||!c.trim())a+="\n"+f.slice(u);else{if(d)break;if(l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(o.test(l))break;if(s.test(l))break;if(n.test(l))break;a+="\n"+c}d||c.trim()||(d=!0),r+=h+"\n",e=e.substring(h.length+1),l=f.slice(u)}}o.loose||(i?o.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(i=!0));let h,f=null;this.options.gfm&&(f=this.rules.other.listIsTask.exec(a),f&&(h="[ ] "!==f[0],a=a.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:r,task:!!f,checked:h,loose:!1,text:a,tokens:[]}),o.raw+=r}const a=o.items.at(-1);if(!a)return;a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd(),o.raw=o.raw.trimEnd();for(let e=0;e<o.items.length;e++)if(this.lexer.state.top=!1,o.items[e].tokens=this.lexer.blockTokens(o.items[e].text,[]),!o.loose){const t=o.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>this.rules.other.anyLine.test(e.raw)));o.loose=n}if(o.loose)for(let e=0;e<o.items.length;e++)o.items[e].loose=!0;return o}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){var t;const n=this.rules.block.table.exec(e);if(!n)return;if(!this.rules.other.tableDelimiter.test(n[2]))return;const r=CY(n[1]),o=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(null==(t=n[3])?void 0:t.trim())?n[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===o.length){for(const e of o)this.rules.other.tableAlignRight.test(e)?i.align.push("right"):this.rules.other.tableAlignCenter.test(e)?i.align.push("center"):this.rules.other.tableAlignLeft.test(e)?i.align.push("left"):i.align.push(null);for(let e=0;e<r.length;e++)i.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:i.align[e]});for(const e of s)i.rows.push(CY(e,i.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:i.align[t]}))));return i}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;const t=EY(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),NY(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return NY(n,e,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r)return;if(r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...r[0]].length-1;let o,s,i=n,a=0;const l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(s=[...o].length,r[3]||r[4]){i+=s;continue}if((r[5]||r[6])&&n%3&&!((n+s)%3)){a+=s;continue}if(i-=s,i>0)continue;s=Math.min(s,s+i+a);const t=[...r[0]][0].length,l=e.slice(0,n+r.index+t+s);if(Math.min(n,s)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=t[1],n="mailto:"+e):(e=t[1],n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){var t;let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=n[0],r="mailto:"+e;else{let o;do{o=n[0],n[0]=(null==(t=this.rules.inline._backpedal.exec(n[0]))?void 0:t[0])??""}while(o!==n[0]);e=n[0],r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}}class _Y{constructor(e){s(this,"tokens"),s(this,"options"),s(this,"state"),s(this,"tokenizer"),s(this,"inlineQueue"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Eq,this.options.tokenizer=this.options.tokenizer||new jY,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Iq,block:bY.normal,inline:xY.normal};this.options.pedantic?(t.block=bY.pedantic,t.inline=xY.pedantic):this.options.gfm&&(t.block=bY.gfm,this.options.breaks?t.inline=xY.breaks:t.inline=xY.gfm),this.tokenizer.rules=t}static get rules(){return{block:bY,inline:xY}}static lex(e,t){return new _Y(t).lex(e)}static lexInline(e,t){return new _Y(t).inlineTokens(e)}lex(e){e=e.replace(Iq.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var r,o,s;for(this.options.pedantic&&(e=e.replace(Iq.tabCharGlobal,"    ").replace(Iq.spaceLine,""));e;){let i;if(null==(o=null==(r=this.options.extensions)?void 0:r.block)?void 0:o.some((n=>!!(i=n.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0))))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);const n=t.at(-1);1===i.raw.length&&void 0!==n?n.raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);const n=t.at(-1);"paragraph"===(null==n?void 0:n.type)||"text"===(null==n?void 0:n.type)?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.at(-1).src=n.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);const n=t.at(-1);"paragraph"===(null==n?void 0:n.type)||"text"===(null==n?void 0:n.type)?(n.raw+="\n"+i.raw,n.text+="\n"+i.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let a=e;if(null==(s=this.options.extensions)?void 0:s.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(a=e.substring(0,t+1))}if(this.state.top&&(i=this.tokenizer.paragraph(a))){const r=t.at(-1);n&&"paragraph"===(null==r?void 0:r.type)?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(i),n=a.length!==e.length,e=e.substring(i.raw.length)}else if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);const n=t.at(-1);"text"===(null==n?void 0:n.type)?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(i)}else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var n,r,o;let s=e,i=null;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(s));)e.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.anyPunctuation.exec(s));)s=s.slice(0,i.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let a=!1,l="";for(;e;){let i;if(a||(l=""),a=!1,null==(r=null==(n=this.options.extensions)?void 0:n.inline)?void 0:r.some((n=>!!(i=n.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0))))continue;if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length);const n=t.at(-1);"text"===i.type&&"text"===(null==n?void 0:n.type)?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}let c=e;if(null==(o=this.options.extensions)?void 0:o.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(c=e.substring(0,t+1))}if(i=this.tokenizer.inlineText(c)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),a=!0;const n=t.at(-1);"text"===(null==n?void 0:n.type)?(n.raw+=i.raw,n.text+=i.text):t.push(i)}else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}}class IY{constructor(e){s(this,"options"),s(this,"parser"),this.options=e||Eq}space(e){return""}code({text:e,lang:t,escaped:n}){var r;const o=null==(r=(t||"").match(Iq.notSpaceStart))?void 0:r[0],s=e.replace(Iq.endingNewline,"")+"\n";return o?'<pre><code class="language-'+kY(o)+'">'+(n?s:kY(s,!0))+"</code></pre>\n":"<pre><code>"+(n?s:kY(s,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,n=e.start;let r="";for(let s=0;s<e.items.length;s++){const t=e.items[s];r+=this.listitem(t)}const o=t?"ol":"ul";return"<"+o+(t&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+o+">\n"}listitem(e){var t;let n="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===(null==(t=e.tokens[0])?void 0:t.type)?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+kY(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):n+=r+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let r="";for(let o=0;o<e.rows.length;o++){const t=e.rows[o];n="";for(let e=0;e<t.length;e++)n+=this.tablecell(t[e]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${kY(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const r=this.parser.parseInline(n),o=SY(e);if(null===o)return r;let s='<a href="'+(e=o)+'"';return t&&(s+=' title="'+kY(t)+'"'),s+=">"+r+"</a>",s}image({href:e,title:t,text:n}){const r=SY(e);if(null===r)return kY(n);let o=`<img src="${e=r}" alt="${n}"`;return t&&(o+=` title="${kY(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:kY(e.text)}}class AY{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class TY{constructor(e){s(this,"options"),s(this,"renderer"),s(this,"textRenderer"),this.options=e||Eq,this.options.renderer=this.options.renderer||new IY,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new AY}static parse(e,t){return new TY(t).parse(e)}static parseInline(e,t){return new TY(t).parseInline(e)}parse(e,t=!0){var n,r;let o="";for(let s=0;s<e.length;s++){const i=e[s];if(null==(r=null==(n=this.options.extensions)?void 0:n.renderers)?void 0:r[i.type]){const e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){o+=t||"";continue}}const a=i;switch(a.type){case"space":o+=this.renderer.space(a);continue;case"hr":o+=this.renderer.hr(a);continue;case"heading":o+=this.renderer.heading(a);continue;case"code":o+=this.renderer.code(a);continue;case"table":o+=this.renderer.table(a);continue;case"blockquote":o+=this.renderer.blockquote(a);continue;case"list":o+=this.renderer.list(a);continue;case"html":o+=this.renderer.html(a);continue;case"paragraph":o+=this.renderer.paragraph(a);continue;case"text":{let n=a,r=this.renderer.text(n);for(;s+1<e.length&&"text"===e[s+1].type;)n=e[++s],r+="\n"+this.renderer.text(n);o+=t?this.renderer.paragraph({type:"paragraph",raw:r,text:r,tokens:[{type:"text",raw:r,text:r,escaped:!0}]}):r;continue}default:{const e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return o}parseInline(e,t=this.renderer){var n,r;let o="";for(let s=0;s<e.length;s++){const i=e[s];if(null==(r=null==(n=this.options.extensions)?void 0:n.renderers)?void 0:r[i.type]){const e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){o+=e||"";continue}}const a=i;switch(a.type){case"escape":case"text":o+=t.text(a);break;case"html":o+=t.html(a);break;case"link":o+=t.link(a);break;case"image":o+=t.image(a);break;case"strong":o+=t.strong(a);break;case"em":o+=t.em(a);break;case"codespan":o+=t.codespan(a);break;case"br":o+=t.br(a);break;case"del":o+=t.del(a);break;default:{const e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return o}}class MY{constructor(e){s(this,"options"),s(this,"block"),this.options=e||Eq}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?_Y.lex:_Y.lexInline}provideParser(){return this.block?TY.parse:TY.parseInline}}s(MY,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));const DY=new class{constructor(...e){s(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),s(this,"options",this.setOptions),s(this,"parse",this.parseMarkdown(!0)),s(this,"parseInline",this.parseMarkdown(!1)),s(this,"Parser",TY),s(this,"Renderer",IY),s(this,"TextRenderer",AY),s(this,"Lexer",_Y),s(this,"Tokenizer",jY),s(this,"Hooks",MY),this.use(...e)}walkTokens(e,t){var n,r;let o=[];for(const s of e)switch(o=o.concat(t.call(this,s)),s.type){case"table":{const e=s;for(const n of e.header)o=o.concat(this.walkTokens(n.tokens,t));for(const n of e.rows)for(const e of n)o=o.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=s;o=o.concat(this.walkTokens(e.items,t));break}default:{const e=s;(null==(r=null==(n=this.defaults.extensions)?void 0:n.childTokens)?void 0:r[e.type])?this.defaults.extensions.childTokens[e.type].forEach((n=>{const r=e[n].flat(1/0);o=o.concat(this.walkTokens(r,t))})):e.tokens&&(o=o.concat(this.walkTokens(e.tokens,t)))}}return o}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new IY(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const r=n,o=e.renderer[r],s=t[r];t[r]=(...e)=>{let n=o.apply(t,e);return!1===n&&(n=s.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new jY(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const r=n,o=e.tokenizer[r],s=t[r];t[r]=(...e)=>{let n=o.apply(t,e);return!1===n&&(n=s.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new MY;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const r=n,o=e.hooks[r],s=t[r];MY.passThroughHooks.has(n)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(o.call(t,e)).then((e=>s.call(t,e)));const n=o.call(t,e);return s.call(t,n)}:t[r]=(...e)=>{let n=o.apply(t,e);return!1===n&&(n=s.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return _Y.lex(e,t??this.defaults)}parser(e,t){return TY.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{const r={...n},o={...this.defaults,...r},s=this.onError(!!o.silent,!!o.async);if(!0===this.defaults.async&&!1===r.async)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==t)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const i=o.hooks?o.hooks.provideLexer():e?_Y.lex:_Y.lexInline,a=o.hooks?o.hooks.provideParser():e?TY.parse:TY.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then((e=>i(e,o))).then((e=>o.hooks?o.hooks.processAllTokens(e):e)).then((e=>o.walkTokens?Promise.all(this.walkTokens(e,o.walkTokens)).then((()=>e)):e)).then((e=>a(e,o))).then((e=>o.hooks?o.hooks.postprocess(e):e)).catch(s);try{o.hooks&&(t=o.hooks.preprocess(t));let e=i(t,o);o.hooks&&(e=o.hooks.processAllTokens(e)),o.walkTokens&&this.walkTokens(e,o.walkTokens);let n=a(e,o);return o.hooks&&(n=o.hooks.postprocess(n)),n}catch(jJ){return s(jJ)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+kY(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function OY(e,t){return DY.parse(e,t)}OY.options=OY.setOptions=function(e){return DY.setOptions(e),OY.defaults=DY.defaults,Nq(OY.defaults),OY},OY.getDefaults=Cq,OY.defaults=Eq,OY.use=function(...e){return DY.use(...e),OY.defaults=DY.defaults,Nq(OY.defaults),OY},OY.walkTokens=function(e,t){return DY.walkTokens(e,t)},OY.parseInline=DY.parseInline,OY.Parser=TY,OY.parser=TY.parse,OY.Renderer=IY,OY.TextRenderer=AY,OY.Lexer=_Y,OY.lexer=_Y.lex,OY.Tokenizer=jY,OY.Hooks=MY,OY.parse=OY,OY.options,OY.setOptions,OY.use,OY.walkTokens,OY.parseInline,TY.parse,_Y.lex;const RY=[Cn.lineWrapping],PY=new Set(["python","markdown","sql","json","yaml","toml","shell","javascript","typescript","jsx","tsx","css","html"]);const LY=e=>{const t=_.c(26),{code:n,language:r}=e,{theme:o}=Be(),{createNewCell:s}=W(),i=Yu(),a=ue(me),[c,d]=l.useState(n);let u,h,f;t[0]!==n?(u=()=>{d(n)},h=[n],t[0]=n,t[1]=u,t[2]=h):(u=t[1],h=t[2]),l.useEffect(u,h),t[3]!==a||t[4]!==s||t[5]!==r||t[6]!==i||t[7]!==c?(f=()=>{const e=function(e,t){return e?"python"===e?{language:e,code:t}:"sql"===e?{language:"python",code:Uo.fromQuery(t)}:"markdown"===e?{language:"python",code:Ut.fromMarkdown(t)}:"shell"===e||"bash"===e?{language:"python",code:`import subprocess\nsubprocess.run("${t}")`}:{language:"python",code:`_${e} = """\n${t}\n"""`}:{language:"python",code:t}}(r,c);"sql"===r&&Bu(a,s,i),s({code:e.code,before:!1,cellId:i??"__end__"})},t[3]=a,t[4]=s,t[5]=r,t[6]=i,t[7]=c,t[8]=f):f=t[8];const p=f;let m;t[9]!==c?(m=async()=>{await lt(c)},t[9]=c,t[10]=m):m=t[10];const g=m,y="dark"===o?"dark":"light",b=r&&PY.has(r)?r:void 0;let x,v,w,k,S,C;return t[11]!==y||t[12]!==b||t[13]!==c?(x=A.jsx(Ma,{theme:y,language:b,className:"cm border rounded overflow-hidden",extensions:RY,value:c,onChange:d}),t[11]=y,t[12]=b,t[13]=c,t[14]=x):x=t[14],t[15]!==g?(v=A.jsx(zY,{size:"xs",variant:"outline",onClick:g,children:"Copy"}),t[15]=g,t[16]=v):v=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(w=A.jsx(Zc,{className:"ml-2 h-4 w-4"}),t[17]=w):w=t[17],t[18]!==p?(k=A.jsxs(te,{size:"xs",variant:"outline",onClick:p,children:["Add to Notebook",w]}),t[18]=p,t[19]=k):k=t[19],t[20]!==k||t[21]!==v?(S=A.jsxs("div",{className:"flex justify-end mt-2 space-x-2",children:[v,k]}),t[20]=k,t[21]=v,t[22]=S):S=t[22],t[23]!==S||t[24]!==x?(C=A.jsxs("div",{className:"relative",children:[x,S]}),t[23]=S,t[24]=x,t[25]=C):C=t[25],C},zY=e=>{const t=_.c(12);let n,r;t[0]!==e?(({onClick:n,...r}=e),t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);const[o,s]=l.useState(!1);let i,a,c;t[3]!==o?(i=()=>{o&&setTimeout((()=>s(!1)),1e3)},a=[o],t[3]=o,t[4]=i,t[5]=a):(i=t[4],a=t[5]),l.useEffect(i,a),t[6]!==n?(c=e=>{null==n||n(e),s(!0)},t[6]=n,t[7]=c):c=t[7];const d=o?"Copied":"Copy";let u;return t[8]!==r||t[9]!==c||t[10]!==d?(u=A.jsx(te,{...r,onClick:c,children:d}),t[8]=r,t[9]=c,t[10]=d,t[11]=u):u=t[11],u},FY={code:({children:e,className:t})=>{const n=null==t?void 0:t.replace("language-","");return n&&"string"==typeof e?A.jsxs("div",{children:[A.jsx("div",{className:"text-xs text-muted-foreground pl-1",children:n}),A.jsx(LY,{code:e.trim(),language:n})]}):A.jsx("code",{className:t,children:e})}};const BY=l.memo((e=>{const t=_.c(2),{content:n}=e;let r;return t[0]!==n?(r=A.jsx(kq,{components:FY,className:"prose dark:prose-invert max-w-none prose-pre:pl-0",children:n}),t[0]=n,t[1]=r):r=t[1],r}),((e,t)=>e.content===t.content));BY.displayName="MemoizedMarkdownBlock";const UY=l.memo((({content:e})=>{const t=l.useMemo((()=>{return t=e,OY.lexer(t).map((e=>e.raw));var t}),[e]);return A.jsx(A.Fragment,{children:t.map(((e,t)=>A.jsx(BY,{content:e},`markdown-block-${t}`)))})}));UY.displayName="MarkdownRenderer";const $Y=(e,t,n,r)=>t?{...e,chats:e.chats.map((e=>e.id===t?{...e,messages:[...e.messages,{role:n,content:r,timestamp:Date.now()}],updatedAt:Date.now()}:e))}:e,VY=e=>{var t;const n=_.c(29),{onNewChat:r,activeChatId:o,setActiveChat:s,chats:i,setMessages:a}=e,l=ue(Bi),{handleClick:c}=Kl(),d=(null==(t=null==l?void 0:l.open_ai)?void 0:t.model)||"gpt-4-turbo";let u,h,f,p,m,g,y,b,x,v;if(n[0]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsx(Bo,{className:"h-4 w-4"}),n[0]=u):u=n[0],n[1]!==r?(h=A.jsx(ht,{content:"New chat",children:A.jsx(te,{variant:"text",size:"icon",onClick:r,children:u})}),n[1]=r,n[2]=h):h=n[2],n[3]!==c?(f=()=>c("ai"),n[3]=c,n[4]=f):f=n[4],n[5]!==d||n[6]!==f?(p=A.jsx(te,{variant:"text",size:"xs",className:"hover:bg-foreground/10 py-2",onClick:f,children:d}),n[5]=d,n[6]=f,n[7]=p):p=n[7],n[8]!==h||n[9]!==p?(m=A.jsxs("div",{className:"flex items-center gap-2",children:[h,p]}),n[8]=h,n[9]=p,n[10]=m):m=n[10],n[11]===Symbol.for("react.memo_cache_sentinel")?(g=A.jsx(ht,{content:"Previous chats",children:A.jsx(bs,{asChild:!0,children:A.jsx(te,{variant:"text",size:"icon",children:A.jsx(kl,{className:"h-4 w-4"})})})}),n[11]=g):g=n[11],n[12]!==i.length?(y=0===i.length&&A.jsx(KM,{title:"No chats yet",description:"Start a new chat to get started",icon:A.jsx(kt,{})}),n[12]=i.length,n[13]=y):y=n[13],n[14]!==o||n[15]!==i||n[16]!==s||n[17]!==a){let e;n[19]!==o||n[20]!==s||n[21]!==a?(e=e=>A.jsxs("div",{className:Ln("p-3 rounded-md cursor-pointer hover:bg-accent",e.id===o&&"bg-accent"),onClick:()=>{s(e.id),a(e.messages.map(YY))},children:[A.jsx("div",{className:"font-medium",children:e.title}),A.jsx("div",{className:"text-sm text-muted-foreground",children:Sl(e.updatedAt)})]},e.id),n[19]=o,n[20]=s,n[21]=a,n[22]=e):e=n[22],b=i.map(e),n[14]=o,n[15]=i,n[16]=s,n[17]=a,n[18]=b}else b=n[18];return n[23]!==y||n[24]!==b?(x=A.jsxs(Vn,{children:[g,A.jsx(Bn,{className:"w-[520px] p-0",align:"start",side:"right",children:A.jsx(Z$,{className:"h-[500px] p-4",children:A.jsxs("div",{className:"space-y-4",children:[y,b]})})})]}),n[23]=y,n[24]=b,n[25]=x):x=n[25],n[26]!==m||n[27]!==x?(v=A.jsxs("div",{className:"flex border-b px-2 py-1 justify-between flex-shrink-0 items-center",children:[m,x]}),n[26]=m,n[27]=x,n[28]=v):v=n[28],v},HY=l.memo((e=>{const t=_.c(14),{message:n,index:r,theme:o,onEdit:s,setChatState:i,chatState:a}=e,l="user"===n.role?"justify-end":"justify-start";let c,d,u;return t[0]!==l?(c=Ln("flex group relative",l),t[0]=l,t[1]=c):c=t[1],t[2]!==a||t[3]!==r||t[4]!==n.content||t[5]!==n.id||t[6]!==n.role||t[7]!==s||t[8]!==i||t[9]!==o?(d="user"===n.role?A.jsx("div",{className:"w-[95%] bg-background border p-1 rounded-sm",children:A.jsx(Ps,{value:n.content,theme:o,placeholder:"Type your message...",onChange:JY,onSubmit:(e,t)=>{t.trim()&&(s(r,t),a.activeChatId&&i((e=>$Y(e,a.activeChatId,"user",t))))},onClose:XY},n.id)}):A.jsxs("div",{className:"w-[95%]",children:[A.jsx("div",{className:"absolute right-1 top-1 opacity-0 group-hover:opacity-100 transition-opacity",children:A.jsx(sl,{className:"h-3 w-3",value:n.content})}),A.jsx(UY,{content:n.content})]}),t[2]=a,t[3]=r,t[4]=n.content,t[5]=n.id,t[6]=n.role,t[7]=s,t[8]=i,t[9]=o,t[10]=d):d=t[10],t[11]!==c||t[12]!==d?(u=A.jsx("div",{className:c,children:d}),t[11]=c,t[12]=d,t[13]=u):u=t[13],u}));HY.displayName="ChatMessage";const WY=l.memo((e=>{var t,n;const r=_.c(8),{input:o,setInput:s,onSubmit:i,theme:a,inputRef:l}=e;let c,d;return r[0]!==(null==(t=l.current)?void 0:t.editor)?(c=()=>{var e,t;return null==(t=null==(e=l.current)?void 0:e.editor)?void 0:t.blur()},r[0]=null==(n=l.current)?void 0:n.editor,r[1]=c):c=r[1],r[2]!==o||r[3]!==i||r[4]!==s||r[5]!==c||r[6]!==a?(d=A.jsx("div",{className:"px-2 py-3 border-t relative flex-shrink-0 min-h-[80px]",children:A.jsx(Ps,{value:o,onChange:s,onSubmit:i,onClose:c,theme:a,placeholder:"Type your message..."})}),r[2]=o,r[3]=i,r[4]=s,r[5]=c,r[6]=a,r[7]=d):d=r[7],d}));WY.displayName="ChatInput";const GY=()=>{const e=_.c(6),t=ue(pe),{handleClick:n}=Kl();if(!t){let t,r,o;return e[0]!==n?(t=A.jsx(te,{variant:"outline",size:"sm",onClick:()=>n("ai"),children:"Edit AI settings"}),e[0]=n,e[1]=t):t=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx(kt,{}),e[2]=r):r=e[2],e[3]!==t?(o=A.jsx(KM,{title:"Chat with AI",description:"AI is currently disabled. Add your API key to enable.",action:t,icon:r}),e[3]=t,e[4]=o):o=e[4],o}let r;return e[5]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx(qY,{}),e[5]=r):r=e[5],r},qY=()=>{var e;const t=_.c(78),[n,r]=He(Ru),[o,s]=He(Pu),[i,a]=l.useState(""),c=l.useRef(null),d=l.useRef(null),u=l.useRef(null),{theme:h}=Be();let f,p,m;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=Ar("api/ai/chat").toString(),p=Tr.headers(),t[0]=f,t[1]=p):(f=t[0],p=t[1]),t[2]!==n.activeChatId||t[3]!==r?(m={keepLastMessageOnError:!0,experimental_throttle:100,api:f,headers:p,experimental_prepareRequestBody:ZY,streamProtocol:"text",onFinish:e=>{n.activeChatId?r((t=>$Y(t,t.activeChatId,"assistant",e.content))):E.warn("No active chat")},onError:QY,onResponse:eJ},t[2]=n.activeChatId,t[3]=r,t[4]=m):m=t[4];const{messages:g,input:y,setInput:b,setMessages:x,append:v,handleSubmit:w,error:k,isLoading:S,reload:C}=vl(m);let N;t[5]!==g?(N=null==(e=g.at(-1))?void 0:e.content,t[5]=g,t[6]=N):N=t[6];const j=N;let I,T,M;t[7]!==S?(I=()=>{var e,t;if(S){const n=null==(e=u.current)?void 0:e.parentElement;if(!n)return;n.scrollHeight-n.scrollTop-n.clientHeight<150&&(null==(t=u.current)||t.scrollIntoView({behavior:"smooth"}))}},t[7]=S,t[8]=I):I=t[8],t[9]!==S||t[10]!==j||t[11]!==g?(T=[g,S,j],t[9]=S,t[10]=j,t[11]=g,t[12]=T):T=t[12],l.useEffect(I,T),t[13]!==v||t[14]!==r||t[15]!==b||t[16]!==x?(M=e=>{const t={id:wl(),title:`${e.slice(0,30)}...`,messages:[{role:"user",content:e,timestamp:Date.now()}],createdAt:Date.now(),updatedAt:Date.now()};r((e=>({chats:[...e.chats,t],activeChatId:t.id}))),x([]),b(""),v({role:"user",content:e})},t[13]=v,t[14]=r,t[15]=b,t[16]=x,t[17]=M):M=t[17];const D=M;let O;t[18]!==s||t[19]!==b||t[20]!==x?(O=()=>{s(null),x([]),b(""),a("")},t[18]=s,t[19]=b,t[20]=x,t[21]=O):O=t[21];const R=O;let P;t[22]!==v||t[23]!==x?(P=(e,t)=>{x((t=>t.slice(0,e))),v({role:"user",content:t})},t[22]=v,t[23]=x,t[24]=P):P=t[24];const L=P;let z;t[25]!==n.activeChatId||t[26]!==w||t[27]!==r?(z=(e,t)=>{t.trim()&&(w(e),n.activeChatId&&r((e=>$Y(e,n.activeChatId,"user",t))))},t[25]=n.activeChatId,t[26]=w,t[27]=r,t[28]=z):z=t[28];const F=z;let B;t[29]!==C?(B=()=>{C()},t[29]=C,t[30]=B):B=t[30];const U=B;let $;t[31]!==D||t[32]!==i?($=()=>{i.trim()&&D(i.trim())},t[31]=D,t[32]=i,t[33]=$):$=t[33];const V=$;let H;t[34]===Symbol.for("react.memo_cache_sentinel")?(H=()=>{var e,t;return null==(t=null==(e=c.current)?void 0:e.editor)?void 0:t.blur()},t[34]=H):H=t[34];const W=H,G=null==o?void 0:o.id;let q,Y,J,X,K,Z,Q,ee,ne;if(t[35]!==n.chats||t[36]!==R||t[37]!==s||t[38]!==x||t[39]!==G?(q=A.jsx(ai,{children:A.jsx(VY,{onNewChat:R,activeChatId:G,setActiveChat:s,chats:n.chats,setMessages:x})}),t[35]=n.chats,t[36]=R,t[37]=s,t[38]=x,t[39]=G,t[40]=q):q=t[40],t[41]!==V||t[42]!==g||t[43]!==i||t[44]!==h?(Y=(!g||0===g.length)&&A.jsx("div",{className:"flex rounded-md border px-1 bg-background",children:A.jsx(Ps,{value:i,placeholder:"Ask anything, @ to include context about tables or dataframes",theme:h,onClose:W,onChange:a,onSubmit:V},"new-thread-input")}),t[41]=V,t[42]=g,t[43]=i,t[44]=h,t[45]=Y):Y=t[45],t[46]!==n||t[47]!==L||t[48]!==g||t[49]!==r||t[50]!==h){let e;t[52]!==n||t[53]!==L||t[54]!==r||t[55]!==h?(e=(e,t)=>A.jsx(HY,{message:e,index:t,theme:h,onEdit:L,setChatState:r,chatState:n},t),t[52]=n,t[53]=L,t[54]=r,t[55]=h,t[56]=e):e=t[56],J=g.map(e),t[46]=n,t[47]=L,t[48]=g,t[49]=r,t[50]=h,t[51]=J}else J=t[51];return t[57]!==S?(X=S&&A.jsx("div",{className:"flex justify-center py-4",children:A.jsx(zs,{className:"h-4 w-4 animate-spin"})}),t[57]=S,t[58]=X):X=t[58],t[59]!==k||t[60]!==U?(K=k&&A.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[A.jsx(ja,{error:k}),A.jsx(te,{variant:"outline",size:"sm",onClick:U,children:"Retry"})]}),t[59]=k,t[60]=U,t[61]=K):K=t[61],t[62]===Symbol.for("react.memo_cache_sentinel")?(Z=A.jsx("div",{ref:u}),t[62]=Z):Z=t[62],t[63]!==Y||t[64]!==J||t[65]!==X||t[66]!==K?(Q=A.jsxs("div",{className:"flex-1 px-3 bg-[var(--slate-1)] gap-4 py-3 flex flex-col overflow-y-auto",children:[Y,J,X,K,Z]}),t[63]=Y,t[64]=J,t[65]=X,t[66]=K,t[67]=Q):Q=t[67],t[68]!==F||t[69]!==y||t[70]!==g||t[71]!==b||t[72]!==h?(ee=g&&g.length>0&&A.jsx(WY,{input:y,setInput:b,onSubmit:F,theme:h,inputRef:d}),t[68]=F,t[69]=y,t[70]=g,t[71]=b,t[72]=h,t[73]=ee):ee=t[73],t[74]!==q||t[75]!==Q||t[76]!==ee?(ne=A.jsxs("div",{className:"flex flex-col h-[calc(100%-53px)]",children:[q,Q,ee]}),t[74]=q,t[75]=Q,t[76]=ee,t[77]=ne):ne=t[77],ne};function YY(e){const{role:t,content:n,timestamp:r}=e;return{role:t,content:n,id:r.toString()}}function JY(){}function XY(){}function KY(e){return e.content}function ZY(e){return{...e,...Ls(e.messages.map(KY).join("\n")),includeOtherCode:xr("")}}function QY(e){E.error("An error occurred:",e)}function eJ(e){E.debug("Received HTTP response from server:",e)}const tJ="hoveredCellId",nJ="cellHover",rJ="cellNum",oJ="startTimestamp",sJ="endTimestamp";const iJ=Q(new Map),aJ=()=>{const e=_.c(28),{runIds:t,runMap:n}=ue(Lc),r=ue(iJ),{clearRuns:o}=zc(),{theme:s}=Be(),[i,a]=l.useState("above");let c;e[0]!==i?(c=()=>{a("above"===i?"sideBySide":"above")},e[0]=i,e[1]=c):c=e[1];const d=c;if(0===t.length){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(KM,{title:"No traces",description:A.jsx("span",{children:"Cells that have ran will appear here."}),icon:A.jsx(Il,{})}),e[2]=t):t=e[2],t}let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=A.jsx("label",{htmlFor:"chartPosition",className:"text-xs",children:"Inline chart"}),e[3]=u):u=e[3];const h="sideBySide"===i;let f,p,m,g,y,b;if(e[4]!==h||e[5]!==d?(f=A.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[u,A.jsx("input",{type:"checkbox",name:"chartPosition",id:"chartPosition",onClick:d,defaultChecked:h,className:"h-3 cursor-pointer"})]}),e[4]=h,e[5]=d,e[6]=f):f=e[6],e[7]!==o?(p=A.jsx(UB,{dataTestId:"clear-traces-button",onClick:o}),e[7]=o,e[8]=p):p=e[8],e[9]!==f||e[10]!==p?(m=A.jsxs("div",{className:"flex flex-row justify-end gap-3",children:[f,p]}),e[9]=f,e[10]=p,e[11]=m):m=e[11],e[12]!==i||e[13]!==r||e[14]!==t||e[15]!==n||e[16]!==s){let o;e[18]!==i||e[19]!==r||e[20]!==n||e[21]!==s?(o=(e,t)=>{const o=n.get(e);if(o)return A.jsx(dJ,{run:o,isExpanded:r.get(o.runId),isMostRecentRun:0===t,chartPosition:i,theme:s},o.runId)},e[18]=i,e[19]=r,e[20]=n,e[21]=s,e[22]=o):o=e[22],g=t.map(o),e[12]=i,e[13]=r,e[14]=t,e[15]=n,e[16]=s,e[17]=g}else g=e[17];return e[23]!==g?(y=A.jsx("div",{className:"flex flex-col gap-3",children:g}),e[23]=g,e[24]=y):y=e[24],e[25]!==m||e[26]!==y?(b=A.jsxs("div",{className:"py-1 px-2 overflow-y-scroll",children:[m,y]}),e[25]=m,e[26]=y,e[27]=b):b=e[27],b},lJ=m.lazy((()=>Xa((()=>import("./index-D0UmwqSE.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then((e=>({default:e.Vega}))))),cJ=e=>{const t=_.c(10),{ref:n,width:r}=YB(),o=void 0===r?300:r,s="dark"===e.theme?"dark":void 0,i=o-50;let a,l;return t[0]!==e.height||t[1]!==e.signalListeners||t[2]!==e.vegaSpec||t[3]!==s||t[4]!==i?(a=A.jsx(lJ,{spec:e.vegaSpec,theme:s,width:i,height:e.height,signalListeners:e.signalListeners,actions:!1}),t[0]=e.height,t[1]=e.signalListeners,t[2]=e.vegaSpec,t[3]=s,t[4]=i,t[5]=a):a=t[5],t[6]!==e.className||t[7]!==n||t[8]!==a?(l=A.jsx("div",{className:e.className,ref:n,children:a}),t[6]=e.className,t[7]=n,t[8]=a,t[9]=l):l=t[9],l},dJ=({run:e,isMostRecentRun:t,chartPosition:n,isExpanded:r,theme:o})=>{const s=fe(iJ),i=(r=r??t)?Ie:Te,a=A.jsx(i,{height:16,className:"inline"}),l=A.jsxs("span",{className:"text-sm cursor-pointer",onClick:()=>{s((t=>{const n=new Map(t);return n.set(e.runId,!r),n}))},children:["Run - ",Ca(e.runStartTime),a]});return r?A.jsx(uJ,{run:e,chartPosition:n,theme:o,title:l},e.runId):A.jsx("div",{className:"flex flex-col",children:A.jsx("pre",{className:"font-mono font-semibold",children:l})},e.runId)},uJ=e=>{const t=_.c(32),{run:n,chartPosition:r,theme:o,title:s}=e,[i,a]=l.useState();let c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c={[nJ]:(e,t)=>{var n;const r=null==(n=t.cell)?void 0:n[0];a(r??null)}},t[0]=c):c=t[0];const d=c,u=Qi();let h,f;if(t[1]!==u.inOrderIds||t[2]!==r||t[3]!==n.cellRuns||t[4]!==n.runId||t[5]!==o){const e=[...n.cellRuns.values()].map((e=>{const t=e.elapsedTime??0;return{cell:e.cellId,cellNum:u.inOrderIds.indexOf(e.cellId),startTimestamp:mJ(e.startTime),endTimestamp:mJ(e.startTime+t),elapsedTime:nv(1e3*t),status:e.status}}));h=`hiddenInputElement-${n.runId}`,f=Wc(function(e,t,n,r){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",background:"dark"===r?"black":void 0,mark:{type:"bar",cornerRadius:2},params:[{name:tJ,bind:{element:`#${t}`}},{name:nJ,select:{type:"point",on:"mouseover",fields:["cell"],clear:"mouseout"}}],height:{step:23},encoding:{y:{field:rJ,scale:{paddingInner:.2},sort:{field:rJ},title:"cell",axis:"sideBySide"===n?null:void 0},x:{field:oJ,type:"temporal",axis:{orient:"top",title:null}},x2:{field:sJ,type:"temporal"},tooltip:[{field:oJ,type:"temporal",timeUnit:"dayhoursminutesseconds",title:"Start"},{field:sJ,type:"temporal",timeUnit:"dayhoursminutesseconds",title:"End"}],size:{value:{expr:`${tJ} == toString(datum.cell) ? 19.5 : 18`}},color:{field:"status",scale:{domain:["success","error"],range:["#37BE5F","red"]},legend:null}},data:{values:e},config:{view:{stroke:"transparent"}}}}(e,h,r,o)),t[1]=u.inOrderIds,t[2]=r,t[3]=n.cellRuns,t[4]=n.runId,t[5]=o,t[6]=h,t[7]=f}else h=t[6],f=t[7];const p=f.spec;let m;t[8]!==h||t[9]!==i||t[10]!==n?(m=A.jsx(hJ,{run:n,hoveredCellId:i,hiddenInputElementId:h}),t[8]=h,t[9]=i,t[10]=n,t[11]=m):m=t[11];const g=m;if("above"===r){let e,r,i;return t[12]!==o||t[13]!==p?(e=A.jsx(cJ,{vegaSpec:p,height:120,signalListeners:d,theme:o}),t[12]=o,t[13]=p,t[14]=e):e=t[14],t[15]!==e||t[16]!==s||t[17]!==g?(r=A.jsxs("pre",{className:"font-mono font-semibold",children:[s,e,g]}),t[15]=e,t[16]=s,t[17]=g,t[18]=r):r=t[18],t[19]!==n.runId||t[20]!==r?(i=A.jsx("div",{className:"flex flex-col",children:r},n.runId),t[19]=n.runId,t[20]=r,t[21]=i):i=t[21],i}let y,b,x;return t[22]!==s||t[23]!==g?(y=A.jsxs("pre",{className:"font-mono font-semibold",children:[s,g]}),t[22]=s,t[23]=g,t[24]=y):y=t[24],t[25]!==o||t[26]!==p?(b=A.jsx(cJ,{className:"-mt-0.5 flex-1",vegaSpec:p,height:100,signalListeners:d,theme:o}),t[25]=o,t[26]=p,t[27]=b):b=t[27],t[28]!==n.runId||t[29]!==y||t[30]!==b?(x=A.jsxs("div",{className:"flex flex-row",children:[y,b]},n.runId),t[28]=n.runId,t[29]=y,t[30]=b,t[31]=x):x=t[31],x},hJ=e=>{const t=_.c(14),{run:n,hoveredCellId:r,hiddenInputElementId:o}=e,s=l.useRef(null);let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{s.current&&(s.current.value=String(e),s.current.dispatchEvent(new Event("input",{bubbles:!0})))},t[0]=i):i=t[0];const a=i,c=r||"";let d,u,h,f,p;return t[1]!==o||t[2]!==c?(d=A.jsx("input",{type:"text",id:o,defaultValue:c,hidden:!0,ref:s}),t[1]=o,t[2]=c,t[3]=d):d=t[3],t[4]!==n.cellRuns?(u=n.cellRuns.values(),t[4]=n.cellRuns,t[5]=u):u=t[5],t[6]!==u?(h=[...u],t[6]=u,t[7]=h):h=t[7],t[8]!==r||t[9]!==h?(f=h.map((e=>A.jsx(pJ,{cellRun:e,hovered:e.cellId===r,dispatchHoverEvent:a},e.cellId))),t[8]=r,t[9]=h,t[10]=f):f=t[10],t[11]!==d||t[12]!==f?(p=A.jsxs("div",{className:"text-xs mt-0.5 ml-3 flex flex-col gap-0.5",children:[d,f]}),t[11]=d,t[12]=f,t[13]=p):p=t[13],p},fJ={success:A.jsx(nd,{color:"green",size:14}),running:A.jsx(sc,{color:"var(--blue-10)",size:14}),error:A.jsx(Ce,{color:"red",size:14}),queued:A.jsx(rd,{color:"grey",size:14})},pJ=e=>{const t=_.c(39),{cellRun:n,hovered:r,dispatchHoverEvent:o}=e;let s;t[0]!==n.elapsedTime?(s=n.elapsedTime?nv(1e3*n.elapsedTime):"-",t[0]=n.elapsedTime,t[1]=s):s=t[1];const i=s;let a;t[2]!==n.elapsedTime||t[3]!==i?(a=n.elapsedTime?A.jsxs("span",{children:["This cell took ",A.jsx(ev,{elapsedTime:i})," to run"]}):A.jsx("span",{children:"This cell has not been run"}),t[2]=n.elapsedTime,t[3]=i,t[4]=a):a=t[4];const l=a;let c;t[5]!==n.cellId||t[6]!==o?(c=()=>{o(n.cellId)},t[5]=n.cellId,t[6]=o,t[7]=c):c=t[7];const d=c;let u;t[8]!==o?(u=()=>{o(null)},t[8]=o,t[9]=u):u=t[9];const h=u,f=r&&"bg-[var(--gray-3)] opacity-100";let p,m,g,y,b,x,v;t[10]!==f?(p=Ln("flex flex-row gap-2 py-1 px-1 opacity-70 hover:bg-[var(--gray-3)] hover:opacity-100",f),t[10]=f,t[11]=p):p=t[11],t[12]!==n.startTime?(m=Ca(n.startTime),t[12]=n.startTime,t[13]=m):m=t[13],t[14]!==m?(g=A.jsxs("span",{className:"text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:["[",m,"]"]}),t[14]=m,t[15]=g):g=t[15],t[16]!==n.cellId?(y=A.jsxs("span",{className:"text-[var(--gray-10)] w-16",children:["(",A.jsx(ta,{cellId:n.cellId}),")"]}),t[16]=n.cellId,t[17]=y):y=t[17],t[18]!==n.code?(b=A.jsx("span",{className:"w-40 truncate -ml-1",children:n.code}),t[18]=n.code,t[19]=b):b=t[19],t[20]!==i?(x=A.jsx("span",{className:"text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:i}),t[20]=i,t[21]=x):x=t[21],t[22]!==l||t[23]!==x?(v=A.jsx(ht,{content:l,children:x}),t[22]=l,t[23]=x,t[24]=v):v=t[24];const w=fJ[n.status];let k,S,C;return t[25]!==n.status||t[26]!==w?(k=A.jsx(ht,{content:n.status,children:w}),t[25]=n.status,t[26]=w,t[27]=k):k=t[27],t[28]!==v||t[29]!==k?(S=A.jsxs("div",{className:"flex flex-row gap-1 w-16 justify-end -ml-2",children:[v,k]}),t[28]=v,t[29]=k,t[30]=S):S=t[30],t[31]!==d||t[32]!==h||t[33]!==b||t[34]!==S||t[35]!==p||t[36]!==g||t[37]!==y?(C=A.jsxs("div",{className:p,onMouseEnter:d,onMouseLeave:h,children:[g,y,b,S]}),t[31]=d,t[32]=h,t[33]=b,t[34]=S,t[35]=p,t[36]=g,t[37]=y,t[38]=C):C=t[38],C};function mJ(e){try{const t=new Date(1e3*e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${n}-${r}-${o} ${s}:${i}:${a}.${String(t.getMilliseconds()).padStart(3,"0")}`}catch{return""}}const gJ=()=>{const e=_.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=A.jsx(aJ,{}),e[0]=t):t=e[0],t},yJ=m.lazy((()=>Xa((()=>import("./terminal-CTBMmdxh.js")),__vite__mapDeps([14,2,3,15,16]),import.meta.url))),bJ=e=>{const t=_.c(116),{children:n}=e,{isSidebarOpen:r,isTerminalOpen:o,selectedPanel:s}=dh(),{setIsSidebarOpen:i,setIsTerminalOpen:a}=uh(),c=m.useRef(null),d=m.useRef(null);let u,h,f,p,g;t[0]!==r?(u=()=>{if(!c.current)return;const e=c.current.isCollapsed();r&&e&&c.current.expand(),r||e||c.current.collapse(),requestAnimationFrame(vJ)},h=[r],t[0]=r,t[1]=u,t[2]=h):(u=t[1],h=t[2]),l.useEffect(u,h),t[3]!==o?(f=()=>{if(!d.current)return;const e=d.current.isCollapsed();o&&e&&d.current.expand(),o||e||d.current.collapse(),requestAnimationFrame(kJ)},p=[o],t[3]=o,t[4]=f,t[5]=p):(f=t[4],p=t[5]),l.useEffect(f,p),t[6]!==n?(g=A.jsx(mT,{id:"app",className:"relative h-full",children:A.jsx(l.Suspense,{children:n})},"app"),t[6]=n,t[7]=g):g=t[7];const y=g,b=SJ,x=r?"resize-handle":"resize-handle-collapsed";let v,w;t[8]!==x?(v=Ln("border-border no-print z-10",x,"vertical"),t[8]=x,t[9]=v):v=t[9],t[10]!==v?(w=A.jsx(SM,{onDragging:b,className:v}),t[10]=v,t[11]=w):w=t[11];const k=w,S=o?"resize-handle":"resize-handle-collapsed";let C,E;t[12]!==S?(C=Ln("border-border no-print z-20",S,"horizontal"),t[12]=S,t[13]=C):C=t[13],t[14]!==C?(E=A.jsx(SM,{onDragging:b,className:C}),t[14]=C,t[15]=E):E=t[15];const N=E;let j,I,T,M,D,O,R,P,L,z,F,B,U,$,V,H,W,G,q,Y;t[16]!==s?(j=A.jsx("div",{className:"text-sm text-[var(--slate-11)] uppercase tracking-wide font-semibold flex-1",children:s}),t[16]=s,t[17]=j):j=t[17],t[18]!==i?(I=()=>i(!1),t[18]=i,t[19]=I):I=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(T=A.jsx(Tn,{className:"w-4 h-4"}),t[20]=T):T=t[20],t[21]!==I?(M=A.jsx(te,{"data-testid":"close-helper-pane",className:"m-0",size:"xs",variant:"text",onClick:I,children:T}),t[21]=I,t[22]=M):M=t[22],t[23]!==j||t[24]!==M?(D=A.jsxs("div",{className:"p-3 border-b flex justify-between items-center",children:[j,M]}),t[23]=j,t[24]=M,t[25]=D):D=t[25],t[26]!==s?(O="files"===s&&A.jsx(SU,{}),t[26]=s,t[27]=O):O=t[27],t[28]!==s?(R="errors"===s&&A.jsx(ZM,{}),t[28]=s,t[29]=R):R=t[29],t[30]!==s?(P="variables"===s&&A.jsx(BB,{}),t[30]=s,t[31]=P):P=t[31],t[32]!==s?(L="dependencies"===s&&A.jsx(OB,{}),t[32]=s,t[33]=L):L=t[33],t[34]!==s?(z="packages"===s&&A.jsx(d$,{}),t[34]=s,t[35]=z):z=t[35],t[36]!==s?(F="outline"===s&&A.jsx(eD,{}),t[36]=s,t[37]=F):F=t[37],t[38]!==s?(B="datasources"===s&&A.jsx(n$,{}),t[38]=s,t[39]=B):B=t[39],t[40]!==s?(U="documentation"===s&&A.jsx(GB,{}),t[40]=s,t[41]=U):U=t[41],t[42]!==s?($="snippets"===s&&A.jsx(_U,{}),t[42]=s,t[43]=$):$=t[43],t[44]!==s?(V="scratchpad"===s&&A.jsx(c$,{}),t[44]=s,t[45]=V):V=t[45],t[46]!==s?(H="chat"===s&&A.jsx(GY,{}),t[46]=s,t[47]=H):H=t[47],t[48]!==s?(W="logs"===s&&A.jsx($B,{}),t[48]=s,t[49]=W):W=t[49],t[50]!==s?(G="tracing"===s&&A.jsx(gJ,{}),t[50]=s,t[51]=G):G=t[51],t[52]!==O||t[53]!==R||t[54]!==P||t[55]!==L||t[56]!==z||t[57]!==F||t[58]!==B||t[59]!==U||t[60]!==$||t[61]!==V||t[62]!==H||t[63]!==W||t[64]!==G?(q=A.jsxs(Ri,{children:[O,R,P,L,z,F,B,U,$,V,H,W,G]}),t[52]=O,t[53]=R,t[54]=P,t[55]=L,t[56]=z,t[57]=F,t[58]=B,t[59]=U,t[60]=$,t[61]=V,t[62]=H,t[63]=W,t[64]=G,t[65]=q):q=t[65],t[66]!==D||t[67]!==q?(Y=A.jsx($n,{children:A.jsx(l.Suspense,{children:A.jsxs("div",{className:"flex flex-col h-full flex-1 overflow-hidden mr-[-4px]",children:[D,q]})})}),t[66]=D,t[67]=q,t[68]=Y):Y=t[68];const J=Y,X=r&&"border-r border-l border-[var(--slate-7)]";let K,Z,Q,ee,ne,re;t[69]!==X?(K=Ln("dark:bg-[var(--slate-1)] no-print print:hidden hide-on-fullscreen",X),t[69]=X,t[70]=K):K=t[70],t[71]===Symbol.for("react.memo_cache_sentinel")?(Z=(e,t)=>{var n;0===t&&10===e&&(null==(n=c.current)||n.resize(30))},t[71]=Z):Z=t[71],t[72]!==i?(Q=()=>i(!1),ee=()=>i(!0),t[72]=i,t[73]=Q,t[74]=ee):(Q=t[73],ee=t[74]),t[75]!==J||t[76]!==k?(ne=A.jsxs("span",{className:"flex flex-row h-full",children:[J," ",k]}),t[75]=J,t[76]=k,t[77]=ne):ne=t[77],t[78]!==K||t[79]!==Q||t[80]!==ee||t[81]!==ne?(re=A.jsx(mT,{ref:c,id:"helper",collapsedSize:0,collapsible:!0,className:K,minSize:10,defaultSize:0,maxSize:75,onResize:Z,onCollapse:Q,onExpand:ee,children:ne},"helper"),t[78]=K,t[79]=Q,t[80]=ee,t[81]=ne,t[82]=re):re=t[82];const oe=re,se=o&&"border-[var(--slate-7)]";let ie,ae,le,ce,de,ue,he,fe;t[83]!==se?(ie=Ln("dark:bg-[var(--slate-1)] no-print print:hidden hide-on-fullscreen",se),t[83]=se,t[84]=ie):ie=t[84],t[85]===Symbol.for("react.memo_cache_sentinel")?(ae=(e,t)=>{var n;0===t&&10===e&&(null==(n=d.current)||n.resize(30))},t[85]=ae):ae=t[85],t[86]!==a?(le=()=>a(!1),ce=()=>a(!0),t[86]=a,t[87]=le,t[88]=ce):(le=t[87],ce=t[88]),t[89]!==a?(de=()=>a(!1),t[89]=a,t[90]=de):de=t[90],t[91]!==o||t[92]!==de?(ue=A.jsx(yJ,{visible:o,onClose:de}),t[91]=o,t[92]=de,t[93]=ue):ue=t[93],t[94]!==o||t[95]!==ue?(he=A.jsx(r$,{isOpen:o,children:ue}),t[94]=o,t[95]=ue,t[96]=he):he=t[96],t[97]!==ie||t[98]!==le||t[99]!==ce||t[100]!==he||t[101]!==N?(fe=A.jsxs(mT,{ref:d,id:"terminal",collapsedSize:0,collapsible:!0,className:ie,minSize:10,defaultSize:0,maxSize:75,onResize:ae,onCollapse:le,onExpand:ce,children:[N,he]},"terminal"),t[97]=ie,t[98]=le,t[99]=ce,t[100]=he,t[101]=N,t[102]=fe):fe=t[102];const pe=fe;let me,ge,ye,be,xe,ve,we;return t[103]===Symbol.for("react.memo_cache_sentinel")?(me={getItem:e=>XM||(XM??null),setItem(e,t){XM=t||null}},t[103]=me):me=t[103],t[104]===Symbol.for("react.memo_cache_sentinel")?(ge=A.jsx(Ri,{children:A.jsx(HM,{})}),t[104]=ge):ge=t[104],t[105]!==pe?(ye=A.jsx(zM,{capability:"terminal",children:pe}),t[105]=pe,t[106]=ye):ye=t[106],t[107]!==y||t[108]!==ye?(be=A.jsx(mT,{children:A.jsxs(vM,{autoSaveId:"marimo:chrome:v1:l1",direction:"vertical",children:[y,ye]})}),t[107]=y,t[108]=ye,t[109]=be):be=t[109],t[110]!==oe||t[111]!==be?(xe=A.jsxs(vM,{autoSaveId:"marimo:chrome:v1:l2",direction:"horizontal",storage:me,children:[ge,oe,be]}),t[110]=oe,t[111]=be,t[112]=xe):xe=t[112],t[113]===Symbol.for("react.memo_cache_sentinel")?(ve=A.jsx($n,{children:A.jsx(Ri,{children:A.jsx(FM,{})})}),t[113]=ve):ve=t[113],t[114]!==xe?(we=A.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden absolute inset-0 print:relative",children:[xe,ve]}),t[114]=xe,t[115]=we):we=t[115],we};function xJ(){window.dispatchEvent(new Event("resize"))}function vJ(){requestAnimationFrame(xJ)}function wJ(){window.dispatchEvent(new Event("resize"))}function kJ(){requestAnimationFrame(wJ)}function SJ(e){e||window.dispatchEvent(new Event("resize"))}const CJ="false"===new URL(window.location.href).searchParams.get(Us.showChrome),EJ=e=>{const t=_.c(10);if(CJ){let n,r,o;return t[0]!==e?(n=A.jsx(VA,{hideControls:!0,...e}),t[0]=e,t[1]=n):n=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx(Qu,{}),t[2]=r):r=t[2],t[3]!==n?(o=A.jsxs(A.Fragment,{children:[n,r]}),t[3]=n,t[4]=o):o=t[4],o}let n,r,o;return t[5]!==e?(n=A.jsx(VA,{...e}),t[5]=e,t[6]=n):n=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(r=A.jsx(Qu,{}),t[7]=r):r=t[7],t[8]!==n?(o=A.jsxs(bJ,{children:[n,r]}),t[8]=n,t[9]=o):o=t[9],o};export{EJ as default};
